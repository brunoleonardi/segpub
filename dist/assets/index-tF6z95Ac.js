function HT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function jf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function eO(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var rg={exports:{}},Dl={},sg={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nb;function tO(){if(nb)return je;nb=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function m(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,b={};function T(F,X,Pe){this.props=F,this.context=X,this.refs=b,this.updater=Pe||y}T.prototype.isReactComponent={},T.prototype.setState=function(F,X){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,X,"setState")},T.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function P(){}P.prototype=T.prototype;function S(F,X,Pe){this.props=F,this.context=X,this.refs=b,this.updater=Pe||y}var C=S.prototype=new P;C.constructor=S,E(C,T.prototype),C.isPureReactComponent=!0;var I=Array.isArray,O=Object.prototype.hasOwnProperty,D={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function G(F,X,Pe){var Ee,ke={},Ce=null,se=null;if(X!=null)for(Ee in X.ref!==void 0&&(se=X.ref),X.key!==void 0&&(Ce=""+X.key),X)O.call(X,Ee)&&!U.hasOwnProperty(Ee)&&(ke[Ee]=X[Ee]);var pe=arguments.length-2;if(pe===1)ke.children=Pe;else if(1<pe){for(var ue=Array(pe),be=0;be<pe;be++)ue[be]=arguments[be+2];ke.children=ue}if(F&&F.defaultProps)for(Ee in pe=F.defaultProps,pe)ke[Ee]===void 0&&(ke[Ee]=pe[Ee]);return{$$typeof:t,type:F,key:Ce,ref:se,props:ke,_owner:D.current}}function W(F,X){return{$$typeof:t,type:F.type,key:X,ref:F.ref,props:F.props,_owner:F._owner}}function V(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function Q(F){var X={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(Pe){return X[Pe]})}var te=/\/+/g;function ae(F,X){return typeof F=="object"&&F!==null&&F.key!=null?Q(""+F.key):X.toString(36)}function ie(F,X,Pe,Ee,ke){var Ce=typeof F;(Ce==="undefined"||Ce==="boolean")&&(F=null);var se=!1;if(F===null)se=!0;else switch(Ce){case"string":case"number":se=!0;break;case"object":switch(F.$$typeof){case t:case e:se=!0}}if(se)return se=F,ke=ke(se),F=Ee===""?"."+ae(se,0):Ee,I(ke)?(Pe="",F!=null&&(Pe=F.replace(te,"$&/")+"/"),ie(ke,X,Pe,"",function(be){return be})):ke!=null&&(V(ke)&&(ke=W(ke,Pe+(!ke.key||se&&se.key===ke.key?"":(""+ke.key).replace(te,"$&/")+"/")+F)),X.push(ke)),1;if(se=0,Ee=Ee===""?".":Ee+":",I(F))for(var pe=0;pe<F.length;pe++){Ce=F[pe];var ue=Ee+ae(Ce,pe);se+=ie(Ce,X,Pe,ue,ke)}else if(ue=m(F),typeof ue=="function")for(F=ue.call(F),pe=0;!(Ce=F.next()).done;)Ce=Ce.value,ue=Ee+ae(Ce,pe++),se+=ie(Ce,X,Pe,ue,ke);else if(Ce==="object")throw X=String(F),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return se}function ve(F,X,Pe){if(F==null)return F;var Ee=[],ke=0;return ie(F,Ee,"","",function(Ce){return X.call(Pe,Ce,ke++)}),Ee}function le(F){if(F._status===-1){var X=F._result;X=X(),X.then(function(Pe){(F._status===0||F._status===-1)&&(F._status=1,F._result=Pe)},function(Pe){(F._status===0||F._status===-1)&&(F._status=2,F._result=Pe)}),F._status===-1&&(F._status=0,F._result=X)}if(F._status===1)return F._result.default;throw F._result}var ce={current:null},K={transition:null},Y={ReactCurrentDispatcher:ce,ReactCurrentBatchConfig:K,ReactCurrentOwner:D};function Z(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:ve,forEach:function(F,X,Pe){ve(F,function(){X.apply(this,arguments)},Pe)},count:function(F){var X=0;return ve(F,function(){X++}),X},toArray:function(F){return ve(F,function(X){return X})||[]},only:function(F){if(!V(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},je.Component=T,je.Fragment=n,je.Profiler=s,je.PureComponent=S,je.StrictMode=r,je.Suspense=u,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,je.act=Z,je.cloneElement=function(F,X,Pe){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Ee=E({},F.props),ke=F.key,Ce=F.ref,se=F._owner;if(X!=null){if(X.ref!==void 0&&(Ce=X.ref,se=D.current),X.key!==void 0&&(ke=""+X.key),F.type&&F.type.defaultProps)var pe=F.type.defaultProps;for(ue in X)O.call(X,ue)&&!U.hasOwnProperty(ue)&&(Ee[ue]=X[ue]===void 0&&pe!==void 0?pe[ue]:X[ue])}var ue=arguments.length-2;if(ue===1)Ee.children=Pe;else if(1<ue){pe=Array(ue);for(var be=0;be<ue;be++)pe[be]=arguments[be+2];Ee.children=pe}return{$$typeof:t,type:F.type,key:ke,ref:Ce,props:Ee,_owner:se}},je.createContext=function(F){return F={$$typeof:o,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:i,_context:F},F.Consumer=F},je.createElement=G,je.createFactory=function(F){var X=G.bind(null,F);return X.type=F,X},je.createRef=function(){return{current:null}},je.forwardRef=function(F){return{$$typeof:c,render:F}},je.isValidElement=V,je.lazy=function(F){return{$$typeof:h,_payload:{_status:-1,_result:F},_init:le}},je.memo=function(F,X){return{$$typeof:d,type:F,compare:X===void 0?null:X}},je.startTransition=function(F){var X=K.transition;K.transition={};try{F()}finally{K.transition=X}},je.unstable_act=Z,je.useCallback=function(F,X){return ce.current.useCallback(F,X)},je.useContext=function(F){return ce.current.useContext(F)},je.useDebugValue=function(){},je.useDeferredValue=function(F){return ce.current.useDeferredValue(F)},je.useEffect=function(F,X){return ce.current.useEffect(F,X)},je.useId=function(){return ce.current.useId()},je.useImperativeHandle=function(F,X,Pe){return ce.current.useImperativeHandle(F,X,Pe)},je.useInsertionEffect=function(F,X){return ce.current.useInsertionEffect(F,X)},je.useLayoutEffect=function(F,X){return ce.current.useLayoutEffect(F,X)},je.useMemo=function(F,X){return ce.current.useMemo(F,X)},je.useReducer=function(F,X,Pe){return ce.current.useReducer(F,X,Pe)},je.useRef=function(F){return ce.current.useRef(F)},je.useState=function(F){return ce.current.useState(F)},je.useSyncExternalStore=function(F,X,Pe){return ce.current.useSyncExternalStore(F,X,Pe)},je.useTransition=function(){return ce.current.useTransition()},je.version="18.3.1",je}var rb;function Df(){return rb||(rb=1,sg.exports=tO()),sg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sb;function nO(){if(sb)return Dl;sb=1;var t=Df(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(c,u,d){var h,p={},m=null,y=null;d!==void 0&&(m=""+d),u.key!==void 0&&(m=""+u.key),u.ref!==void 0&&(y=u.ref);for(h in u)r.call(u,h)&&!i.hasOwnProperty(h)&&(p[h]=u[h]);if(c&&c.defaultProps)for(h in u=c.defaultProps,u)p[h]===void 0&&(p[h]=u[h]);return{$$typeof:e,type:c,key:m,ref:y,props:p,_owner:s.current}}return Dl.Fragment=n,Dl.jsx=o,Dl.jsxs=o,Dl}var ib;function rO(){return ib||(ib=1,rg.exports=nO()),rg.exports}var x=rO(),_=Df();const Qe=jf(_),V0=HT({__proto__:null,default:Qe},[_]);var vd={},ig={exports:{}},dn={},og={exports:{}},ag={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ob;function sO(){return ob||(ob=1,function(t){function e(K,Y){var Z=K.length;K.push(Y);e:for(;0<Z;){var F=Z-1>>>1,X=K[F];if(0<s(X,Y))K[F]=Y,K[Z]=X,Z=F;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var Y=K[0],Z=K.pop();if(Z!==Y){K[0]=Z;e:for(var F=0,X=K.length,Pe=X>>>1;F<Pe;){var Ee=2*(F+1)-1,ke=K[Ee],Ce=Ee+1,se=K[Ce];if(0>s(ke,Z))Ce<X&&0>s(se,ke)?(K[F]=se,K[Ce]=Z,F=Ce):(K[F]=ke,K[Ee]=Z,F=Ee);else if(Ce<X&&0>s(se,Z))K[F]=se,K[Ce]=Z,F=Ce;else break e}}return Y}function s(K,Y){var Z=K.sortIndex-Y.sortIndex;return Z!==0?Z:K.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],h=1,p=null,m=3,y=!1,E=!1,b=!1,T=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(K){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=K)r(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(d)}}function I(K){if(b=!1,C(K),!E)if(n(u)!==null)E=!0,le(O);else{var Y=n(d);Y!==null&&ce(I,Y.startTime-K)}}function O(K,Y){E=!1,b&&(b=!1,P(G),G=-1),y=!0;var Z=m;try{for(C(Y),p=n(u);p!==null&&(!(p.expirationTime>Y)||K&&!Q());){var F=p.callback;if(typeof F=="function"){p.callback=null,m=p.priorityLevel;var X=F(p.expirationTime<=Y);Y=t.unstable_now(),typeof X=="function"?p.callback=X:p===n(u)&&r(u),C(Y)}else r(u);p=n(u)}if(p!==null)var Pe=!0;else{var Ee=n(d);Ee!==null&&ce(I,Ee.startTime-Y),Pe=!1}return Pe}finally{p=null,m=Z,y=!1}}var D=!1,U=null,G=-1,W=5,V=-1;function Q(){return!(t.unstable_now()-V<W)}function te(){if(U!==null){var K=t.unstable_now();V=K;var Y=!0;try{Y=U(!0,K)}finally{Y?ae():(D=!1,U=null)}}else D=!1}var ae;if(typeof S=="function")ae=function(){S(te)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ve=ie.port2;ie.port1.onmessage=te,ae=function(){ve.postMessage(null)}}else ae=function(){T(te,0)};function le(K){U=K,D||(D=!0,ae())}function ce(K,Y){G=T(function(){K(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){E||y||(E=!0,le(O))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(K){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var Z=m;m=Y;try{return K()}finally{m=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,Y){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Z=m;m=K;try{return Y()}finally{m=Z}},t.unstable_scheduleCallback=function(K,Y,Z){var F=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?F+Z:F):Z=F,K){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Z+X,K={id:h++,callback:Y,priorityLevel:K,startTime:Z,expirationTime:X,sortIndex:-1},Z>F?(K.sortIndex=Z,e(d,K),n(u)===null&&K===n(d)&&(b?(P(G),G=-1):b=!0,ce(I,Z-F))):(K.sortIndex=X,e(u,K),E||y||(E=!0,le(O))),K},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(K){var Y=m;return function(){var Z=m;m=Y;try{return K.apply(this,arguments)}finally{m=Z}}}}(ag)),ag}var ab;function iO(){return ab||(ab=1,og.exports=sO()),og.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lb;function oO(){if(lb)return dn;lb=1;var t=Df(),e=iO();function n(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,f=1;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(a,l){o(a,l),o(a+"Capture",l)}function o(a,l){for(s[a]=l,a=0;a<l.length;a++)r.add(l[a])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function m(a){return u.call(p,a)?!0:u.call(h,a)?!1:d.test(a)?p[a]=!0:(h[a]=!0,!1)}function y(a,l,f,g){if(f!==null&&f.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function E(a,l,f,g){if(l===null||typeof l>"u"||y(a,l,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function b(a,l,f,g,v,w,A){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=v,this.mustUseProperty=f,this.propertyName=a,this.type=l,this.sanitizeURL=w,this.removeEmptyString=A}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){T[a]=new b(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];T[l]=new b(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){T[a]=new b(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){T[a]=new b(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){T[a]=new b(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){T[a]=new b(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){T[a]=new b(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){T[a]=new b(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){T[a]=new b(a,5,!1,a.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function S(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(P,S);T[l]=new b(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(P,S);T[l]=new b(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(P,S);T[l]=new b(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){T[a]=new b(a,1,!1,a.toLowerCase(),null,!1,!1)}),T.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){T[a]=new b(a,1,!1,a.toLowerCase(),null,!0,!0)});function C(a,l,f,g){var v=T.hasOwnProperty(l)?T[l]:null;(v!==null?v.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(E(l,f,v,g)&&(f=null),g||v===null?m(l)&&(f===null?a.removeAttribute(l):a.setAttribute(l,""+f)):v.mustUseProperty?a[v.propertyName]=f===null?v.type===3?!1:"":f:(l=v.attributeName,g=v.attributeNamespace,f===null?a.removeAttribute(l):(v=v.type,f=v===3||v===4&&f===!0?"":""+f,g?a.setAttributeNS(g,l,f):a.setAttribute(l,f))))}var I=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),D=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),Q=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),ve=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),ce=Symbol.for("react.offscreen"),K=Symbol.iterator;function Y(a){return a===null||typeof a!="object"?null:(a=K&&a[K]||a["@@iterator"],typeof a=="function"?a:null)}var Z=Object.assign,F;function X(a){if(F===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);F=l&&l[1]||""}return`
`+F+a}var Pe=!1;function Ee(a,l){if(!a||Pe)return"";Pe=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(q){var g=q}Reflect.construct(a,[],l)}else{try{l.call()}catch(q){g=q}a.call(l.prototype)}else{try{throw Error()}catch(q){g=q}a()}}catch(q){if(q&&g&&typeof q.stack=="string"){for(var v=q.stack.split(`
`),w=g.stack.split(`
`),A=v.length-1,L=w.length-1;1<=A&&0<=L&&v[A]!==w[L];)L--;for(;1<=A&&0<=L;A--,L--)if(v[A]!==w[L]){if(A!==1||L!==1)do if(A--,L--,0>L||v[A]!==w[L]){var j=`
`+v[A].replace(" at new "," at ");return a.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",a.displayName)),j}while(1<=A&&0<=L);break}}}finally{Pe=!1,Error.prepareStackTrace=f}return(a=a?a.displayName||a.name:"")?X(a):""}function ke(a){switch(a.tag){case 5:return X(a.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return a=Ee(a.type,!1),a;case 11:return a=Ee(a.type.render,!1),a;case 1:return a=Ee(a.type,!0),a;default:return""}}function Ce(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case U:return"Fragment";case D:return"Portal";case W:return"Profiler";case G:return"StrictMode";case ae:return"Suspense";case ie:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Q:return(a.displayName||"Context")+".Consumer";case V:return(a._context.displayName||"Context")+".Provider";case te:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ve:return l=a.displayName||null,l!==null?l:Ce(a.type)||"Memo";case le:l=a._payload,a=a._init;try{return Ce(a(l))}catch{}}return null}function se(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(l);case 8:return l===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function pe(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ue(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function be(a){var l=ue(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),g=""+a[l];if(!a.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,w=f.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return v.call(this)},set:function(A){g=""+A,w.call(this,A)}}),Object.defineProperty(a,l,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(A){g=""+A},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function Ne(a){a._valueTracker||(a._valueTracker=be(a))}function De(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var f=l.getValue(),g="";return a&&(g=ue(a)?a.checked?"true":"false":a.value),a=g,a!==f?(l.setValue(a),!0):!1}function st(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function vt(a,l){var f=l.checked;return Z({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??a._wrapperState.initialChecked})}function tn(a,l){var f=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;f=pe(l.value!=null?l.value:f),a._wrapperState={initialChecked:g,initialValue:f,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function wt(a,l){l=l.checked,l!=null&&C(a,"checked",l,!1)}function Lt(a,l){wt(a,l);var f=pe(l.value),g=l.type;if(f!=null)g==="number"?(f===0&&a.value===""||a.value!=f)&&(a.value=""+f):a.value!==""+f&&(a.value=""+f);else if(g==="submit"||g==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?Wn(a,l.type,f):l.hasOwnProperty("defaultValue")&&Wn(a,l.type,pe(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function ui(a,l,f){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,f||l===a.value||(a.value=l),a.defaultValue=l}f=a.name,f!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,f!==""&&(a.name=f)}function Wn(a,l,f){(l!=="number"||st(a.ownerDocument)!==a)&&(f==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+f&&(a.defaultValue=""+f))}var lr=Array.isArray;function bt(a,l,f,g){if(a=a.options,l){l={};for(var v=0;v<f.length;v++)l["$"+f[v]]=!0;for(f=0;f<a.length;f++)v=l.hasOwnProperty("$"+a[f].value),a[f].selected!==v&&(a[f].selected=v),v&&g&&(a[f].defaultSelected=!0)}else{for(f=""+pe(f),l=null,v=0;v<a.length;v++){if(a[v].value===f){a[v].selected=!0,g&&(a[v].defaultSelected=!0);return}l!==null||a[v].disabled||(l=a[v])}l!==null&&(l.selected=!0)}}function Ya(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return Z({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function iu(a,l){var f=l.value;if(f==null){if(f=l.children,l=l.defaultValue,f!=null){if(l!=null)throw Error(n(92));if(lr(f)){if(1<f.length)throw Error(n(93));f=f[0]}l=f}l==null&&(l=""),f=l}a._wrapperState={initialValue:pe(f)}}function ou(a,l){var f=pe(l.value),g=pe(l.defaultValue);f!=null&&(f=""+f,f!==a.value&&(a.value=f),l.defaultValue==null&&a.defaultValue!==f&&(a.defaultValue=f)),g!=null&&(a.defaultValue=""+g)}function au(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function lu(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lo(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?lu(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var di,Xa=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,f,g,v){MSApp.execUnsafeLocalFunction(function(){return a(l,f,g,v)})}:a}(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(di=di||document.createElement("div"),di.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=di.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function ds(a,l){if(l){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=l;return}}a.textContent=l}var cr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Za=["Webkit","ms","Moz","O"];Object.keys(cr).forEach(function(a){Za.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),cr[l]=cr[a]})});function cu(a,l,f){return l==null||typeof l=="boolean"||l===""?"":f||typeof l!="number"||l===0||cr.hasOwnProperty(a)&&cr[a]?(""+l).trim():l+"px"}function uu(a,l){a=a.style;for(var f in l)if(l.hasOwnProperty(f)){var g=f.indexOf("--")===0,v=cu(f,l[f],g);f==="float"&&(f="cssFloat"),g?a.setProperty(f,v):a[f]=v}}var xh=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qa(a,l){if(l){if(xh[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Ja(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fs=null;function el(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var tl=null,Lr=null,Nr=null;function co(a){if(a=xl(a)){if(typeof tl!="function")throw Error(n(280));var l=a.stateNode;l&&(l=Iu(l),tl(a.stateNode,a.type,l))}}function du(a){Lr?Nr?Nr.push(a):Nr=[a]:Lr=a}function fu(){if(Lr){var a=Lr,l=Nr;if(Nr=Lr=null,co(a),l)for(a=0;a<l.length;a++)co(l[a])}}function hu(a,l){return a(l)}function nl(){}var rl=!1;function pu(a,l,f){if(rl)return a(l,f);rl=!0;try{return hu(a,l,f)}finally{rl=!1,(Lr!==null||Nr!==null)&&(nl(),fu())}}function fi(a,l){var f=a.stateNode;if(f===null)return null;var g=Iu(f);if(g===null)return null;f=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(n(231,l,typeof f));return f}var hs=!1;if(c)try{var hi={};Object.defineProperty(hi,"passive",{get:function(){hs=!0}}),window.addEventListener("test",hi,hi),window.removeEventListener("test",hi,hi)}catch{hs=!1}function Eh(a,l,f,g,v,w,A,L,j){var q=Array.prototype.slice.call(arguments,3);try{l.apply(f,q)}catch(ne){this.onError(ne)}}var ps=!1,gs=null,uo=!1,fo=null,Th={onError:function(a){ps=!0,gs=a}};function gu(a,l,f,g,v,w,A,L,j){ps=!1,gs=null,Eh.apply(Th,arguments)}function mu(a,l,f,g,v,w,A,L,j){if(gu.apply(this,arguments),ps){if(ps){var q=gs;ps=!1,gs=null}else throw Error(n(198));uo||(uo=!0,fo=q)}}function ur(a){var l=a,f=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,l.flags&4098&&(f=l.return),a=l.return;while(a)}return l.tag===3?f:null}function sl(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function ho(a){if(ur(a)!==a)throw Error(n(188))}function jr(a){var l=a.alternate;if(!l){if(l=ur(a),l===null)throw Error(n(188));return l!==a?null:a}for(var f=a,g=l;;){var v=f.return;if(v===null)break;var w=v.alternate;if(w===null){if(g=v.return,g!==null){f=g;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===f)return ho(v),a;if(w===g)return ho(v),l;w=w.sibling}throw Error(n(188))}if(f.return!==g.return)f=v,g=w;else{for(var A=!1,L=v.child;L;){if(L===f){A=!0,f=v,g=w;break}if(L===g){A=!0,g=v,f=w;break}L=L.sibling}if(!A){for(L=w.child;L;){if(L===f){A=!0,f=w,g=v;break}if(L===g){A=!0,g=w,f=v;break}L=L.sibling}if(!A)throw Error(n(189))}}if(f.alternate!==g)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?a:l}function ms(a){return a=jr(a),a!==null?vs(a):null}function vs(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=vs(a);if(l!==null)return l;a=a.sibling}return null}var pi=e.unstable_scheduleCallback,po=e.unstable_cancelCallback,Sh=e.unstable_shouldYield,Ph=e.unstable_requestPaint,Ke=e.unstable_now,nn=e.unstable_getCurrentPriorityLevel,dr=e.unstable_ImmediatePriority,Hn=e.unstable_UserBlockingPriority,rn=e.unstable_NormalPriority,gi=e.unstable_LowPriority,hn=e.unstable_IdlePriority,sn=null,pn=null;function vu(a){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(sn,a,void 0,(a.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:il,gn=Math.log,go=Math.LN2;function il(a){return a>>>=0,a===0?32:31-(gn(a)/go|0)|0}var ys=64,_s=4194304;function Dr(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Fr(a,l){var f=a.pendingLanes;if(f===0)return 0;var g=0,v=a.suspendedLanes,w=a.pingedLanes,A=f&268435455;if(A!==0){var L=A&~v;L!==0?g=Dr(L):(w&=A,w!==0&&(g=Dr(w)))}else A=f&~v,A!==0?g=Dr(A):w!==0&&(g=Dr(w));if(g===0)return 0;if(l!==0&&l!==g&&!(l&v)&&(v=g&-g,w=l&-l,v>=w||v===16&&(w&4194240)!==0))return l;if(g&4&&(g|=f&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=g;0<l;)f=31-Vt(l),v=1<<f,g|=a[f],l&=~v;return g}function fr(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ah(a,l){for(var f=a.suspendedLanes,g=a.pingedLanes,v=a.expirationTimes,w=a.pendingLanes;0<w;){var A=31-Vt(w),L=1<<A,j=v[A];j===-1?(!(L&f)||L&g)&&(v[A]=fr(L,l)):j<=l&&(a.expiredLanes|=L),w&=~L}}function mo(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function vo(){var a=ys;return ys<<=1,!(ys&4194240)&&(ys=64),a}function yo(a){for(var l=[],f=0;31>f;f++)l.push(a);return l}function mi(a,l,f){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-Vt(l),a[l]=f}function Ch(a,l){var f=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var g=a.eventTimes;for(a=a.expirationTimes;0<f;){var v=31-Vt(f),w=1<<v;l[v]=0,g[v]=-1,a[v]=-1,f&=~w}}function k(a,l){var f=a.entangledLanes|=l;for(a=a.entanglements;f;){var g=31-Vt(f),v=1<<g;v&l|a[g]&l&&(a[g]|=l),f&=~v}}var M=0;function N(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var H,ee,fe,Oe,ht,pt=!1,yt=[],xt=null,ws=null,bs=null,ol=new Map,al=new Map,xs=[],xM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function By(a,l){switch(a){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":ws=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":ol.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":al.delete(l.pointerId)}}function ll(a,l,f,g,v,w){return a===null||a.nativeEvent!==w?(a={blockedOn:l,domEventName:f,eventSystemFlags:g,nativeEvent:w,targetContainers:[v]},l!==null&&(l=xl(l),l!==null&&ee(l)),a):(a.eventSystemFlags|=g,l=a.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),a)}function EM(a,l,f,g,v){switch(l){case"focusin":return xt=ll(xt,a,l,f,g,v),!0;case"dragenter":return ws=ll(ws,a,l,f,g,v),!0;case"mouseover":return bs=ll(bs,a,l,f,g,v),!0;case"pointerover":var w=v.pointerId;return ol.set(w,ll(ol.get(w)||null,a,l,f,g,v)),!0;case"gotpointercapture":return w=v.pointerId,al.set(w,ll(al.get(w)||null,a,l,f,g,v)),!0}return!1}function Uy(a){var l=vi(a.target);if(l!==null){var f=ur(l);if(f!==null){if(l=f.tag,l===13){if(l=sl(f),l!==null){a.blockedOn=l,ht(a.priority,function(){fe(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function yu(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var f=kh(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(f===null){f=a.nativeEvent;var g=new f.constructor(f.type,f);fs=g,f.target.dispatchEvent(g),fs=null}else return l=xl(f),l!==null&&ee(l),a.blockedOn=f,!1;l.shift()}return!0}function Vy(a,l,f){yu(a)&&f.delete(l)}function TM(){pt=!1,xt!==null&&yu(xt)&&(xt=null),ws!==null&&yu(ws)&&(ws=null),bs!==null&&yu(bs)&&(bs=null),ol.forEach(Vy),al.forEach(Vy)}function cl(a,l){a.blockedOn===l&&(a.blockedOn=null,pt||(pt=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,TM)))}function ul(a){function l(v){return cl(v,a)}if(0<yt.length){cl(yt[0],a);for(var f=1;f<yt.length;f++){var g=yt[f];g.blockedOn===a&&(g.blockedOn=null)}}for(xt!==null&&cl(xt,a),ws!==null&&cl(ws,a),bs!==null&&cl(bs,a),ol.forEach(l),al.forEach(l),f=0;f<xs.length;f++)g=xs[f],g.blockedOn===a&&(g.blockedOn=null);for(;0<xs.length&&(f=xs[0],f.blockedOn===null);)Uy(f),f.blockedOn===null&&xs.shift()}var _o=I.ReactCurrentBatchConfig,_u=!0;function SM(a,l,f,g){var v=M,w=_o.transition;_o.transition=null;try{M=1,Rh(a,l,f,g)}finally{M=v,_o.transition=w}}function PM(a,l,f,g){var v=M,w=_o.transition;_o.transition=null;try{M=4,Rh(a,l,f,g)}finally{M=v,_o.transition=w}}function Rh(a,l,f,g){if(_u){var v=kh(a,l,f,g);if(v===null)qh(a,l,g,wu,f),By(a,g);else if(EM(v,a,l,f,g))g.stopPropagation();else if(By(a,g),l&4&&-1<xM.indexOf(a)){for(;v!==null;){var w=xl(v);if(w!==null&&H(w),w=kh(a,l,f,g),w===null&&qh(a,l,g,wu,f),w===v)break;v=w}v!==null&&g.stopPropagation()}else qh(a,l,g,null,f)}}var wu=null;function kh(a,l,f,g){if(wu=null,a=el(g),a=vi(a),a!==null)if(l=ur(a),l===null)a=null;else if(f=l.tag,f===13){if(a=sl(l),a!==null)return a;a=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return wu=a,null}function zy(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nn()){case dr:return 1;case Hn:return 4;case rn:case gi:return 16;case hn:return 536870912;default:return 16}default:return 16}}var Es=null,Mh=null,bu=null;function $y(){if(bu)return bu;var a,l=Mh,f=l.length,g,v="value"in Es?Es.value:Es.textContent,w=v.length;for(a=0;a<f&&l[a]===v[a];a++);var A=f-a;for(g=1;g<=A&&l[f-g]===v[w-g];g++);return bu=v.slice(a,1<g?1-g:void 0)}function xu(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Eu(){return!0}function Gy(){return!1}function mn(a){function l(f,g,v,w,A){this._reactName=f,this._targetInst=v,this.type=g,this.nativeEvent=w,this.target=A,this.currentTarget=null;for(var L in a)a.hasOwnProperty(L)&&(f=a[L],this[L]=f?f(w):w[L]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Eu:Gy,this.isPropagationStopped=Gy,this}return Z(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Eu)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Eu)},persist:function(){},isPersistent:Eu}),l}var wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ih=mn(wo),dl=Z({},wo,{view:0,detail:0}),AM=mn(dl),Oh,Lh,fl,Tu=Z({},dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jh,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==fl&&(fl&&a.type==="mousemove"?(Oh=a.screenX-fl.screenX,Lh=a.screenY-fl.screenY):Lh=Oh=0,fl=a),Oh)},movementY:function(a){return"movementY"in a?a.movementY:Lh}}),Wy=mn(Tu),CM=Z({},Tu,{dataTransfer:0}),RM=mn(CM),kM=Z({},dl,{relatedTarget:0}),Nh=mn(kM),MM=Z({},wo,{animationName:0,elapsedTime:0,pseudoElement:0}),IM=mn(MM),OM=Z({},wo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),LM=mn(OM),NM=Z({},wo,{data:0}),Hy=mn(NM),jM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BM(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=FM[a])?!!l[a]:!1}function jh(){return BM}var UM=Z({},dl,{key:function(a){if(a.key){var l=jM[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=xu(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?DM[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jh,charCode:function(a){return a.type==="keypress"?xu(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?xu(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),VM=mn(UM),zM=Z({},Tu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qy=mn(zM),$M=Z({},dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jh}),GM=mn($M),WM=Z({},wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),HM=mn(WM),qM=Z({},Tu,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),KM=mn(qM),YM=[9,13,27,32],Dh=c&&"CompositionEvent"in window,hl=null;c&&"documentMode"in document&&(hl=document.documentMode);var XM=c&&"TextEvent"in window&&!hl,Ky=c&&(!Dh||hl&&8<hl&&11>=hl),Yy=" ",Xy=!1;function Zy(a,l){switch(a){case"keyup":return YM.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qy(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var bo=!1;function ZM(a,l){switch(a){case"compositionend":return Qy(l);case"keypress":return l.which!==32?null:(Xy=!0,Yy);case"textInput":return a=l.data,a===Yy&&Xy?null:a;default:return null}}function QM(a,l){if(bo)return a==="compositionend"||!Dh&&Zy(a,l)?(a=$y(),bu=Mh=Es=null,bo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Ky&&l.locale!=="ko"?null:l.data;default:return null}}var JM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jy(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!JM[a.type]:l==="textarea"}function e_(a,l,f,g){du(g),l=Ru(l,"onChange"),0<l.length&&(f=new Ih("onChange","change",null,f,g),a.push({event:f,listeners:l}))}var pl=null,gl=null;function eI(a){y_(a,0)}function Su(a){var l=Po(a);if(De(l))return a}function tI(a,l){if(a==="change")return l}var t_=!1;if(c){var Fh;if(c){var Bh="oninput"in document;if(!Bh){var n_=document.createElement("div");n_.setAttribute("oninput","return;"),Bh=typeof n_.oninput=="function"}Fh=Bh}else Fh=!1;t_=Fh&&(!document.documentMode||9<document.documentMode)}function r_(){pl&&(pl.detachEvent("onpropertychange",s_),gl=pl=null)}function s_(a){if(a.propertyName==="value"&&Su(gl)){var l=[];e_(l,gl,a,el(a)),pu(eI,l)}}function nI(a,l,f){a==="focusin"?(r_(),pl=l,gl=f,pl.attachEvent("onpropertychange",s_)):a==="focusout"&&r_()}function rI(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Su(gl)}function sI(a,l){if(a==="click")return Su(l)}function iI(a,l){if(a==="input"||a==="change")return Su(l)}function oI(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var qn=typeof Object.is=="function"?Object.is:oI;function ml(a,l){if(qn(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var f=Object.keys(a),g=Object.keys(l);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var v=f[g];if(!u.call(l,v)||!qn(a[v],l[v]))return!1}return!0}function i_(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function o_(a,l){var f=i_(a);a=0;for(var g;f;){if(f.nodeType===3){if(g=a+f.textContent.length,a<=l&&g>=l)return{node:f,offset:l-a};a=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=i_(f)}}function a_(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?a_(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function l_(){for(var a=window,l=st();l instanceof a.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)a=l.contentWindow;else break;l=st(a.document)}return l}function Uh(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function aI(a){var l=l_(),f=a.focusedElem,g=a.selectionRange;if(l!==f&&f&&f.ownerDocument&&a_(f.ownerDocument.documentElement,f)){if(g!==null&&Uh(f)){if(l=g.start,a=g.end,a===void 0&&(a=l),"selectionStart"in f)f.selectionStart=l,f.selectionEnd=Math.min(a,f.value.length);else if(a=(l=f.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var v=f.textContent.length,w=Math.min(g.start,v);g=g.end===void 0?w:Math.min(g.end,v),!a.extend&&w>g&&(v=g,g=w,w=v),v=o_(f,w);var A=o_(f,g);v&&A&&(a.rangeCount!==1||a.anchorNode!==v.node||a.anchorOffset!==v.offset||a.focusNode!==A.node||a.focusOffset!==A.offset)&&(l=l.createRange(),l.setStart(v.node,v.offset),a.removeAllRanges(),w>g?(a.addRange(l),a.extend(A.node,A.offset)):(l.setEnd(A.node,A.offset),a.addRange(l)))}}for(l=[],a=f;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<l.length;f++)a=l[f],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var lI=c&&"documentMode"in document&&11>=document.documentMode,xo=null,Vh=null,vl=null,zh=!1;function c_(a,l,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;zh||xo==null||xo!==st(g)||(g=xo,"selectionStart"in g&&Uh(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),vl&&ml(vl,g)||(vl=g,g=Ru(Vh,"onSelect"),0<g.length&&(l=new Ih("onSelect","select",null,l,f),a.push({event:l,listeners:g}),l.target=xo)))}function Pu(a,l){var f={};return f[a.toLowerCase()]=l.toLowerCase(),f["Webkit"+a]="webkit"+l,f["Moz"+a]="moz"+l,f}var Eo={animationend:Pu("Animation","AnimationEnd"),animationiteration:Pu("Animation","AnimationIteration"),animationstart:Pu("Animation","AnimationStart"),transitionend:Pu("Transition","TransitionEnd")},$h={},u_={};c&&(u_=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function Au(a){if($h[a])return $h[a];if(!Eo[a])return a;var l=Eo[a],f;for(f in l)if(l.hasOwnProperty(f)&&f in u_)return $h[a]=l[f];return a}var d_=Au("animationend"),f_=Au("animationiteration"),h_=Au("animationstart"),p_=Au("transitionend"),g_=new Map,m_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ts(a,l){g_.set(a,l),i(l,[a])}for(var Gh=0;Gh<m_.length;Gh++){var Wh=m_[Gh],cI=Wh.toLowerCase(),uI=Wh[0].toUpperCase()+Wh.slice(1);Ts(cI,"on"+uI)}Ts(d_,"onAnimationEnd"),Ts(f_,"onAnimationIteration"),Ts(h_,"onAnimationStart"),Ts("dblclick","onDoubleClick"),Ts("focusin","onFocus"),Ts("focusout","onBlur"),Ts(p_,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dI=new Set("cancel close invalid load scroll toggle".split(" ").concat(yl));function v_(a,l,f){var g=a.type||"unknown-event";a.currentTarget=f,mu(g,l,void 0,a),a.currentTarget=null}function y_(a,l){l=(l&4)!==0;for(var f=0;f<a.length;f++){var g=a[f],v=g.event;g=g.listeners;e:{var w=void 0;if(l)for(var A=g.length-1;0<=A;A--){var L=g[A],j=L.instance,q=L.currentTarget;if(L=L.listener,j!==w&&v.isPropagationStopped())break e;v_(v,L,q),w=j}else for(A=0;A<g.length;A++){if(L=g[A],j=L.instance,q=L.currentTarget,L=L.listener,j!==w&&v.isPropagationStopped())break e;v_(v,L,q),w=j}}}if(uo)throw a=fo,uo=!1,fo=null,a}function Je(a,l){var f=l[Jh];f===void 0&&(f=l[Jh]=new Set);var g=a+"__bubble";f.has(g)||(__(l,a,2,!1),f.add(g))}function Hh(a,l,f){var g=0;l&&(g|=4),__(f,a,g,l)}var Cu="_reactListening"+Math.random().toString(36).slice(2);function _l(a){if(!a[Cu]){a[Cu]=!0,r.forEach(function(f){f!=="selectionchange"&&(dI.has(f)||Hh(f,!1,a),Hh(f,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Cu]||(l[Cu]=!0,Hh("selectionchange",!1,l))}}function __(a,l,f,g){switch(zy(l)){case 1:var v=SM;break;case 4:v=PM;break;default:v=Rh}f=v.bind(null,l,f,a),v=void 0,!hs||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),g?v!==void 0?a.addEventListener(l,f,{capture:!0,passive:v}):a.addEventListener(l,f,!0):v!==void 0?a.addEventListener(l,f,{passive:v}):a.addEventListener(l,f,!1)}function qh(a,l,f,g,v){var w=g;if(!(l&1)&&!(l&2)&&g!==null)e:for(;;){if(g===null)return;var A=g.tag;if(A===3||A===4){var L=g.stateNode.containerInfo;if(L===v||L.nodeType===8&&L.parentNode===v)break;if(A===4)for(A=g.return;A!==null;){var j=A.tag;if((j===3||j===4)&&(j=A.stateNode.containerInfo,j===v||j.nodeType===8&&j.parentNode===v))return;A=A.return}for(;L!==null;){if(A=vi(L),A===null)return;if(j=A.tag,j===5||j===6){g=w=A;continue e}L=L.parentNode}}g=g.return}pu(function(){var q=w,ne=el(f),re=[];e:{var J=g_.get(a);if(J!==void 0){var he=Ih,me=a;switch(a){case"keypress":if(xu(f)===0)break e;case"keydown":case"keyup":he=VM;break;case"focusin":me="focus",he=Nh;break;case"focusout":me="blur",he=Nh;break;case"beforeblur":case"afterblur":he=Nh;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Wy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=RM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=GM;break;case d_:case f_:case h_:he=IM;break;case p_:he=HM;break;case"scroll":he=AM;break;case"wheel":he=KM;break;case"copy":case"cut":case"paste":he=LM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=qy}var ye=(l&4)!==0,gt=!ye&&a==="scroll",z=ye?J!==null?J+"Capture":null:J;ye=[];for(var B=q,$;B!==null;){$=B;var oe=$.stateNode;if($.tag===5&&oe!==null&&($=oe,z!==null&&(oe=fi(B,z),oe!=null&&ye.push(wl(B,oe,$)))),gt)break;B=B.return}0<ye.length&&(J=new he(J,me,null,f,ne),re.push({event:J,listeners:ye}))}}if(!(l&7)){e:{if(J=a==="mouseover"||a==="pointerover",he=a==="mouseout"||a==="pointerout",J&&f!==fs&&(me=f.relatedTarget||f.fromElement)&&(vi(me)||me[Br]))break e;if((he||J)&&(J=ne.window===ne?ne:(J=ne.ownerDocument)?J.defaultView||J.parentWindow:window,he?(me=f.relatedTarget||f.toElement,he=q,me=me?vi(me):null,me!==null&&(gt=ur(me),me!==gt||me.tag!==5&&me.tag!==6)&&(me=null)):(he=null,me=q),he!==me)){if(ye=Wy,oe="onMouseLeave",z="onMouseEnter",B="mouse",(a==="pointerout"||a==="pointerover")&&(ye=qy,oe="onPointerLeave",z="onPointerEnter",B="pointer"),gt=he==null?J:Po(he),$=me==null?J:Po(me),J=new ye(oe,B+"leave",he,f,ne),J.target=gt,J.relatedTarget=$,oe=null,vi(ne)===q&&(ye=new ye(z,B+"enter",me,f,ne),ye.target=$,ye.relatedTarget=gt,oe=ye),gt=oe,he&&me)t:{for(ye=he,z=me,B=0,$=ye;$;$=To($))B++;for($=0,oe=z;oe;oe=To(oe))$++;for(;0<B-$;)ye=To(ye),B--;for(;0<$-B;)z=To(z),$--;for(;B--;){if(ye===z||z!==null&&ye===z.alternate)break t;ye=To(ye),z=To(z)}ye=null}else ye=null;he!==null&&w_(re,J,he,ye,!1),me!==null&&gt!==null&&w_(re,gt,me,ye,!0)}}e:{if(J=q?Po(q):window,he=J.nodeName&&J.nodeName.toLowerCase(),he==="select"||he==="input"&&J.type==="file")var we=tI;else if(Jy(J))if(t_)we=iI;else{we=rI;var Te=nI}else(he=J.nodeName)&&he.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(we=sI);if(we&&(we=we(a,q))){e_(re,we,f,ne);break e}Te&&Te(a,J,q),a==="focusout"&&(Te=J._wrapperState)&&Te.controlled&&J.type==="number"&&Wn(J,"number",J.value)}switch(Te=q?Po(q):window,a){case"focusin":(Jy(Te)||Te.contentEditable==="true")&&(xo=Te,Vh=q,vl=null);break;case"focusout":vl=Vh=xo=null;break;case"mousedown":zh=!0;break;case"contextmenu":case"mouseup":case"dragend":zh=!1,c_(re,f,ne);break;case"selectionchange":if(lI)break;case"keydown":case"keyup":c_(re,f,ne)}var Se;if(Dh)e:{switch(a){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else bo?Zy(a,f)&&(Re="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Re="onCompositionStart");Re&&(Ky&&f.locale!=="ko"&&(bo||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&bo&&(Se=$y()):(Es=ne,Mh="value"in Es?Es.value:Es.textContent,bo=!0)),Te=Ru(q,Re),0<Te.length&&(Re=new Hy(Re,a,null,f,ne),re.push({event:Re,listeners:Te}),Se?Re.data=Se:(Se=Qy(f),Se!==null&&(Re.data=Se)))),(Se=XM?ZM(a,f):QM(a,f))&&(q=Ru(q,"onBeforeInput"),0<q.length&&(ne=new Hy("onBeforeInput","beforeinput",null,f,ne),re.push({event:ne,listeners:q}),ne.data=Se))}y_(re,l)})}function wl(a,l,f){return{instance:a,listener:l,currentTarget:f}}function Ru(a,l){for(var f=l+"Capture",g=[];a!==null;){var v=a,w=v.stateNode;v.tag===5&&w!==null&&(v=w,w=fi(a,f),w!=null&&g.unshift(wl(a,w,v)),w=fi(a,l),w!=null&&g.push(wl(a,w,v))),a=a.return}return g}function To(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function w_(a,l,f,g,v){for(var w=l._reactName,A=[];f!==null&&f!==g;){var L=f,j=L.alternate,q=L.stateNode;if(j!==null&&j===g)break;L.tag===5&&q!==null&&(L=q,v?(j=fi(f,w),j!=null&&A.unshift(wl(f,j,L))):v||(j=fi(f,w),j!=null&&A.push(wl(f,j,L)))),f=f.return}A.length!==0&&a.push({event:l,listeners:A})}var fI=/\r\n?/g,hI=/\u0000|\uFFFD/g;function b_(a){return(typeof a=="string"?a:""+a).replace(fI,`
`).replace(hI,"")}function ku(a,l,f){if(l=b_(l),b_(a)!==l&&f)throw Error(n(425))}function Mu(){}var Kh=null,Yh=null;function Xh(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Zh=typeof setTimeout=="function"?setTimeout:void 0,pI=typeof clearTimeout=="function"?clearTimeout:void 0,x_=typeof Promise=="function"?Promise:void 0,gI=typeof queueMicrotask=="function"?queueMicrotask:typeof x_<"u"?function(a){return x_.resolve(null).then(a).catch(mI)}:Zh;function mI(a){setTimeout(function(){throw a})}function Qh(a,l){var f=l,g=0;do{var v=f.nextSibling;if(a.removeChild(f),v&&v.nodeType===8)if(f=v.data,f==="/$"){if(g===0){a.removeChild(v),ul(l);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=v}while(f);ul(l)}function Ss(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function E_(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return a;l--}else f==="/$"&&l++}a=a.previousSibling}return null}var So=Math.random().toString(36).slice(2),hr="__reactFiber$"+So,bl="__reactProps$"+So,Br="__reactContainer$"+So,Jh="__reactEvents$"+So,vI="__reactListeners$"+So,yI="__reactHandles$"+So;function vi(a){var l=a[hr];if(l)return l;for(var f=a.parentNode;f;){if(l=f[Br]||f[hr]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(a=E_(a);a!==null;){if(f=a[hr])return f;a=E_(a)}return l}a=f,f=a.parentNode}return null}function xl(a){return a=a[hr]||a[Br],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Po(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function Iu(a){return a[bl]||null}var ep=[],Ao=-1;function Ps(a){return{current:a}}function et(a){0>Ao||(a.current=ep[Ao],ep[Ao]=null,Ao--)}function Ye(a,l){Ao++,ep[Ao]=a.current,a.current=l}var As={},zt=Ps(As),on=Ps(!1),yi=As;function Co(a,l){var f=a.type.contextTypes;if(!f)return As;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var v={},w;for(w in f)v[w]=l[w];return g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=v),v}function an(a){return a=a.childContextTypes,a!=null}function Ou(){et(on),et(zt)}function T_(a,l,f){if(zt.current!==As)throw Error(n(168));Ye(zt,l),Ye(on,f)}function S_(a,l,f){var g=a.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var v in g)if(!(v in l))throw Error(n(108,se(a)||"Unknown",v));return Z({},f,g)}function Lu(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||As,yi=zt.current,Ye(zt,a),Ye(on,on.current),!0}function P_(a,l,f){var g=a.stateNode;if(!g)throw Error(n(169));f?(a=S_(a,l,yi),g.__reactInternalMemoizedMergedChildContext=a,et(on),et(zt),Ye(zt,a)):et(on),Ye(on,f)}var Ur=null,Nu=!1,tp=!1;function A_(a){Ur===null?Ur=[a]:Ur.push(a)}function _I(a){Nu=!0,A_(a)}function Cs(){if(!tp&&Ur!==null){tp=!0;var a=0,l=M;try{var f=Ur;for(M=1;a<f.length;a++){var g=f[a];do g=g(!0);while(g!==null)}Ur=null,Nu=!1}catch(v){throw Ur!==null&&(Ur=Ur.slice(a+1)),pi(dr,Cs),v}finally{M=l,tp=!1}}return null}var Ro=[],ko=0,ju=null,Du=0,On=[],Ln=0,_i=null,Vr=1,zr="";function wi(a,l){Ro[ko++]=Du,Ro[ko++]=ju,ju=a,Du=l}function C_(a,l,f){On[Ln++]=Vr,On[Ln++]=zr,On[Ln++]=_i,_i=a;var g=Vr;a=zr;var v=32-Vt(g)-1;g&=~(1<<v),f+=1;var w=32-Vt(l)+v;if(30<w){var A=v-v%5;w=(g&(1<<A)-1).toString(32),g>>=A,v-=A,Vr=1<<32-Vt(l)+v|f<<v|g,zr=w+a}else Vr=1<<w|f<<v|g,zr=a}function np(a){a.return!==null&&(wi(a,1),C_(a,1,0))}function rp(a){for(;a===ju;)ju=Ro[--ko],Ro[ko]=null,Du=Ro[--ko],Ro[ko]=null;for(;a===_i;)_i=On[--Ln],On[Ln]=null,zr=On[--Ln],On[Ln]=null,Vr=On[--Ln],On[Ln]=null}var vn=null,yn=null,it=!1,Kn=null;function R_(a,l){var f=Fn(5,null,null,0);f.elementType="DELETED",f.stateNode=l,f.return=a,l=a.deletions,l===null?(a.deletions=[f],a.flags|=16):l.push(f)}function k_(a,l){switch(a.tag){case 5:var f=a.type;return l=l.nodeType!==1||f.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,vn=a,yn=Ss(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,vn=a,yn=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(f=_i!==null?{id:Vr,overflow:zr}:null,a.memoizedState={dehydrated:l,treeContext:f,retryLane:1073741824},f=Fn(18,null,null,0),f.stateNode=l,f.return=a,a.child=f,vn=a,yn=null,!0):!1;default:return!1}}function sp(a){return(a.mode&1)!==0&&(a.flags&128)===0}function ip(a){if(it){var l=yn;if(l){var f=l;if(!k_(a,l)){if(sp(a))throw Error(n(418));l=Ss(f.nextSibling);var g=vn;l&&k_(a,l)?R_(g,f):(a.flags=a.flags&-4097|2,it=!1,vn=a)}}else{if(sp(a))throw Error(n(418));a.flags=a.flags&-4097|2,it=!1,vn=a}}}function M_(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;vn=a}function Fu(a){if(a!==vn)return!1;if(!it)return M_(a),it=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!Xh(a.type,a.memoizedProps)),l&&(l=yn)){if(sp(a))throw I_(),Error(n(418));for(;l;)R_(a,l),l=Ss(l.nextSibling)}if(M_(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"){if(l===0){yn=Ss(a.nextSibling);break e}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++}a=a.nextSibling}yn=null}}else yn=vn?Ss(a.stateNode.nextSibling):null;return!0}function I_(){for(var a=yn;a;)a=Ss(a.nextSibling)}function Mo(){yn=vn=null,it=!1}function op(a){Kn===null?Kn=[a]:Kn.push(a)}var wI=I.ReactCurrentBatchConfig;function El(a,l,f){if(a=f.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(n(309));var g=f.stateNode}if(!g)throw Error(n(147,a));var v=g,w=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===w?l.ref:(l=function(A){var L=v.refs;A===null?delete L[w]:L[w]=A},l._stringRef=w,l)}if(typeof a!="string")throw Error(n(284));if(!f._owner)throw Error(n(290,a))}return a}function Bu(a,l){throw a=Object.prototype.toString.call(l),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function O_(a){var l=a._init;return l(a._payload)}function L_(a){function l(z,B){if(a){var $=z.deletions;$===null?(z.deletions=[B],z.flags|=16):$.push(B)}}function f(z,B){if(!a)return null;for(;B!==null;)l(z,B),B=B.sibling;return null}function g(z,B){for(z=new Map;B!==null;)B.key!==null?z.set(B.key,B):z.set(B.index,B),B=B.sibling;return z}function v(z,B){return z=js(z,B),z.index=0,z.sibling=null,z}function w(z,B,$){return z.index=$,a?($=z.alternate,$!==null?($=$.index,$<B?(z.flags|=2,B):$):(z.flags|=2,B)):(z.flags|=1048576,B)}function A(z){return a&&z.alternate===null&&(z.flags|=2),z}function L(z,B,$,oe){return B===null||B.tag!==6?(B=Zp($,z.mode,oe),B.return=z,B):(B=v(B,$),B.return=z,B)}function j(z,B,$,oe){var we=$.type;return we===U?ne(z,B,$.props.children,oe,$.key):B!==null&&(B.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===le&&O_(we)===B.type)?(oe=v(B,$.props),oe.ref=El(z,B,$),oe.return=z,oe):(oe=cd($.type,$.key,$.props,null,z.mode,oe),oe.ref=El(z,B,$),oe.return=z,oe)}function q(z,B,$,oe){return B===null||B.tag!==4||B.stateNode.containerInfo!==$.containerInfo||B.stateNode.implementation!==$.implementation?(B=Qp($,z.mode,oe),B.return=z,B):(B=v(B,$.children||[]),B.return=z,B)}function ne(z,B,$,oe,we){return B===null||B.tag!==7?(B=Ci($,z.mode,oe,we),B.return=z,B):(B=v(B,$),B.return=z,B)}function re(z,B,$){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Zp(""+B,z.mode,$),B.return=z,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case O:return $=cd(B.type,B.key,B.props,null,z.mode,$),$.ref=El(z,null,B),$.return=z,$;case D:return B=Qp(B,z.mode,$),B.return=z,B;case le:var oe=B._init;return re(z,oe(B._payload),$)}if(lr(B)||Y(B))return B=Ci(B,z.mode,$,null),B.return=z,B;Bu(z,B)}return null}function J(z,B,$,oe){var we=B!==null?B.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return we!==null?null:L(z,B,""+$,oe);if(typeof $=="object"&&$!==null){switch($.$$typeof){case O:return $.key===we?j(z,B,$,oe):null;case D:return $.key===we?q(z,B,$,oe):null;case le:return we=$._init,J(z,B,we($._payload),oe)}if(lr($)||Y($))return we!==null?null:ne(z,B,$,oe,null);Bu(z,$)}return null}function he(z,B,$,oe,we){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return z=z.get($)||null,L(B,z,""+oe,we);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case O:return z=z.get(oe.key===null?$:oe.key)||null,j(B,z,oe,we);case D:return z=z.get(oe.key===null?$:oe.key)||null,q(B,z,oe,we);case le:var Te=oe._init;return he(z,B,$,Te(oe._payload),we)}if(lr(oe)||Y(oe))return z=z.get($)||null,ne(B,z,oe,we,null);Bu(B,oe)}return null}function me(z,B,$,oe){for(var we=null,Te=null,Se=B,Re=B=0,Mt=null;Se!==null&&Re<$.length;Re++){Se.index>Re?(Mt=Se,Se=null):Mt=Se.sibling;var ze=J(z,Se,$[Re],oe);if(ze===null){Se===null&&(Se=Mt);break}a&&Se&&ze.alternate===null&&l(z,Se),B=w(ze,B,Re),Te===null?we=ze:Te.sibling=ze,Te=ze,Se=Mt}if(Re===$.length)return f(z,Se),it&&wi(z,Re),we;if(Se===null){for(;Re<$.length;Re++)Se=re(z,$[Re],oe),Se!==null&&(B=w(Se,B,Re),Te===null?we=Se:Te.sibling=Se,Te=Se);return it&&wi(z,Re),we}for(Se=g(z,Se);Re<$.length;Re++)Mt=he(Se,z,Re,$[Re],oe),Mt!==null&&(a&&Mt.alternate!==null&&Se.delete(Mt.key===null?Re:Mt.key),B=w(Mt,B,Re),Te===null?we=Mt:Te.sibling=Mt,Te=Mt);return a&&Se.forEach(function(Ds){return l(z,Ds)}),it&&wi(z,Re),we}function ye(z,B,$,oe){var we=Y($);if(typeof we!="function")throw Error(n(150));if($=we.call($),$==null)throw Error(n(151));for(var Te=we=null,Se=B,Re=B=0,Mt=null,ze=$.next();Se!==null&&!ze.done;Re++,ze=$.next()){Se.index>Re?(Mt=Se,Se=null):Mt=Se.sibling;var Ds=J(z,Se,ze.value,oe);if(Ds===null){Se===null&&(Se=Mt);break}a&&Se&&Ds.alternate===null&&l(z,Se),B=w(Ds,B,Re),Te===null?we=Ds:Te.sibling=Ds,Te=Ds,Se=Mt}if(ze.done)return f(z,Se),it&&wi(z,Re),we;if(Se===null){for(;!ze.done;Re++,ze=$.next())ze=re(z,ze.value,oe),ze!==null&&(B=w(ze,B,Re),Te===null?we=ze:Te.sibling=ze,Te=ze);return it&&wi(z,Re),we}for(Se=g(z,Se);!ze.done;Re++,ze=$.next())ze=he(Se,z,Re,ze.value,oe),ze!==null&&(a&&ze.alternate!==null&&Se.delete(ze.key===null?Re:ze.key),B=w(ze,B,Re),Te===null?we=ze:Te.sibling=ze,Te=ze);return a&&Se.forEach(function(JI){return l(z,JI)}),it&&wi(z,Re),we}function gt(z,B,$,oe){if(typeof $=="object"&&$!==null&&$.type===U&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case O:e:{for(var we=$.key,Te=B;Te!==null;){if(Te.key===we){if(we=$.type,we===U){if(Te.tag===7){f(z,Te.sibling),B=v(Te,$.props.children),B.return=z,z=B;break e}}else if(Te.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===le&&O_(we)===Te.type){f(z,Te.sibling),B=v(Te,$.props),B.ref=El(z,Te,$),B.return=z,z=B;break e}f(z,Te);break}else l(z,Te);Te=Te.sibling}$.type===U?(B=Ci($.props.children,z.mode,oe,$.key),B.return=z,z=B):(oe=cd($.type,$.key,$.props,null,z.mode,oe),oe.ref=El(z,B,$),oe.return=z,z=oe)}return A(z);case D:e:{for(Te=$.key;B!==null;){if(B.key===Te)if(B.tag===4&&B.stateNode.containerInfo===$.containerInfo&&B.stateNode.implementation===$.implementation){f(z,B.sibling),B=v(B,$.children||[]),B.return=z,z=B;break e}else{f(z,B);break}else l(z,B);B=B.sibling}B=Qp($,z.mode,oe),B.return=z,z=B}return A(z);case le:return Te=$._init,gt(z,B,Te($._payload),oe)}if(lr($))return me(z,B,$,oe);if(Y($))return ye(z,B,$,oe);Bu(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,B!==null&&B.tag===6?(f(z,B.sibling),B=v(B,$),B.return=z,z=B):(f(z,B),B=Zp($,z.mode,oe),B.return=z,z=B),A(z)):f(z,B)}return gt}var Io=L_(!0),N_=L_(!1),Uu=Ps(null),Vu=null,Oo=null,ap=null;function lp(){ap=Oo=Vu=null}function cp(a){var l=Uu.current;et(Uu),a._currentValue=l}function up(a,l,f){for(;a!==null;){var g=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),a===f)break;a=a.return}}function Lo(a,l){Vu=a,ap=Oo=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&l&&(ln=!0),a.firstContext=null)}function Nn(a){var l=a._currentValue;if(ap!==a)if(a={context:a,memoizedValue:l,next:null},Oo===null){if(Vu===null)throw Error(n(308));Oo=a,Vu.dependencies={lanes:0,firstContext:a}}else Oo=Oo.next=a;return l}var bi=null;function dp(a){bi===null?bi=[a]:bi.push(a)}function j_(a,l,f,g){var v=l.interleaved;return v===null?(f.next=f,dp(l)):(f.next=v.next,v.next=f),l.interleaved=f,$r(a,g)}function $r(a,l){a.lanes|=l;var f=a.alternate;for(f!==null&&(f.lanes|=l),f=a,a=a.return;a!==null;)a.childLanes|=l,f=a.alternate,f!==null&&(f.childLanes|=l),f=a,a=a.return;return f.tag===3?f.stateNode:null}var Rs=!1;function fp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D_(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Gr(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function ks(a,l,f){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,Ve&2){var v=g.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),g.pending=l,$r(a,f)}return v=g.interleaved,v===null?(l.next=l,dp(g)):(l.next=v.next,v.next=l),g.interleaved=l,$r(a,f)}function zu(a,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194240)!==0)){var g=l.lanes;g&=a.pendingLanes,f|=g,l.lanes=f,k(a,f)}}function F_(a,l){var f=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var v=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var A={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};w===null?v=w=A:w=w.next=A,f=f.next}while(f!==null);w===null?v=w=l:w=w.next=l}else v=w=l;f={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:g.shared,effects:g.effects},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=l:a.next=l,f.lastBaseUpdate=l}function $u(a,l,f,g){var v=a.updateQueue;Rs=!1;var w=v.firstBaseUpdate,A=v.lastBaseUpdate,L=v.shared.pending;if(L!==null){v.shared.pending=null;var j=L,q=j.next;j.next=null,A===null?w=q:A.next=q,A=j;var ne=a.alternate;ne!==null&&(ne=ne.updateQueue,L=ne.lastBaseUpdate,L!==A&&(L===null?ne.firstBaseUpdate=q:L.next=q,ne.lastBaseUpdate=j))}if(w!==null){var re=v.baseState;A=0,ne=q=j=null,L=w;do{var J=L.lane,he=L.eventTime;if((g&J)===J){ne!==null&&(ne=ne.next={eventTime:he,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var me=a,ye=L;switch(J=l,he=f,ye.tag){case 1:if(me=ye.payload,typeof me=="function"){re=me.call(he,re,J);break e}re=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ye.payload,J=typeof me=="function"?me.call(he,re,J):me,J==null)break e;re=Z({},re,J);break e;case 2:Rs=!0}}L.callback!==null&&L.lane!==0&&(a.flags|=64,J=v.effects,J===null?v.effects=[L]:J.push(L))}else he={eventTime:he,lane:J,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ne===null?(q=ne=he,j=re):ne=ne.next=he,A|=J;if(L=L.next,L===null){if(L=v.shared.pending,L===null)break;J=L,L=J.next,J.next=null,v.lastBaseUpdate=J,v.shared.pending=null}}while(!0);if(ne===null&&(j=re),v.baseState=j,v.firstBaseUpdate=q,v.lastBaseUpdate=ne,l=v.shared.interleaved,l!==null){v=l;do A|=v.lane,v=v.next;while(v!==l)}else w===null&&(v.shared.lanes=0);Ti|=A,a.lanes=A,a.memoizedState=re}}function B_(a,l,f){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var g=a[l],v=g.callback;if(v!==null){if(g.callback=null,g=f,typeof v!="function")throw Error(n(191,v));v.call(g)}}}var Tl={},pr=Ps(Tl),Sl=Ps(Tl),Pl=Ps(Tl);function xi(a){if(a===Tl)throw Error(n(174));return a}function hp(a,l){switch(Ye(Pl,l),Ye(Sl,a),Ye(pr,Tl),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:lo(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=lo(l,a)}et(pr),Ye(pr,l)}function No(){et(pr),et(Sl),et(Pl)}function U_(a){xi(Pl.current);var l=xi(pr.current),f=lo(l,a.type);l!==f&&(Ye(Sl,a),Ye(pr,f))}function pp(a){Sl.current===a&&(et(pr),et(Sl))}var at=Ps(0);function Gu(a){for(var l=a;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if(l.flags&128)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var gp=[];function mp(){for(var a=0;a<gp.length;a++)gp[a]._workInProgressVersionPrimary=null;gp.length=0}var Wu=I.ReactCurrentDispatcher,vp=I.ReactCurrentBatchConfig,Ei=0,lt=null,Et=null,Rt=null,Hu=!1,Al=!1,Cl=0,bI=0;function $t(){throw Error(n(321))}function yp(a,l){if(l===null)return!1;for(var f=0;f<l.length&&f<a.length;f++)if(!qn(a[f],l[f]))return!1;return!0}function _p(a,l,f,g,v,w){if(Ei=w,lt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Wu.current=a===null||a.memoizedState===null?SI:PI,a=f(g,v),Al){w=0;do{if(Al=!1,Cl=0,25<=w)throw Error(n(301));w+=1,Rt=Et=null,l.updateQueue=null,Wu.current=AI,a=f(g,v)}while(Al)}if(Wu.current=Yu,l=Et!==null&&Et.next!==null,Ei=0,Rt=Et=lt=null,Hu=!1,l)throw Error(n(300));return a}function wp(){var a=Cl!==0;return Cl=0,a}function gr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?lt.memoizedState=Rt=a:Rt=Rt.next=a,Rt}function jn(){if(Et===null){var a=lt.alternate;a=a!==null?a.memoizedState:null}else a=Et.next;var l=Rt===null?lt.memoizedState:Rt.next;if(l!==null)Rt=l,Et=a;else{if(a===null)throw Error(n(310));Et=a,a={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Rt===null?lt.memoizedState=Rt=a:Rt=Rt.next=a}return Rt}function Rl(a,l){return typeof l=="function"?l(a):l}function bp(a){var l=jn(),f=l.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=a;var g=Et,v=g.baseQueue,w=f.pending;if(w!==null){if(v!==null){var A=v.next;v.next=w.next,w.next=A}g.baseQueue=v=w,f.pending=null}if(v!==null){w=v.next,g=g.baseState;var L=A=null,j=null,q=w;do{var ne=q.lane;if((Ei&ne)===ne)j!==null&&(j=j.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),g=q.hasEagerState?q.eagerState:a(g,q.action);else{var re={lane:ne,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};j===null?(L=j=re,A=g):j=j.next=re,lt.lanes|=ne,Ti|=ne}q=q.next}while(q!==null&&q!==w);j===null?A=g:j.next=L,qn(g,l.memoizedState)||(ln=!0),l.memoizedState=g,l.baseState=A,l.baseQueue=j,f.lastRenderedState=g}if(a=f.interleaved,a!==null){v=a;do w=v.lane,lt.lanes|=w,Ti|=w,v=v.next;while(v!==a)}else v===null&&(f.lanes=0);return[l.memoizedState,f.dispatch]}function xp(a){var l=jn(),f=l.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=a;var g=f.dispatch,v=f.pending,w=l.memoizedState;if(v!==null){f.pending=null;var A=v=v.next;do w=a(w,A.action),A=A.next;while(A!==v);qn(w,l.memoizedState)||(ln=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),f.lastRenderedState=w}return[w,g]}function V_(){}function z_(a,l){var f=lt,g=jn(),v=l(),w=!qn(g.memoizedState,v);if(w&&(g.memoizedState=v,ln=!0),g=g.queue,Ep(W_.bind(null,f,g,a),[a]),g.getSnapshot!==l||w||Rt!==null&&Rt.memoizedState.tag&1){if(f.flags|=2048,kl(9,G_.bind(null,f,g,v,l),void 0,null),kt===null)throw Error(n(349));Ei&30||$_(f,l,v)}return v}function $_(a,l,f){a.flags|=16384,a={getSnapshot:l,value:f},l=lt.updateQueue,l===null?(l={lastEffect:null,stores:null},lt.updateQueue=l,l.stores=[a]):(f=l.stores,f===null?l.stores=[a]:f.push(a))}function G_(a,l,f,g){l.value=f,l.getSnapshot=g,H_(l)&&q_(a)}function W_(a,l,f){return f(function(){H_(l)&&q_(a)})}function H_(a){var l=a.getSnapshot;a=a.value;try{var f=l();return!qn(a,f)}catch{return!0}}function q_(a){var l=$r(a,1);l!==null&&Qn(l,a,1,-1)}function K_(a){var l=gr();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rl,lastRenderedState:a},l.queue=a,a=a.dispatch=TI.bind(null,lt,a),[l.memoizedState,a]}function kl(a,l,f,g){return a={tag:a,create:l,destroy:f,deps:g,next:null},l=lt.updateQueue,l===null?(l={lastEffect:null,stores:null},lt.updateQueue=l,l.lastEffect=a.next=a):(f=l.lastEffect,f===null?l.lastEffect=a.next=a:(g=f.next,f.next=a,a.next=g,l.lastEffect=a)),a}function Y_(){return jn().memoizedState}function qu(a,l,f,g){var v=gr();lt.flags|=a,v.memoizedState=kl(1|l,f,void 0,g===void 0?null:g)}function Ku(a,l,f,g){var v=jn();g=g===void 0?null:g;var w=void 0;if(Et!==null){var A=Et.memoizedState;if(w=A.destroy,g!==null&&yp(g,A.deps)){v.memoizedState=kl(l,f,w,g);return}}lt.flags|=a,v.memoizedState=kl(1|l,f,w,g)}function X_(a,l){return qu(8390656,8,a,l)}function Ep(a,l){return Ku(2048,8,a,l)}function Z_(a,l){return Ku(4,2,a,l)}function Q_(a,l){return Ku(4,4,a,l)}function J_(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function ew(a,l,f){return f=f!=null?f.concat([a]):null,Ku(4,4,J_.bind(null,l,a),f)}function Tp(){}function tw(a,l){var f=jn();l=l===void 0?null:l;var g=f.memoizedState;return g!==null&&l!==null&&yp(l,g[1])?g[0]:(f.memoizedState=[a,l],a)}function nw(a,l){var f=jn();l=l===void 0?null:l;var g=f.memoizedState;return g!==null&&l!==null&&yp(l,g[1])?g[0]:(a=a(),f.memoizedState=[a,l],a)}function rw(a,l,f){return Ei&21?(qn(f,l)||(f=vo(),lt.lanes|=f,Ti|=f,a.baseState=!0),l):(a.baseState&&(a.baseState=!1,ln=!0),a.memoizedState=f)}function xI(a,l){var f=M;M=f!==0&&4>f?f:4,a(!0);var g=vp.transition;vp.transition={};try{a(!1),l()}finally{M=f,vp.transition=g}}function sw(){return jn().memoizedState}function EI(a,l,f){var g=Ls(a);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},iw(a))ow(l,f);else if(f=j_(a,l,f,g),f!==null){var v=Zt();Qn(f,a,g,v),aw(f,l,g)}}function TI(a,l,f){var g=Ls(a),v={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(iw(a))ow(l,v);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var A=l.lastRenderedState,L=w(A,f);if(v.hasEagerState=!0,v.eagerState=L,qn(L,A)){var j=l.interleaved;j===null?(v.next=v,dp(l)):(v.next=j.next,j.next=v),l.interleaved=v;return}}catch{}finally{}f=j_(a,l,v,g),f!==null&&(v=Zt(),Qn(f,a,g,v),aw(f,l,g))}}function iw(a){var l=a.alternate;return a===lt||l!==null&&l===lt}function ow(a,l){Al=Hu=!0;var f=a.pending;f===null?l.next=l:(l.next=f.next,f.next=l),a.pending=l}function aw(a,l,f){if(f&4194240){var g=l.lanes;g&=a.pendingLanes,f|=g,l.lanes=f,k(a,f)}}var Yu={readContext:Nn,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},SI={readContext:Nn,useCallback:function(a,l){return gr().memoizedState=[a,l===void 0?null:l],a},useContext:Nn,useEffect:X_,useImperativeHandle:function(a,l,f){return f=f!=null?f.concat([a]):null,qu(4194308,4,J_.bind(null,l,a),f)},useLayoutEffect:function(a,l){return qu(4194308,4,a,l)},useInsertionEffect:function(a,l){return qu(4,2,a,l)},useMemo:function(a,l){var f=gr();return l=l===void 0?null:l,a=a(),f.memoizedState=[a,l],a},useReducer:function(a,l,f){var g=gr();return l=f!==void 0?f(l):l,g.memoizedState=g.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},g.queue=a,a=a.dispatch=EI.bind(null,lt,a),[g.memoizedState,a]},useRef:function(a){var l=gr();return a={current:a},l.memoizedState=a},useState:K_,useDebugValue:Tp,useDeferredValue:function(a){return gr().memoizedState=a},useTransition:function(){var a=K_(!1),l=a[0];return a=xI.bind(null,a[1]),gr().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,f){var g=lt,v=gr();if(it){if(f===void 0)throw Error(n(407));f=f()}else{if(f=l(),kt===null)throw Error(n(349));Ei&30||$_(g,l,f)}v.memoizedState=f;var w={value:f,getSnapshot:l};return v.queue=w,X_(W_.bind(null,g,w,a),[a]),g.flags|=2048,kl(9,G_.bind(null,g,w,f,l),void 0,null),f},useId:function(){var a=gr(),l=kt.identifierPrefix;if(it){var f=zr,g=Vr;f=(g&~(1<<32-Vt(g)-1)).toString(32)+f,l=":"+l+"R"+f,f=Cl++,0<f&&(l+="H"+f.toString(32)),l+=":"}else f=bI++,l=":"+l+"r"+f.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},PI={readContext:Nn,useCallback:tw,useContext:Nn,useEffect:Ep,useImperativeHandle:ew,useInsertionEffect:Z_,useLayoutEffect:Q_,useMemo:nw,useReducer:bp,useRef:Y_,useState:function(){return bp(Rl)},useDebugValue:Tp,useDeferredValue:function(a){var l=jn();return rw(l,Et.memoizedState,a)},useTransition:function(){var a=bp(Rl)[0],l=jn().memoizedState;return[a,l]},useMutableSource:V_,useSyncExternalStore:z_,useId:sw,unstable_isNewReconciler:!1},AI={readContext:Nn,useCallback:tw,useContext:Nn,useEffect:Ep,useImperativeHandle:ew,useInsertionEffect:Z_,useLayoutEffect:Q_,useMemo:nw,useReducer:xp,useRef:Y_,useState:function(){return xp(Rl)},useDebugValue:Tp,useDeferredValue:function(a){var l=jn();return Et===null?l.memoizedState=a:rw(l,Et.memoizedState,a)},useTransition:function(){var a=xp(Rl)[0],l=jn().memoizedState;return[a,l]},useMutableSource:V_,useSyncExternalStore:z_,useId:sw,unstable_isNewReconciler:!1};function Yn(a,l){if(a&&a.defaultProps){l=Z({},l),a=a.defaultProps;for(var f in a)l[f]===void 0&&(l[f]=a[f]);return l}return l}function Sp(a,l,f,g){l=a.memoizedState,f=f(g,l),f=f==null?l:Z({},l,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var Xu={isMounted:function(a){return(a=a._reactInternals)?ur(a)===a:!1},enqueueSetState:function(a,l,f){a=a._reactInternals;var g=Zt(),v=Ls(a),w=Gr(g,v);w.payload=l,f!=null&&(w.callback=f),l=ks(a,w,v),l!==null&&(Qn(l,a,v,g),zu(l,a,v))},enqueueReplaceState:function(a,l,f){a=a._reactInternals;var g=Zt(),v=Ls(a),w=Gr(g,v);w.tag=1,w.payload=l,f!=null&&(w.callback=f),l=ks(a,w,v),l!==null&&(Qn(l,a,v,g),zu(l,a,v))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var f=Zt(),g=Ls(a),v=Gr(f,g);v.tag=2,l!=null&&(v.callback=l),l=ks(a,v,g),l!==null&&(Qn(l,a,g,f),zu(l,a,g))}};function lw(a,l,f,g,v,w,A){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,w,A):l.prototype&&l.prototype.isPureReactComponent?!ml(f,g)||!ml(v,w):!0}function cw(a,l,f){var g=!1,v=As,w=l.contextType;return typeof w=="object"&&w!==null?w=Nn(w):(v=an(l)?yi:zt.current,g=l.contextTypes,w=(g=g!=null)?Co(a,v):As),l=new l(f,w),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Xu,a.stateNode=l,l._reactInternals=a,g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=v,a.__reactInternalMemoizedMaskedChildContext=w),l}function uw(a,l,f,g){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,g),l.state!==a&&Xu.enqueueReplaceState(l,l.state,null)}function Pp(a,l,f,g){var v=a.stateNode;v.props=f,v.state=a.memoizedState,v.refs={},fp(a);var w=l.contextType;typeof w=="object"&&w!==null?v.context=Nn(w):(w=an(l)?yi:zt.current,v.context=Co(a,w)),v.state=a.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Sp(a,l,w,f),v.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(l=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),l!==v.state&&Xu.enqueueReplaceState(v,v.state,null),$u(a,f,v,g),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308)}function jo(a,l){try{var f="",g=l;do f+=ke(g),g=g.return;while(g);var v=f}catch(w){v=`
Error generating stack: `+w.message+`
`+w.stack}return{value:a,source:l,stack:v,digest:null}}function Ap(a,l,f){return{value:a,source:null,stack:f??null,digest:l??null}}function Cp(a,l){try{console.error(l.value)}catch(f){setTimeout(function(){throw f})}}var CI=typeof WeakMap=="function"?WeakMap:Map;function dw(a,l,f){f=Gr(-1,f),f.tag=3,f.payload={element:null};var g=l.value;return f.callback=function(){rd||(rd=!0,$p=g),Cp(a,l)},f}function fw(a,l,f){f=Gr(-1,f),f.tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var v=l.value;f.payload=function(){return g(v)},f.callback=function(){Cp(a,l)}}var w=a.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(f.callback=function(){Cp(a,l),typeof g!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})}),f}function hw(a,l,f){var g=a.pingCache;if(g===null){g=a.pingCache=new CI;var v=new Set;g.set(l,v)}else v=g.get(l),v===void 0&&(v=new Set,g.set(l,v));v.has(f)||(v.add(f),a=zI.bind(null,a,l,f),l.then(a,a))}function pw(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function gw(a,l,f,g,v){return a.mode&1?(a.flags|=65536,a.lanes=v,a):(a===l?a.flags|=65536:(a.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(l=Gr(-1,1),l.tag=2,ks(f,l,1))),f.lanes|=1),a)}var RI=I.ReactCurrentOwner,ln=!1;function Xt(a,l,f,g){l.child=a===null?N_(l,null,f,g):Io(l,a.child,f,g)}function mw(a,l,f,g,v){f=f.render;var w=l.ref;return Lo(l,v),g=_p(a,l,f,g,w,v),f=wp(),a!==null&&!ln?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~v,Wr(a,l,v)):(it&&f&&np(l),l.flags|=1,Xt(a,l,g,v),l.child)}function vw(a,l,f,g,v){if(a===null){var w=f.type;return typeof w=="function"&&!Xp(w)&&w.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(l.tag=15,l.type=w,yw(a,l,w,g,v)):(a=cd(f.type,null,g,l,l.mode,v),a.ref=l.ref,a.return=l,l.child=a)}if(w=a.child,!(a.lanes&v)){var A=w.memoizedProps;if(f=f.compare,f=f!==null?f:ml,f(A,g)&&a.ref===l.ref)return Wr(a,l,v)}return l.flags|=1,a=js(w,g),a.ref=l.ref,a.return=l,l.child=a}function yw(a,l,f,g,v){if(a!==null){var w=a.memoizedProps;if(ml(w,g)&&a.ref===l.ref)if(ln=!1,l.pendingProps=g=w,(a.lanes&v)!==0)a.flags&131072&&(ln=!0);else return l.lanes=a.lanes,Wr(a,l,v)}return Rp(a,l,f,g,v)}function _w(a,l,f){var g=l.pendingProps,v=g.children,w=a!==null?a.memoizedState:null;if(g.mode==="hidden")if(!(l.mode&1))l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Fo,_n),_n|=f;else{if(!(f&1073741824))return a=w!==null?w.baseLanes|f:f,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,Ye(Fo,_n),_n|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=w!==null?w.baseLanes:f,Ye(Fo,_n),_n|=g}else w!==null?(g=w.baseLanes|f,l.memoizedState=null):g=f,Ye(Fo,_n),_n|=g;return Xt(a,l,v,f),l.child}function ww(a,l){var f=l.ref;(a===null&&f!==null||a!==null&&a.ref!==f)&&(l.flags|=512,l.flags|=2097152)}function Rp(a,l,f,g,v){var w=an(f)?yi:zt.current;return w=Co(l,w),Lo(l,v),f=_p(a,l,f,g,w,v),g=wp(),a!==null&&!ln?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~v,Wr(a,l,v)):(it&&g&&np(l),l.flags|=1,Xt(a,l,f,v),l.child)}function bw(a,l,f,g,v){if(an(f)){var w=!0;Lu(l)}else w=!1;if(Lo(l,v),l.stateNode===null)Qu(a,l),cw(l,f,g),Pp(l,f,g,v),g=!0;else if(a===null){var A=l.stateNode,L=l.memoizedProps;A.props=L;var j=A.context,q=f.contextType;typeof q=="object"&&q!==null?q=Nn(q):(q=an(f)?yi:zt.current,q=Co(l,q));var ne=f.getDerivedStateFromProps,re=typeof ne=="function"||typeof A.getSnapshotBeforeUpdate=="function";re||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(L!==g||j!==q)&&uw(l,A,g,q),Rs=!1;var J=l.memoizedState;A.state=J,$u(l,g,A,v),j=l.memoizedState,L!==g||J!==j||on.current||Rs?(typeof ne=="function"&&(Sp(l,f,ne,g),j=l.memoizedState),(L=Rs||lw(l,f,L,g,J,j,q))?(re||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(l.flags|=4194308)):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=j),A.props=g,A.state=j,A.context=q,g=L):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{A=l.stateNode,D_(a,l),L=l.memoizedProps,q=l.type===l.elementType?L:Yn(l.type,L),A.props=q,re=l.pendingProps,J=A.context,j=f.contextType,typeof j=="object"&&j!==null?j=Nn(j):(j=an(f)?yi:zt.current,j=Co(l,j));var he=f.getDerivedStateFromProps;(ne=typeof he=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(L!==re||J!==j)&&uw(l,A,g,j),Rs=!1,J=l.memoizedState,A.state=J,$u(l,g,A,v);var me=l.memoizedState;L!==re||J!==me||on.current||Rs?(typeof he=="function"&&(Sp(l,f,he,g),me=l.memoizedState),(q=Rs||lw(l,f,q,g,J,me,j)||!1)?(ne||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(g,me,j),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(g,me,j)),typeof A.componentDidUpdate=="function"&&(l.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof A.componentDidUpdate!="function"||L===a.memoizedProps&&J===a.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||L===a.memoizedProps&&J===a.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=me),A.props=g,A.state=me,A.context=j,g=q):(typeof A.componentDidUpdate!="function"||L===a.memoizedProps&&J===a.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||L===a.memoizedProps&&J===a.memoizedState||(l.flags|=1024),g=!1)}return kp(a,l,f,g,w,v)}function kp(a,l,f,g,v,w){ww(a,l);var A=(l.flags&128)!==0;if(!g&&!A)return v&&P_(l,f,!1),Wr(a,l,w);g=l.stateNode,RI.current=l;var L=A&&typeof f.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,a!==null&&A?(l.child=Io(l,a.child,null,w),l.child=Io(l,null,L,w)):Xt(a,l,L,w),l.memoizedState=g.state,v&&P_(l,f,!0),l.child}function xw(a){var l=a.stateNode;l.pendingContext?T_(a,l.pendingContext,l.pendingContext!==l.context):l.context&&T_(a,l.context,!1),hp(a,l.containerInfo)}function Ew(a,l,f,g,v){return Mo(),op(v),l.flags|=256,Xt(a,l,f,g),l.child}var Mp={dehydrated:null,treeContext:null,retryLane:0};function Ip(a){return{baseLanes:a,cachePool:null,transitions:null}}function Tw(a,l,f){var g=l.pendingProps,v=at.current,w=!1,A=(l.flags&128)!==0,L;if((L=A)||(L=a!==null&&a.memoizedState===null?!1:(v&2)!==0),L?(w=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(v|=1),Ye(at,v&1),a===null)return ip(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(l.mode&1?a.data==="$!"?l.lanes=8:l.lanes=1073741824:l.lanes=1,null):(A=g.children,a=g.fallback,w?(g=l.mode,w=l.child,A={mode:"hidden",children:A},!(g&1)&&w!==null?(w.childLanes=0,w.pendingProps=A):w=ud(A,g,0,null),a=Ci(a,g,f,null),w.return=l,a.return=l,w.sibling=a,l.child=w,l.child.memoizedState=Ip(f),l.memoizedState=Mp,a):Op(l,A));if(v=a.memoizedState,v!==null&&(L=v.dehydrated,L!==null))return kI(a,l,A,g,L,v,f);if(w){w=g.fallback,A=l.mode,v=a.child,L=v.sibling;var j={mode:"hidden",children:g.children};return!(A&1)&&l.child!==v?(g=l.child,g.childLanes=0,g.pendingProps=j,l.deletions=null):(g=js(v,j),g.subtreeFlags=v.subtreeFlags&14680064),L!==null?w=js(L,w):(w=Ci(w,A,f,null),w.flags|=2),w.return=l,g.return=l,g.sibling=w,l.child=g,g=w,w=l.child,A=a.child.memoizedState,A=A===null?Ip(f):{baseLanes:A.baseLanes|f,cachePool:null,transitions:A.transitions},w.memoizedState=A,w.childLanes=a.childLanes&~f,l.memoizedState=Mp,g}return w=a.child,a=w.sibling,g=js(w,{mode:"visible",children:g.children}),!(l.mode&1)&&(g.lanes=f),g.return=l,g.sibling=null,a!==null&&(f=l.deletions,f===null?(l.deletions=[a],l.flags|=16):f.push(a)),l.child=g,l.memoizedState=null,g}function Op(a,l){return l=ud({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function Zu(a,l,f,g){return g!==null&&op(g),Io(l,a.child,null,f),a=Op(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function kI(a,l,f,g,v,w,A){if(f)return l.flags&256?(l.flags&=-257,g=Ap(Error(n(422))),Zu(a,l,A,g)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(w=g.fallback,v=l.mode,g=ud({mode:"visible",children:g.children},v,0,null),w=Ci(w,v,A,null),w.flags|=2,g.return=l,w.return=l,g.sibling=w,l.child=g,l.mode&1&&Io(l,a.child,null,A),l.child.memoizedState=Ip(A),l.memoizedState=Mp,w);if(!(l.mode&1))return Zu(a,l,A,null);if(v.data==="$!"){if(g=v.nextSibling&&v.nextSibling.dataset,g)var L=g.dgst;return g=L,w=Error(n(419)),g=Ap(w,g,void 0),Zu(a,l,A,g)}if(L=(A&a.childLanes)!==0,ln||L){if(g=kt,g!==null){switch(A&-A){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=v&(g.suspendedLanes|A)?0:v,v!==0&&v!==w.retryLane&&(w.retryLane=v,$r(a,v),Qn(g,a,v,-1))}return Yp(),g=Ap(Error(n(421))),Zu(a,l,A,g)}return v.data==="$?"?(l.flags|=128,l.child=a.child,l=$I.bind(null,a),v._reactRetry=l,null):(a=w.treeContext,yn=Ss(v.nextSibling),vn=l,it=!0,Kn=null,a!==null&&(On[Ln++]=Vr,On[Ln++]=zr,On[Ln++]=_i,Vr=a.id,zr=a.overflow,_i=l),l=Op(l,g.children),l.flags|=4096,l)}function Sw(a,l,f){a.lanes|=l;var g=a.alternate;g!==null&&(g.lanes|=l),up(a.return,l,f)}function Lp(a,l,f,g,v){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:v}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=g,w.tail=f,w.tailMode=v)}function Pw(a,l,f){var g=l.pendingProps,v=g.revealOrder,w=g.tail;if(Xt(a,l,g.children,f),g=at.current,g&2)g=g&1|2,l.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Sw(a,f,l);else if(a.tag===19)Sw(a,f,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(Ye(at,g),!(l.mode&1))l.memoizedState=null;else switch(v){case"forwards":for(f=l.child,v=null;f!==null;)a=f.alternate,a!==null&&Gu(a)===null&&(v=f),f=f.sibling;f=v,f===null?(v=l.child,l.child=null):(v=f.sibling,f.sibling=null),Lp(l,!1,v,f,w);break;case"backwards":for(f=null,v=l.child,l.child=null;v!==null;){if(a=v.alternate,a!==null&&Gu(a)===null){l.child=v;break}a=v.sibling,v.sibling=f,f=v,v=a}Lp(l,!0,f,null,w);break;case"together":Lp(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Qu(a,l){!(l.mode&1)&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function Wr(a,l,f){if(a!==null&&(l.dependencies=a.dependencies),Ti|=l.lanes,!(f&l.childLanes))return null;if(a!==null&&l.child!==a.child)throw Error(n(153));if(l.child!==null){for(a=l.child,f=js(a,a.pendingProps),l.child=f,f.return=l;a.sibling!==null;)a=a.sibling,f=f.sibling=js(a,a.pendingProps),f.return=l;f.sibling=null}return l.child}function MI(a,l,f){switch(l.tag){case 3:xw(l),Mo();break;case 5:U_(l);break;case 1:an(l.type)&&Lu(l);break;case 4:hp(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,v=l.memoizedProps.value;Ye(Uu,g._currentValue),g._currentValue=v;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(Ye(at,at.current&1),l.flags|=128,null):f&l.child.childLanes?Tw(a,l,f):(Ye(at,at.current&1),a=Wr(a,l,f),a!==null?a.sibling:null);Ye(at,at.current&1);break;case 19:if(g=(f&l.childLanes)!==0,a.flags&128){if(g)return Pw(a,l,f);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Ye(at,at.current),g)break;return null;case 22:case 23:return l.lanes=0,_w(a,l,f)}return Wr(a,l,f)}var Aw,Np,Cw,Rw;Aw=function(a,l){for(var f=l.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Np=function(){},Cw=function(a,l,f,g){var v=a.memoizedProps;if(v!==g){a=l.stateNode,xi(pr.current);var w=null;switch(f){case"input":v=vt(a,v),g=vt(a,g),w=[];break;case"select":v=Z({},v,{value:void 0}),g=Z({},g,{value:void 0}),w=[];break;case"textarea":v=Ya(a,v),g=Ya(a,g),w=[];break;default:typeof v.onClick!="function"&&typeof g.onClick=="function"&&(a.onclick=Mu)}Qa(f,g);var A;f=null;for(q in v)if(!g.hasOwnProperty(q)&&v.hasOwnProperty(q)&&v[q]!=null)if(q==="style"){var L=v[q];for(A in L)L.hasOwnProperty(A)&&(f||(f={}),f[A]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(s.hasOwnProperty(q)?w||(w=[]):(w=w||[]).push(q,null));for(q in g){var j=g[q];if(L=v!=null?v[q]:void 0,g.hasOwnProperty(q)&&j!==L&&(j!=null||L!=null))if(q==="style")if(L){for(A in L)!L.hasOwnProperty(A)||j&&j.hasOwnProperty(A)||(f||(f={}),f[A]="");for(A in j)j.hasOwnProperty(A)&&L[A]!==j[A]&&(f||(f={}),f[A]=j[A])}else f||(w||(w=[]),w.push(q,f)),f=j;else q==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,L=L?L.__html:void 0,j!=null&&L!==j&&(w=w||[]).push(q,j)):q==="children"?typeof j!="string"&&typeof j!="number"||(w=w||[]).push(q,""+j):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(s.hasOwnProperty(q)?(j!=null&&q==="onScroll"&&Je("scroll",a),w||L===j||(w=[])):(w=w||[]).push(q,j))}f&&(w=w||[]).push("style",f);var q=w;(l.updateQueue=q)&&(l.flags|=4)}},Rw=function(a,l,f,g){f!==g&&(l.flags|=4)};function Ml(a,l){if(!it)switch(a.tailMode){case"hidden":l=a.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function Gt(a){var l=a.alternate!==null&&a.alternate.child===a.child,f=0,g=0;if(l)for(var v=a.child;v!==null;)f|=v.lanes|v.childLanes,g|=v.subtreeFlags&14680064,g|=v.flags&14680064,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)f|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=g,a.childLanes=f,l}function II(a,l,f){var g=l.pendingProps;switch(rp(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(l),null;case 1:return an(l.type)&&Ou(),Gt(l),null;case 3:return g=l.stateNode,No(),et(on),et(zt),mp(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(a===null||a.child===null)&&(Fu(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&!(l.flags&256)||(l.flags|=1024,Kn!==null&&(Hp(Kn),Kn=null))),Np(a,l),Gt(l),null;case 5:pp(l);var v=xi(Pl.current);if(f=l.type,a!==null&&l.stateNode!=null)Cw(a,l,f,g,v),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(n(166));return Gt(l),null}if(a=xi(pr.current),Fu(l)){g=l.stateNode,f=l.type;var w=l.memoizedProps;switch(g[hr]=l,g[bl]=w,a=(l.mode&1)!==0,f){case"dialog":Je("cancel",g),Je("close",g);break;case"iframe":case"object":case"embed":Je("load",g);break;case"video":case"audio":for(v=0;v<yl.length;v++)Je(yl[v],g);break;case"source":Je("error",g);break;case"img":case"image":case"link":Je("error",g),Je("load",g);break;case"details":Je("toggle",g);break;case"input":tn(g,w),Je("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!w.multiple},Je("invalid",g);break;case"textarea":iu(g,w),Je("invalid",g)}Qa(f,w),v=null;for(var A in w)if(w.hasOwnProperty(A)){var L=w[A];A==="children"?typeof L=="string"?g.textContent!==L&&(w.suppressHydrationWarning!==!0&&ku(g.textContent,L,a),v=["children",L]):typeof L=="number"&&g.textContent!==""+L&&(w.suppressHydrationWarning!==!0&&ku(g.textContent,L,a),v=["children",""+L]):s.hasOwnProperty(A)&&L!=null&&A==="onScroll"&&Je("scroll",g)}switch(f){case"input":Ne(g),ui(g,w,!0);break;case"textarea":Ne(g),au(g);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(g.onclick=Mu)}g=v,l.updateQueue=g,g!==null&&(l.flags|=4)}else{A=v.nodeType===9?v:v.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=lu(f)),a==="http://www.w3.org/1999/xhtml"?f==="script"?(a=A.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof g.is=="string"?a=A.createElement(f,{is:g.is}):(a=A.createElement(f),f==="select"&&(A=a,g.multiple?A.multiple=!0:g.size&&(A.size=g.size))):a=A.createElementNS(a,f),a[hr]=l,a[bl]=g,Aw(a,l,!1,!1),l.stateNode=a;e:{switch(A=Ja(f,g),f){case"dialog":Je("cancel",a),Je("close",a),v=g;break;case"iframe":case"object":case"embed":Je("load",a),v=g;break;case"video":case"audio":for(v=0;v<yl.length;v++)Je(yl[v],a);v=g;break;case"source":Je("error",a),v=g;break;case"img":case"image":case"link":Je("error",a),Je("load",a),v=g;break;case"details":Je("toggle",a),v=g;break;case"input":tn(a,g),v=vt(a,g),Je("invalid",a);break;case"option":v=g;break;case"select":a._wrapperState={wasMultiple:!!g.multiple},v=Z({},g,{value:void 0}),Je("invalid",a);break;case"textarea":iu(a,g),v=Ya(a,g),Je("invalid",a);break;default:v=g}Qa(f,v),L=v;for(w in L)if(L.hasOwnProperty(w)){var j=L[w];w==="style"?uu(a,j):w==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&Xa(a,j)):w==="children"?typeof j=="string"?(f!=="textarea"||j!=="")&&ds(a,j):typeof j=="number"&&ds(a,""+j):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?j!=null&&w==="onScroll"&&Je("scroll",a):j!=null&&C(a,w,j,A))}switch(f){case"input":Ne(a),ui(a,g,!1);break;case"textarea":Ne(a),au(a);break;case"option":g.value!=null&&a.setAttribute("value",""+pe(g.value));break;case"select":a.multiple=!!g.multiple,w=g.value,w!=null?bt(a,!!g.multiple,w,!1):g.defaultValue!=null&&bt(a,!!g.multiple,g.defaultValue,!0);break;default:typeof v.onClick=="function"&&(a.onclick=Mu)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Gt(l),null;case 6:if(a&&l.stateNode!=null)Rw(a,l,a.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(n(166));if(f=xi(Pl.current),xi(pr.current),Fu(l)){if(g=l.stateNode,f=l.memoizedProps,g[hr]=l,(w=g.nodeValue!==f)&&(a=vn,a!==null))switch(a.tag){case 3:ku(g.nodeValue,f,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&ku(g.nodeValue,f,(a.mode&1)!==0)}w&&(l.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[hr]=l,l.stateNode=g}return Gt(l),null;case 13:if(et(at),g=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(it&&yn!==null&&l.mode&1&&!(l.flags&128))I_(),Mo(),l.flags|=98560,w=!1;else if(w=Fu(l),g!==null&&g.dehydrated!==null){if(a===null){if(!w)throw Error(n(318));if(w=l.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(n(317));w[hr]=l}else Mo(),!(l.flags&128)&&(l.memoizedState=null),l.flags|=4;Gt(l),w=!1}else Kn!==null&&(Hp(Kn),Kn=null),w=!0;if(!w)return l.flags&65536?l:null}return l.flags&128?(l.lanes=f,l):(g=g!==null,g!==(a!==null&&a.memoizedState!==null)&&g&&(l.child.flags|=8192,l.mode&1&&(a===null||at.current&1?Tt===0&&(Tt=3):Yp())),l.updateQueue!==null&&(l.flags|=4),Gt(l),null);case 4:return No(),Np(a,l),a===null&&_l(l.stateNode.containerInfo),Gt(l),null;case 10:return cp(l.type._context),Gt(l),null;case 17:return an(l.type)&&Ou(),Gt(l),null;case 19:if(et(at),w=l.memoizedState,w===null)return Gt(l),null;if(g=(l.flags&128)!==0,A=w.rendering,A===null)if(g)Ml(w,!1);else{if(Tt!==0||a!==null&&a.flags&128)for(a=l.child;a!==null;){if(A=Gu(a),A!==null){for(l.flags|=128,Ml(w,!1),g=A.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=f,f=l.child;f!==null;)w=f,a=g,w.flags&=14680066,A=w.alternate,A===null?(w.childLanes=0,w.lanes=a,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=A.childLanes,w.lanes=A.lanes,w.child=A.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=A.memoizedProps,w.memoizedState=A.memoizedState,w.updateQueue=A.updateQueue,w.type=A.type,a=A.dependencies,w.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),f=f.sibling;return Ye(at,at.current&1|2),l.child}a=a.sibling}w.tail!==null&&Ke()>Bo&&(l.flags|=128,g=!0,Ml(w,!1),l.lanes=4194304)}else{if(!g)if(a=Gu(A),a!==null){if(l.flags|=128,g=!0,f=a.updateQueue,f!==null&&(l.updateQueue=f,l.flags|=4),Ml(w,!0),w.tail===null&&w.tailMode==="hidden"&&!A.alternate&&!it)return Gt(l),null}else 2*Ke()-w.renderingStartTime>Bo&&f!==1073741824&&(l.flags|=128,g=!0,Ml(w,!1),l.lanes=4194304);w.isBackwards?(A.sibling=l.child,l.child=A):(f=w.last,f!==null?f.sibling=A:l.child=A,w.last=A)}return w.tail!==null?(l=w.tail,w.rendering=l,w.tail=l.sibling,w.renderingStartTime=Ke(),l.sibling=null,f=at.current,Ye(at,g?f&1|2:f&1),l):(Gt(l),null);case 22:case 23:return Kp(),g=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==g&&(l.flags|=8192),g&&l.mode&1?_n&1073741824&&(Gt(l),l.subtreeFlags&6&&(l.flags|=8192)):Gt(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function OI(a,l){switch(rp(l),l.tag){case 1:return an(l.type)&&Ou(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return No(),et(on),et(zt),mp(),a=l.flags,a&65536&&!(a&128)?(l.flags=a&-65537|128,l):null;case 5:return pp(l),null;case 13:if(et(at),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Mo()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return et(at),null;case 4:return No(),null;case 10:return cp(l.type._context),null;case 22:case 23:return Kp(),null;case 24:return null;default:return null}}var Ju=!1,Wt=!1,LI=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Do(a,l){var f=a.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){ut(a,l,g)}else f.current=null}function jp(a,l,f){try{f()}catch(g){ut(a,l,g)}}var kw=!1;function NI(a,l){if(Kh=_u,a=l_(),Uh(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var v=g.anchorOffset,w=g.focusNode;g=g.focusOffset;try{f.nodeType,w.nodeType}catch{f=null;break e}var A=0,L=-1,j=-1,q=0,ne=0,re=a,J=null;t:for(;;){for(var he;re!==f||v!==0&&re.nodeType!==3||(L=A+v),re!==w||g!==0&&re.nodeType!==3||(j=A+g),re.nodeType===3&&(A+=re.nodeValue.length),(he=re.firstChild)!==null;)J=re,re=he;for(;;){if(re===a)break t;if(J===f&&++q===v&&(L=A),J===w&&++ne===g&&(j=A),(he=re.nextSibling)!==null)break;re=J,J=re.parentNode}re=he}f=L===-1||j===-1?null:{start:L,end:j}}else f=null}f=f||{start:0,end:0}}else f=null;for(Yh={focusedElem:a,selectionRange:f},_u=!1,ge=l;ge!==null;)if(l=ge,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,ge=a;else for(;ge!==null;){l=ge;try{var me=l.alternate;if(l.flags&1024)switch(l.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ye=me.memoizedProps,gt=me.memoizedState,z=l.stateNode,B=z.getSnapshotBeforeUpdate(l.elementType===l.type?ye:Yn(l.type,ye),gt);z.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var $=l.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(oe){ut(l,l.return,oe)}if(a=l.sibling,a!==null){a.return=l.return,ge=a;break}ge=l.return}return me=kw,kw=!1,me}function Il(a,l,f){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var v=g=g.next;do{if((v.tag&a)===a){var w=v.destroy;v.destroy=void 0,w!==void 0&&jp(l,f,w)}v=v.next}while(v!==g)}}function ed(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var f=l=l.next;do{if((f.tag&a)===a){var g=f.create;f.destroy=g()}f=f.next}while(f!==l)}}function Dp(a){var l=a.ref;if(l!==null){var f=a.stateNode;switch(a.tag){case 5:a=f;break;default:a=f}typeof l=="function"?l(a):l.current=a}}function Mw(a){var l=a.alternate;l!==null&&(a.alternate=null,Mw(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[hr],delete l[bl],delete l[Jh],delete l[vI],delete l[yI])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Iw(a){return a.tag===5||a.tag===3||a.tag===4}function Ow(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Iw(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Fp(a,l,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?f.nodeType===8?f.parentNode.insertBefore(a,l):f.insertBefore(a,l):(f.nodeType===8?(l=f.parentNode,l.insertBefore(a,f)):(l=f,l.appendChild(a)),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=Mu));else if(g!==4&&(a=a.child,a!==null))for(Fp(a,l,f),a=a.sibling;a!==null;)Fp(a,l,f),a=a.sibling}function Bp(a,l,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?f.insertBefore(a,l):f.appendChild(a);else if(g!==4&&(a=a.child,a!==null))for(Bp(a,l,f),a=a.sibling;a!==null;)Bp(a,l,f),a=a.sibling}var Nt=null,Xn=!1;function Ms(a,l,f){for(f=f.child;f!==null;)Lw(a,l,f),f=f.sibling}function Lw(a,l,f){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(sn,f)}catch{}switch(f.tag){case 5:Wt||Do(f,l);case 6:var g=Nt,v=Xn;Nt=null,Ms(a,l,f),Nt=g,Xn=v,Nt!==null&&(Xn?(a=Nt,f=f.stateNode,a.nodeType===8?a.parentNode.removeChild(f):a.removeChild(f)):Nt.removeChild(f.stateNode));break;case 18:Nt!==null&&(Xn?(a=Nt,f=f.stateNode,a.nodeType===8?Qh(a.parentNode,f):a.nodeType===1&&Qh(a,f),ul(a)):Qh(Nt,f.stateNode));break;case 4:g=Nt,v=Xn,Nt=f.stateNode.containerInfo,Xn=!0,Ms(a,l,f),Nt=g,Xn=v;break;case 0:case 11:case 14:case 15:if(!Wt&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){v=g=g.next;do{var w=v,A=w.destroy;w=w.tag,A!==void 0&&(w&2||w&4)&&jp(f,l,A),v=v.next}while(v!==g)}Ms(a,l,f);break;case 1:if(!Wt&&(Do(f,l),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(L){ut(f,l,L)}Ms(a,l,f);break;case 21:Ms(a,l,f);break;case 22:f.mode&1?(Wt=(g=Wt)||f.memoizedState!==null,Ms(a,l,f),Wt=g):Ms(a,l,f);break;default:Ms(a,l,f)}}function Nw(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var f=a.stateNode;f===null&&(f=a.stateNode=new LI),l.forEach(function(g){var v=GI.bind(null,a,g);f.has(g)||(f.add(g),g.then(v,v))})}}function Zn(a,l){var f=l.deletions;if(f!==null)for(var g=0;g<f.length;g++){var v=f[g];try{var w=a,A=l,L=A;e:for(;L!==null;){switch(L.tag){case 5:Nt=L.stateNode,Xn=!1;break e;case 3:Nt=L.stateNode.containerInfo,Xn=!0;break e;case 4:Nt=L.stateNode.containerInfo,Xn=!0;break e}L=L.return}if(Nt===null)throw Error(n(160));Lw(w,A,v),Nt=null,Xn=!1;var j=v.alternate;j!==null&&(j.return=null),v.return=null}catch(q){ut(v,l,q)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)jw(l,a),l=l.sibling}function jw(a,l){var f=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Zn(l,a),mr(a),g&4){try{Il(3,a,a.return),ed(3,a)}catch(ye){ut(a,a.return,ye)}try{Il(5,a,a.return)}catch(ye){ut(a,a.return,ye)}}break;case 1:Zn(l,a),mr(a),g&512&&f!==null&&Do(f,f.return);break;case 5:if(Zn(l,a),mr(a),g&512&&f!==null&&Do(f,f.return),a.flags&32){var v=a.stateNode;try{ds(v,"")}catch(ye){ut(a,a.return,ye)}}if(g&4&&(v=a.stateNode,v!=null)){var w=a.memoizedProps,A=f!==null?f.memoizedProps:w,L=a.type,j=a.updateQueue;if(a.updateQueue=null,j!==null)try{L==="input"&&w.type==="radio"&&w.name!=null&&wt(v,w),Ja(L,A);var q=Ja(L,w);for(A=0;A<j.length;A+=2){var ne=j[A],re=j[A+1];ne==="style"?uu(v,re):ne==="dangerouslySetInnerHTML"?Xa(v,re):ne==="children"?ds(v,re):C(v,ne,re,q)}switch(L){case"input":Lt(v,w);break;case"textarea":ou(v,w);break;case"select":var J=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!w.multiple;var he=w.value;he!=null?bt(v,!!w.multiple,he,!1):J!==!!w.multiple&&(w.defaultValue!=null?bt(v,!!w.multiple,w.defaultValue,!0):bt(v,!!w.multiple,w.multiple?[]:"",!1))}v[bl]=w}catch(ye){ut(a,a.return,ye)}}break;case 6:if(Zn(l,a),mr(a),g&4){if(a.stateNode===null)throw Error(n(162));v=a.stateNode,w=a.memoizedProps;try{v.nodeValue=w}catch(ye){ut(a,a.return,ye)}}break;case 3:if(Zn(l,a),mr(a),g&4&&f!==null&&f.memoizedState.isDehydrated)try{ul(l.containerInfo)}catch(ye){ut(a,a.return,ye)}break;case 4:Zn(l,a),mr(a);break;case 13:Zn(l,a),mr(a),v=a.child,v.flags&8192&&(w=v.memoizedState!==null,v.stateNode.isHidden=w,!w||v.alternate!==null&&v.alternate.memoizedState!==null||(zp=Ke())),g&4&&Nw(a);break;case 22:if(ne=f!==null&&f.memoizedState!==null,a.mode&1?(Wt=(q=Wt)||ne,Zn(l,a),Wt=q):Zn(l,a),mr(a),g&8192){if(q=a.memoizedState!==null,(a.stateNode.isHidden=q)&&!ne&&a.mode&1)for(ge=a,ne=a.child;ne!==null;){for(re=ge=ne;ge!==null;){switch(J=ge,he=J.child,J.tag){case 0:case 11:case 14:case 15:Il(4,J,J.return);break;case 1:Do(J,J.return);var me=J.stateNode;if(typeof me.componentWillUnmount=="function"){g=J,f=J.return;try{l=g,me.props=l.memoizedProps,me.state=l.memoizedState,me.componentWillUnmount()}catch(ye){ut(g,f,ye)}}break;case 5:Do(J,J.return);break;case 22:if(J.memoizedState!==null){Bw(re);continue}}he!==null?(he.return=J,ge=he):Bw(re)}ne=ne.sibling}e:for(ne=null,re=a;;){if(re.tag===5){if(ne===null){ne=re;try{v=re.stateNode,q?(w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(L=re.stateNode,j=re.memoizedProps.style,A=j!=null&&j.hasOwnProperty("display")?j.display:null,L.style.display=cu("display",A))}catch(ye){ut(a,a.return,ye)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=q?"":re.memoizedProps}catch(ye){ut(a,a.return,ye)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===a)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===a)break e;for(;re.sibling===null;){if(re.return===null||re.return===a)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:Zn(l,a),mr(a),g&4&&Nw(a);break;case 21:break;default:Zn(l,a),mr(a)}}function mr(a){var l=a.flags;if(l&2){try{e:{for(var f=a.return;f!==null;){if(Iw(f)){var g=f;break e}f=f.return}throw Error(n(160))}switch(g.tag){case 5:var v=g.stateNode;g.flags&32&&(ds(v,""),g.flags&=-33);var w=Ow(a);Bp(a,w,v);break;case 3:case 4:var A=g.stateNode.containerInfo,L=Ow(a);Fp(a,L,A);break;default:throw Error(n(161))}}catch(j){ut(a,a.return,j)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function jI(a,l,f){ge=a,Dw(a)}function Dw(a,l,f){for(var g=(a.mode&1)!==0;ge!==null;){var v=ge,w=v.child;if(v.tag===22&&g){var A=v.memoizedState!==null||Ju;if(!A){var L=v.alternate,j=L!==null&&L.memoizedState!==null||Wt;L=Ju;var q=Wt;if(Ju=A,(Wt=j)&&!q)for(ge=v;ge!==null;)A=ge,j=A.child,A.tag===22&&A.memoizedState!==null?Uw(v):j!==null?(j.return=A,ge=j):Uw(v);for(;w!==null;)ge=w,Dw(w),w=w.sibling;ge=v,Ju=L,Wt=q}Fw(a)}else v.subtreeFlags&8772&&w!==null?(w.return=v,ge=w):Fw(a)}}function Fw(a){for(;ge!==null;){var l=ge;if(l.flags&8772){var f=l.alternate;try{if(l.flags&8772)switch(l.tag){case 0:case 11:case 15:Wt||ed(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!Wt)if(f===null)g.componentDidMount();else{var v=l.elementType===l.type?f.memoizedProps:Yn(l.type,f.memoizedProps);g.componentDidUpdate(v,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var w=l.updateQueue;w!==null&&B_(l,w,g);break;case 3:var A=l.updateQueue;if(A!==null){if(f=null,l.child!==null)switch(l.child.tag){case 5:f=l.child.stateNode;break;case 1:f=l.child.stateNode}B_(l,A,f)}break;case 5:var L=l.stateNode;if(f===null&&l.flags&4){f=L;var j=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&f.focus();break;case"img":j.src&&(f.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var q=l.alternate;if(q!==null){var ne=q.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&ul(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Wt||l.flags&512&&Dp(l)}catch(J){ut(l,l.return,J)}}if(l===a){ge=null;break}if(f=l.sibling,f!==null){f.return=l.return,ge=f;break}ge=l.return}}function Bw(a){for(;ge!==null;){var l=ge;if(l===a){ge=null;break}var f=l.sibling;if(f!==null){f.return=l.return,ge=f;break}ge=l.return}}function Uw(a){for(;ge!==null;){var l=ge;try{switch(l.tag){case 0:case 11:case 15:var f=l.return;try{ed(4,l)}catch(j){ut(l,f,j)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var v=l.return;try{g.componentDidMount()}catch(j){ut(l,v,j)}}var w=l.return;try{Dp(l)}catch(j){ut(l,w,j)}break;case 5:var A=l.return;try{Dp(l)}catch(j){ut(l,A,j)}}}catch(j){ut(l,l.return,j)}if(l===a){ge=null;break}var L=l.sibling;if(L!==null){L.return=l.return,ge=L;break}ge=l.return}}var DI=Math.ceil,td=I.ReactCurrentDispatcher,Up=I.ReactCurrentOwner,Dn=I.ReactCurrentBatchConfig,Ve=0,kt=null,_t=null,jt=0,_n=0,Fo=Ps(0),Tt=0,Ol=null,Ti=0,nd=0,Vp=0,Ll=null,cn=null,zp=0,Bo=1/0,Hr=null,rd=!1,$p=null,Is=null,sd=!1,Os=null,id=0,Nl=0,Gp=null,od=-1,ad=0;function Zt(){return Ve&6?Ke():od!==-1?od:od=Ke()}function Ls(a){return a.mode&1?Ve&2&&jt!==0?jt&-jt:wI.transition!==null?(ad===0&&(ad=vo()),ad):(a=M,a!==0||(a=window.event,a=a===void 0?16:zy(a.type)),a):1}function Qn(a,l,f,g){if(50<Nl)throw Nl=0,Gp=null,Error(n(185));mi(a,f,g),(!(Ve&2)||a!==kt)&&(a===kt&&(!(Ve&2)&&(nd|=f),Tt===4&&Ns(a,jt)),un(a,g),f===1&&Ve===0&&!(l.mode&1)&&(Bo=Ke()+500,Nu&&Cs()))}function un(a,l){var f=a.callbackNode;Ah(a,l);var g=Fr(a,a===kt?jt:0);if(g===0)f!==null&&po(f),a.callbackNode=null,a.callbackPriority=0;else if(l=g&-g,a.callbackPriority!==l){if(f!=null&&po(f),l===1)a.tag===0?_I(zw.bind(null,a)):A_(zw.bind(null,a)),gI(function(){!(Ve&6)&&Cs()}),f=null;else{switch(N(g)){case 1:f=dr;break;case 4:f=Hn;break;case 16:f=rn;break;case 536870912:f=hn;break;default:f=rn}f=Xw(f,Vw.bind(null,a))}a.callbackPriority=l,a.callbackNode=f}}function Vw(a,l){if(od=-1,ad=0,Ve&6)throw Error(n(327));var f=a.callbackNode;if(Uo()&&a.callbackNode!==f)return null;var g=Fr(a,a===kt?jt:0);if(g===0)return null;if(g&30||g&a.expiredLanes||l)l=ld(a,g);else{l=g;var v=Ve;Ve|=2;var w=Gw();(kt!==a||jt!==l)&&(Hr=null,Bo=Ke()+500,Pi(a,l));do try{UI();break}catch(L){$w(a,L)}while(!0);lp(),td.current=w,Ve=v,_t!==null?l=0:(kt=null,jt=0,l=Tt)}if(l!==0){if(l===2&&(v=mo(a),v!==0&&(g=v,l=Wp(a,v))),l===1)throw f=Ol,Pi(a,0),Ns(a,g),un(a,Ke()),f;if(l===6)Ns(a,g);else{if(v=a.current.alternate,!(g&30)&&!FI(v)&&(l=ld(a,g),l===2&&(w=mo(a),w!==0&&(g=w,l=Wp(a,w))),l===1))throw f=Ol,Pi(a,0),Ns(a,g),un(a,Ke()),f;switch(a.finishedWork=v,a.finishedLanes=g,l){case 0:case 1:throw Error(n(345));case 2:Ai(a,cn,Hr);break;case 3:if(Ns(a,g),(g&130023424)===g&&(l=zp+500-Ke(),10<l)){if(Fr(a,0)!==0)break;if(v=a.suspendedLanes,(v&g)!==g){Zt(),a.pingedLanes|=a.suspendedLanes&v;break}a.timeoutHandle=Zh(Ai.bind(null,a,cn,Hr),l);break}Ai(a,cn,Hr);break;case 4:if(Ns(a,g),(g&4194240)===g)break;for(l=a.eventTimes,v=-1;0<g;){var A=31-Vt(g);w=1<<A,A=l[A],A>v&&(v=A),g&=~w}if(g=v,g=Ke()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*DI(g/1960))-g,10<g){a.timeoutHandle=Zh(Ai.bind(null,a,cn,Hr),g);break}Ai(a,cn,Hr);break;case 5:Ai(a,cn,Hr);break;default:throw Error(n(329))}}}return un(a,Ke()),a.callbackNode===f?Vw.bind(null,a):null}function Wp(a,l){var f=Ll;return a.current.memoizedState.isDehydrated&&(Pi(a,l).flags|=256),a=ld(a,l),a!==2&&(l=cn,cn=f,l!==null&&Hp(l)),a}function Hp(a){cn===null?cn=a:cn.push.apply(cn,a)}function FI(a){for(var l=a;;){if(l.flags&16384){var f=l.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var v=f[g],w=v.getSnapshot;v=v.value;try{if(!qn(w(),v))return!1}catch{return!1}}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ns(a,l){for(l&=~Vp,l&=~nd,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var f=31-Vt(l),g=1<<f;a[f]=-1,l&=~g}}function zw(a){if(Ve&6)throw Error(n(327));Uo();var l=Fr(a,0);if(!(l&1))return un(a,Ke()),null;var f=ld(a,l);if(a.tag!==0&&f===2){var g=mo(a);g!==0&&(l=g,f=Wp(a,g))}if(f===1)throw f=Ol,Pi(a,0),Ns(a,l),un(a,Ke()),f;if(f===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,Ai(a,cn,Hr),un(a,Ke()),null}function qp(a,l){var f=Ve;Ve|=1;try{return a(l)}finally{Ve=f,Ve===0&&(Bo=Ke()+500,Nu&&Cs())}}function Si(a){Os!==null&&Os.tag===0&&!(Ve&6)&&Uo();var l=Ve;Ve|=1;var f=Dn.transition,g=M;try{if(Dn.transition=null,M=1,a)return a()}finally{M=g,Dn.transition=f,Ve=l,!(Ve&6)&&Cs()}}function Kp(){_n=Fo.current,et(Fo)}function Pi(a,l){a.finishedWork=null,a.finishedLanes=0;var f=a.timeoutHandle;if(f!==-1&&(a.timeoutHandle=-1,pI(f)),_t!==null)for(f=_t.return;f!==null;){var g=f;switch(rp(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Ou();break;case 3:No(),et(on),et(zt),mp();break;case 5:pp(g);break;case 4:No();break;case 13:et(at);break;case 19:et(at);break;case 10:cp(g.type._context);break;case 22:case 23:Kp()}f=f.return}if(kt=a,_t=a=js(a.current,null),jt=_n=l,Tt=0,Ol=null,Vp=nd=Ti=0,cn=Ll=null,bi!==null){for(l=0;l<bi.length;l++)if(f=bi[l],g=f.interleaved,g!==null){f.interleaved=null;var v=g.next,w=f.pending;if(w!==null){var A=w.next;w.next=v,g.next=A}f.pending=g}bi=null}return a}function $w(a,l){do{var f=_t;try{if(lp(),Wu.current=Yu,Hu){for(var g=lt.memoizedState;g!==null;){var v=g.queue;v!==null&&(v.pending=null),g=g.next}Hu=!1}if(Ei=0,Rt=Et=lt=null,Al=!1,Cl=0,Up.current=null,f===null||f.return===null){Tt=1,Ol=l,_t=null;break}e:{var w=a,A=f.return,L=f,j=l;if(l=jt,L.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var q=j,ne=L,re=ne.tag;if(!(ne.mode&1)&&(re===0||re===11||re===15)){var J=ne.alternate;J?(ne.updateQueue=J.updateQueue,ne.memoizedState=J.memoizedState,ne.lanes=J.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var he=pw(A);if(he!==null){he.flags&=-257,gw(he,A,L,w,l),he.mode&1&&hw(w,q,l),l=he,j=q;var me=l.updateQueue;if(me===null){var ye=new Set;ye.add(j),l.updateQueue=ye}else me.add(j);break e}else{if(!(l&1)){hw(w,q,l),Yp();break e}j=Error(n(426))}}else if(it&&L.mode&1){var gt=pw(A);if(gt!==null){!(gt.flags&65536)&&(gt.flags|=256),gw(gt,A,L,w,l),op(jo(j,L));break e}}w=j=jo(j,L),Tt!==4&&(Tt=2),Ll===null?Ll=[w]:Ll.push(w),w=A;do{switch(w.tag){case 3:w.flags|=65536,l&=-l,w.lanes|=l;var z=dw(w,j,l);F_(w,z);break e;case 1:L=j;var B=w.type,$=w.stateNode;if(!(w.flags&128)&&(typeof B.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Is===null||!Is.has($)))){w.flags|=65536,l&=-l,w.lanes|=l;var oe=fw(w,L,l);F_(w,oe);break e}}w=w.return}while(w!==null)}Hw(f)}catch(we){l=we,_t===f&&f!==null&&(_t=f=f.return);continue}break}while(!0)}function Gw(){var a=td.current;return td.current=Yu,a===null?Yu:a}function Yp(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),kt===null||!(Ti&268435455)&&!(nd&268435455)||Ns(kt,jt)}function ld(a,l){var f=Ve;Ve|=2;var g=Gw();(kt!==a||jt!==l)&&(Hr=null,Pi(a,l));do try{BI();break}catch(v){$w(a,v)}while(!0);if(lp(),Ve=f,td.current=g,_t!==null)throw Error(n(261));return kt=null,jt=0,Tt}function BI(){for(;_t!==null;)Ww(_t)}function UI(){for(;_t!==null&&!Sh();)Ww(_t)}function Ww(a){var l=Yw(a.alternate,a,_n);a.memoizedProps=a.pendingProps,l===null?Hw(a):_t=l,Up.current=null}function Hw(a){var l=a;do{var f=l.alternate;if(a=l.return,l.flags&32768){if(f=OI(f,l),f!==null){f.flags&=32767,_t=f;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Tt=6,_t=null;return}}else if(f=II(f,l,_n),f!==null){_t=f;return}if(l=l.sibling,l!==null){_t=l;return}_t=l=a}while(l!==null);Tt===0&&(Tt=5)}function Ai(a,l,f){var g=M,v=Dn.transition;try{Dn.transition=null,M=1,VI(a,l,f,g)}finally{Dn.transition=v,M=g}return null}function VI(a,l,f,g){do Uo();while(Os!==null);if(Ve&6)throw Error(n(327));f=a.finishedWork;var v=a.finishedLanes;if(f===null)return null;if(a.finishedWork=null,a.finishedLanes=0,f===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var w=f.lanes|f.childLanes;if(Ch(a,w),a===kt&&(_t=kt=null,jt=0),!(f.subtreeFlags&2064)&&!(f.flags&2064)||sd||(sd=!0,Xw(rn,function(){return Uo(),null})),w=(f.flags&15990)!==0,f.subtreeFlags&15990||w){w=Dn.transition,Dn.transition=null;var A=M;M=1;var L=Ve;Ve|=4,Up.current=null,NI(a,f),jw(f,a),aI(Yh),_u=!!Kh,Yh=Kh=null,a.current=f,jI(f),Ph(),Ve=L,M=A,Dn.transition=w}else a.current=f;if(sd&&(sd=!1,Os=a,id=v),w=a.pendingLanes,w===0&&(Is=null),vu(f.stateNode),un(a,Ke()),l!==null)for(g=a.onRecoverableError,f=0;f<l.length;f++)v=l[f],g(v.value,{componentStack:v.stack,digest:v.digest});if(rd)throw rd=!1,a=$p,$p=null,a;return id&1&&a.tag!==0&&Uo(),w=a.pendingLanes,w&1?a===Gp?Nl++:(Nl=0,Gp=a):Nl=0,Cs(),null}function Uo(){if(Os!==null){var a=N(id),l=Dn.transition,f=M;try{if(Dn.transition=null,M=16>a?16:a,Os===null)var g=!1;else{if(a=Os,Os=null,id=0,Ve&6)throw Error(n(331));var v=Ve;for(Ve|=4,ge=a.current;ge!==null;){var w=ge,A=w.child;if(ge.flags&16){var L=w.deletions;if(L!==null){for(var j=0;j<L.length;j++){var q=L[j];for(ge=q;ge!==null;){var ne=ge;switch(ne.tag){case 0:case 11:case 15:Il(8,ne,w)}var re=ne.child;if(re!==null)re.return=ne,ge=re;else for(;ge!==null;){ne=ge;var J=ne.sibling,he=ne.return;if(Mw(ne),ne===q){ge=null;break}if(J!==null){J.return=he,ge=J;break}ge=he}}}var me=w.alternate;if(me!==null){var ye=me.child;if(ye!==null){me.child=null;do{var gt=ye.sibling;ye.sibling=null,ye=gt}while(ye!==null)}}ge=w}}if(w.subtreeFlags&2064&&A!==null)A.return=w,ge=A;else e:for(;ge!==null;){if(w=ge,w.flags&2048)switch(w.tag){case 0:case 11:case 15:Il(9,w,w.return)}var z=w.sibling;if(z!==null){z.return=w.return,ge=z;break e}ge=w.return}}var B=a.current;for(ge=B;ge!==null;){A=ge;var $=A.child;if(A.subtreeFlags&2064&&$!==null)$.return=A,ge=$;else e:for(A=B;ge!==null;){if(L=ge,L.flags&2048)try{switch(L.tag){case 0:case 11:case 15:ed(9,L)}}catch(we){ut(L,L.return,we)}if(L===A){ge=null;break e}var oe=L.sibling;if(oe!==null){oe.return=L.return,ge=oe;break e}ge=L.return}}if(Ve=v,Cs(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(sn,a)}catch{}g=!0}return g}finally{M=f,Dn.transition=l}}return!1}function qw(a,l,f){l=jo(f,l),l=dw(a,l,1),a=ks(a,l,1),l=Zt(),a!==null&&(mi(a,1,l),un(a,l))}function ut(a,l,f){if(a.tag===3)qw(a,a,f);else for(;l!==null;){if(l.tag===3){qw(l,a,f);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Is===null||!Is.has(g))){a=jo(f,a),a=fw(l,a,1),l=ks(l,a,1),a=Zt(),l!==null&&(mi(l,1,a),un(l,a));break}}l=l.return}}function zI(a,l,f){var g=a.pingCache;g!==null&&g.delete(l),l=Zt(),a.pingedLanes|=a.suspendedLanes&f,kt===a&&(jt&f)===f&&(Tt===4||Tt===3&&(jt&130023424)===jt&&500>Ke()-zp?Pi(a,0):Vp|=f),un(a,l)}function Kw(a,l){l===0&&(a.mode&1?(l=_s,_s<<=1,!(_s&130023424)&&(_s=4194304)):l=1);var f=Zt();a=$r(a,l),a!==null&&(mi(a,l,f),un(a,f))}function $I(a){var l=a.memoizedState,f=0;l!==null&&(f=l.retryLane),Kw(a,f)}function GI(a,l){var f=0;switch(a.tag){case 13:var g=a.stateNode,v=a.memoizedState;v!==null&&(f=v.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(l),Kw(a,f)}var Yw;Yw=function(a,l,f){if(a!==null)if(a.memoizedProps!==l.pendingProps||on.current)ln=!0;else{if(!(a.lanes&f)&&!(l.flags&128))return ln=!1,MI(a,l,f);ln=!!(a.flags&131072)}else ln=!1,it&&l.flags&1048576&&C_(l,Du,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;Qu(a,l),a=l.pendingProps;var v=Co(l,zt.current);Lo(l,f),v=_p(null,l,g,a,v,f);var w=wp();return l.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,an(g)?(w=!0,Lu(l)):w=!1,l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,fp(l),v.updater=Xu,l.stateNode=v,v._reactInternals=l,Pp(l,g,a,f),l=kp(null,l,g,!0,w,f)):(l.tag=0,it&&w&&np(l),Xt(null,l,v,f),l=l.child),l;case 16:g=l.elementType;e:{switch(Qu(a,l),a=l.pendingProps,v=g._init,g=v(g._payload),l.type=g,v=l.tag=HI(g),a=Yn(g,a),v){case 0:l=Rp(null,l,g,a,f);break e;case 1:l=bw(null,l,g,a,f);break e;case 11:l=mw(null,l,g,a,f);break e;case 14:l=vw(null,l,g,Yn(g.type,a),f);break e}throw Error(n(306,g,""))}return l;case 0:return g=l.type,v=l.pendingProps,v=l.elementType===g?v:Yn(g,v),Rp(a,l,g,v,f);case 1:return g=l.type,v=l.pendingProps,v=l.elementType===g?v:Yn(g,v),bw(a,l,g,v,f);case 3:e:{if(xw(l),a===null)throw Error(n(387));g=l.pendingProps,w=l.memoizedState,v=w.element,D_(a,l),$u(l,g,null,f);var A=l.memoizedState;if(g=A.element,w.isDehydrated)if(w={element:g,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){v=jo(Error(n(423)),l),l=Ew(a,l,g,f,v);break e}else if(g!==v){v=jo(Error(n(424)),l),l=Ew(a,l,g,f,v);break e}else for(yn=Ss(l.stateNode.containerInfo.firstChild),vn=l,it=!0,Kn=null,f=N_(l,null,g,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Mo(),g===v){l=Wr(a,l,f);break e}Xt(a,l,g,f)}l=l.child}return l;case 5:return U_(l),a===null&&ip(l),g=l.type,v=l.pendingProps,w=a!==null?a.memoizedProps:null,A=v.children,Xh(g,v)?A=null:w!==null&&Xh(g,w)&&(l.flags|=32),ww(a,l),Xt(a,l,A,f),l.child;case 6:return a===null&&ip(l),null;case 13:return Tw(a,l,f);case 4:return hp(l,l.stateNode.containerInfo),g=l.pendingProps,a===null?l.child=Io(l,null,g,f):Xt(a,l,g,f),l.child;case 11:return g=l.type,v=l.pendingProps,v=l.elementType===g?v:Yn(g,v),mw(a,l,g,v,f);case 7:return Xt(a,l,l.pendingProps,f),l.child;case 8:return Xt(a,l,l.pendingProps.children,f),l.child;case 12:return Xt(a,l,l.pendingProps.children,f),l.child;case 10:e:{if(g=l.type._context,v=l.pendingProps,w=l.memoizedProps,A=v.value,Ye(Uu,g._currentValue),g._currentValue=A,w!==null)if(qn(w.value,A)){if(w.children===v.children&&!on.current){l=Wr(a,l,f);break e}}else for(w=l.child,w!==null&&(w.return=l);w!==null;){var L=w.dependencies;if(L!==null){A=w.child;for(var j=L.firstContext;j!==null;){if(j.context===g){if(w.tag===1){j=Gr(-1,f&-f),j.tag=2;var q=w.updateQueue;if(q!==null){q=q.shared;var ne=q.pending;ne===null?j.next=j:(j.next=ne.next,ne.next=j),q.pending=j}}w.lanes|=f,j=w.alternate,j!==null&&(j.lanes|=f),up(w.return,f,l),L.lanes|=f;break}j=j.next}}else if(w.tag===10)A=w.type===l.type?null:w.child;else if(w.tag===18){if(A=w.return,A===null)throw Error(n(341));A.lanes|=f,L=A.alternate,L!==null&&(L.lanes|=f),up(A,f,l),A=w.sibling}else A=w.child;if(A!==null)A.return=w;else for(A=w;A!==null;){if(A===l){A=null;break}if(w=A.sibling,w!==null){w.return=A.return,A=w;break}A=A.return}w=A}Xt(a,l,v.children,f),l=l.child}return l;case 9:return v=l.type,g=l.pendingProps.children,Lo(l,f),v=Nn(v),g=g(v),l.flags|=1,Xt(a,l,g,f),l.child;case 14:return g=l.type,v=Yn(g,l.pendingProps),v=Yn(g.type,v),vw(a,l,g,v,f);case 15:return yw(a,l,l.type,l.pendingProps,f);case 17:return g=l.type,v=l.pendingProps,v=l.elementType===g?v:Yn(g,v),Qu(a,l),l.tag=1,an(g)?(a=!0,Lu(l)):a=!1,Lo(l,f),cw(l,g,v),Pp(l,g,v,f),kp(null,l,g,!0,a,f);case 19:return Pw(a,l,f);case 22:return _w(a,l,f)}throw Error(n(156,l.tag))};function Xw(a,l){return pi(a,l)}function WI(a,l,f,g){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(a,l,f,g){return new WI(a,l,f,g)}function Xp(a){return a=a.prototype,!(!a||!a.isReactComponent)}function HI(a){if(typeof a=="function")return Xp(a)?1:0;if(a!=null){if(a=a.$$typeof,a===te)return 11;if(a===ve)return 14}return 2}function js(a,l){var f=a.alternate;return f===null?(f=Fn(a.tag,l,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=l,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&14680064,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,l=a.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f}function cd(a,l,f,g,v,w){var A=2;if(g=a,typeof a=="function")Xp(a)&&(A=1);else if(typeof a=="string")A=5;else e:switch(a){case U:return Ci(f.children,v,w,l);case G:A=8,v|=8;break;case W:return a=Fn(12,f,l,v|2),a.elementType=W,a.lanes=w,a;case ae:return a=Fn(13,f,l,v),a.elementType=ae,a.lanes=w,a;case ie:return a=Fn(19,f,l,v),a.elementType=ie,a.lanes=w,a;case ce:return ud(f,v,w,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case V:A=10;break e;case Q:A=9;break e;case te:A=11;break e;case ve:A=14;break e;case le:A=16,g=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return l=Fn(A,f,l,v),l.elementType=a,l.type=g,l.lanes=w,l}function Ci(a,l,f,g){return a=Fn(7,a,g,l),a.lanes=f,a}function ud(a,l,f,g){return a=Fn(22,a,g,l),a.elementType=ce,a.lanes=f,a.stateNode={isHidden:!1},a}function Zp(a,l,f){return a=Fn(6,a,null,l),a.lanes=f,a}function Qp(a,l,f){return l=Fn(4,a.children!==null?a.children:[],a.key,l),l.lanes=f,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function qI(a,l,f,g,v){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yo(0),this.expirationTimes=yo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yo(0),this.identifierPrefix=g,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Jp(a,l,f,g,v,w,A,L,j){return a=new qI(a,l,f,L,j),l===1?(l=1,w===!0&&(l|=8)):l=0,w=Fn(3,null,null,l),a.current=w,w.stateNode=a,w.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},fp(w),a}function KI(a,l,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:g==null?null:""+g,children:a,containerInfo:l,implementation:f}}function Zw(a){if(!a)return As;a=a._reactInternals;e:{if(ur(a)!==a||a.tag!==1)throw Error(n(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(an(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(a.tag===1){var f=a.type;if(an(f))return S_(a,f,l)}return l}function Qw(a,l,f,g,v,w,A,L,j){return a=Jp(f,g,!0,a,v,w,A,L,j),a.context=Zw(null),f=a.current,g=Zt(),v=Ls(f),w=Gr(g,v),w.callback=l??null,ks(f,w,v),a.current.lanes=v,mi(a,v,g),un(a,g),a}function dd(a,l,f,g){var v=l.current,w=Zt(),A=Ls(v);return f=Zw(f),l.context===null?l.context=f:l.pendingContext=f,l=Gr(w,A),l.payload={element:a},g=g===void 0?null:g,g!==null&&(l.callback=g),a=ks(v,l,A),a!==null&&(Qn(a,v,A,w),zu(a,v,A)),A}function fd(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Jw(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<l?f:l}}function eg(a,l){Jw(a,l),(a=a.alternate)&&Jw(a,l)}function YI(){return null}var eb=typeof reportError=="function"?reportError:function(a){console.error(a)};function tg(a){this._internalRoot=a}hd.prototype.render=tg.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(n(409));dd(a,l,null,null)},hd.prototype.unmount=tg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;Si(function(){dd(null,a,null,null)}),l[Br]=null}};function hd(a){this._internalRoot=a}hd.prototype.unstable_scheduleHydration=function(a){if(a){var l=Oe();a={blockedOn:null,target:a,priority:l};for(var f=0;f<xs.length&&l!==0&&l<xs[f].priority;f++);xs.splice(f,0,a),f===0&&Uy(a)}};function ng(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function pd(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function tb(){}function XI(a,l,f,g,v){if(v){if(typeof g=="function"){var w=g;g=function(){var q=fd(A);w.call(q)}}var A=Qw(l,g,a,0,null,!1,!1,"",tb);return a._reactRootContainer=A,a[Br]=A.current,_l(a.nodeType===8?a.parentNode:a),Si(),A}for(;v=a.lastChild;)a.removeChild(v);if(typeof g=="function"){var L=g;g=function(){var q=fd(j);L.call(q)}}var j=Jp(a,0,!1,null,null,!1,!1,"",tb);return a._reactRootContainer=j,a[Br]=j.current,_l(a.nodeType===8?a.parentNode:a),Si(function(){dd(l,j,f,g)}),j}function gd(a,l,f,g,v){var w=f._reactRootContainer;if(w){var A=w;if(typeof v=="function"){var L=v;v=function(){var j=fd(A);L.call(j)}}dd(l,A,a,v)}else A=XI(f,l,a,v,g);return fd(A)}H=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var f=Dr(l.pendingLanes);f!==0&&(k(l,f|1),un(l,Ke()),!(Ve&6)&&(Bo=Ke()+500,Cs()))}break;case 13:Si(function(){var g=$r(a,1);if(g!==null){var v=Zt();Qn(g,a,1,v)}}),eg(a,1)}},ee=function(a){if(a.tag===13){var l=$r(a,134217728);if(l!==null){var f=Zt();Qn(l,a,134217728,f)}eg(a,134217728)}},fe=function(a){if(a.tag===13){var l=Ls(a),f=$r(a,l);if(f!==null){var g=Zt();Qn(f,a,l,g)}eg(a,l)}},Oe=function(){return M},ht=function(a,l){var f=M;try{return M=a,l()}finally{M=f}},tl=function(a,l,f){switch(l){case"input":if(Lt(a,f),l=f.name,f.type==="radio"&&l!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<f.length;l++){var g=f[l];if(g!==a&&g.form===a.form){var v=Iu(g);if(!v)throw Error(n(90));De(g),Lt(g,v)}}}break;case"textarea":ou(a,f);break;case"select":l=f.value,l!=null&&bt(a,!!f.multiple,l,!1)}},hu=qp,nl=Si;var ZI={usingClientEntryPoint:!1,Events:[xl,Po,Iu,du,fu,qp]},jl={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QI={bundleType:jl.bundleType,version:jl.version,rendererPackageName:jl.rendererPackageName,rendererConfig:jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=ms(a),a===null?null:a.stateNode},findFiberByHostInstance:jl.findFiberByHostInstance||YI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!md.isDisabled&&md.supportsFiber)try{sn=md.inject(QI),pn=md}catch{}}return dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZI,dn.createPortal=function(a,l){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ng(l))throw Error(n(200));return KI(a,l,null,f)},dn.createRoot=function(a,l){if(!ng(a))throw Error(n(299));var f=!1,g="",v=eb;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),l=Jp(a,1,!1,null,null,f,!1,g,v),a[Br]=l.current,_l(a.nodeType===8?a.parentNode:a),new tg(l)},dn.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=ms(l),a=a===null?null:a.stateNode,a},dn.flushSync=function(a){return Si(a)},dn.hydrate=function(a,l,f){if(!pd(l))throw Error(n(200));return gd(null,a,l,!0,f)},dn.hydrateRoot=function(a,l,f){if(!ng(a))throw Error(n(405));var g=f!=null&&f.hydratedSources||null,v=!1,w="",A=eb;if(f!=null&&(f.unstable_strictMode===!0&&(v=!0),f.identifierPrefix!==void 0&&(w=f.identifierPrefix),f.onRecoverableError!==void 0&&(A=f.onRecoverableError)),l=Qw(l,null,a,1,f??null,v,!1,w,A),a[Br]=l.current,_l(a),g)for(a=0;a<g.length;a++)f=g[a],v=f._getVersion,v=v(f._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[f,v]:l.mutableSourceEagerHydrationData.push(f,v);return new hd(l)},dn.render=function(a,l,f){if(!pd(l))throw Error(n(200));return gd(null,a,l,!1,f)},dn.unmountComponentAtNode=function(a){if(!pd(a))throw Error(n(40));return a._reactRootContainer?(Si(function(){gd(null,null,a,!1,function(){a._reactRootContainer=null,a[Br]=null})}),!0):!1},dn.unstable_batchedUpdates=qp,dn.unstable_renderSubtreeIntoContainer=function(a,l,f,g){if(!pd(f))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return gd(a,l,f,!1,g)},dn.version="18.3.1-next-f1338f8080-20240426",dn}var cb;function qT(){if(cb)return ig.exports;cb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ig.exports=oO(),ig.exports}var ub;function aO(){if(ub)return vd;ub=1;var t=qT();return vd.createRoot=t.createRoot,vd.hydrateRoot=t.hydrateRoot,vd}var lO=aO(),Qi=qT();const cO=jf(Qi);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vc(){return vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vc.apply(this,arguments)}var Zs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Zs||(Zs={}));const db="popstate";function uO(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return ym("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:YT(s)}return fO(e,n,null,t)}function Pt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function KT(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dO(){return Math.random().toString(36).substr(2,8)}function fb(t,e){return{usr:t.state,key:t.key,idx:e}}function ym(t,e,n,r){return n===void 0&&(n=null),vc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ba(e):e,{state:n,key:e&&e.key||r||dO()})}function YT(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ba(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function fO(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c=Zs.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(vc({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function p(){c=Zs.Pop;let T=h(),P=T==null?null:T-d;d=T,u&&u({action:c,location:b.location,delta:P})}function m(T,P){c=Zs.Push;let S=ym(b.location,T,P);d=h()+1;let C=fb(S,d),I=b.createHref(S);try{o.pushState(C,"",I)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(I)}i&&u&&u({action:c,location:b.location,delta:1})}function y(T,P){c=Zs.Replace;let S=ym(b.location,T,P);d=h();let C=fb(S,d),I=b.createHref(S);o.replaceState(C,"",I),i&&u&&u({action:c,location:b.location,delta:0})}function E(T){let P=s.location.origin!=="null"?s.location.origin:s.location.href,S=typeof T=="string"?T:YT(T);return S=S.replace(/ $/,"%20"),Pt(P,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,P)}let b={get action(){return c},get location(){return t(s,o)},listen(T){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(db,p),u=T,()=>{s.removeEventListener(db,p),u=null}},createHref(T){return e(s,T)},createURL:E,encodeLocation(T){let P=E(T);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:m,replace:y,go(T){return o.go(T)}};return b}var hb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(hb||(hb={}));function hO(t,e,n){return n===void 0&&(n="/"),pO(t,e,n)}function pO(t,e,n,r){let s=typeof e=="string"?Ba(e):e,i=QT(s.pathname||"/",n);if(i==null)return null;let o=XT(t);gO(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=AO(i);c=TO(o[u],d)}return c}function XT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Pt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Vi([r,u.relativePath]),h=n.concat(u);i.children&&i.children.length>0&&(Pt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),XT(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:xO(d,i.index),routesMeta:h})};return t.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,o);else for(let u of ZT(i.path))s(i,o,u)}),e}function ZT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=ZT(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function gO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:EO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const mO=/^:[\w-]+$/,vO=3,yO=2,_O=1,wO=10,bO=-2,pb=t=>t==="*";function xO(t,e){let n=t.split("/"),r=n.length;return n.some(pb)&&(r+=bO),e&&(r+=yO),n.filter(s=>!pb(s)).reduce((s,i)=>s+(mO.test(i)?vO:i===""?_O:wO),r)}function EO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function TO(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",p=SO({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),m=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Vi([i,p.pathname]),pathnameBase:OO(Vi([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=Vi([i,p.pathnameBase]))}return o}function SO(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=PO(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,h,p)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let b=c[p]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const E=c[p];return y&&!E?d[m]=void 0:d[m]=(E||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function PO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),KT(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function AO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return KT(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function QT(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function CO(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ba(t):t;return{pathname:n?n.startsWith("/")?n:RO(n,e):e,search:LO(r),hash:NO(s)}}function RO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function lg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function MO(t,e){let n=kO(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function IO(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ba(t):(s=vc({},t),Pt(!s.pathname||!s.pathname.includes("?"),lg("?","pathname","search",s)),Pt(!s.pathname||!s.pathname.includes("#"),lg("#","pathname","hash",s)),Pt(!s.search||!s.search.includes("#"),lg("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}c=p>=0?e[p]:"/"}let u=CO(s,c),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const Vi=t=>t.join("/").replace(/\/\/+/g,"/"),OO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),LO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,NO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function jO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const JT=["post","put","patch","delete"];new Set(JT);const DO=["get",...JT];new Set(DO);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yc(){return yc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yc.apply(this,arguments)}const z0=_.createContext(null),FO=_.createContext(null),Ff=_.createContext(null),Bf=_.createContext(null),Ji=_.createContext({outlet:null,matches:[],isDataRoute:!1}),eS=_.createContext(null);function Uf(){return _.useContext(Bf)!=null}function tS(){return Uf()||Pt(!1),_.useContext(Bf).location}function nS(t){_.useContext(Ff).static||_.useLayoutEffect(t)}function rS(){let{isDataRoute:t}=_.useContext(Ji);return t?QO():BO()}function BO(){Uf()||Pt(!1);let t=_.useContext(z0),{basename:e,future:n,navigator:r}=_.useContext(Ff),{matches:s}=_.useContext(Ji),{pathname:i}=tS(),o=JSON.stringify(MO(s,n.v7_relativeSplatPath)),c=_.useRef(!1);return nS(()=>{c.current=!0}),_.useCallback(function(d,h){if(h===void 0&&(h={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let p=IO(d,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Vi([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,o,i,t])}function UO(){let{matches:t}=_.useContext(Ji),e=t[t.length-1];return e?e.params:{}}function VO(t,e){return zO(t,e)}function zO(t,e,n,r){Uf()||Pt(!1);let{navigator:s}=_.useContext(Ff),{matches:i}=_.useContext(Ji),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=tS(),h;if(e){var p;let T=typeof e=="string"?Ba(e):e;u==="/"||(p=T.pathname)!=null&&p.startsWith(u)||Pt(!1),h=T}else h=d;let m=h.pathname||"/",y=m;if(u!=="/"){let T=u.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(T.length).join("/")}let E=hO(t,{pathname:y}),b=qO(E&&E.map(T=>Object.assign({},T,{params:Object.assign({},c,T.params),pathname:Vi([u,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?u:Vi([u,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),i,n,r);return e&&b?_.createElement(Bf.Provider,{value:{location:yc({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Zs.Pop}},b):b}function $O(){let t=ZO(),e=jO(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:s},n):null,null)}const GO=_.createElement($O,null);class WO extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(Ji.Provider,{value:this.props.routeContext},_.createElement(eS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HO(t){let{routeContext:e,match:n,children:r}=t,s=_.useContext(z0);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(Ji.Provider,{value:e},r)}function qO(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let h=o.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);h>=0||Pt(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:m,errors:y}=n,E=p.route.loader&&m[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||E){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,p,m)=>{let y,E=!1,b=null,T=null;n&&(y=c&&p.route.id?c[p.route.id]:void 0,b=p.route.errorElement||GO,u&&(d<0&&m===0?(JO("route-fallback"),E=!0,T=null):d===m&&(E=!0,T=p.route.hydrateFallbackElement||null)));let P=e.concat(o.slice(0,m+1)),S=()=>{let C;return y?C=b:E?C=T:p.route.Component?C=_.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=h,_.createElement(HO,{match:p,routeContext:{outlet:h,matches:P,isDataRoute:n!=null},children:C})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?_.createElement(WO,{location:n.location,revalidation:n.revalidation,component:b,error:y,children:S(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):S()},null)}var sS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(sS||{}),iS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(iS||{});function KO(t){let e=_.useContext(z0);return e||Pt(!1),e}function YO(t){let e=_.useContext(FO);return e||Pt(!1),e}function XO(t){let e=_.useContext(Ji);return e||Pt(!1),e}function oS(t){let e=XO(),n=e.matches[e.matches.length-1];return n.route.id||Pt(!1),n.route.id}function ZO(){var t;let e=_.useContext(eS),n=YO(),r=oS();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function QO(){let{router:t}=KO(sS.UseNavigateStable),e=oS(iS.UseNavigateStable),n=_.useRef(!1);return nS(()=>{n.current=!0}),_.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,yc({fromRouteId:e},i)))},[t,e])}const gb={};function JO(t,e,n){gb[t]||(gb[t]=!0)}function eL(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function _m(t){Pt(!1)}function tL(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Zs.Pop,navigator:i,static:o=!1,future:c}=t;Uf()&&Pt(!1);let u=e.replace(/^\/*/,"/"),d=_.useMemo(()=>({basename:u,navigator:i,static:o,future:yc({v7_relativeSplatPath:!1},c)}),[u,c,i,o]);typeof r=="string"&&(r=Ba(r));let{pathname:h="/",search:p="",hash:m="",state:y=null,key:E="default"}=r,b=_.useMemo(()=>{let T=QT(h,u);return T==null?null:{location:{pathname:T,search:p,hash:m,state:y,key:E},navigationType:s}},[u,h,p,m,y,E,s]);return b==null?null:_.createElement(Ff.Provider,{value:d},_.createElement(Bf.Provider,{children:n,value:b}))}function nL(t){let{children:e,location:n}=t;return VO(wm(e),n)}new Promise(()=>{});function wm(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,s)=>{if(!_.isValidElement(r))return;let i=[...e,s];if(r.type===_.Fragment){n.push.apply(n,wm(r.props.children,i));return}r.type!==_m&&Pt(!1),!r.props.index||!r.props.children||Pt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=wm(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const rL="6";try{window.__reactRouterVersion=rL}catch{}const sL="startTransition",mb=V0[sL];function iL(t){let{basename:e,children:n,future:r,window:s}=t,i=_.useRef();i.current==null&&(i.current=uO({window:s,v5Compat:!0}));let o=i.current,[c,u]=_.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=_.useCallback(p=>{d&&mb?mb(()=>u(p)):u(p)},[u,d]);return _.useLayoutEffect(()=>o.listen(h),[o,h]),_.useEffect(()=>eL(r),[r]),_.createElement(tL,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}var vb;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(vb||(vb={}));var yb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(yb||(yb={}));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aS=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var aL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...c},u)=>_.createElement("svg",{ref:u,...aL,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:aS("lucide",s),...c},[...o.map(([d,h])=>_.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=(t,e)=>{const n=_.forwardRef(({className:r,...s},i)=>_.createElement(lL,{ref:i,iconNode:e,className:aS(`lucide-${oL(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=Ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=Ue("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=Ue("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=Ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=Ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=Ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=Ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=Ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=Ue("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=Ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=Ue("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=Ue("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=Ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=Ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=Ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=Ue("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=Ue("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=Ue("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=Ue("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=Ue("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=Ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=Ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=Ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=Ue("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=Ue("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=Ue("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=Ue("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=Ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=Ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=Ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=Ue("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=Ue("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=Ue("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=Ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),H0=_.createContext({});function q0(t){const e=_.useRef(null);return e.current===null&&(e.current=t()),e.current}const Vf=_.createContext(null),K0=_.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class kL extends _.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ML({children:t,isPresent:e}){const n=_.useId(),r=_.useRef(null),s=_.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=_.useContext(K0);return _.useInsertionEffect(()=>{const{width:o,height:c,top:u,left:d}=s.current;if(e||!r.current||!o||!c)return;r.current.dataset.motionPopId=n;const h=document.createElement("style");return i&&(h.nonce=i),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${c}px !important;
            top: ${u}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),x.jsx(kL,{isPresent:e,childRef:r,sizeRef:s,children:_.cloneElement(t,{ref:r})})}const IL=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const c=q0(OL),u=_.useId(),d=_.useCallback(p=>{c.set(p,!0);for(const m of c.values())if(!m)return;r&&r()},[c,r]),h=_.useMemo(()=>({id:u,initial:e,isPresent:n,custom:s,onExitComplete:d,register:p=>(c.set(p,!1),()=>c.delete(p))}),i?[Math.random(),d]:[n,d]);return _.useMemo(()=>{c.forEach((p,m)=>c.set(m,!1))},[n]),_.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),o==="popLayout"&&(t=x.jsx(ML,{isPresent:n,children:t})),x.jsx(Vf.Provider,{value:h,children:t})};function OL(){return new Map}function mS(t=!0){const e=_.useContext(Vf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=_.useId();_.useEffect(()=>{t&&s(i)},[t]);const o=_.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const yd=t=>t.key||"";function _b(t){const e=[];return _.Children.forEach(t,n=>{_.isValidElement(n)&&e.push(n)}),e}const Y0=typeof window<"u",vS=Y0?_.useLayoutEffect:_.useEffect,LL=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1})=>{const[c,u]=mS(o),d=_.useMemo(()=>_b(t),[t]),h=o&&!c?[]:d.map(yd),p=_.useRef(!0),m=_.useRef(d),y=q0(()=>new Map),[E,b]=_.useState(d),[T,P]=_.useState(d);vS(()=>{p.current=!1,m.current=d;for(let I=0;I<T.length;I++){const O=yd(T[I]);h.includes(O)?y.delete(O):y.get(O)!==!0&&y.set(O,!1)}},[T,h.length,h.join("-")]);const S=[];if(d!==E){let I=[...d];for(let O=0;O<T.length;O++){const D=T[O],U=yd(D);h.includes(U)||(I.splice(O,0,D),S.push(D))}i==="wait"&&S.length&&(I=S),P(_b(I)),b(d);return}const{forceRender:C}=_.useContext(H0);return x.jsx(x.Fragment,{children:T.map(I=>{const O=yd(I),D=o&&!c?!1:d===T||h.includes(O),U=()=>{if(y.has(O))y.set(O,!0);else return;let G=!0;y.forEach(W=>{W||(G=!1)}),G&&(C==null||C(),P(m.current),o&&(u==null||u()),r&&r())};return x.jsx(IL,{isPresent:D,initial:!p.current||n?void 0:!1,custom:D?void 0:e,presenceAffectsLayout:s,mode:i,onExitComplete:D?void 0:U,children:I},O)})})},Cn=t=>t;let yS=Cn;function X0(t){let e;return()=>(e===void 0&&(e=t()),e)}const ba=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Qr=t=>t*1e3,Jr=t=>t/1e3,NL={useManualTiming:!1};function jL(t){let e=new Set,n=new Set,r=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(d){i.has(d)&&(u.schedule(d),t()),d(o)}const u={schedule:(d,h=!1,p=!1)=>{const y=p&&r?e:n;return h&&i.add(d),y.has(d)||y.add(d),d},cancel:d=>{n.delete(d),i.delete(d)},process:d=>{if(o=d,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(c),e.clear(),r=!1,s&&(s=!1,u.process(d))}};return u}const _d=["read","resolveKeyframes","update","preRender","render","postRender"],DL=40;function _S(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=_d.reduce((P,S)=>(P[S]=jL(i),P),{}),{read:c,resolveKeyframes:u,update:d,preRender:h,render:p,postRender:m}=o,y=()=>{const P=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(P-s.timestamp,DL),1),s.timestamp=P,s.isProcessing=!0,c.process(s),u.process(s),d.process(s),h.process(s),p.process(s),m.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(y))},E=()=>{n=!0,r=!0,s.isProcessing||t(y)};return{schedule:_d.reduce((P,S)=>{const C=o[S];return P[S]=(I,O=!1,D=!1)=>(n||E(),C.schedule(I,O,D)),P},{}),cancel:P=>{for(let S=0;S<_d.length;S++)o[_d[S]].cancel(P)},state:s,steps:o}}const{schedule:rt,cancel:ti,state:Ft,steps:cg}=_S(typeof requestAnimationFrame<"u"?requestAnimationFrame:Cn,!0),wS=_.createContext({strict:!1}),wb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},xa={};for(const t in wb)xa[t]={isEnabled:e=>wb[t].some(n=>!!e[n])};function FL(t){for(const e in t)xa[e]={...xa[e],...t[e]}}const BL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function sf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||BL.has(t)}let bS=t=>!sf(t);function UL(t){t&&(bS=e=>e.startsWith("on")?!sf(e):t(e))}try{UL(require("@emotion/is-prop-valid").default)}catch{}function VL(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(bS(s)||n===!0&&sf(s)||!e&&!sf(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function zL(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const zf=_.createContext({});function _c(t){return typeof t=="string"||Array.isArray(t)}function $f(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Z0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Q0=["initial",...Z0];function Gf(t){return $f(t.animate)||Q0.some(e=>_c(t[e]))}function xS(t){return!!(Gf(t)||t.variants)}function $L(t,e){if(Gf(t)){const{initial:n,animate:r}=t;return{initial:n===!1||_c(n)?n:void 0,animate:_c(r)?r:void 0}}return t.inherit!==!1?e:{}}function GL(t){const{initial:e,animate:n}=$L(t,_.useContext(zf));return _.useMemo(()=>({initial:e,animate:n}),[bb(e),bb(n)])}function bb(t){return Array.isArray(t)?t.join(" "):t}const WL=Symbol.for("motionComponentSymbol");function la(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function HL(t,e,n){return _.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):la(n)&&(n.current=r))},[e])}const J0=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),qL="framerAppearId",ES="data-"+J0(qL),{schedule:ev}=_S(queueMicrotask,!1),TS=_.createContext({});function KL(t,e,n,r,s){var i,o;const{visualElement:c}=_.useContext(zf),u=_.useContext(wS),d=_.useContext(Vf),h=_.useContext(K0).reducedMotion,p=_.useRef(null);r=r||u.renderer,!p.current&&r&&(p.current=r(t,{visualState:e,parent:c,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const m=p.current,y=_.useContext(TS);m&&!m.projection&&s&&(m.type==="html"||m.type==="svg")&&YL(p.current,n,s,y);const E=_.useRef(!1);_.useInsertionEffect(()=>{m&&E.current&&m.update(n,d)});const b=n[ES],T=_.useRef(!!b&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,b))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,b)));return vS(()=>{m&&(E.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),ev.render(m.render),T.current&&m.animationState&&m.animationState.animateChanges())}),_.useEffect(()=>{m&&(!T.current&&m.animationState&&m.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var P;(P=window.MotionHandoffMarkAsComplete)===null||P===void 0||P.call(window,b)}),T.current=!1))}),m}function YL(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:SS(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||c&&la(c),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:d})}function SS(t){if(t)return t.options.allowProjection!==!1?t.projection:SS(t.parent)}function XL({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var i,o;t&&FL(t);function c(d,h){let p;const m={..._.useContext(K0),...d,layoutId:ZL(d)},{isStatic:y}=m,E=GL(d),b=r(d,y);if(!y&&Y0){QL();const T=JL(m);p=T.MeasureLayout,E.visualElement=KL(s,b,m,e,T.ProjectionNode)}return x.jsxs(zf.Provider,{value:E,children:[p&&E.visualElement?x.jsx(p,{visualElement:E.visualElement,...m}):null,n(s,d,HL(b,E.visualElement,h),b,y,E.visualElement)]})}c.displayName=`motion.${typeof s=="string"?s:`create(${(o=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&o!==void 0?o:""})`}`;const u=_.forwardRef(c);return u[WL]=s,u}function ZL({layoutId:t}){const e=_.useContext(H0).id;return e&&t!==void 0?e+"-"+t:t}function QL(t,e){_.useContext(wS).strict}function JL(t){const{drag:e,layout:n}=xa;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const eN=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function tv(t){return typeof t!="string"||t.includes("-")?!1:!!(eN.indexOf(t)>-1||/[A-Z]/u.test(t))}function xb(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function nv(t,e,n,r){if(typeof e=="function"){const[s,i]=xb(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=xb(r);e=e(n!==void 0?n:t.custom,s,i)}return e}const xm=t=>Array.isArray(t),tN=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),nN=t=>xm(t)?t[t.length-1]||0:t,Yt=t=>!!(t&&t.getVelocity);function Wd(t){const e=Yt(t)?t.get():t;return tN(e)?e.toValue():e}function rN({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,i){const o={latestValues:sN(r,s,i,t),renderState:e()};return n&&(o.onMount=c=>n({props:r,current:c,...o}),o.onUpdate=c=>n(c)),o}const PS=t=>(e,n)=>{const r=_.useContext(zf),s=_.useContext(Vf),i=()=>rN(t,e,r,s);return n?i():q0(i)};function sN(t,e,n,r){const s={},i=r(t,{});for(const m in i)s[m]=Wd(i[m]);let{initial:o,animate:c}=t;const u=Gf(t),d=xS(t);e&&d&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const p=h?c:o;if(p&&typeof p!="boolean"&&!$f(p)){const m=Array.isArray(p)?p:[p];for(let y=0;y<m.length;y++){const E=nv(t,m[y]);if(E){const{transitionEnd:b,transition:T,...P}=E;for(const S in P){let C=P[S];if(Array.isArray(C)){const I=h?C.length-1:0;C=C[I]}C!==null&&(s[S]=C)}for(const S in b)s[S]=b[S]}}}return s}const Ua=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],eo=new Set(Ua),AS=t=>e=>typeof e=="string"&&e.startsWith(t),CS=AS("--"),iN=AS("var(--"),rv=t=>iN(t)?oN.test(t.split("/*")[0].trim()):!1,oN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,RS=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ts=(t,e,n)=>n>e?e:n<t?t:n,Va={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},wc={...Va,transform:t=>ts(0,1,t)},wd={...Va,default:1},Fc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ws=Fc("deg"),Sr=Fc("%"),Ae=Fc("px"),aN=Fc("vh"),lN=Fc("vw"),Eb={...Sr,parse:t=>Sr.parse(t)/100,transform:t=>Sr.transform(t*100)},cN={borderWidth:Ae,borderTopWidth:Ae,borderRightWidth:Ae,borderBottomWidth:Ae,borderLeftWidth:Ae,borderRadius:Ae,radius:Ae,borderTopLeftRadius:Ae,borderTopRightRadius:Ae,borderBottomRightRadius:Ae,borderBottomLeftRadius:Ae,width:Ae,maxWidth:Ae,height:Ae,maxHeight:Ae,top:Ae,right:Ae,bottom:Ae,left:Ae,padding:Ae,paddingTop:Ae,paddingRight:Ae,paddingBottom:Ae,paddingLeft:Ae,margin:Ae,marginTop:Ae,marginRight:Ae,marginBottom:Ae,marginLeft:Ae,backgroundPositionX:Ae,backgroundPositionY:Ae},uN={rotate:Ws,rotateX:Ws,rotateY:Ws,rotateZ:Ws,scale:wd,scaleX:wd,scaleY:wd,scaleZ:wd,skew:Ws,skewX:Ws,skewY:Ws,distance:Ae,translateX:Ae,translateY:Ae,translateZ:Ae,x:Ae,y:Ae,z:Ae,perspective:Ae,transformPerspective:Ae,opacity:wc,originX:Eb,originY:Eb,originZ:Ae},Tb={...Va,transform:Math.round},sv={...cN,...uN,zIndex:Tb,size:Ae,fillOpacity:wc,strokeOpacity:wc,numOctaves:Tb},dN={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fN=Ua.length;function hN(t,e,n){let r="",s=!0;for(let i=0;i<fN;i++){const o=Ua[i],c=t[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const d=RS(c,sv[o]);if(!u){s=!1;const h=dN[o]||o;r+=`${h}(${d}) `}n&&(e[o]=d)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function iv(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,c=!1;for(const u in e){const d=e[u];if(eo.has(u)){o=!0;continue}else if(CS(u)){s[u]=d;continue}else{const h=RS(d,sv[u]);u.startsWith("origin")?(c=!0,i[u]=h):r[u]=h}}if(e.transform||(o||n?r.transform=hN(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:d="50%",originZ:h=0}=i;r.transformOrigin=`${u} ${d} ${h}`}}const pN={offset:"stroke-dashoffset",array:"stroke-dasharray"},gN={offset:"strokeDashoffset",array:"strokeDasharray"};function mN(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?pN:gN;t[i.offset]=Ae.transform(-r);const o=Ae.transform(e),c=Ae.transform(n);t[i.array]=`${o} ${c}`}function Sb(t,e,n){return typeof t=="string"?t:Ae.transform(e+n*t)}function vN(t,e,n){const r=Sb(e,t.x,t.width),s=Sb(n,t.y,t.height);return`${r} ${s}`}function ov(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:c=1,pathOffset:u=0,...d},h,p){if(iv(t,d,p),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:y,dimensions:E}=t;m.transform&&(E&&(y.transform=m.transform),delete m.transform),E&&(s!==void 0||i!==void 0||y.transform)&&(y.transformOrigin=vN(E,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&mN(m,o,c,u,!1)}const av=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),kS=()=>({...av(),attrs:{}}),lv=t=>typeof t=="string"&&t.toLowerCase()==="svg";function MS(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const IS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function OS(t,e,n,r){MS(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(IS.has(s)?s:J0(s),e.attrs[s])}const of={};function yN(t){Object.assign(of,t)}function LS(t,{layout:e,layoutId:n}){return eo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!of[t]||t==="opacity")}function cv(t,e,n){var r;const{style:s}=t,i={};for(const o in s)(Yt(s[o])||e.style&&Yt(e.style[o])||LS(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function NS(t,e,n){const r=cv(t,e,n);for(const s in t)if(Yt(t[s])||Yt(e[s])){const i=Ua.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}function _N(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Pb=["x","y","width","height","cx","cy","r"],wN={useVisualState:PS({scrapeMotionValuesFromProps:NS,createRenderState:kS,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let i=!!t.drag;if(!i){for(const c in s)if(eo.has(c)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let c=0;c<Pb.length;c++){const u=Pb[c];t[u]!==e[u]&&(o=!0)}o&&rt.read(()=>{_N(n,r),rt.render(()=>{ov(r,s,lv(n.tagName),t.transformTemplate),OS(n,r)})})}})},bN={useVisualState:PS({scrapeMotionValuesFromProps:cv,createRenderState:av})};function jS(t,e,n){for(const r in e)!Yt(e[r])&&!LS(r,n)&&(t[r]=e[r])}function xN({transformTemplate:t},e){return _.useMemo(()=>{const n=av();return iv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function EN(t,e){const n=t.style||{},r={};return jS(r,n,t),Object.assign(r,xN(t,e)),r}function TN(t,e){const n={},r=EN(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function SN(t,e,n,r){const s=_.useMemo(()=>{const i=kS();return ov(i,e,lv(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};jS(i,t.style,t),s.style={...i,...s.style}}return s}function PN(t=!1){return(n,r,s,{latestValues:i},o)=>{const u=(tv(n)?SN:TN)(r,i,o,n),d=VL(r,typeof n=="string",t),h=n!==_.Fragment?{...d,...u,ref:s}:{},{children:p}=r,m=_.useMemo(()=>Yt(p)?p.get():p,[p]);return _.createElement(n,{...h,children:m})}}function AN(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...tv(r)?wN:bN,preloadedFeatures:t,useRender:PN(s),createVisualElement:e,Component:r};return XL(o)}}function DS(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Wf(t,e,n){const r=t.getProps();return nv(r,e,n!==void 0?n:r.custom,t)}const CN=X0(()=>window.ScrollTimeline!==void 0);class RN{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(CN()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class kN extends RN{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function uv(t,e){return t?t[e]||t.default||t:void 0}const Em=2e4;function FS(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Em;)e+=n,r=t.next(e);return e>=Em?1/0:e}function dv(t){return typeof t=="function"}function Ab(t,e){t.timeline=e,t.onfinish=null}const fv=t=>Array.isArray(t)&&typeof t[0]=="number",MN={linearEasing:void 0};function IN(t,e){const n=X0(t);return()=>{var r;return(r=MN[e])!==null&&r!==void 0?r:n()}}const af=IN(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),BS=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=t(ba(0,s-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function US(t){return!!(typeof t=="function"&&af()||!t||typeof t=="string"&&(t in Tm||af())||fv(t)||Array.isArray(t)&&t.every(US))}const Zl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Tm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zl([0,.65,.55,1]),circOut:Zl([.55,0,1,.45]),backIn:Zl([.31,.01,.66,-.59]),backOut:Zl([.33,1.53,.69,.99])};function VS(t,e){if(t)return typeof t=="function"&&af()?BS(t,e):fv(t)?Zl(t):Array.isArray(t)?t.map(n=>VS(n,e)||Tm.easeOut):Tm[t]}const Jn={x:!1,y:!1};function zS(){return Jn.x||Jn.y}function ON(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const i=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function $S(t,e){const n=ON(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function Cb(t){return e=>{e.pointerType==="touch"||zS()||t(e)}}function LN(t,e,n={}){const[r,s,i]=$S(t,n),o=Cb(c=>{const{target:u}=c,d=e(c);if(typeof d!="function"||!u)return;const h=Cb(p=>{d(p),u.removeEventListener("pointerleave",h)});u.addEventListener("pointerleave",h,s)});return r.forEach(c=>{c.addEventListener("pointerenter",o,s)}),i}const GS=(t,e)=>e?t===e?!0:GS(t,e.parentElement):!1,hv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,NN=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function jN(t){return NN.has(t.tagName)||t.tabIndex!==-1}const Ql=new WeakSet;function Rb(t){return e=>{e.key==="Enter"&&t(e)}}function ug(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const DN=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Rb(()=>{if(Ql.has(n))return;ug(n,"down");const s=Rb(()=>{ug(n,"up")}),i=()=>ug(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function kb(t){return hv(t)&&!zS()}function FN(t,e,n={}){const[r,s,i]=$S(t,n),o=c=>{const u=c.currentTarget;if(!kb(c)||Ql.has(u))return;Ql.add(u);const d=e(c),h=(y,E)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),!(!kb(y)||!Ql.has(u))&&(Ql.delete(u),typeof d=="function"&&d(y,{success:E}))},p=y=>{h(y,n.useGlobalTarget||GS(u,y.target))},m=y=>{h(y,!1)};window.addEventListener("pointerup",p,s),window.addEventListener("pointercancel",m,s)};return r.forEach(c=>{!jN(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(n.useGlobalTarget?window:c).addEventListener("pointerdown",o,s),c.addEventListener("focus",d=>DN(d,s),s)}),i}function BN(t){return t==="x"||t==="y"?Jn[t]?null:(Jn[t]=!0,()=>{Jn[t]=!1}):Jn.x||Jn.y?null:(Jn.x=Jn.y=!0,()=>{Jn.x=Jn.y=!1})}const WS=new Set(["width","height","top","left","right","bottom",...Ua]);let Hd;function UN(){Hd=void 0}const Pr={now:()=>(Hd===void 0&&Pr.set(Ft.isProcessing||NL.useManualTiming?Ft.timestamp:performance.now()),Hd),set:t=>{Hd=t,queueMicrotask(UN)}};function pv(t,e){t.indexOf(e)===-1&&t.push(e)}function gv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class mv{constructor(){this.subscriptions=[]}add(e){return pv(this.subscriptions,e),()=>gv(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function HS(t,e){return e?t*(1e3/e):0}const Mb=30,VN=t=>!isNaN(parseFloat(t));class zN{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=Pr.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Pr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=VN(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new mv);const r=this.events[e].add(n);return e==="change"?()=>{r(),rt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Pr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Mb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Mb);return HS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bc(t,e){return new zN(t,e)}function $N(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,bc(n))}function GN(t,e){const n=Wf(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const c=nN(i[o]);$N(t,o,c)}}function WN(t){return!!(Yt(t)&&t.add)}function Sm(t,e){const n=t.getValue("willChange");if(WN(n))return n.add(e)}function qS(t){return t.props[ES]}const KS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,HN=1e-7,qN=12;function KN(t,e,n,r,s){let i,o,c=0;do o=e+(n-e)/2,i=KS(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>HN&&++c<qN);return o}function Bc(t,e,n,r){if(t===e&&n===r)return Cn;const s=i=>KN(i,0,1,t,n);return i=>i===0||i===1?i:KS(s(i),e,r)}const YS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,XS=t=>e=>1-t(1-e),ZS=Bc(.33,1.53,.69,.99),vv=XS(ZS),QS=YS(vv),JS=t=>(t*=2)<1?.5*vv(t):.5*(2-Math.pow(2,-10*(t-1))),yv=t=>1-Math.sin(Math.acos(t)),eP=XS(yv),tP=YS(yv),nP=t=>/^0[^.\s]+$/u.test(t);function YN(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||nP(t):!0}const ic=t=>Math.round(t*1e5)/1e5,_v=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function XN(t){return t==null}const ZN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,wv=(t,e)=>n=>!!(typeof n=="string"&&ZN.test(n)&&n.startsWith(t)||e&&!XN(n)&&Object.prototype.hasOwnProperty.call(n,e)),rP=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,c]=r.match(_v);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},QN=t=>ts(0,255,t),dg={...Va,transform:t=>Math.round(QN(t))},Bi={test:wv("rgb","red"),parse:rP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+dg.transform(t)+", "+dg.transform(e)+", "+dg.transform(n)+", "+ic(wc.transform(r))+")"};function JN(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Pm={test:wv("#"),parse:JN,transform:Bi.transform},ca={test:wv("hsl","hue"),parse:rP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Sr.transform(ic(e))+", "+Sr.transform(ic(n))+", "+ic(wc.transform(r))+")"},qt={test:t=>Bi.test(t)||Pm.test(t)||ca.test(t),parse:t=>Bi.test(t)?Bi.parse(t):ca.test(t)?ca.parse(t):Pm.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Bi.transform(t):ca.transform(t)},e3=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function t3(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(_v))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(e3))===null||n===void 0?void 0:n.length)||0)>0}const sP="number",iP="color",n3="var",r3="var(",Ib="${}",s3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const c=e.replace(s3,u=>(qt.test(u)?(r.color.push(i),s.push(iP),n.push(qt.parse(u))):u.startsWith(r3)?(r.var.push(i),s.push(n3),n.push(u)):(r.number.push(i),s.push(sP),n.push(parseFloat(u))),++i,Ib)).split(Ib);return{values:n,split:c,indexes:r,types:s}}function oP(t){return xc(t).values}function aP(t){const{split:e,types:n}=xc(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const c=n[o];c===sP?i+=ic(s[o]):c===iP?i+=qt.transform(s[o]):i+=s[o]}return i}}const i3=t=>typeof t=="number"?0:t;function o3(t){const e=oP(t);return aP(t)(e.map(i3))}const ni={test:t3,parse:oP,createTransformer:aP,getAnimatableNone:o3},a3=new Set(["brightness","contrast","saturate","opacity"]);function l3(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(_v)||[];if(!r)return t;const s=n.replace(r,"");let i=a3.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const c3=/\b([a-z-]*)\(.*?\)/gu,Am={...ni,getAnimatableNone:t=>{const e=t.match(c3);return e?e.map(l3).join(" "):t}},u3={...sv,color:qt,backgroundColor:qt,outlineColor:qt,fill:qt,stroke:qt,borderColor:qt,borderTopColor:qt,borderRightColor:qt,borderBottomColor:qt,borderLeftColor:qt,filter:Am,WebkitFilter:Am},bv=t=>u3[t];function lP(t,e){let n=bv(t);return n!==Am&&(n=ni),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const d3=new Set(["auto","none","0"]);function f3(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!d3.has(i)&&xc(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=lP(n,s)}const Ob=t=>t===Va||t===Ae,Lb=(t,e)=>parseFloat(t.split(", ")[e]),Nb=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return Lb(s[1],e);{const i=r.match(/^matrix\((.+)\)$/u);return i?Lb(i[1],t):0}},h3=new Set(["x","y","z"]),p3=Ua.filter(t=>!h3.has(t));function g3(t){const e=[];return p3.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Ea={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Nb(4,13),y:Nb(5,14)};Ea.translateX=Ea.x;Ea.translateY=Ea.y;const zi=new Set;let Cm=!1,Rm=!1;function cP(){if(Rm){const t=Array.from(zi).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=g3(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var c;(c=r.getValue(i))===null||c===void 0||c.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Rm=!1,Cm=!1,zi.forEach(t=>t.complete()),zi.clear()}function uP(){zi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Rm=!0)})}function m3(){uP(),cP()}class xv{constructor(e,n,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(zi.add(this),Cm||(Cm=!0,rt.read(uP),rt.resolveKeyframes(cP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),zi.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,zi.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const dP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),v3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function y3(t){const e=v3.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function fP(t,e,n=1){const[r,s]=y3(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return dP(o)?parseFloat(o):o}return rv(s)?fP(s,e,n+1):s}const hP=t=>e=>e.test(t),_3={test:t=>t==="auto",parse:t=>t},pP=[Va,Ae,Sr,Ws,lN,aN,_3],jb=t=>pP.find(hP(t));class gP extends xv{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),rv(d))){const h=fP(d,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!WS.has(r)||e.length!==2)return;const[s,i]=e,o=jb(s),c=jb(i);if(o!==c)if(Ob(o)&&Ob(c))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)YN(e[s])&&r.push(s);r.length&&f3(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ea[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,c=s[o];s[o]=Ea[r](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,d])=>{n.getValue(u).set(d)}),this.resolveNoneKeyframes()}}const Db=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ni.test(t)||t==="0")&&!t.startsWith("url("));function w3(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function b3(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=Db(s,e),c=Db(i,e);return!o||!c?!1:w3(t)||(n==="spring"||dv(n))&&r}const x3=t=>t!==null;function Hf(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(x3),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const E3=40;class mP{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Pr.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>E3?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&m3(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Pr.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:c,onUpdate:u,isGenerator:d}=this.options;if(!d&&!b3(e,r,s,i))if(o)this.options.duration=0;else{u&&u(Hf(e,this.options,n)),c&&c(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ct=(t,e,n)=>t+(e-t)*n;function fg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function T3({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;s=fg(u,c,t+1/3),i=fg(u,c,t),o=fg(u,c,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function lf(t,e){return n=>n>0?e:t}const hg=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},S3=[Pm,Bi,ca],P3=t=>S3.find(e=>e.test(t));function Fb(t){const e=P3(t);if(!e)return!1;let n=e.parse(t);return e===ca&&(n=T3(n)),n}const Bb=(t,e)=>{const n=Fb(t),r=Fb(e);if(!n||!r)return lf(t,e);const s={...n};return i=>(s.red=hg(n.red,r.red,i),s.green=hg(n.green,r.green,i),s.blue=hg(n.blue,r.blue,i),s.alpha=ct(n.alpha,r.alpha,i),Bi.transform(s))},A3=(t,e)=>n=>e(t(n)),Uc=(...t)=>t.reduce(A3),km=new Set(["none","hidden"]);function C3(t,e){return km.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function R3(t,e){return n=>ct(t,e,n)}function Ev(t){return typeof t=="number"?R3:typeof t=="string"?rv(t)?lf:qt.test(t)?Bb:I3:Array.isArray(t)?vP:typeof t=="object"?qt.test(t)?Bb:k3:lf}function vP(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>Ev(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function k3(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Ev(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function M3(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],c=t.indexes[o][s[o]],u=(n=t.values[c])!==null&&n!==void 0?n:0;r[i]=u,s[o]++}return r}const I3=(t,e)=>{const n=ni.createTransformer(e),r=xc(t),s=xc(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?km.has(t)&&!s.values.length||km.has(e)&&!r.values.length?C3(t,e):Uc(vP(M3(r,s),s.values),n):lf(t,e)};function yP(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ct(t,e,n):Ev(t)(t,e)}const O3=5;function _P(t,e,n){const r=Math.max(e-O3,0);return HS(n-t(r),e-r)}const ft={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ub=.001;function L3({duration:t=ft.duration,bounce:e=ft.bounce,velocity:n=ft.velocity,mass:r=ft.mass}){let s,i,o=1-e;o=ts(ft.minDamping,ft.maxDamping,o),t=ts(ft.minDuration,ft.maxDuration,Jr(t)),o<1?(s=d=>{const h=d*o,p=h*t,m=h-n,y=Mm(d,o),E=Math.exp(-p);return Ub-m/y*E},i=d=>{const p=d*o*t,m=p*n+n,y=Math.pow(o,2)*Math.pow(d,2)*t,E=Math.exp(-p),b=Mm(Math.pow(d,2),o);return(-s(d)+Ub>0?-1:1)*((m-y)*E)/b}):(s=d=>{const h=Math.exp(-d*t),p=(d-n)*t+1;return-.001+h*p},i=d=>{const h=Math.exp(-d*t),p=(n-d)*(t*t);return h*p});const c=5/t,u=j3(s,i,c);if(t=Qr(t),isNaN(u))return{stiffness:ft.stiffness,damping:ft.damping,duration:t};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const N3=12;function j3(t,e,n){let r=n;for(let s=1;s<N3;s++)r=r-t(r)/e(r);return r}function Mm(t,e){return t*Math.sqrt(1-e*e)}const D3=["duration","bounce"],F3=["stiffness","damping","mass"];function Vb(t,e){return e.some(n=>t[n]!==void 0)}function B3(t){let e={velocity:ft.velocity,stiffness:ft.stiffness,damping:ft.damping,mass:ft.mass,isResolvedFromDuration:!1,...t};if(!Vb(t,F3)&&Vb(t,D3))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*ts(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:ft.mass,stiffness:s,damping:i}}else{const n=L3(t);e={...e,...n,mass:ft.mass},e.isResolvedFromDuration=!0}return e}function wP(t=ft.visualDuration,e=ft.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],c={done:!1,value:i},{stiffness:u,damping:d,mass:h,duration:p,velocity:m,isResolvedFromDuration:y}=B3({...n,velocity:-Jr(n.velocity||0)}),E=m||0,b=d/(2*Math.sqrt(u*h)),T=o-i,P=Jr(Math.sqrt(u/h)),S=Math.abs(T)<5;r||(r=S?ft.restSpeed.granular:ft.restSpeed.default),s||(s=S?ft.restDelta.granular:ft.restDelta.default);let C;if(b<1){const O=Mm(P,b);C=D=>{const U=Math.exp(-b*P*D);return o-U*((E+b*P*T)/O*Math.sin(O*D)+T*Math.cos(O*D))}}else if(b===1)C=O=>o-Math.exp(-P*O)*(T+(E+P*T)*O);else{const O=P*Math.sqrt(b*b-1);C=D=>{const U=Math.exp(-b*P*D),G=Math.min(O*D,300);return o-U*((E+b*P*T)*Math.sinh(G)+O*T*Math.cosh(G))/O}}const I={calculatedDuration:y&&p||null,next:O=>{const D=C(O);if(y)c.done=O>=p;else{let U=0;b<1&&(U=O===0?Qr(E):_P(C,O,D));const G=Math.abs(U)<=r,W=Math.abs(o-D)<=s;c.done=G&&W}return c.value=c.done?o:D,c},toString:()=>{const O=Math.min(FS(I),Em),D=BS(U=>I.next(O*U).value,O,30);return O+"ms "+D}};return I}function zb({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:c,max:u,restDelta:d=.5,restSpeed:h}){const p=t[0],m={done:!1,value:p},y=G=>c!==void 0&&G<c||u!==void 0&&G>u,E=G=>c===void 0?u:u===void 0||Math.abs(c-G)<Math.abs(u-G)?c:u;let b=n*e;const T=p+b,P=o===void 0?T:o(T);P!==T&&(b=P-p);const S=G=>-b*Math.exp(-G/r),C=G=>P+S(G),I=G=>{const W=S(G),V=C(G);m.done=Math.abs(W)<=d,m.value=m.done?P:V};let O,D;const U=G=>{y(m.value)&&(O=G,D=wP({keyframes:[m.value,E(m.value)],velocity:_P(C,G,m.value),damping:s,stiffness:i,restDelta:d,restSpeed:h}))};return U(0),{calculatedDuration:null,next:G=>{let W=!1;return!D&&O===void 0&&(W=!0,I(G),U(G)),O!==void 0&&G>=O?D.next(G-O):(!W&&I(G),m)}}}const U3=Bc(.42,0,1,1),V3=Bc(0,0,.58,1),bP=Bc(.42,0,.58,1),z3=t=>Array.isArray(t)&&typeof t[0]!="number",$3={linear:Cn,easeIn:U3,easeInOut:bP,easeOut:V3,circIn:yv,circInOut:tP,circOut:eP,backIn:vv,backInOut:QS,backOut:ZS,anticipate:JS},$b=t=>{if(fv(t)){yS(t.length===4);const[e,n,r,s]=t;return Bc(e,n,r,s)}else if(typeof t=="string")return $3[t];return t};function G3(t,e,n){const r=[],s=n||yP,i=t.length-1;for(let o=0;o<i;o++){let c=s(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Cn:e;c=Uc(u,c)}r.push(c)}return r}function W3(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(yS(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=G3(e,r,s),u=c.length,d=h=>{if(o&&h<t[0])return e[0];let p=0;if(u>1)for(;p<t.length-2&&!(h<t[p+1]);p++);const m=ba(t[p],t[p+1],h);return c[p](m)};return n?h=>d(ts(t[0],t[i-1],h)):d}function H3(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=ba(0,e,r);t.push(ct(n,1,s))}}function q3(t){const e=[0];return H3(e,t.length-1),e}function K3(t,e){return t.map(n=>n*e)}function Y3(t,e){return t.map(()=>e||bP).splice(0,t.length-1)}function cf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=z3(r)?r.map($b):$b(r),i={done:!1,value:e[0]},o=K3(n&&n.length===e.length?n:q3(e),t),c=W3(o,e,{ease:Array.isArray(s)?s:Y3(e,s)});return{calculatedDuration:t,next:u=>(i.value=c(u),i.done=u>=t,i)}}const X3=t=>{const e=({timestamp:n})=>t(n);return{start:()=>rt.update(e,!0),stop:()=>ti(e),now:()=>Ft.isProcessing?Ft.timestamp:Pr.now()}},Z3={decay:zb,inertia:zb,tween:cf,keyframes:cf,spring:wP},Q3=t=>t/100;class Tv extends mP{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||xv,c=(u,d)=>this.onKeyframesResolved(u,d);this.resolver=new o(i,c,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,c=dv(n)?n:Z3[n]||cf;let u,d;c!==cf&&typeof e[0]!="number"&&(u=Uc(Q3,yP(e[0],e[1])),e=[0,100]);const h=c({...this.options,keyframes:e});i==="mirror"&&(d=c({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=FS(h));const{calculatedDuration:p}=h,m=p+s,y=m*(r+1)-s;return{generator:h,mirroredGenerator:d,mapPercentToKeyframes:u,calculatedDuration:p,resolvedDuration:m,totalDuration:y}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:G}=this.options;return{done:!0,value:G[G.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:c,keyframes:u,calculatedDuration:d,totalDuration:h,resolvedDuration:p}=r;if(this.startTime===null)return i.next(0);const{delay:m,repeat:y,repeatType:E,repeatDelay:b,onUpdate:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const P=this.currentTime-m*(this.speed>=0?1:-1),S=this.speed>=0?P<0:P>h;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let C=this.currentTime,I=i;if(y){const G=Math.min(this.currentTime,h)/p;let W=Math.floor(G),V=G%1;!V&&G>=1&&(V=1),V===1&&W--,W=Math.min(W,y+1),!!(W%2)&&(E==="reverse"?(V=1-V,b&&(V-=b/p)):E==="mirror"&&(I=o)),C=ts(0,1,V)*p}const O=S?{done:!1,value:u[0]}:I.next(C);c&&(O.value=c(O.value));let{done:D}=O;!S&&d!==null&&(D=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const U=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return U&&s!==void 0&&(O.value=Hf(u,this.options,s)),T&&T(O.value),U&&this.finish(),O}get duration(){const{resolved:e}=this;return e?Jr(e.calculatedDuration):0}get time(){return Jr(this.currentTime)}set time(e){e=Qr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Jr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=X3,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const J3=new Set(["opacity","clipPath","filter","transform"]);function ej(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:c="easeInOut",times:u}={}){const d={[e]:n};u&&(d.offset=u);const h=VS(c,s);return Array.isArray(h)&&(d.easing=h),t.animate(d,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const tj=X0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),uf=10,nj=2e4;function rj(t){return dv(t.type)||t.type==="spring"||!US(t.ease)}function sj(t,e){const n=new Tv({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let i=0;for(;!r.done&&i<nj;)r=n.sample(i),s.push(r.value),i+=uf;return{times:void 0,keyframes:s,duration:i-uf,ease:"linear"}}const xP={anticipate:JS,backInOut:QS,circInOut:tP};function ij(t){return t in xP}class Gb extends mP{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new gP(i,(o,c)=>this.onKeyframesResolved(o,c),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:i,type:o,motionValue:c,name:u,startTime:d}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof i=="string"&&af()&&ij(i)&&(i=xP[i]),rj(this.options)){const{onComplete:p,onUpdate:m,motionValue:y,element:E,...b}=this.options,T=sj(e,b);e=T.keyframes,e.length===1&&(e[1]=e[0]),r=T.duration,s=T.times,i=T.ease,o="keyframes"}const h=ej(c.owner.current,u,e,{...this.options,duration:r,times:s,ease:i});return h.startTime=d??this.calcStartTime(),this.pendingTimeline?(Ab(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:p}=this.options;c.set(Hf(e,this.options,n)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Jr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Jr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Qr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Cn;const{animation:r}=n;Ab(r,e)}return Cn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:i,ease:o,times:c}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:h,onComplete:p,element:m,...y}=this.options,E=new Tv({...y,keyframes:r,duration:s,type:i,ease:o,times:c,isGenerator:!0}),b=Qr(this.time);d.setWithVelocity(E.sample(b-uf).value,E.sample(b).value,uf)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:o,type:c}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=n.owner.getProps();return tj()&&r&&J3.has(r)&&!u&&!d&&!s&&i!=="mirror"&&o!==0&&c!=="inertia"}}const oj={type:"spring",stiffness:500,damping:25,restSpeed:10},aj=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),lj={type:"keyframes",duration:.8},cj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uj=(t,{keyframes:e})=>e.length>2?lj:eo.has(t)?t.startsWith("scale")?aj(e[1]):oj:cj;function dj({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:c,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const Sv=(t,e,n,r={},s,i)=>o=>{const c=uv(r,t)||{},u=c.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Qr(u);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:m=>{e.set(m),c.onUpdate&&c.onUpdate(m)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:i?void 0:s};dj(c)||(h={...h,...uj(t,h)}),h.duration&&(h.duration=Qr(h.duration)),h.repeatDelay&&(h.repeatDelay=Qr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(p=!0)),p&&!i&&e.get()!==void 0){const m=Hf(h.keyframes,c);if(m!==void 0)return rt.update(()=>{h.onUpdate(m),h.onComplete()}),new kN([])}return!i&&Gb.supports(h)?new Gb(h):new Tv(h)};function fj({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function EP(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:c,...u}=e;r&&(o=r);const d=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const p in u){const m=t.getValue(p,(i=t.latestValues[p])!==null&&i!==void 0?i:null),y=u[p];if(y===void 0||h&&fj(h,p))continue;const E={delay:n,...uv(o||{},p)};let b=!1;if(window.MotionHandoffAnimation){const P=qS(t);if(P){const S=window.MotionHandoffAnimation(P,p,rt);S!==null&&(E.startTime=S,b=!0)}}Sm(t,p),m.start(Sv(p,m,y,t.shouldReduceMotion&&WS.has(p)?{type:!1}:E,t,b));const T=m.animation;T&&d.push(T)}return c&&Promise.all(d).then(()=>{rt.update(()=>{c&&GN(t,c)})}),d}function Im(t,e,n={}){var r;const s=Wf(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all(EP(t,s,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:m}=i;return hj(t,e,h+d,p,m,n)}:()=>Promise.resolve(),{when:u}=i;if(u){const[d,h]=u==="beforeChildren"?[o,c]:[c,o];return d().then(()=>h())}else return Promise.all([o(),c(n.delay)])}function hj(t,e,n=0,r=0,s=1,i){const o=[],c=(t.variantChildren.size-1)*r,u=s===1?(d=0)=>d*r:(d=0)=>c-d*r;return Array.from(t.variantChildren).sort(pj).forEach((d,h)=>{d.notify("AnimationStart",e),o.push(Im(d,e,{...i,delay:n+u(h)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function pj(t,e){return t.sortNodePosition(e)}function gj(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Im(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Im(t,e,n);else{const s=typeof e=="function"?Wf(t,e,n.custom):e;r=Promise.all(EP(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const mj=Q0.length;function TP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?TP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<mj;n++){const r=Q0[n],s=t.props[r];(_c(s)||s===!1)&&(e[r]=s)}return e}const vj=[...Z0].reverse(),yj=Z0.length;function _j(t){return e=>Promise.all(e.map(({animation:n,options:r})=>gj(t,n,r)))}function wj(t){let e=_j(t),n=Wb(),r=!0;const s=u=>(d,h)=>{var p;const m=Wf(t,h,u==="exit"?(p=t.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(m){const{transition:y,transitionEnd:E,...b}=m;d={...d,...b,...E}}return d};function i(u){e=u(t)}function o(u){const{props:d}=t,h=TP(t.parent)||{},p=[],m=new Set;let y={},E=1/0;for(let T=0;T<yj;T++){const P=vj[T],S=n[P],C=d[P]!==void 0?d[P]:h[P],I=_c(C),O=P===u?S.isActive:null;O===!1&&(E=T);let D=C===h[P]&&C!==d[P]&&I;if(D&&r&&t.manuallyAnimateOnMount&&(D=!1),S.protectedKeys={...y},!S.isActive&&O===null||!C&&!S.prevProp||$f(C)||typeof C=="boolean")continue;const U=bj(S.prevProp,C);let G=U||P===u&&S.isActive&&!D&&I||T>E&&I,W=!1;const V=Array.isArray(C)?C:[C];let Q=V.reduce(s(P),{});O===!1&&(Q={});const{prevResolvedValues:te={}}=S,ae={...te,...Q},ie=ce=>{G=!0,m.has(ce)&&(W=!0,m.delete(ce)),S.needsAnimating[ce]=!0;const K=t.getValue(ce);K&&(K.liveStyle=!1)};for(const ce in ae){const K=Q[ce],Y=te[ce];if(y.hasOwnProperty(ce))continue;let Z=!1;xm(K)&&xm(Y)?Z=!DS(K,Y):Z=K!==Y,Z?K!=null?ie(ce):m.add(ce):K!==void 0&&m.has(ce)?ie(ce):S.protectedKeys[ce]=!0}S.prevProp=C,S.prevResolvedValues=Q,S.isActive&&(y={...y,...Q}),r&&t.blockInitialAnimation&&(G=!1),G&&(!(D&&U)||W)&&p.push(...V.map(ce=>({animation:ce,options:{type:P}})))}if(m.size){const T={};m.forEach(P=>{const S=t.getBaseTarget(P),C=t.getValue(P);C&&(C.liveStyle=!0),T[P]=S??null}),p.push({animation:T})}let b=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(p):Promise.resolve()}function c(u,d){var h;if(n[u].isActive===d)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(m=>{var y;return(y=m.animationState)===null||y===void 0?void 0:y.setActive(u,d)}),n[u].isActive=d;const p=o(u);for(const m in n)n[m].protectedKeys={};return p}return{animateChanges:o,setActive:c,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Wb(),r=!0}}}function bj(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!DS(e,t):!1}function Ri(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Wb(){return{animate:Ri(!0),whileInView:Ri(),whileHover:Ri(),whileTap:Ri(),whileDrag:Ri(),whileFocus:Ri(),exit:Ri()}}class oi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class xj extends oi{constructor(e){super(e),e.animationState||(e.animationState=wj(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();$f(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Ej=0;class Tj extends oi{constructor(){super(...arguments),this.id=Ej++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Sj={animation:{Feature:xj},exit:{Feature:Tj}};function Ec(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Vc(t){return{point:{x:t.pageX,y:t.pageY}}}const Pj=t=>e=>hv(e)&&t(e,Vc(e));function oc(t,e,n,r){return Ec(t,e,Pj(n),r)}const Hb=(t,e)=>Math.abs(t-e);function Aj(t,e){const n=Hb(t.x,e.x),r=Hb(t.y,e.y);return Math.sqrt(n**2+r**2)}class SP{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=gg(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,y=Aj(p.offset,{x:0,y:0})>=3;if(!m&&!y)return;const{point:E}=p,{timestamp:b}=Ft;this.history.push({...E,timestamp:b});const{onStart:T,onMove:P}=this.handlers;m||(T&&T(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=pg(m,this.transformPagePoint),rt.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:y,onSessionEnd:E,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=gg(p.type==="pointercancel"?this.lastMoveEventInfo:pg(m,this.transformPagePoint),this.history);this.startEvent&&y&&y(p,T),E&&E(p,T)},!hv(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Vc(e),c=pg(o,this.transformPagePoint),{point:u}=c,{timestamp:d}=Ft;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,gg(c,this.history)),this.removeListeners=Uc(oc(this.contextWindow,"pointermove",this.handlePointerMove),oc(this.contextWindow,"pointerup",this.handlePointerUp),oc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ti(this.updatePoint)}}function pg(t,e){return e?{point:e(t.point)}:t}function qb(t,e){return{x:t.x-e.x,y:t.y-e.y}}function gg({point:t},e){return{point:t,delta:qb(t,PP(e)),offset:qb(t,Cj(e)),velocity:Rj(e,.1)}}function Cj(t){return t[0]}function PP(t){return t[t.length-1]}function Rj(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=PP(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Qr(e)));)n--;if(!r)return{x:0,y:0};const i=Jr(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const AP=1e-4,kj=1-AP,Mj=1+AP,CP=.01,Ij=0-CP,Oj=0+CP;function Mn(t){return t.max-t.min}function Lj(t,e,n){return Math.abs(t-e)<=n}function Kb(t,e,n,r=.5){t.origin=r,t.originPoint=ct(e.min,e.max,t.origin),t.scale=Mn(n)/Mn(e),t.translate=ct(n.min,n.max,t.origin)-t.originPoint,(t.scale>=kj&&t.scale<=Mj||isNaN(t.scale))&&(t.scale=1),(t.translate>=Ij&&t.translate<=Oj||isNaN(t.translate))&&(t.translate=0)}function ac(t,e,n,r){Kb(t.x,e.x,n.x,r?r.originX:void 0),Kb(t.y,e.y,n.y,r?r.originY:void 0)}function Yb(t,e,n){t.min=n.min+e.min,t.max=t.min+Mn(e)}function Nj(t,e,n){Yb(t.x,e.x,n.x),Yb(t.y,e.y,n.y)}function Xb(t,e,n){t.min=e.min-n.min,t.max=t.min+Mn(e)}function lc(t,e,n){Xb(t.x,e.x,n.x),Xb(t.y,e.y,n.y)}function jj(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ct(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ct(n,t,r.max):Math.min(t,n)),t}function Zb(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Dj(t,{top:e,left:n,bottom:r,right:s}){return{x:Zb(t.x,n,s),y:Zb(t.y,e,r)}}function Qb(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Fj(t,e){return{x:Qb(t.x,e.x),y:Qb(t.y,e.y)}}function Bj(t,e){let n=.5;const r=Mn(t),s=Mn(e);return s>r?n=ba(e.min,e.max-r,t.min):r>s&&(n=ba(t.min,t.max-s,e.min)),ts(0,1,n)}function Uj(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Om=.35;function Vj(t=Om){return t===!1?t=0:t===!0&&(t=Om),{x:Jb(t,"left","right"),y:Jb(t,"top","bottom")}}function Jb(t,e,n){return{min:ex(t,e),max:ex(t,n)}}function ex(t,e){return typeof t=="number"?t:t[e]||0}const tx=()=>({translate:0,scale:1,origin:0,originPoint:0}),ua=()=>({x:tx(),y:tx()}),nx=()=>({min:0,max:0}),mt=()=>({x:nx(),y:nx()});function Un(t){return[t("x"),t("y")]}function RP({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function zj({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function $j(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function mg(t){return t===void 0||t===1}function Lm({scale:t,scaleX:e,scaleY:n}){return!mg(t)||!mg(e)||!mg(n)}function Li(t){return Lm(t)||kP(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function kP(t){return rx(t.x)||rx(t.y)}function rx(t){return t&&t!=="0%"}function df(t,e,n){const r=t-n,s=e*r;return n+s}function sx(t,e,n,r,s){return s!==void 0&&(t=df(t,s,r)),df(t,n,r)+e}function Nm(t,e=0,n=1,r,s){t.min=sx(t.min,e,n,r,s),t.max=sx(t.max,e,n,r,s)}function MP(t,{x:e,y:n}){Nm(t.x,e.translate,e.scale,e.originPoint),Nm(t.y,n.translate,n.scale,n.originPoint)}const ix=.999999999999,ox=1.0000000000001;function Gj(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let c=0;c<s;c++){i=n[c],o=i.projectionDelta;const{visualElement:u}=i.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&fa(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,MP(t,o)),r&&Li(i.latestValues)&&fa(t,i.latestValues))}e.x<ox&&e.x>ix&&(e.x=1),e.y<ox&&e.y>ix&&(e.y=1)}function da(t,e){t.min=t.min+e,t.max=t.max+e}function ax(t,e,n,r,s=.5){const i=ct(t.min,t.max,s);Nm(t,e,n,i,r)}function fa(t,e){ax(t.x,e.x,e.scaleX,e.scale,e.originX),ax(t.y,e.y,e.scaleY,e.scale,e.originY)}function IP(t,e){return RP($j(t.getBoundingClientRect(),e))}function Wj(t,e,n){const r=IP(t,n),{scroll:s}=e;return s&&(da(r.x,s.offset.x),da(r.y,s.offset.y)),r}const OP=({current:t})=>t?t.ownerDocument.defaultView:null,Hj=new WeakMap;class qj{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=mt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Vc(h).point)},i=(h,p)=>{const{drag:m,dragPropagation:y,onDragStart:E}=this.getProps();if(m&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=BN(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Un(T=>{let P=this.getAxisMotionValue(T).get()||0;if(Sr.test(P)){const{projection:S}=this.visualElement;if(S&&S.layout){const C=S.layout.layoutBox[T];C&&(P=Mn(C)*(parseFloat(P)/100))}}this.originPoint[T]=P}),E&&rt.postRender(()=>E(h,p)),Sm(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(h,p)=>{const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:E,onDrag:b}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:T}=p;if(y&&this.currentDirection===null){this.currentDirection=Kj(T),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",p.point,T),this.updateAxis("y",p.point,T),this.visualElement.render(),b&&b(h,p)},c=(h,p)=>this.stop(h,p),u=()=>Un(h=>{var p;return this.getAnimationState(h)==="paused"&&((p=this.getAxisMotionValue(h).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new SP(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:OP(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&rt.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!bd(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=jj(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&la(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=Dj(s.layoutBox,n):this.constraints=!1,this.elastic=Vj(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Un(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Uj(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!la(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Wj(r,s.root,this.visualElement.getTransformPagePoint());let o=Fj(s.layout.layoutBox,i);if(n){const c=n(zj(o));this.hasMutatedConstraints=!!c,c&&(o=RP(c))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},d=Un(h=>{if(!bd(h,n,this.currentDirection))return;let p=u&&u[h]||{};o&&(p={min:0,max:0});const m=s?200:1e6,y=s?40:1e7,E={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...p};return this.startAxisValueAnimation(h,E)});return Promise.all(d).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Sm(this.visualElement,e),r.start(Sv(e,r,0,n,this.visualElement,!1))}stopAnimation(){Un(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Un(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Un(n=>{const{drag:r}=this.getProps();if(!bd(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:c}=s.layout.layoutBox[n];i.set(e[n]-ct(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!la(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Un(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();s[o]=Bj({min:u,max:u},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Un(o=>{if(!bd(o,e,null))return;const c=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];c.set(ct(u,d,s[o]))})}addListeners(){if(!this.visualElement.current)return;Hj.set(this.visualElement,this);const e=this.visualElement.current,n=oc(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();la(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),rt.read(r);const o=Ec(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(Un(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=u[h].translate,p.set(p.get()+u[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Om,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:c}}}function bd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Kj(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Yj extends oi{constructor(e){super(e),this.removeGroupControls=Cn,this.removeListeners=Cn,this.controls=new qj(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Cn}unmount(){this.removeGroupControls(),this.removeListeners()}}const lx=t=>(e,n)=>{t&&rt.postRender(()=>t(e,n))};class Xj extends oi{constructor(){super(...arguments),this.removePointerDownListener=Cn}onPointerDown(e){this.session=new SP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:OP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:lx(e),onStart:lx(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&rt.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=oc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const qd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function cx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Fl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ae.test(t))t=parseFloat(t);else return t;const n=cx(t,e.target.x),r=cx(t,e.target.y);return`${n}% ${r}%`}},Zj={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=ni.parse(t);if(s.length>5)return r;const i=ni.createTransformer(t),o=typeof s[0]!="number"?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;s[0+o]/=c,s[1+o]/=u;const d=ct(c,u,.5);return typeof s[2+o]=="number"&&(s[2+o]/=d),typeof s[3+o]=="number"&&(s[3+o]/=d),i(s)}};class Qj extends _.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;yN(Jj),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),qd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||rt.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ev.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function LP(t){const[e,n]=mS(),r=_.useContext(H0);return x.jsx(Qj,{...t,layoutGroup:r,switchLayoutGroup:_.useContext(TS),isPresent:e,safeToRemove:n})}const Jj={borderRadius:{...Fl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fl,borderTopRightRadius:Fl,borderBottomLeftRadius:Fl,borderBottomRightRadius:Fl,boxShadow:Zj};function eD(t,e,n){const r=Yt(t)?t:bc(t);return r.start(Sv("",r,e,n)),r.animation}function tD(t){return t instanceof SVGElement&&t.tagName!=="svg"}const nD=(t,e)=>t.depth-e.depth;class rD{constructor(){this.children=[],this.isDirty=!1}add(e){pv(this.children,e),this.isDirty=!0}remove(e){gv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(nD),this.isDirty=!1,this.children.forEach(e)}}function sD(t,e){const n=Pr.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(ti(r),t(i-e))};return rt.read(r,!0),()=>ti(r)}const NP=["TopLeft","TopRight","BottomLeft","BottomRight"],iD=NP.length,ux=t=>typeof t=="string"?parseFloat(t):t,dx=t=>typeof t=="number"||Ae.test(t);function oD(t,e,n,r,s,i){s?(t.opacity=ct(0,n.opacity!==void 0?n.opacity:1,aD(r)),t.opacityExit=ct(e.opacity!==void 0?e.opacity:1,0,lD(r))):i&&(t.opacity=ct(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<iD;o++){const c=`border${NP[o]}Radius`;let u=fx(e,c),d=fx(n,c);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||dx(u)===dx(d)?(t[c]=Math.max(ct(ux(u),ux(d),r),0),(Sr.test(d)||Sr.test(u))&&(t[c]+="%")):t[c]=d}(e.rotate||n.rotate)&&(t.rotate=ct(e.rotate||0,n.rotate||0,r))}function fx(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const aD=jP(0,.5,eP),lD=jP(.5,.95,Cn);function jP(t,e,n){return r=>r<t?0:r>e?1:n(ba(t,e,r))}function hx(t,e){t.min=e.min,t.max=e.max}function Bn(t,e){hx(t.x,e.x),hx(t.y,e.y)}function px(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function gx(t,e,n,r,s){return t-=e,t=df(t,1/n,r),s!==void 0&&(t=df(t,1/s,r)),t}function cD(t,e=0,n=1,r=.5,s,i=t,o=t){if(Sr.test(e)&&(e=parseFloat(e),e=ct(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=ct(i.min,i.max,r);t===i&&(c-=e),t.min=gx(t.min,e,n,c,s),t.max=gx(t.max,e,n,c,s)}function mx(t,e,[n,r,s],i,o){cD(t,e[n],e[r],e[s],e.scale,i,o)}const uD=["x","scaleX","originX"],dD=["y","scaleY","originY"];function vx(t,e,n,r){mx(t.x,e,uD,n?n.x:void 0,r?r.x:void 0),mx(t.y,e,dD,n?n.y:void 0,r?r.y:void 0)}function yx(t){return t.translate===0&&t.scale===1}function DP(t){return yx(t.x)&&yx(t.y)}function _x(t,e){return t.min===e.min&&t.max===e.max}function fD(t,e){return _x(t.x,e.x)&&_x(t.y,e.y)}function wx(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function FP(t,e){return wx(t.x,e.x)&&wx(t.y,e.y)}function bx(t){return Mn(t.x)/Mn(t.y)}function xx(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class hD{constructor(){this.members=[]}add(e){pv(this.members,e),e.scheduleRender()}remove(e){if(gv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function pD(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:m,skewX:y,skewY:E}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),y&&(r+=`skewX(${y}deg) `),E&&(r+=`skewY(${E}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const Ni={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Jl=typeof window<"u"&&window.MotionDebug!==void 0,vg=["","X","Y","Z"],gD={visibility:"hidden"},Ex=1e3;let mD=0;function yg(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function BP(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=qS(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",rt,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&BP(r)}function UP({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},c=e==null?void 0:e()){this.id=mD++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Jl&&(Ni.totalNodes=Ni.resolvedTargetDeltas=Ni.recalculatedProjection=0),this.nodes.forEach(_D),this.nodes.forEach(TD),this.nodes.forEach(SD),this.nodes.forEach(wD),Jl&&window.MotionDebug.record(Ni)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new rD)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new mv),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=tD(o),this.instance=o;const{layoutId:u,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(d||u)&&(this.isLayoutDirty=!0),t){let p;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=sD(m,250),qd.hasAnimatedSinceResize&&(qd.hasAnimatedSinceResize=!1,this.nodes.forEach(Sx))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeTargetChanged:y,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||h.getDefaultTransition()||kD,{onLayoutAnimationStart:T,onLayoutAnimationComplete:P}=h.getProps(),S=!this.targetLayout||!FP(this.targetLayout,E)||y,C=!m&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||m&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,C);const I={...uv(b,"layout"),onPlay:T,onComplete:P};(h.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I)}else m||Sx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ti(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(PD),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&BP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Tx);return}this.isUpdating||this.nodes.forEach(xD),this.isUpdating=!1,this.nodes.forEach(ED),this.nodes.forEach(vD),this.nodes.forEach(yD),this.clearAllSnapshots();const c=Pr.now();Ft.delta=ts(0,1e3/60,c-Ft.timestamp),Ft.timestamp=c,Ft.isProcessing=!0,cg.update.process(Ft),cg.preRender.process(Ft),cg.render.process(Ft),Ft.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ev.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bD),this.sharedNodes.forEach(AD)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,rt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){rt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=mt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!DP(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&(c||Li(this.latestValues)||h)&&(s(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),MD(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:c}=this.options;if(!c)return mt();const u=c.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(ID))){const{scroll:h}=this.root;h&&(da(u.x,h.offset.x),da(u.y,h.offset.y))}return u}removeElementScroll(o){var c;const u=mt();if(Bn(u,o),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return u;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:p,options:m}=h;h!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&Bn(u,o),da(u.x,p.offset.x),da(u.y,p.offset.y))}return u}applyTransform(o,c=!1){const u=mt();Bn(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!c&&h.options.layoutScroll&&h.scroll&&h!==h.root&&fa(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Li(h.latestValues)&&fa(u,h.latestValues)}return Li(this.latestValues)&&fa(u,this.latestValues),u}removeTransform(o){const c=mt();Bn(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Li(d.latestValues))continue;Lm(d.latestValues)&&d.updateSnapshot();const h=mt(),p=d.measurePageBox();Bn(h,p),vx(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Li(this.latestValues)&&vx(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ft.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var c;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!(!this.layout||!(p||m))){if(this.resolvedRelativeTargetAt=Ft.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mt(),this.relativeTargetOrigin=mt(),lc(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Bn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=mt(),this.targetWithTransforms=mt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Nj(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Bn(this.target,this.layout.layoutBox),MP(this.target,this.targetDelta)):Bn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mt(),this.relativeTargetOrigin=mt(),lc(this.relativeTargetOrigin,this.target,y.target),Bn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Jl&&Ni.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Lm(this.parent.latestValues)||kP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Ft.timestamp&&(d=!1),d)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;Bn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;Gj(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=mt());const{target:E}=c;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(px(this.prevProjectionDelta.x,this.projectionDelta.x),px(this.prevProjectionDelta.y,this.projectionDelta.y)),ac(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==y||!xx(this.projectionDelta.x,this.prevProjectionDelta.x)||!xx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E)),Jl&&Ni.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ua(),this.projectionDelta=ua(),this.projectionDeltaWithTransform=ua()}setAnimationOrigin(o,c=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},p=ua();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const m=mt(),y=u?u.source:void 0,E=this.layout?this.layout.source:void 0,b=y!==E,T=this.getStack(),P=!T||T.members.length<=1,S=!!(b&&!P&&this.options.crossfade===!0&&!this.path.some(RD));this.animationProgress=0;let C;this.mixTargetDelta=I=>{const O=I/1e3;Px(p.x,o.x,O),Px(p.y,o.y,O),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(lc(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),CD(this.relativeTarget,this.relativeTargetOrigin,m,O),C&&fD(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=mt()),Bn(C,this.relativeTarget)),b&&(this.animationValues=h,oD(h,d,this.latestValues,O,S,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ti(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=rt.update(()=>{qd.hasAnimatedSinceResize=!0,this.currentAnimation=eD(0,Ex,{...o,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ex),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:d,latestValues:h}=o;if(!(!c||!u||!d)){if(this!==o&&this.layout&&d&&VP(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||mt();const p=Mn(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const m=Mn(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}Bn(c,u),fa(c,h),ac(this.projectionDeltaWithTransform,this.layoutCorrected,c,h)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new hD),this.sharedNodes.get(o).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:c}=this.options;return c?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:c}=this.options;return c?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const d={};u.z&&yg("z",o,d,this.animationValues);for(let h=0;h<vg.length;h++)yg(`rotate${vg[h]}`,o,d,this.animationValues),yg(`skew${vg[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}getProjectionStyles(o){var c,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return gD;const d={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Wd(o==null?void 0:o.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none",d;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Wd(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Li(this.latestValues)&&(b.transform=h?h({},""):"none",this.hasProjected=!1),b}const m=p.animationValues||p.latestValues;this.applyTransformsToTarget(),d.transform=pD(this.projectionDeltaWithTransform,this.treeScale,m),h&&(d.transform=h(m,d.transform));const{x:y,y:E}=this.projectionDelta;d.transformOrigin=`${y.origin*100}% ${E.origin*100}% 0`,p.animationValues?d.opacity=p===this?(u=(c=m.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:d.opacity=p===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const b in of){if(m[b]===void 0)continue;const{correct:T,applyTo:P}=of[b],S=d.transform==="none"?m[b]:T(m[b],p);if(P){const C=P.length;for(let I=0;I<C;I++)d[P[I]]=S}else d[b]=S}return this.options.layoutId&&(d.pointerEvents=p===this?Wd(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var c;return(c=o.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(Tx),this.root.sharedNodes.clear()}}}function vD(t){t.updateLayout()}function yD(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?Un(p=>{const m=o?n.measuredBox[p]:n.layoutBox[p],y=Mn(m);m.min=r[p].min,m.max=m.min+y}):VP(i,n.layoutBox,r)&&Un(p=>{const m=o?n.measuredBox[p]:n.layoutBox[p],y=Mn(r[p]);m.max=m.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+y)});const c=ua();ac(c,r,n.layoutBox);const u=ua();o?ac(u,t.applyTransform(s,!0),n.measuredBox):ac(u,r,n.layoutBox);const d=!DP(c);let h=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:y}=p;if(m&&y){const E=mt();lc(E,n.layoutBox,m.layoutBox);const b=mt();lc(b,r,y.layoutBox),FP(E,b)||(h=!0),p.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=E,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:c,hasLayoutChanged:d,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function _D(t){Jl&&Ni.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function wD(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function bD(t){t.clearSnapshot()}function Tx(t){t.clearMeasurements()}function xD(t){t.isLayoutDirty=!1}function ED(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Sx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function TD(t){t.resolveTargetDelta()}function SD(t){t.calcProjection()}function PD(t){t.resetSkewAndRotation()}function AD(t){t.removeLeadSnapshot()}function Px(t,e,n){t.translate=ct(e.translate,0,n),t.scale=ct(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Ax(t,e,n,r){t.min=ct(e.min,n.min,r),t.max=ct(e.max,n.max,r)}function CD(t,e,n,r){Ax(t.x,e.x,n.x,r),Ax(t.y,e.y,n.y,r)}function RD(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const kD={duration:.45,ease:[.4,0,.1,1]},Cx=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Rx=Cx("applewebkit/")&&!Cx("chrome/")?Math.round:Cn;function kx(t){t.min=Rx(t.min),t.max=Rx(t.max)}function MD(t){kx(t.x),kx(t.y)}function VP(t,e,n){return t==="position"||t==="preserve-aspect"&&!Lj(bx(e),bx(n),.2)}function ID(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const OD=UP({attachResizeListener:(t,e)=>Ec(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_g={current:void 0},zP=UP({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!_g.current){const t=new OD({});t.mount(window),t.setOptions({layoutScroll:!0}),_g.current=t}return _g.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),LD={pan:{Feature:Xj},drag:{Feature:Yj,ProjectionNode:zP,MeasureLayout:LP}};function Mx(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&rt.postRender(()=>i(e,Vc(e)))}class ND extends oi{mount(){const{current:e}=this.node;e&&(this.unmount=LN(e,n=>(Mx(this.node,n,"Start"),r=>Mx(this.node,r,"End"))))}unmount(){}}class jD extends oi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Uc(Ec(this.node.current,"focus",()=>this.onFocus()),Ec(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ix(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&rt.postRender(()=>i(e,Vc(e)))}class DD extends oi{mount(){const{current:e}=this.node;e&&(this.unmount=FN(e,n=>(Ix(this.node,n,"Start"),(r,{success:s})=>Ix(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const jm=new WeakMap,wg=new WeakMap,FD=t=>{const e=jm.get(t.target);e&&e(t)},BD=t=>{t.forEach(FD)};function UD({root:t,...e}){const n=t||document;wg.has(n)||wg.set(n,{});const r=wg.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(BD,{root:t,...e})),r[s]}function VD(t,e,n){const r=UD(e);return jm.set(t,n),r.observe(t),()=>{jm.delete(t),r.unobserve(t)}}const zD={some:0,all:1};class $D extends oi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:zD[s]},c=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),m=d?h:p;m&&m(u)};return VD(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(GD(e,n))&&this.startObserver()}unmount(){}}function GD({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const WD={inView:{Feature:$D},tap:{Feature:DD},focus:{Feature:jD},hover:{Feature:ND}},HD={layout:{ProjectionNode:zP,MeasureLayout:LP}},Dm={current:null},$P={current:!1};function qD(){if($P.current=!0,!!Y0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Dm.current=t.matches;t.addListener(e),e()}else Dm.current=!1}const KD=[...pP,qt,ni],YD=t=>KD.find(hP(t)),Ox=new WeakMap;function XD(t,e,n){for(const r in e){const s=e[r],i=n[r];if(Yt(s))t.addValue(r,s);else if(Yt(i))t.addValue(r,bc(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,bc(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Lx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ZD{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=xv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Pr.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,rt.render(this.render,!1,!0))};const{latestValues:u,renderState:d,onUpdate:h}=o;this.onUpdate=h,this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!i,this.isControllingVariants=Gf(n),this.isVariantNode=xS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in m){const E=m[y];u[y]!==void 0&&Yt(E)&&E.set(u[y],!1)}}mount(e){this.current=e,Ox.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),$P.current||qD(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Dm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Ox.delete(this.current),this.projection&&this.projection.unmount(),ti(this.notifyUpdate),ti(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=eo.has(e),s=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&rt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in xa){const n=xa[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):mt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Lx.length;r++){const s=Lx[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=XD(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=bc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(dP(s)||nP(s))?s=parseFloat(s):!YD(s)&&ni.test(n)&&(s=lP(e,n)),this.setBaseTarget(e,Yt(s)?s.get():s)),Yt(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const o=nv(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(s=o[e])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Yt(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new mv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class GP extends ZD{constructor(){super(...arguments),this.KeyframeResolver=gP}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Yt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function QD(t){return window.getComputedStyle(t)}class JD extends GP{constructor(){super(...arguments),this.type="html",this.renderInstance=MS}readValueFromInstance(e,n){if(eo.has(n)){const r=bv(n);return r&&r.default||0}else{const r=QD(e),s=(CS(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return IP(e,n)}build(e,n,r){iv(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return cv(e,n,r)}}class eF extends GP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=mt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(eo.has(n)){const r=bv(n);return r&&r.default||0}return n=IS.has(n)?n:J0(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return NS(e,n,r)}build(e,n,r){ov(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){OS(e,n,r,s)}mount(e){this.isSVGTag=lv(e.tagName),super.mount(e)}}const tF=(t,e)=>tv(t)?new eF(e):new JD(e,{allowProjection:t!==_.Fragment}),nF=AN({...Sj,...WD,...LD,...HD},tF),Tn=zL(nF);function rF(t,e){const n=_.createContext(e),r=i=>{const{children:o,...c}=i,u=_.useMemo(()=>c,Object.values(c));return x.jsx(n.Provider,{value:u,children:o})};r.displayName=t+"Provider";function s(i){const o=_.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function as(t,e=[]){let n=[];function r(i,o){const c=_.createContext(o),u=n.length;n=[...n,o];const d=p=>{var P;const{scope:m,children:y,...E}=p,b=((P=m==null?void 0:m[t])==null?void 0:P[u])||c,T=_.useMemo(()=>E,Object.values(E));return x.jsx(b.Provider,{value:T,children:y})};d.displayName=i+"Provider";function h(p,m){var b;const y=((b=m==null?void 0:m[t])==null?void 0:b[u])||c,E=_.useContext(y);if(E)return E;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(o=>_.createContext(o));return function(c){const u=(c==null?void 0:c[t])||i;return _.useMemo(()=>({[`__scope${t}`]:{...c,[t]:u}}),[c,u])}};return s.scopeName=t,[r,sF(s,...e)]}function sF(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((c,{useScope:u,scopeName:d})=>{const p=u(i)[`__scope${d}`];return{...c,...p}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function sr(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var Ct=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{};function Nx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function qf(...t){return e=>{let n=!1;const r=t.map(s=>{const i=Nx(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Nx(t[s],null)}}}}function We(...t){return _.useCallback(qf(...t),t)}function Ta(t){const e=iF(t),n=_.forwardRef((r,s)=>{const{children:i,...o}=r,c=_.Children.toArray(i),u=c.find(aF);if(u){const d=u.props.children,h=c.map(p=>p===u?_.Children.count(d)>1?_.Children.only(null):_.isValidElement(d)?d.props.children:null:p);return x.jsx(e,{...o,ref:s,children:_.isValidElement(d)?_.cloneElement(d,void 0,h):null})}return x.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function iF(t){const e=_.forwardRef((n,r)=>{const{children:s,...i}=n;if(_.isValidElement(s)){const o=cF(s),c=lF(i,s.props);return s.type!==_.Fragment&&(c.ref=r?qf(r,o):o),_.cloneElement(s,c)}return _.Children.count(s)>1?_.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var WP=Symbol("radix.slottable");function oF(t){const e=({children:n})=>x.jsx(x.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=WP,e}function aF(t){return _.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===WP}function lF(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...c)=>{const u=i(...c);return s(...c),u}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function cF(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var uF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Le=uF.reduce((t,e)=>{const n=Ta(`Primitive.${e}`),r=_.forwardRef((s,i)=>{const{asChild:o,...c}=s,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(u,{...c,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function HP(t,e){t&&Qi.flushSync(()=>t.dispatchEvent(e))}var bg={exports:{}},xg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jx;function dF(){if(jx)return xg;jx=1;var t=Df();function e(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function c(p,m){var y=m(),E=r({inst:{value:y,getSnapshot:m}}),b=E[0].inst,T=E[1];return i(function(){b.value=y,b.getSnapshot=m,u(b)&&T({inst:b})},[p,y,m]),s(function(){return u(b)&&T({inst:b}),p(function(){u(b)&&T({inst:b})})},[p]),o(y),y}function u(p){var m=p.getSnapshot;p=p.value;try{var y=m();return!n(p,y)}catch{return!0}}function d(p,m){return m()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return xg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,xg}var Dx;function fF(){return Dx||(Dx=1,bg.exports=dF()),bg.exports}var hF=fF();function pF(){return hF.useSyncExternalStore(gF,()=>!0,()=>!1)}function gF(){return()=>{}}var Pv="Avatar",[mF,sJ]=as(Pv),[vF,qP]=mF(Pv),KP=_.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=_.useState("idle");return x.jsx(vF,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:x.jsx(Le.span,{...r,ref:e})})});KP.displayName=Pv;var YP="AvatarImage",XP=_.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=qP(YP,n),c=yF(r,i),u=sr(d=>{s(d),o.onImageLoadingStatusChange(d)});return Ct(()=>{c!=="idle"&&u(c)},[c,u]),c==="loaded"?x.jsx(Le.img,{...i,ref:e,src:r}):null});XP.displayName=YP;var ZP="AvatarFallback",QP=_.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=qP(ZP,n),[o,c]=_.useState(r===void 0);return _.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(u)}},[r]),o&&i.imageLoadingStatus!=="loaded"?x.jsx(Le.span,{...s,ref:e}):null});QP.displayName=ZP;function Fx(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function yF(t,{referrerPolicy:e,crossOrigin:n}){const r=pF(),s=_.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,c]=_.useState(()=>Fx(i,t));return Ct(()=>{c(Fx(i,t))},[i,t]),Ct(()=>{const u=p=>()=>{c(p)};if(!i)return;const d=u("loaded"),h=u("error");return i.addEventListener("load",d),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",d),i.removeEventListener("error",h)}},[i,n,e]),o}var JP=KP,eA=XP,tA=QP;function nA(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=nA(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function rA(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=nA(t))&&(r&&(r+=" "),r+=e);return r}const Av="-",_F=t=>{const e=bF(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const c=o.split(Av);return c[0]===""&&c.length!==1&&c.shift(),sA(c,e)||wF(o)},getConflictingClassGroupIds:(o,c)=>{const u=n[o]||[];return c&&r[o]?[...u,...r[o]]:u}}},sA=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?sA(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Av);return(o=e.validators.find(({validator:c})=>c(i)))==null?void 0:o.classGroupId},Bx=/^\[(.+)\]$/,wF=t=>{if(Bx.test(t)){const e=Bx.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},bF=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return EF(Object.entries(t.classGroups),n).forEach(([i,o])=>{Fm(o,r,i,e)}),r},Fm=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Ux(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(xF(s)){Fm(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Fm(o,Ux(e,i),n,r)})})},Ux=(t,e)=>{let n=t;return e.split(Av).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},xF=t=>t.isThemeGetter,EF=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,c])=>[e+o,c])):i);return[n,s]}):t,TF=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},iA="!",SF=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=c=>{const u=[];let d=0,h=0,p;for(let T=0;T<c.length;T++){let P=c[T];if(d===0){if(P===s&&(r||c.slice(T,T+i)===e)){u.push(c.slice(h,T)),h=T+i;continue}if(P==="/"){p=T;continue}}P==="["?d++:P==="]"&&d--}const m=u.length===0?c:c.substring(h),y=m.startsWith(iA),E=y?m.substring(1):m,b=p&&p>h?p-h:void 0;return{modifiers:u,hasImportantModifier:y,baseClassName:E,maybePostfixModifierPosition:b}};return n?c=>n({className:c,parseClassName:o}):o},PF=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},AF=t=>({cache:TF(t.cacheSize),parseClassName:SF(t),..._F(t)}),CF=/\s+/,RF=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(CF);let c="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{modifiers:h,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:y}=n(d);let E=!!y,b=r(E?m.substring(0,y):m);if(!b){if(!E){c=d+(c.length>0?" "+c:c);continue}if(b=r(m),!b){c=d+(c.length>0?" "+c:c);continue}E=!1}const T=PF(h).join(":"),P=p?T+iA:T,S=P+b;if(i.includes(S))continue;i.push(S);const C=s(b,E);for(let I=0;I<C.length;++I){const O=C[I];i.push(P+O)}c=d+(c.length>0?" "+c:c)}return c};function kF(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=oA(e))&&(r&&(r+=" "),r+=n);return r}const oA=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=oA(t[r]))&&(n&&(n+=" "),n+=e);return n};function MF(t,...e){let n,r,s,i=o;function o(u){const d=e.reduce((h,p)=>p(h),t());return n=AF(d),r=n.cache.get,s=n.cache.set,i=c,c(u)}function c(u){const d=r(u);if(d)return d;const h=RF(u,n);return s(u,h),h}return function(){return i(kF.apply(null,arguments))}}const tt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},aA=/^\[(?:([a-z-]+):)?(.+)\]$/i,IF=/^\d+\/\d+$/,OF=new Set(["px","full","screen"]),LF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,NF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,jF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,DF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,FF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,qr=t=>ga(t)||OF.has(t)||IF.test(t),Fs=t=>za(t,"length",HF),ga=t=>!!t&&!Number.isNaN(Number(t)),Eg=t=>za(t,"number",ga),Bl=t=>!!t&&Number.isInteger(Number(t)),BF=t=>t.endsWith("%")&&ga(t.slice(0,-1)),Me=t=>aA.test(t),Bs=t=>LF.test(t),UF=new Set(["length","size","percentage"]),VF=t=>za(t,UF,lA),zF=t=>za(t,"position",lA),$F=new Set(["image","url"]),GF=t=>za(t,$F,KF),WF=t=>za(t,"",qF),Ul=()=>!0,za=(t,e,n)=>{const r=aA.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},HF=t=>NF.test(t)&&!jF.test(t),lA=()=>!1,qF=t=>DF.test(t),KF=t=>FF.test(t),YF=()=>{const t=tt("colors"),e=tt("spacing"),n=tt("blur"),r=tt("brightness"),s=tt("borderColor"),i=tt("borderRadius"),o=tt("borderSpacing"),c=tt("borderWidth"),u=tt("contrast"),d=tt("grayscale"),h=tt("hueRotate"),p=tt("invert"),m=tt("gap"),y=tt("gradientColorStops"),E=tt("gradientColorStopPositions"),b=tt("inset"),T=tt("margin"),P=tt("opacity"),S=tt("padding"),C=tt("saturate"),I=tt("scale"),O=tt("sepia"),D=tt("skew"),U=tt("space"),G=tt("translate"),W=()=>["auto","contain","none"],V=()=>["auto","hidden","clip","visible","scroll"],Q=()=>["auto",Me,e],te=()=>[Me,e],ae=()=>["",qr,Fs],ie=()=>["auto",ga,Me],ve=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],le=()=>["solid","dashed","dotted","double","none"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],Y=()=>["","0",Me],Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[ga,Me];return{cacheSize:500,separator:":",theme:{colors:[Ul],spacing:[qr,Fs],blur:["none","",Bs,Me],brightness:F(),borderColor:[t],borderRadius:["none","","full",Bs,Me],borderSpacing:te(),borderWidth:ae(),contrast:F(),grayscale:Y(),hueRotate:F(),invert:Y(),gap:te(),gradientColorStops:[t],gradientColorStopPositions:[BF,Fs],inset:Q(),margin:Q(),opacity:F(),padding:te(),saturate:F(),scale:F(),sepia:Y(),skew:F(),space:te(),translate:te()},classGroups:{aspect:[{aspect:["auto","square","video",Me]}],container:["container"],columns:[{columns:[Bs]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ve(),Me]}],overflow:[{overflow:V()}],"overflow-x":[{"overflow-x":V()}],"overflow-y":[{"overflow-y":V()}],overscroll:[{overscroll:W()}],"overscroll-x":[{"overscroll-x":W()}],"overscroll-y":[{"overscroll-y":W()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Bl,Me]}],basis:[{basis:Q()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Me]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",Bl,Me]}],"grid-cols":[{"grid-cols":[Ul]}],"col-start-end":[{col:["auto",{span:["full",Bl,Me]},Me]}],"col-start":[{"col-start":ie()}],"col-end":[{"col-end":ie()}],"grid-rows":[{"grid-rows":[Ul]}],"row-start-end":[{row:["auto",{span:[Bl,Me]},Me]}],"row-start":[{"row-start":ie()}],"row-end":[{"row-end":ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Me]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[T]}],mx:[{mx:[T]}],my:[{my:[T]}],ms:[{ms:[T]}],me:[{me:[T]}],mt:[{mt:[T]}],mr:[{mr:[T]}],mb:[{mb:[T]}],ml:[{ml:[T]}],"space-x":[{"space-x":[U]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[U]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Me,e]}],"min-w":[{"min-w":[Me,e,"min","max","fit"]}],"max-w":[{"max-w":[Me,e,"none","full","min","max","fit","prose",{screen:[Bs]},Bs]}],h:[{h:[Me,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Me,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Me,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Me,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Bs,Fs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Eg]}],"font-family":[{font:[Ul]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Me]}],"line-clamp":[{"line-clamp":["none",ga,Eg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",qr,Me]}],"list-image":[{"list-image":["none",Me]}],"list-style-type":[{list:["none","disc","decimal",Me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[P]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[P]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...le(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",qr,Fs]}],"underline-offset":[{"underline-offset":["auto",qr,Me]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:te()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[P]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ve(),zF]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",VF]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},GF]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[P]}],"border-style":[{border:[...le(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[P]}],"divide-style":[{divide:le()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...le()]}],"outline-offset":[{"outline-offset":[qr,Me]}],"outline-w":[{outline:[qr,Fs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:ae()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[P]}],"ring-offset-w":[{"ring-offset":[qr,Fs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Bs,WF]}],"shadow-color":[{shadow:[Ul]}],opacity:[{opacity:[P]}],"mix-blend":[{"mix-blend":[...ce(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ce()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Bs,Me]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[p]}],saturate:[{saturate:[C]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[P]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Me]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",Me]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",Me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[Bl,Me]}],"translate-x":[{"translate-x":[G]}],"translate-y":[{"translate-y":[G]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Me]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Me]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":te()}],"scroll-mx":[{"scroll-mx":te()}],"scroll-my":[{"scroll-my":te()}],"scroll-ms":[{"scroll-ms":te()}],"scroll-me":[{"scroll-me":te()}],"scroll-mt":[{"scroll-mt":te()}],"scroll-mr":[{"scroll-mr":te()}],"scroll-mb":[{"scroll-mb":te()}],"scroll-ml":[{"scroll-ml":te()}],"scroll-p":[{"scroll-p":te()}],"scroll-px":[{"scroll-px":te()}],"scroll-py":[{"scroll-py":te()}],"scroll-ps":[{"scroll-ps":te()}],"scroll-pe":[{"scroll-pe":te()}],"scroll-pt":[{"scroll-pt":te()}],"scroll-pr":[{"scroll-pr":te()}],"scroll-pb":[{"scroll-pb":te()}],"scroll-pl":[{"scroll-pl":te()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Me]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[qr,Fs,Eg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},XF=MF(YF);function $e(...t){return XF(rA(t))}const cA=_.forwardRef(({className:t,...e},n)=>x.jsx(JP,{ref:n,className:$e("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));cA.displayName=JP.displayName;const ZF=_.forwardRef(({className:t,...e},n)=>x.jsx(eA,{ref:n,className:$e("aspect-square h-full w-full",t),...e}));ZF.displayName=eA.displayName;const uA=_.forwardRef(({className:t,...e},n)=>x.jsx(tA,{ref:n,className:$e("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));uA.displayName=tA.displayName;const Vx=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,zx=rA,dA=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return zx(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],p=i==null?void 0:i[d];if(h===null)return null;const m=Vx(h)||Vx(p);return s[d][m]}),c=n&&Object.entries(n).reduce((d,h)=>{let[p,m]=h;return m===void 0||(d[p]=m),d},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:p,className:m,...y}=h;return Object.entries(y).every(E=>{let[b,T]=E;return Array.isArray(T)?T.includes({...i,...c}[b]):{...i,...c}[b]===T})?[...d,p,m]:d},[]);return zx(t,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},QF=dA("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function $x({className:t,variant:e,...n}){return x.jsx("div",{className:$e(QF({variant:e}),t),...n})}const JF=({label:t,isExpanded:e,onToggle:n,level:r=0,children:s,isDarkMode:i,parentKey:o=""})=>{const c=()=>e?o.includes("emTransito")||o.includes("naBase")?i?"bg-gray-100 bg-opacity-10":"bg-blue-600 bg-opacity-10":i?"bg-gray-100 bg-opacity-15":"bg-blue-600 bg-opacity-15":"";return x.jsxs("div",{className:`${r>0?"ml-4 border-l-2 border-dashed border-gray-500 pl-4":""} mb-1`,children:[x.jsxs("div",{className:`flex items-center justify-between cursor-pointer h-10 px-3 rounded ${c()} ${!e&&(i?"hover:bg-zinc-800":"hover:bg-gray-50")}`,onClick:n,children:[x.jsx("span",{className:`text-xs ${i?"text-gray-300":"text-gray-700"}`,children:t}),s&&x.jsx(Tn.div,{initial:!1,animate:{rotate:e?180:0},transition:{duration:.2},children:x.jsx($0,{size:16})})]}),x.jsx(LL,{children:e&&x.jsx(Tn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},style:{overflow:"hidden"},className:"mt-2",children:s})})]})},eB=({items:t,level:e,isDarkMode:n})=>{const[r,s]=_.useState(null),i=o=>r===o?n?"bg-gray-100/5":"bg-blue-600/5":"";return x.jsx("div",{className:`space-y-1 ${e>0?"ml-2 border-l-2 border-dashed border-gray-500 pl-2":""}`,children:t.map(o=>x.jsx("button",{className:`flex w-full px-3 py-2 rounded-lg transition-colors ${i(o.id)} ${n?"hover:bg-zinc-800":"hover:bg-gray-50"}`,onClick:()=>s(o.id),children:x.jsxs("div",{className:"flex items-center justify-between w-full",children:[x.jsxs("div",{className:"flex flex-col",children:[x.jsx("span",{className:`text-xs text-start ${n?"text-gray-300":"text-gray-600"}`,children:o.label}),o.status==="offline"&&o.lastSeen&&x.jsxs("div",{className:"flex flex-col items-start mt-1",children:[x.jsx("span",{className:"text-[10px] text-gray-400",children:"Última localização:"}),x.jsx("span",{className:"text-[10px] text-gray-400",children:o.lastSeen})]})]}),x.jsx("div",{className:"flex items-center",children:o.status==="online"?x.jsx(RL,{size:18,className:"text-green-500"}):x.jsx(CL,{size:18,className:"text-red-500"})})]})},o.id))})},tB=({data:t,expandedItems:e,onToggleItem:n,isDarkMode:r})=>{const s=(i,o="",c=0)=>Array.isArray(i)?x.jsx(eB,{items:i,level:c,isDarkMode:r}):typeof i=="object"?Object.entries(i).map(([u,d])=>{if(u==="label")return null;const h=o?`${o}_${u}`:u;return u==="items"?s(d,o,c+1):x.jsx(JF,{label:d.label,isExpanded:!!e[h],onToggle:()=>n(h),level:c,isDarkMode:r,parentKey:h,children:s(d.items,h,c+1)},h)}):null;return x.jsxs("div",{className:"p-2 mt-1",children:[x.jsxs("div",{className:"gap-3 mb-2",children:[x.jsxs("div",{className:"flex items-center mb-2",children:[x.jsx("div",{className:"rounded-lg mr-2",children:x.jsx(G0,{size:18,strokeWidth:1.5,className:r?"text-gray-300":"text-gray-900"})}),x.jsx("p",{className:`text-xs ${r?"text-gray-300":"text-gray-900"}`,children:"Monitoramento"})]}),x.jsx("p",{className:`text-xs ${r?"text-gray-400":"text-gray-600"} mt-1`,children:"Acesse a câmera desejada através das abas abaixo:"})]}),x.jsx("div",{className:`h-[1px] ${r?"bg-gray-700":"bg-[#00000029]"}`}),x.jsx("div",{className:"space-y-1 mt-4",children:s(t)})]})};function _e(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}var nB=V0[" useInsertionEffect ".trim().toString()]||Ct;function Sa({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=rB({defaultProp:e,onChange:n}),c=t!==void 0,u=c?t:s;{const h=_.useRef(t!==void 0);_.useEffect(()=>{const p=h.current;p!==c&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=c},[c,r])}const d=_.useCallback(h=>{var p;if(c){const m=sB(h)?h(t):h;m!==t&&((p=o.current)==null||p.call(o,m))}else i(h)},[c,t,i,o]);return[u,d]}function rB({defaultProp:t,onChange:e}){const[n,r]=_.useState(t),s=_.useRef(n),i=_.useRef(e);return nB(()=>{i.current=e},[e]),_.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function sB(t){return typeof t=="function"}function Cv(t){const e=t+"CollectionProvider",[n,r]=as(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=b=>{const{scope:T,children:P}=b,S=Qe.useRef(null),C=Qe.useRef(new Map).current;return x.jsx(s,{scope:T,itemMap:C,collectionRef:S,children:P})};o.displayName=e;const c=t+"CollectionSlot",u=Ta(c),d=Qe.forwardRef((b,T)=>{const{scope:P,children:S}=b,C=i(c,P),I=We(T,C.collectionRef);return x.jsx(u,{ref:I,children:S})});d.displayName=c;const h=t+"CollectionItemSlot",p="data-radix-collection-item",m=Ta(h),y=Qe.forwardRef((b,T)=>{const{scope:P,children:S,...C}=b,I=Qe.useRef(null),O=We(T,I),D=i(h,P);return Qe.useEffect(()=>(D.itemMap.set(I,{ref:I,...C}),()=>void D.itemMap.delete(I))),x.jsx(m,{[p]:"",ref:O,children:S})});y.displayName=h;function E(b){const T=i(t+"CollectionConsumer",b);return Qe.useCallback(()=>{const S=T.collectionRef.current;if(!S)return[];const C=Array.from(S.querySelectorAll(`[${p}]`));return Array.from(T.itemMap.values()).sort((D,U)=>C.indexOf(D.ref.current)-C.indexOf(U.ref.current))},[T.collectionRef,T.itemMap])}return[{Provider:o,Slot:d,ItemSlot:y},E,r]}var iB=_.createContext(void 0);function Rv(t){const e=_.useContext(iB);return t||e||"ltr"}function oB(t,e=globalThis==null?void 0:globalThis.document){const n=sr(t);_.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var aB="DismissableLayer",Bm="dismissableLayer.update",lB="dismissableLayer.pointerDownOutside",cB="dismissableLayer.focusOutside",Gx,fA=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zc=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:c,...u}=t,d=_.useContext(fA),[h,p]=_.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=_.useState({}),E=We(e,U=>p(U)),b=Array.from(d.layers),[T]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),P=b.indexOf(T),S=h?b.indexOf(h):-1,C=d.layersWithOutsidePointerEventsDisabled.size>0,I=S>=P,O=fB(U=>{const G=U.target,W=[...d.branches].some(V=>V.contains(G));!I||W||(s==null||s(U),o==null||o(U),U.defaultPrevented||c==null||c())},m),D=hB(U=>{const G=U.target;[...d.branches].some(V=>V.contains(G))||(i==null||i(U),o==null||o(U),U.defaultPrevented||c==null||c())},m);return oB(U=>{S===d.layers.size-1&&(r==null||r(U),!U.defaultPrevented&&c&&(U.preventDefault(),c()))},m),_.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Gx=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),Wx(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Gx)}},[h,m,n,d]),_.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),Wx())},[h,d]),_.useEffect(()=>{const U=()=>y({});return document.addEventListener(Bm,U),()=>document.removeEventListener(Bm,U)},[]),x.jsx(Le.div,{...u,ref:E,style:{pointerEvents:C?I?"auto":"none":void 0,...t.style},onFocusCapture:_e(t.onFocusCapture,D.onFocusCapture),onBlurCapture:_e(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:_e(t.onPointerDownCapture,O.onPointerDownCapture)})});zc.displayName=aB;var uB="DismissableLayerBranch",dB=_.forwardRef((t,e)=>{const n=_.useContext(fA),r=_.useRef(null),s=We(e,r);return _.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),x.jsx(Le.div,{...t,ref:s})});dB.displayName=uB;function fB(t,e=globalThis==null?void 0:globalThis.document){const n=sr(t),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const i=c=>{if(c.target&&!r.current){let u=function(){hA(lB,n,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=u,e.addEventListener("click",s.current,{once:!0})):u()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function hB(t,e=globalThis==null?void 0:globalThis.document){const n=sr(t),r=_.useRef(!1);return _.useEffect(()=>{const s=i=>{i.target&&!r.current&&hA(cB,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Wx(){const t=new CustomEvent(Bm);document.dispatchEvent(t)}function hA(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?HP(s,i):s.dispatchEvent(i)}var Tg=0;function kv(){_.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Hx()),document.body.insertAdjacentElement("beforeend",t[1]??Hx()),Tg++,()=>{Tg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Tg--}},[])}function Hx(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Sg="focusScope.autoFocusOnMount",Pg="focusScope.autoFocusOnUnmount",qx={bubbles:!1,cancelable:!0},pB="FocusScope",Kf=_.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[c,u]=_.useState(null),d=sr(s),h=sr(i),p=_.useRef(null),m=We(e,b=>u(b)),y=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let b=function(C){if(y.paused||!c)return;const I=C.target;c.contains(I)?p.current=I:Hs(p.current,{select:!0})},T=function(C){if(y.paused||!c)return;const I=C.relatedTarget;I!==null&&(c.contains(I)||Hs(p.current,{select:!0}))},P=function(C){if(document.activeElement===document.body)for(const O of C)O.removedNodes.length>0&&Hs(c)};document.addEventListener("focusin",b),document.addEventListener("focusout",T);const S=new MutationObserver(P);return c&&S.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",T),S.disconnect()}}},[r,c,y.paused]),_.useEffect(()=>{if(c){Yx.add(y);const b=document.activeElement;if(!c.contains(b)){const P=new CustomEvent(Sg,qx);c.addEventListener(Sg,d),c.dispatchEvent(P),P.defaultPrevented||(gB(wB(pA(c)),{select:!0}),document.activeElement===b&&Hs(c))}return()=>{c.removeEventListener(Sg,d),setTimeout(()=>{const P=new CustomEvent(Pg,qx);c.addEventListener(Pg,h),c.dispatchEvent(P),P.defaultPrevented||Hs(b??document.body,{select:!0}),c.removeEventListener(Pg,h),Yx.remove(y)},0)}}},[c,d,h,y]);const E=_.useCallback(b=>{if(!n&&!r||y.paused)return;const T=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,P=document.activeElement;if(T&&P){const S=b.currentTarget,[C,I]=mB(S);C&&I?!b.shiftKey&&P===I?(b.preventDefault(),n&&Hs(C,{select:!0})):b.shiftKey&&P===C&&(b.preventDefault(),n&&Hs(I,{select:!0})):P===S&&b.preventDefault()}},[n,r,y.paused]);return x.jsx(Le.div,{tabIndex:-1,...o,ref:m,onKeyDown:E})});Kf.displayName=pB;function gB(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Hs(r,{select:e}),document.activeElement!==n)return}function mB(t){const e=pA(t),n=Kx(e,t),r=Kx(e.reverse(),t);return[n,r]}function pA(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Kx(t,e){for(const n of t)if(!vB(n,{upTo:e}))return n}function vB(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function yB(t){return t instanceof HTMLInputElement&&"select"in t}function Hs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&yB(t)&&e&&t.select()}}var Yx=_B();function _B(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=Xx(t,e),t.unshift(e)},remove(e){var n;t=Xx(t,e),(n=t[0])==null||n.resume()}}}function Xx(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function wB(t){return t.filter(e=>e.tagName!=="A")}var bB=V0[" useId ".trim().toString()]||(()=>{}),xB=0;function Ar(t){const[e,n]=_.useState(bB());return Ct(()=>{n(r=>r??String(xB++))},[t]),e?`radix-${e}`:""}const EB=["top","right","bottom","left"],ri=Math.min,Pn=Math.max,ff=Math.round,xd=Math.floor,Cr=t=>({x:t,y:t}),TB={left:"right",right:"left",bottom:"top",top:"bottom"},SB={start:"end",end:"start"};function Um(t,e,n){return Pn(t,ri(e,n))}function ns(t,e){return typeof t=="function"?t(e):t}function rs(t){return t.split("-")[0]}function $a(t){return t.split("-")[1]}function Mv(t){return t==="x"?"y":"x"}function Iv(t){return t==="y"?"height":"width"}function es(t){return["top","bottom"].includes(rs(t))?"y":"x"}function Ov(t){return Mv(es(t))}function PB(t,e,n){n===void 0&&(n=!1);const r=$a(t),s=Ov(t),i=Iv(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=hf(o)),[o,hf(o)]}function AB(t){const e=hf(t);return[Vm(t),e,Vm(e)]}function Vm(t){return t.replace(/start|end/g,e=>SB[e])}function CB(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function RB(t,e,n,r){const s=$a(t);let i=CB(rs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Vm)))),i}function hf(t){return t.replace(/left|right|bottom|top/g,e=>TB[e])}function kB(t){return{top:0,right:0,bottom:0,left:0,...t}}function gA(t){return typeof t!="number"?kB(t):{top:t,right:t,bottom:t,left:t}}function pf(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Zx(t,e,n){let{reference:r,floating:s}=t;const i=es(e),o=Ov(e),c=Iv(o),u=rs(e),d=i==="y",h=r.x+r.width/2-s.width/2,p=r.y+r.height/2-s.height/2,m=r[c]/2-s[c]/2;let y;switch(u){case"top":y={x:h,y:r.y-s.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:p};break;case"left":y={x:r.x-s.width,y:p};break;default:y={x:r.x,y:r.y}}switch($a(e)){case"start":y[o]-=m*(n&&d?-1:1);break;case"end":y[o]+=m*(n&&d?-1:1);break}return y}const MB=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,c=i.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:p}=Zx(d,r,u),m=r,y={},E=0;for(let b=0;b<c.length;b++){const{name:T,fn:P}=c[b],{x:S,y:C,data:I,reset:O}=await P({x:h,y:p,initialPlacement:r,placement:m,strategy:s,middlewareData:y,rects:d,platform:o,elements:{reference:t,floating:e}});h=S??h,p=C??p,y={...y,[T]:{...y[T],...I}},O&&E<=50&&(E++,typeof O=="object"&&(O.placement&&(m=O.placement),O.rects&&(d=O.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):O.rects),{x:h,y:p}=Zx(d,m,u)),b=-1)}return{x:h,y:p,placement:m,strategy:s,middlewareData:y}};async function Tc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:c,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:m=!1,padding:y=0}=ns(e,t),E=gA(y),T=c[m?p==="floating"?"reference":"floating":p],P=pf(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(T)))==null||n?T:T.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:d,rootBoundary:h,strategy:u})),S=p==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),I=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},O=pf(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:S,offsetParent:C,strategy:u}):S);return{top:(P.top-O.top+E.top)/I.y,bottom:(O.bottom-P.bottom+E.bottom)/I.y,left:(P.left-O.left+E.left)/I.x,right:(O.right-P.right+E.right)/I.x}}const IB=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:c,middlewareData:u}=e,{element:d,padding:h=0}=ns(t,e)||{};if(d==null)return{};const p=gA(h),m={x:n,y:r},y=Ov(s),E=Iv(y),b=await o.getDimensions(d),T=y==="y",P=T?"top":"left",S=T?"bottom":"right",C=T?"clientHeight":"clientWidth",I=i.reference[E]+i.reference[y]-m[y]-i.floating[E],O=m[y]-i.reference[y],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let U=D?D[C]:0;(!U||!await(o.isElement==null?void 0:o.isElement(D)))&&(U=c.floating[C]||i.floating[E]);const G=I/2-O/2,W=U/2-b[E]/2-1,V=ri(p[P],W),Q=ri(p[S],W),te=V,ae=U-b[E]-Q,ie=U/2-b[E]/2+G,ve=Um(te,ie,ae),le=!u.arrow&&$a(s)!=null&&ie!==ve&&i.reference[E]/2-(ie<te?V:Q)-b[E]/2<0,ce=le?ie<te?ie-te:ie-ae:0;return{[y]:m[y]+ce,data:{[y]:ve,centerOffset:ie-ve-ce,...le&&{alignmentOffset:ce}},reset:le}}}),OB=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:c,platform:u,elements:d}=e,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:b=!0,...T}=ns(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const P=rs(s),S=es(c),C=rs(c)===c,I=await(u.isRTL==null?void 0:u.isRTL(d.floating)),O=m||(C||!b?[hf(c)]:AB(c)),D=E!=="none";!m&&D&&O.push(...RB(c,b,E,I));const U=[c,...O],G=await Tc(e,T),W=[];let V=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&W.push(G[P]),p){const ve=PB(s,o,I);W.push(G[ve[0]],G[ve[1]])}if(V=[...V,{placement:s,overflows:W}],!W.every(ve=>ve<=0)){var Q,te;const ve=(((Q=i.flip)==null?void 0:Q.index)||0)+1,le=U[ve];if(le){var ae;const K=p==="alignment"?S!==es(le):!1,Y=((ae=V[0])==null?void 0:ae.overflows[0])>0;if(!K||Y)return{data:{index:ve,overflows:V},reset:{placement:le}}}let ce=(te=V.filter(K=>K.overflows[0]<=0).sort((K,Y)=>K.overflows[1]-Y.overflows[1])[0])==null?void 0:te.placement;if(!ce)switch(y){case"bestFit":{var ie;const K=(ie=V.filter(Y=>{if(D){const Z=es(Y.placement);return Z===S||Z==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(Z=>Z>0).reduce((Z,F)=>Z+F,0)]).sort((Y,Z)=>Y[1]-Z[1])[0])==null?void 0:ie[0];K&&(ce=K);break}case"initialPlacement":ce=c;break}if(s!==ce)return{reset:{placement:ce}}}return{}}}};function Qx(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Jx(t){return EB.some(e=>t[e]>=0)}const LB=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ns(t,e);switch(r){case"referenceHidden":{const i=await Tc(e,{...s,elementContext:"reference"}),o=Qx(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Jx(o)}}}case"escaped":{const i=await Tc(e,{...s,altBoundary:!0}),o=Qx(i,n.floating);return{data:{escapedOffsets:o,escaped:Jx(o)}}}default:return{}}}}};async function NB(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=rs(n),c=$a(n),u=es(n)==="y",d=["left","top"].includes(o)?-1:1,h=i&&u?-1:1,p=ns(e,t);let{mainAxis:m,crossAxis:y,alignmentAxis:E}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return c&&typeof E=="number"&&(y=c==="end"?E*-1:E),u?{x:y*h,y:m*d}:{x:m*d,y:y*h}}const jB=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:c}=e,u=await NB(e,t);return o===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:i+u.y,data:{...u,placement:o}}}}},DB=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:c={fn:T=>{let{x:P,y:S}=T;return{x:P,y:S}}},...u}=ns(t,e),d={x:n,y:r},h=await Tc(e,u),p=es(rs(s)),m=Mv(p);let y=d[m],E=d[p];if(i){const T=m==="y"?"top":"left",P=m==="y"?"bottom":"right",S=y+h[T],C=y-h[P];y=Um(S,y,C)}if(o){const T=p==="y"?"top":"left",P=p==="y"?"bottom":"right",S=E+h[T],C=E-h[P];E=Um(S,E,C)}const b=c.fn({...e,[m]:y,[p]:E});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[m]:i,[p]:o}}}}}},FB=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:c=0,mainAxis:u=!0,crossAxis:d=!0}=ns(t,e),h={x:n,y:r},p=es(s),m=Mv(p);let y=h[m],E=h[p];const b=ns(c,e),T=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(u){const C=m==="y"?"height":"width",I=i.reference[m]-i.floating[C]+T.mainAxis,O=i.reference[m]+i.reference[C]-T.mainAxis;y<I?y=I:y>O&&(y=O)}if(d){var P,S;const C=m==="y"?"width":"height",I=["top","left"].includes(rs(s)),O=i.reference[p]-i.floating[C]+(I&&((P=o.offset)==null?void 0:P[p])||0)+(I?0:T.crossAxis),D=i.reference[p]+i.reference[C]+(I?0:((S=o.offset)==null?void 0:S[p])||0)-(I?T.crossAxis:0);E<O?E=O:E>D&&(E=D)}return{[m]:y,[p]:E}}}},BB=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:c}=e,{apply:u=()=>{},...d}=ns(t,e),h=await Tc(e,d),p=rs(s),m=$a(s),y=es(s)==="y",{width:E,height:b}=i.floating;let T,P;p==="top"||p==="bottom"?(T=p,P=m===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(P=p,T=m==="end"?"top":"bottom");const S=b-h.top-h.bottom,C=E-h.left-h.right,I=ri(b-h[T],S),O=ri(E-h[P],C),D=!e.middlewareData.shift;let U=I,G=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(G=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(U=S),D&&!m){const V=Pn(h.left,0),Q=Pn(h.right,0),te=Pn(h.top,0),ae=Pn(h.bottom,0);y?G=E-2*(V!==0||Q!==0?V+Q:Pn(h.left,h.right)):U=b-2*(te!==0||ae!==0?te+ae:Pn(h.top,h.bottom))}await u({...e,availableWidth:G,availableHeight:U});const W=await o.getDimensions(c.floating);return E!==W.width||b!==W.height?{reset:{rects:!0}}:{}}}};function Yf(){return typeof window<"u"}function Ga(t){return mA(t)?(t.nodeName||"").toLowerCase():"#document"}function Rn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Or(t){var e;return(e=(mA(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function mA(t){return Yf()?t instanceof Node||t instanceof Rn(t).Node:!1}function ir(t){return Yf()?t instanceof Element||t instanceof Rn(t).Element:!1}function kr(t){return Yf()?t instanceof HTMLElement||t instanceof Rn(t).HTMLElement:!1}function e1(t){return!Yf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Rn(t).ShadowRoot}function $c(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=or(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function UB(t){return["table","td","th"].includes(Ga(t))}function Xf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Lv(t){const e=Nv(),n=ir(t)?or(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function VB(t){let e=si(t);for(;kr(e)&&!Pa(e);){if(Lv(e))return e;if(Xf(e))return null;e=si(e)}return null}function Nv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Pa(t){return["html","body","#document"].includes(Ga(t))}function or(t){return Rn(t).getComputedStyle(t)}function Zf(t){return ir(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function si(t){if(Ga(t)==="html")return t;const e=t.assignedSlot||t.parentNode||e1(t)&&t.host||Or(t);return e1(e)?e.host:e}function vA(t){const e=si(t);return Pa(e)?t.ownerDocument?t.ownerDocument.body:t.body:kr(e)&&$c(e)?e:vA(e)}function Sc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=vA(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Rn(s);if(i){const c=zm(o);return e.concat(o,o.visualViewport||[],$c(s)?s:[],c&&n?Sc(c):[])}return e.concat(s,Sc(s,[],n))}function zm(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function yA(t){const e=or(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=kr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,c=ff(n)!==i||ff(r)!==o;return c&&(n=i,r=o),{width:n,height:r,$:c}}function jv(t){return ir(t)?t:t.contextElement}function ma(t){const e=jv(t);if(!kr(e))return Cr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=yA(e);let o=(i?ff(n.width):n.width)/r,c=(i?ff(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const zB=Cr(0);function _A(t){const e=Rn(t);return!Nv()||!e.visualViewport?zB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function $B(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Rn(t)?!1:e}function Wi(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=jv(t);let o=Cr(1);e&&(r?ir(r)&&(o=ma(r)):o=ma(t));const c=$B(i,n,r)?_A(i):Cr(0);let u=(s.left+c.x)/o.x,d=(s.top+c.y)/o.y,h=s.width/o.x,p=s.height/o.y;if(i){const m=Rn(i),y=r&&ir(r)?Rn(r):r;let E=m,b=zm(E);for(;b&&r&&y!==E;){const T=ma(b),P=b.getBoundingClientRect(),S=or(b),C=P.left+(b.clientLeft+parseFloat(S.paddingLeft))*T.x,I=P.top+(b.clientTop+parseFloat(S.paddingTop))*T.y;u*=T.x,d*=T.y,h*=T.x,p*=T.y,u+=C,d+=I,E=Rn(b),b=zm(E)}}return pf({width:h,height:p,x:u,y:d})}function Dv(t,e){const n=Zf(t).scrollLeft;return e?e.left+n:Wi(Or(t)).left+n}function wA(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Dv(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function GB(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Or(r),c=e?Xf(e.floating):!1;if(r===o||c&&i)return n;let u={scrollLeft:0,scrollTop:0},d=Cr(1);const h=Cr(0),p=kr(r);if((p||!p&&!i)&&((Ga(r)!=="body"||$c(o))&&(u=Zf(r)),kr(r))){const y=Wi(r);d=ma(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const m=o&&!p&&!i?wA(o,u,!0):Cr(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+h.x+m.x,y:n.y*d.y-u.scrollTop*d.y+h.y+m.y}}function WB(t){return Array.from(t.getClientRects())}function HB(t){const e=Or(t),n=Zf(t),r=t.ownerDocument.body,s=Pn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Pn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Dv(t);const c=-n.scrollTop;return or(r).direction==="rtl"&&(o+=Pn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:c}}function qB(t,e){const n=Rn(t),r=Or(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,c=0,u=0;if(s){i=s.width,o=s.height;const d=Nv();(!d||d&&e==="fixed")&&(c=s.offsetLeft,u=s.offsetTop)}return{width:i,height:o,x:c,y:u}}function KB(t,e){const n=Wi(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=kr(t)?ma(t):Cr(1),o=t.clientWidth*i.x,c=t.clientHeight*i.y,u=s*i.x,d=r*i.y;return{width:o,height:c,x:u,y:d}}function t1(t,e,n){let r;if(e==="viewport")r=qB(t,n);else if(e==="document")r=HB(Or(t));else if(ir(e))r=KB(e,n);else{const s=_A(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return pf(r)}function bA(t,e){const n=si(t);return n===e||!ir(n)||Pa(n)?!1:or(n).position==="fixed"||bA(n,e)}function YB(t,e){const n=e.get(t);if(n)return n;let r=Sc(t,[],!1).filter(c=>ir(c)&&Ga(c)!=="body"),s=null;const i=or(t).position==="fixed";let o=i?si(t):t;for(;ir(o)&&!Pa(o);){const c=or(o),u=Lv(o);!u&&c.position==="fixed"&&(s=null),(i?!u&&!s:!u&&c.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||$c(o)&&!u&&bA(t,o))?r=r.filter(h=>h!==o):s=c,o=si(o)}return e.set(t,r),r}function XB(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Xf(e)?[]:YB(e,this._c):[].concat(n),r],c=o[0],u=o.reduce((d,h)=>{const p=t1(e,h,s);return d.top=Pn(p.top,d.top),d.right=ri(p.right,d.right),d.bottom=ri(p.bottom,d.bottom),d.left=Pn(p.left,d.left),d},t1(e,c,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function ZB(t){const{width:e,height:n}=yA(t);return{width:e,height:n}}function QB(t,e,n){const r=kr(e),s=Or(e),i=n==="fixed",o=Wi(t,!0,i,e);let c={scrollLeft:0,scrollTop:0};const u=Cr(0);function d(){u.x=Dv(s)}if(r||!r&&!i)if((Ga(e)!=="body"||$c(s))&&(c=Zf(e)),r){const y=Wi(e,!0,i,e);u.x=y.x+e.clientLeft,u.y=y.y+e.clientTop}else s&&d();i&&!r&&s&&d();const h=s&&!r&&!i?wA(s,c):Cr(0),p=o.left+c.scrollLeft-u.x-h.x,m=o.top+c.scrollTop-u.y-h.y;return{x:p,y:m,width:o.width,height:o.height}}function Ag(t){return or(t).position==="static"}function n1(t,e){if(!kr(t)||or(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Or(t)===n&&(n=n.ownerDocument.body),n}function xA(t,e){const n=Rn(t);if(Xf(t))return n;if(!kr(t)){let s=si(t);for(;s&&!Pa(s);){if(ir(s)&&!Ag(s))return s;s=si(s)}return n}let r=n1(t,e);for(;r&&UB(r)&&Ag(r);)r=n1(r,e);return r&&Pa(r)&&Ag(r)&&!Lv(r)?n:r||VB(t)||n}const JB=async function(t){const e=this.getOffsetParent||xA,n=this.getDimensions,r=await n(t.floating);return{reference:QB(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function eU(t){return or(t).direction==="rtl"}const tU={convertOffsetParentRelativeRectToViewportRelativeRect:GB,getDocumentElement:Or,getClippingRect:XB,getOffsetParent:xA,getElementRects:JB,getClientRects:WB,getDimensions:ZB,getScale:ma,isElement:ir,isRTL:eU};function EA(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function nU(t,e){let n=null,r;const s=Or(t);function i(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function o(c,u){c===void 0&&(c=!1),u===void 0&&(u=1),i();const d=t.getBoundingClientRect(),{left:h,top:p,width:m,height:y}=d;if(c||e(),!m||!y)return;const E=xd(p),b=xd(s.clientWidth-(h+m)),T=xd(s.clientHeight-(p+y)),P=xd(h),C={rootMargin:-E+"px "+-b+"px "+-T+"px "+-P+"px",threshold:Pn(0,ri(1,u))||1};let I=!0;function O(D){const U=D[0].intersectionRatio;if(U!==u){if(!I)return o();U?o(!1,U):r=setTimeout(()=>{o(!1,1e-7)},1e3)}U===1&&!EA(d,t.getBoundingClientRect())&&o(),I=!1}try{n=new IntersectionObserver(O,{...C,root:s.ownerDocument})}catch{n=new IntersectionObserver(O,C)}n.observe(t)}return o(!0),i}function rU(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=jv(t),h=s||i?[...d?Sc(d):[],...Sc(e)]:[];h.forEach(P=>{s&&P.addEventListener("scroll",n,{passive:!0}),i&&P.addEventListener("resize",n)});const p=d&&c?nU(d,n):null;let m=-1,y=null;o&&(y=new ResizeObserver(P=>{let[S]=P;S&&S.target===d&&y&&(y.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var C;(C=y)==null||C.observe(e)})),n()}),d&&!u&&y.observe(d),y.observe(e));let E,b=u?Wi(t):null;u&&T();function T(){const P=Wi(t);b&&!EA(b,P)&&n(),b=P,E=requestAnimationFrame(T)}return n(),()=>{var P;h.forEach(S=>{s&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),p==null||p(),(P=y)==null||P.disconnect(),y=null,u&&cancelAnimationFrame(E)}}const sU=jB,iU=DB,oU=OB,aU=BB,lU=LB,r1=IB,cU=FB,uU=(t,e,n)=>{const r=new Map,s={platform:tU,...n},i={...s.platform,_c:r};return MB(t,e,{...s,platform:i})};var Kd=typeof document<"u"?_.useLayoutEffect:_.useEffect;function gf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!gf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!gf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function TA(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function s1(t,e){const n=TA(t);return Math.round(e*n)/n}function Cg(t){const e=_.useRef(t);return Kd(()=>{e.current=t}),e}function dU(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:c=!0,whileElementsMounted:u,open:d}=t,[h,p]=_.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,y]=_.useState(r);gf(m,r)||y(r);const[E,b]=_.useState(null),[T,P]=_.useState(null),S=_.useCallback(K=>{K!==D.current&&(D.current=K,b(K))},[]),C=_.useCallback(K=>{K!==U.current&&(U.current=K,P(K))},[]),I=i||E,O=o||T,D=_.useRef(null),U=_.useRef(null),G=_.useRef(h),W=u!=null,V=Cg(u),Q=Cg(s),te=Cg(d),ae=_.useCallback(()=>{if(!D.current||!U.current)return;const K={placement:e,strategy:n,middleware:m};Q.current&&(K.platform=Q.current),uU(D.current,U.current,K).then(Y=>{const Z={...Y,isPositioned:te.current!==!1};ie.current&&!gf(G.current,Z)&&(G.current=Z,Qi.flushSync(()=>{p(Z)}))})},[m,e,n,Q,te]);Kd(()=>{d===!1&&G.current.isPositioned&&(G.current.isPositioned=!1,p(K=>({...K,isPositioned:!1})))},[d]);const ie=_.useRef(!1);Kd(()=>(ie.current=!0,()=>{ie.current=!1}),[]),Kd(()=>{if(I&&(D.current=I),O&&(U.current=O),I&&O){if(V.current)return V.current(I,O,ae);ae()}},[I,O,ae,V,W]);const ve=_.useMemo(()=>({reference:D,floating:U,setReference:S,setFloating:C}),[S,C]),le=_.useMemo(()=>({reference:I,floating:O}),[I,O]),ce=_.useMemo(()=>{const K={position:n,left:0,top:0};if(!le.floating)return K;const Y=s1(le.floating,h.x),Z=s1(le.floating,h.y);return c?{...K,transform:"translate("+Y+"px, "+Z+"px)",...TA(le.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Y,top:Z}},[n,c,le.floating,h.x,h.y]);return _.useMemo(()=>({...h,update:ae,refs:ve,elements:le,floatingStyles:ce}),[h,ae,ve,le,ce])}const fU=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?r1({element:r.current,padding:s}).fn(n):{}:r?r1({element:r,padding:s}).fn(n):{}}}},hU=(t,e)=>({...sU(t),options:[t,e]}),pU=(t,e)=>({...iU(t),options:[t,e]}),gU=(t,e)=>({...cU(t),options:[t,e]}),mU=(t,e)=>({...oU(t),options:[t,e]}),vU=(t,e)=>({...aU(t),options:[t,e]}),yU=(t,e)=>({...lU(t),options:[t,e]}),_U=(t,e)=>({...fU(t),options:[t,e]});var wU="Arrow",SA=_.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return x.jsx(Le.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:x.jsx("polygon",{points:"0,0 30,0 15,10"})})});SA.displayName=wU;var bU=SA;function xU(t){const[e,n]=_.useState(void 0);return Ct(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,c;if("borderBoxSize"in i){const u=i.borderBoxSize,d=Array.isArray(u)?u[0]:u;o=d.inlineSize,c=d.blockSize}else o=t.offsetWidth,c=t.offsetHeight;n({width:o,height:c})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Fv="Popper",[PA,Wa]=as(Fv),[EU,AA]=PA(Fv),CA=t=>{const{__scopePopper:e,children:n}=t,[r,s]=_.useState(null);return x.jsx(EU,{scope:e,anchor:r,onAnchorChange:s,children:n})};CA.displayName=Fv;var RA="PopperAnchor",kA=_.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=AA(RA,n),o=_.useRef(null),c=We(e,o);return _.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:x.jsx(Le.div,{...s,ref:c})});kA.displayName=RA;var Bv="PopperContent",[TU,SU]=PA(Bv),MA=_.forwardRef((t,e)=>{var se,pe,ue,be,Ne,De;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:p="partial",hideWhenDetached:m=!1,updatePositionStrategy:y="optimized",onPlaced:E,...b}=t,T=AA(Bv,n),[P,S]=_.useState(null),C=We(e,st=>S(st)),[I,O]=_.useState(null),D=xU(I),U=(D==null?void 0:D.width)??0,G=(D==null?void 0:D.height)??0,W=r+(i!=="center"?"-"+i:""),V=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},Q=Array.isArray(d)?d:[d],te=Q.length>0,ae={padding:V,boundary:Q.filter(AU),altBoundary:te},{refs:ie,floatingStyles:ve,placement:le,isPositioned:ce,middlewareData:K}=dU({strategy:"fixed",placement:W,whileElementsMounted:(...st)=>rU(...st,{animationFrame:y==="always"}),elements:{reference:T.anchor},middleware:[hU({mainAxis:s+G,alignmentAxis:o}),u&&pU({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?gU():void 0,...ae}),u&&mU({...ae}),vU({...ae,apply:({elements:st,rects:vt,availableWidth:tn,availableHeight:wt})=>{const{width:Lt,height:ui}=vt.reference,Wn=st.floating.style;Wn.setProperty("--radix-popper-available-width",`${tn}px`),Wn.setProperty("--radix-popper-available-height",`${wt}px`),Wn.setProperty("--radix-popper-anchor-width",`${Lt}px`),Wn.setProperty("--radix-popper-anchor-height",`${ui}px`)}}),I&&_U({element:I,padding:c}),CU({arrowWidth:U,arrowHeight:G}),m&&yU({strategy:"referenceHidden",...ae})]}),[Y,Z]=LA(le),F=sr(E);Ct(()=>{ce&&(F==null||F())},[ce,F]);const X=(se=K.arrow)==null?void 0:se.x,Pe=(pe=K.arrow)==null?void 0:pe.y,Ee=((ue=K.arrow)==null?void 0:ue.centerOffset)!==0,[ke,Ce]=_.useState();return Ct(()=>{P&&Ce(window.getComputedStyle(P).zIndex)},[P]),x.jsx("div",{ref:ie.setFloating,"data-radix-popper-content-wrapper":"",style:{...ve,transform:ce?ve.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ke,"--radix-popper-transform-origin":[(be=K.transformOrigin)==null?void 0:be.x,(Ne=K.transformOrigin)==null?void 0:Ne.y].join(" "),...((De=K.hide)==null?void 0:De.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:x.jsx(TU,{scope:n,placedSide:Y,onArrowChange:O,arrowX:X,arrowY:Pe,shouldHideArrow:Ee,children:x.jsx(Le.div,{"data-side":Y,"data-align":Z,...b,ref:C,style:{...b.style,animation:ce?void 0:"none"}})})})});MA.displayName=Bv;var IA="PopperArrow",PU={top:"bottom",right:"left",bottom:"top",left:"right"},OA=_.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=SU(IA,r),o=PU[i.placedSide];return x.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:x.jsx(bU,{...s,ref:n,style:{...s.style,display:"block"}})})});OA.displayName=IA;function AU(t){return t!==null}var CU=t=>({name:"transformOrigin",options:t,fn(e){var T,P,S;const{placement:n,rects:r,middlewareData:s}=e,o=((T=s.arrow)==null?void 0:T.centerOffset)!==0,c=o?0:t.arrowWidth,u=o?0:t.arrowHeight,[d,h]=LA(n),p={start:"0%",center:"50%",end:"100%"}[h],m=(((P=s.arrow)==null?void 0:P.x)??0)+c/2,y=(((S=s.arrow)==null?void 0:S.y)??0)+u/2;let E="",b="";return d==="bottom"?(E=o?p:`${m}px`,b=`${-u}px`):d==="top"?(E=o?p:`${m}px`,b=`${r.floating.height+u}px`):d==="right"?(E=`${-u}px`,b=o?p:`${y}px`):d==="left"&&(E=`${r.floating.width+u}px`,b=o?p:`${y}px`),{data:{x:E,y:b}}}});function LA(t){const[e,n="center"]=t.split("-");return[e,n]}var Uv=CA,Vv=kA,zv=MA,$v=OA,RU="Portal",Qf=_.forwardRef((t,e)=>{var c;const{container:n,...r}=t,[s,i]=_.useState(!1);Ct(()=>i(!0),[]);const o=n||s&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return o?cO.createPortal(x.jsx(Le.div,{...r,ref:e}),o):null});Qf.displayName=RU;function kU(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var ls=t=>{const{present:e,children:n}=t,r=MU(e),s=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),i=We(r.ref,IU(s));return typeof n=="function"||r.isPresent?_.cloneElement(s,{ref:i}):null};ls.displayName="Presence";function MU(t){const[e,n]=_.useState(),r=_.useRef(null),s=_.useRef(t),i=_.useRef("none"),o=t?"mounted":"unmounted",[c,u]=kU(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const d=Ed(r.current);i.current=c==="mounted"?d:"none"},[c]),Ct(()=>{const d=r.current,h=s.current;if(h!==t){const m=i.current,y=Ed(d);t?u("MOUNT"):y==="none"||(d==null?void 0:d.display)==="none"?u("UNMOUNT"):u(h&&m!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,u]),Ct(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,p=y=>{const b=Ed(r.current).includes(y.animationName);if(y.target===e&&b&&(u("ANIMATION_END"),!s.current)){const T=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=T)})}},m=y=>{y.target===e&&(i.current=Ed(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:_.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function Ed(t){return(t==null?void 0:t.animationName)||"none"}function IU(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Rg="rovingFocusGroup.onEntryFocus",OU={bubbles:!1,cancelable:!0},Gc="RovingFocusGroup",[$m,NA,LU]=Cv(Gc),[NU,jA]=as(Gc,[LU]),[jU,DU]=NU(Gc),DA=_.forwardRef((t,e)=>x.jsx($m.Provider,{scope:t.__scopeRovingFocusGroup,children:x.jsx($m.Slot,{scope:t.__scopeRovingFocusGroup,children:x.jsx(FU,{...t,ref:e})})}));DA.displayName=Gc;var FU=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...p}=t,m=_.useRef(null),y=We(e,m),E=Rv(i),[b,T]=Sa({prop:o,defaultProp:c??null,onChange:u,caller:Gc}),[P,S]=_.useState(!1),C=sr(d),I=NA(n),O=_.useRef(!1),[D,U]=_.useState(0);return _.useEffect(()=>{const G=m.current;if(G)return G.addEventListener(Rg,C),()=>G.removeEventListener(Rg,C)},[C]),x.jsx(jU,{scope:n,orientation:r,dir:E,loop:s,currentTabStopId:b,onItemFocus:_.useCallback(G=>T(G),[T]),onItemShiftTab:_.useCallback(()=>S(!0),[]),onFocusableItemAdd:_.useCallback(()=>U(G=>G+1),[]),onFocusableItemRemove:_.useCallback(()=>U(G=>G-1),[]),children:x.jsx(Le.div,{tabIndex:P||D===0?-1:0,"data-orientation":r,...p,ref:y,style:{outline:"none",...t.style},onMouseDown:_e(t.onMouseDown,()=>{O.current=!0}),onFocus:_e(t.onFocus,G=>{const W=!O.current;if(G.target===G.currentTarget&&W&&!P){const V=new CustomEvent(Rg,OU);if(G.currentTarget.dispatchEvent(V),!V.defaultPrevented){const Q=I().filter(le=>le.focusable),te=Q.find(le=>le.active),ae=Q.find(le=>le.id===b),ve=[te,ae,...Q].filter(Boolean).map(le=>le.ref.current);UA(ve,h)}}O.current=!1}),onBlur:_e(t.onBlur,()=>S(!1))})})}),FA="RovingFocusGroupItem",BA=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...c}=t,u=Ar(),d=i||u,h=DU(FA,n),p=h.currentTabStopId===d,m=NA(n),{onFocusableItemAdd:y,onFocusableItemRemove:E,currentTabStopId:b}=h;return _.useEffect(()=>{if(r)return y(),()=>E()},[r,y,E]),x.jsx($m.ItemSlot,{scope:n,id:d,focusable:r,active:s,children:x.jsx(Le.span,{tabIndex:p?0:-1,"data-orientation":h.orientation,...c,ref:e,onMouseDown:_e(t.onMouseDown,T=>{r?h.onItemFocus(d):T.preventDefault()}),onFocus:_e(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:_e(t.onKeyDown,T=>{if(T.key==="Tab"&&T.shiftKey){h.onItemShiftTab();return}if(T.target!==T.currentTarget)return;const P=VU(T,h.orientation,h.dir);if(P!==void 0){if(T.metaKey||T.ctrlKey||T.altKey||T.shiftKey)return;T.preventDefault();let C=m().filter(I=>I.focusable).map(I=>I.ref.current);if(P==="last")C.reverse();else if(P==="prev"||P==="next"){P==="prev"&&C.reverse();const I=C.indexOf(T.currentTarget);C=h.loop?zU(C,I+1):C.slice(I+1)}setTimeout(()=>UA(C))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:b!=null}):o})})});BA.displayName=FA;var BU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function UU(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function VU(t,e,n){const r=UU(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return BU[r]}function UA(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function zU(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var $U=DA,GU=BA,WU=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Vo=new WeakMap,Td=new WeakMap,Sd={},kg=0,VA=function(t){return t&&(t.host||VA(t.parentNode))},HU=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=VA(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},qU=function(t,e,n,r){var s=HU(e,Array.isArray(t)?t:[t]);Sd[n]||(Sd[n]=new WeakMap);var i=Sd[n],o=[],c=new Set,u=new Set(s),d=function(p){!p||c.has(p)||(c.add(p),d(p.parentNode))};s.forEach(d);var h=function(p){!p||u.has(p)||Array.prototype.forEach.call(p.children,function(m){if(c.has(m))h(m);else try{var y=m.getAttribute(r),E=y!==null&&y!=="false",b=(Vo.get(m)||0)+1,T=(i.get(m)||0)+1;Vo.set(m,b),i.set(m,T),o.push(m),b===1&&E&&Td.set(m,!0),T===1&&m.setAttribute(n,"true"),E||m.setAttribute(r,"true")}catch(P){console.error("aria-hidden: cannot operate on ",m,P)}})};return h(e),c.clear(),kg++,function(){o.forEach(function(p){var m=Vo.get(p)-1,y=i.get(p)-1;Vo.set(p,m),i.set(p,y),m||(Td.has(p)||p.removeAttribute(r),Td.delete(p)),y||p.removeAttribute(n)}),kg--,kg||(Vo=new WeakMap,Vo=new WeakMap,Td=new WeakMap,Sd={})}},Gv=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=WU(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),qU(r,s,n,"aria-hidden")):function(){return null}},br=function(){return br=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},br.apply(this,arguments)};function zA(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function KU(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Yd="right-scroll-bar-position",Xd="width-before-scroll-bar",YU="with-scroll-bars-hidden",XU="--removed-body-scroll-bar-size";function Mg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function ZU(t,e){var n=_.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var QU=typeof window<"u"?_.useLayoutEffect:_.useEffect,i1=new WeakMap;function JU(t,e){var n=ZU(null,function(r){return t.forEach(function(s){return Mg(s,r)})});return QU(function(){var r=i1.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(c){i.has(c)||Mg(c,null)}),i.forEach(function(c){s.has(c)||Mg(c,o)})}i1.set(n,t)},[t]),n}function eV(t){return t}function tV(t,e){e===void 0&&(e=eV);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(c){return c!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(c){return i(c)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var c=n;n=[],c.forEach(i),o=n}var u=function(){var h=o;o=[],h.forEach(i)},d=function(){return Promise.resolve().then(u)};d(),n={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),n}}}};return s}function nV(t){t===void 0&&(t={});var e=tV(null);return e.options=br({async:!0,ssr:!1},t),e}var $A=function(t){var e=t.sideCar,n=zA(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,br({},n))};$A.isSideCarExport=!0;function rV(t,e){return t.useMedium(e),$A}var GA=nV(),Ig=function(){},Jf=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:Ig,onWheelCapture:Ig,onTouchMoveCapture:Ig}),s=r[0],i=r[1],o=t.forwardProps,c=t.children,u=t.className,d=t.removeScrollBar,h=t.enabled,p=t.shards,m=t.sideCar,y=t.noRelative,E=t.noIsolation,b=t.inert,T=t.allowPinchZoom,P=t.as,S=P===void 0?"div":P,C=t.gapMode,I=zA(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=m,D=JU([n,e]),U=br(br({},I),s);return _.createElement(_.Fragment,null,h&&_.createElement(O,{sideCar:GA,removeScrollBar:d,shards:p,noRelative:y,noIsolation:E,inert:b,setCallbacks:i,allowPinchZoom:!!T,lockRef:n,gapMode:C}),o?_.cloneElement(_.Children.only(c),br(br({},U),{ref:D})):_.createElement(S,br({},U,{className:u,ref:D}),c))});Jf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Jf.classNames={fullWidth:Xd,zeroRight:Yd};var sV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function iV(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=sV();return e&&t.setAttribute("nonce",e),t}function oV(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function aV(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var lV=function(){var t=0,e=null;return{add:function(n){t==0&&(e=iV())&&(oV(e,n),aV(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},cV=function(){var t=lV();return function(e,n){_.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},WA=function(){var t=cV(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},uV={left:0,top:0,right:0,gap:0},Og=function(t){return parseInt(t||"",10)||0},dV=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Og(n),Og(r),Og(s)]},fV=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return uV;var e=dV(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},hV=WA(),va="data-scroll-locked",pV=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(YU,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(va,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yd,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Xd,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Yd," .").concat(Yd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Xd," .").concat(Xd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(va,`] {
    `).concat(XU,": ").concat(c,`px;
  }
`)},o1=function(){var t=parseInt(document.body.getAttribute(va)||"0",10);return isFinite(t)?t:0},gV=function(){_.useEffect(function(){return document.body.setAttribute(va,(o1()+1).toString()),function(){var t=o1()-1;t<=0?document.body.removeAttribute(va):document.body.setAttribute(va,t.toString())}},[])},mV=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;gV();var i=_.useMemo(function(){return fV(s)},[s]);return _.createElement(hV,{styles:pV(i,!e,s,n?"":"!important")})},Gm=!1;if(typeof window<"u")try{var Pd=Object.defineProperty({},"passive",{get:function(){return Gm=!0,!0}});window.addEventListener("test",Pd,Pd),window.removeEventListener("test",Pd,Pd)}catch{Gm=!1}var zo=Gm?{passive:!1}:!1,vV=function(t){return t.tagName==="TEXTAREA"},HA=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!vV(t)&&n[e]==="visible")},yV=function(t){return HA(t,"overflowY")},_V=function(t){return HA(t,"overflowX")},a1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=qA(t,r);if(s){var i=KA(t,r),o=i[1],c=i[2];if(o>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},wV=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},bV=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},qA=function(t,e){return t==="v"?yV(e):_V(e)},KA=function(t,e){return t==="v"?wV(e):bV(e)},xV=function(t,e){return t==="h"&&e==="rtl"?-1:1},EV=function(t,e,n,r,s){var i=xV(t,window.getComputedStyle(e).direction),o=i*r,c=n.target,u=e.contains(c),d=!1,h=o>0,p=0,m=0;do{var y=KA(t,c),E=y[0],b=y[1],T=y[2],P=b-T-i*E;(E||P)&&qA(t,c)&&(p+=P,m+=E),c=c.parentNode.host||c.parentNode}while(!u&&c!==document.body||u&&(e.contains(c)||e===c));return(h&&Math.abs(p)<1||!h&&Math.abs(m)<1)&&(d=!0),d},Ad=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},l1=function(t){return[t.deltaX,t.deltaY]},c1=function(t){return t&&"current"in t?t.current:t},TV=function(t,e){return t[0]===e[0]&&t[1]===e[1]},SV=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},PV=0,$o=[];function AV(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),s=_.useState(PV++)[0],i=_.useState(WA)[0],o=_.useRef(t);_.useEffect(function(){o.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var b=KU([t.lockRef.current],(t.shards||[]).map(c1),!0).filter(Boolean);return b.forEach(function(T){return T.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),b.forEach(function(T){return T.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var c=_.useCallback(function(b,T){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!o.current.allowPinchZoom;var P=Ad(b),S=n.current,C="deltaX"in b?b.deltaX:S[0]-P[0],I="deltaY"in b?b.deltaY:S[1]-P[1],O,D=b.target,U=Math.abs(C)>Math.abs(I)?"h":"v";if("touches"in b&&U==="h"&&D.type==="range")return!1;var G=a1(U,D);if(!G)return!0;if(G?O=U:(O=U==="v"?"h":"v",G=a1(U,D)),!G)return!1;if(!r.current&&"changedTouches"in b&&(C||I)&&(r.current=O),!O)return!0;var W=r.current||O;return EV(W,T,b,W==="h"?C:I)},[]),u=_.useCallback(function(b){var T=b;if(!(!$o.length||$o[$o.length-1]!==i)){var P="deltaY"in T?l1(T):Ad(T),S=e.current.filter(function(O){return O.name===T.type&&(O.target===T.target||T.target===O.shadowParent)&&TV(O.delta,P)})[0];if(S&&S.should){T.cancelable&&T.preventDefault();return}if(!S){var C=(o.current.shards||[]).map(c1).filter(Boolean).filter(function(O){return O.contains(T.target)}),I=C.length>0?c(T,C[0]):!o.current.noIsolation;I&&T.cancelable&&T.preventDefault()}}},[]),d=_.useCallback(function(b,T,P,S){var C={name:b,delta:T,target:P,should:S,shadowParent:CV(P)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(I){return I!==C})},1)},[]),h=_.useCallback(function(b){n.current=Ad(b),r.current=void 0},[]),p=_.useCallback(function(b){d(b.type,l1(b),b.target,c(b,t.lockRef.current))},[]),m=_.useCallback(function(b){d(b.type,Ad(b),b.target,c(b,t.lockRef.current))},[]);_.useEffect(function(){return $o.push(i),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:m}),document.addEventListener("wheel",u,zo),document.addEventListener("touchmove",u,zo),document.addEventListener("touchstart",h,zo),function(){$o=$o.filter(function(b){return b!==i}),document.removeEventListener("wheel",u,zo),document.removeEventListener("touchmove",u,zo),document.removeEventListener("touchstart",h,zo)}},[]);var y=t.removeScrollBar,E=t.inert;return _.createElement(_.Fragment,null,E?_.createElement(i,{styles:SV(s)}):null,y?_.createElement(mV,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function CV(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const RV=rV(GA,AV);var eh=_.forwardRef(function(t,e){return _.createElement(Jf,br({},t,{ref:e,sideCar:RV}))});eh.classNames=Jf.classNames;var Wm=["Enter"," "],kV=["ArrowDown","PageUp","Home"],YA=["ArrowUp","PageDown","End"],MV=[...kV,...YA],IV={ltr:[...Wm,"ArrowRight"],rtl:[...Wm,"ArrowLeft"]},OV={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Wc="Menu",[Pc,LV,NV]=Cv(Wc),[to,XA]=as(Wc,[NV,Wa,jA]),th=Wa(),ZA=jA(),[jV,no]=to(Wc),[DV,Hc]=to(Wc),QA=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=t,c=th(e),[u,d]=_.useState(null),h=_.useRef(!1),p=sr(i),m=Rv(s);return _.useEffect(()=>{const y=()=>{h.current=!0,document.addEventListener("pointerdown",E,{capture:!0,once:!0}),document.addEventListener("pointermove",E,{capture:!0,once:!0})},E=()=>h.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",E,{capture:!0}),document.removeEventListener("pointermove",E,{capture:!0})}},[]),x.jsx(Uv,{...c,children:x.jsx(jV,{scope:e,open:n,onOpenChange:p,content:u,onContentChange:d,children:x.jsx(DV,{scope:e,onClose:_.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:h,dir:m,modal:o,children:r})})})};QA.displayName=Wc;var FV="MenuAnchor",Wv=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=th(n);return x.jsx(Vv,{...s,...r,ref:e})});Wv.displayName=FV;var Hv="MenuPortal",[BV,JA]=to(Hv,{forceMount:void 0}),eC=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=no(Hv,e);return x.jsx(BV,{scope:e,forceMount:n,children:x.jsx(ls,{present:n||i.open,children:x.jsx(Qf,{asChild:!0,container:s,children:r})})})};eC.displayName=Hv;var zn="MenuContent",[UV,qv]=to(zn),tC=_.forwardRef((t,e)=>{const n=JA(zn,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=no(zn,t.__scopeMenu),o=Hc(zn,t.__scopeMenu);return x.jsx(Pc.Provider,{scope:t.__scopeMenu,children:x.jsx(ls,{present:r||i.open,children:x.jsx(Pc.Slot,{scope:t.__scopeMenu,children:o.modal?x.jsx(VV,{...s,ref:e}):x.jsx(zV,{...s,ref:e})})})})}),VV=_.forwardRef((t,e)=>{const n=no(zn,t.__scopeMenu),r=_.useRef(null),s=We(e,r);return _.useEffect(()=>{const i=r.current;if(i)return Gv(i)},[]),x.jsx(Kv,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:_e(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),zV=_.forwardRef((t,e)=>{const n=no(zn,t.__scopeMenu);return x.jsx(Kv,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),$V=Ta("MenuContent.ScrollLock"),Kv=_.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEntryFocus:u,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:m,onDismiss:y,disableOutsideScroll:E,...b}=t,T=no(zn,n),P=Hc(zn,n),S=th(n),C=ZA(n),I=LV(n),[O,D]=_.useState(null),U=_.useRef(null),G=We(e,U,T.onContentChange),W=_.useRef(0),V=_.useRef(""),Q=_.useRef(0),te=_.useRef(null),ae=_.useRef("right"),ie=_.useRef(0),ve=E?eh:_.Fragment,le=E?{as:$V,allowPinchZoom:!0}:void 0,ce=Y=>{var se,pe;const Z=V.current+Y,F=I().filter(ue=>!ue.disabled),X=document.activeElement,Pe=(se=F.find(ue=>ue.ref.current===X))==null?void 0:se.textValue,Ee=F.map(ue=>ue.textValue),ke=t4(Ee,Z,Pe),Ce=(pe=F.find(ue=>ue.textValue===ke))==null?void 0:pe.ref.current;(function ue(be){V.current=be,window.clearTimeout(W.current),be!==""&&(W.current=window.setTimeout(()=>ue(""),1e3))})(Z),Ce&&setTimeout(()=>Ce.focus())};_.useEffect(()=>()=>window.clearTimeout(W.current),[]),kv();const K=_.useCallback(Y=>{var F,X;return ae.current===((F=te.current)==null?void 0:F.side)&&r4(Y,(X=te.current)==null?void 0:X.area)},[]);return x.jsx(UV,{scope:n,searchRef:V,onItemEnter:_.useCallback(Y=>{K(Y)&&Y.preventDefault()},[K]),onItemLeave:_.useCallback(Y=>{var Z;K(Y)||((Z=U.current)==null||Z.focus(),D(null))},[K]),onTriggerLeave:_.useCallback(Y=>{K(Y)&&Y.preventDefault()},[K]),pointerGraceTimerRef:Q,onPointerGraceIntentChange:_.useCallback(Y=>{te.current=Y},[]),children:x.jsx(ve,{...le,children:x.jsx(Kf,{asChild:!0,trapped:s,onMountAutoFocus:_e(i,Y=>{var Z;Y.preventDefault(),(Z=U.current)==null||Z.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:x.jsx(zc,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:m,onDismiss:y,children:x.jsx($U,{asChild:!0,...C,dir:P.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:D,onEntryFocus:_e(u,Y=>{P.isUsingKeyboardRef.current||Y.preventDefault()}),preventScrollOnEntryFocus:!0,children:x.jsx(zv,{role:"menu","aria-orientation":"vertical","data-state":vC(T.open),"data-radix-menu-content":"",dir:P.dir,...S,...b,ref:G,style:{outline:"none",...b.style},onKeyDown:_e(b.onKeyDown,Y=>{const F=Y.target.closest("[data-radix-menu-content]")===Y.currentTarget,X=Y.ctrlKey||Y.altKey||Y.metaKey,Pe=Y.key.length===1;F&&(Y.key==="Tab"&&Y.preventDefault(),!X&&Pe&&ce(Y.key));const Ee=U.current;if(Y.target!==Ee||!MV.includes(Y.key))return;Y.preventDefault();const Ce=I().filter(se=>!se.disabled).map(se=>se.ref.current);YA.includes(Y.key)&&Ce.reverse(),JV(Ce)}),onBlur:_e(t.onBlur,Y=>{Y.currentTarget.contains(Y.target)||(window.clearTimeout(W.current),V.current="")}),onPointerMove:_e(t.onPointerMove,Ac(Y=>{const Z=Y.target,F=ie.current!==Y.clientX;if(Y.currentTarget.contains(Z)&&F){const X=Y.clientX>ie.current?"right":"left";ae.current=X,ie.current=Y.clientX}}))})})})})})})});tC.displayName=zn;var GV="MenuGroup",Yv=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return x.jsx(Le.div,{role:"group",...r,ref:e})});Yv.displayName=GV;var WV="MenuLabel",nC=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return x.jsx(Le.div,{...r,ref:e})});nC.displayName=WV;var mf="MenuItem",u1="menu.itemSelect",nh=_.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=_.useRef(null),o=Hc(mf,t.__scopeMenu),c=qv(mf,t.__scopeMenu),u=We(e,i),d=_.useRef(!1),h=()=>{const p=i.current;if(!n&&p){const m=new CustomEvent(u1,{bubbles:!0,cancelable:!0});p.addEventListener(u1,y=>r==null?void 0:r(y),{once:!0}),HP(p,m),m.defaultPrevented?d.current=!1:o.onClose()}};return x.jsx(rC,{...s,ref:u,disabled:n,onClick:_e(t.onClick,h),onPointerDown:p=>{var m;(m=t.onPointerDown)==null||m.call(t,p),d.current=!0},onPointerUp:_e(t.onPointerUp,p=>{var m;d.current||(m=p.currentTarget)==null||m.click()}),onKeyDown:_e(t.onKeyDown,p=>{const m=c.searchRef.current!=="";n||m&&p.key===" "||Wm.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});nh.displayName=mf;var rC=_.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,o=qv(mf,n),c=ZA(n),u=_.useRef(null),d=We(e,u),[h,p]=_.useState(!1),[m,y]=_.useState("");return _.useEffect(()=>{const E=u.current;E&&y((E.textContent??"").trim())},[i.children]),x.jsx(Pc.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:x.jsx(GU,{asChild:!0,...c,focusable:!r,children:x.jsx(Le.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:d,onPointerMove:_e(t.onPointerMove,Ac(E=>{r?o.onItemLeave(E):(o.onItemEnter(E),E.defaultPrevented||E.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:_e(t.onPointerLeave,Ac(E=>o.onItemLeave(E))),onFocus:_e(t.onFocus,()=>p(!0)),onBlur:_e(t.onBlur,()=>p(!1))})})})}),HV="MenuCheckboxItem",sC=_.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return x.jsx(cC,{scope:t.__scopeMenu,checked:n,children:x.jsx(nh,{role:"menuitemcheckbox","aria-checked":vf(n)?"mixed":n,...s,ref:e,"data-state":Zv(n),onSelect:_e(s.onSelect,()=>r==null?void 0:r(vf(n)?!0:!n),{checkForDefaultPrevented:!1})})})});sC.displayName=HV;var iC="MenuRadioGroup",[qV,KV]=to(iC,{value:void 0,onValueChange:()=>{}}),oC=_.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=sr(r);return x.jsx(qV,{scope:t.__scopeMenu,value:n,onValueChange:i,children:x.jsx(Yv,{...s,ref:e})})});oC.displayName=iC;var aC="MenuRadioItem",lC=_.forwardRef((t,e)=>{const{value:n,...r}=t,s=KV(aC,t.__scopeMenu),i=n===s.value;return x.jsx(cC,{scope:t.__scopeMenu,checked:i,children:x.jsx(nh,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":Zv(i),onSelect:_e(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});lC.displayName=aC;var Xv="MenuItemIndicator",[cC,YV]=to(Xv,{checked:!1}),uC=_.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=YV(Xv,n);return x.jsx(ls,{present:r||vf(i.checked)||i.checked===!0,children:x.jsx(Le.span,{...s,ref:e,"data-state":Zv(i.checked)})})});uC.displayName=Xv;var XV="MenuSeparator",dC=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return x.jsx(Le.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});dC.displayName=XV;var ZV="MenuArrow",fC=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=th(n);return x.jsx($v,{...s,...r,ref:e})});fC.displayName=ZV;var QV="MenuSub",[iJ,hC]=to(QV),ec="MenuSubTrigger",pC=_.forwardRef((t,e)=>{const n=no(ec,t.__scopeMenu),r=Hc(ec,t.__scopeMenu),s=hC(ec,t.__scopeMenu),i=qv(ec,t.__scopeMenu),o=_.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:u}=i,d={__scopeMenu:t.__scopeMenu},h=_.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return _.useEffect(()=>h,[h]),_.useEffect(()=>{const p=c.current;return()=>{window.clearTimeout(p),u(null)}},[c,u]),x.jsx(Wv,{asChild:!0,...d,children:x.jsx(rC,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":vC(n.open),...t,ref:qf(e,s.onTriggerChange),onClick:p=>{var m;(m=t.onClick)==null||m.call(t,p),!(t.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:_e(t.onPointerMove,Ac(p=>{i.onItemEnter(p),!p.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:_e(t.onPointerLeave,Ac(p=>{var y,E;h();const m=(y=n.content)==null?void 0:y.getBoundingClientRect();if(m){const b=(E=n.content)==null?void 0:E.dataset.side,T=b==="right",P=T?-5:5,S=m[T?"left":"right"],C=m[T?"right":"left"];i.onPointerGraceIntentChange({area:[{x:p.clientX+P,y:p.clientY},{x:S,y:m.top},{x:C,y:m.top},{x:C,y:m.bottom},{x:S,y:m.bottom}],side:b}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(p),p.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:_e(t.onKeyDown,p=>{var y;const m=i.searchRef.current!=="";t.disabled||m&&p.key===" "||IV[r.dir].includes(p.key)&&(n.onOpenChange(!0),(y=n.content)==null||y.focus(),p.preventDefault())})})})});pC.displayName=ec;var gC="MenuSubContent",mC=_.forwardRef((t,e)=>{const n=JA(zn,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=no(zn,t.__scopeMenu),o=Hc(zn,t.__scopeMenu),c=hC(gC,t.__scopeMenu),u=_.useRef(null),d=We(e,u);return x.jsx(Pc.Provider,{scope:t.__scopeMenu,children:x.jsx(ls,{present:r||i.open,children:x.jsx(Pc.Slot,{scope:t.__scopeMenu,children:x.jsx(Kv,{id:c.contentId,"aria-labelledby":c.triggerId,...s,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var p;o.isUsingKeyboardRef.current&&((p=u.current)==null||p.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:_e(t.onFocusOutside,h=>{h.target!==c.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:_e(t.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:_e(t.onKeyDown,h=>{var y;const p=h.currentTarget.contains(h.target),m=OV[o.dir].includes(h.key);p&&m&&(i.onOpenChange(!1),(y=c.trigger)==null||y.focus(),h.preventDefault())})})})})})});mC.displayName=gC;function vC(t){return t?"open":"closed"}function vf(t){return t==="indeterminate"}function Zv(t){return vf(t)?"indeterminate":t?"checked":"unchecked"}function JV(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function e4(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function t4(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=e4(t,Math.max(i,0));s.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function n4(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const c=e[i],u=e[o],d=c.x,h=c.y,p=u.x,m=u.y;h>r!=m>r&&n<(p-d)*(r-h)/(m-h)+d&&(s=!s)}return s}function r4(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return n4(n,e)}function Ac(t){return e=>e.pointerType==="mouse"?t(e):void 0}var s4=QA,i4=Wv,o4=eC,a4=tC,l4=Yv,c4=nC,u4=nh,d4=sC,f4=oC,h4=lC,p4=uC,g4=dC,m4=fC,v4=pC,y4=mC,rh="DropdownMenu",[_4,oJ]=as(rh,[XA]),en=XA(),[w4,yC]=_4(rh),_C=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:c=!0}=t,u=en(e),d=_.useRef(null),[h,p]=Sa({prop:s,defaultProp:i??!1,onChange:o,caller:rh});return x.jsx(w4,{scope:e,triggerId:Ar(),triggerRef:d,contentId:Ar(),open:h,onOpenChange:p,onOpenToggle:_.useCallback(()=>p(m=>!m),[p]),modal:c,children:x.jsx(s4,{...u,open:h,onOpenChange:p,dir:r,modal:c,children:n})})};_C.displayName=rh;var wC="DropdownMenuTrigger",bC=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=yC(wC,n),o=en(n);return x.jsx(i4,{asChild:!0,...o,children:x.jsx(Le.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:qf(e,i.triggerRef),onPointerDown:_e(t.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(i.onOpenToggle(),i.open||c.preventDefault())}),onKeyDown:_e(t.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&i.onOpenToggle(),c.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});bC.displayName=wC;var b4="DropdownMenuPortal",xC=t=>{const{__scopeDropdownMenu:e,...n}=t,r=en(e);return x.jsx(o4,{...r,...n})};xC.displayName=b4;var EC="DropdownMenuContent",TC=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=yC(EC,n),i=en(n),o=_.useRef(!1);return x.jsx(a4,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:_e(t.onCloseAutoFocus,c=>{var u;o.current||(u=s.triggerRef.current)==null||u.focus(),o.current=!1,c.preventDefault()}),onInteractOutside:_e(t.onInteractOutside,c=>{const u=c.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0,h=u.button===2||d;(!s.modal||h)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});TC.displayName=EC;var x4="DropdownMenuGroup",E4=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=en(n);return x.jsx(l4,{...s,...r,ref:e})});E4.displayName=x4;var T4="DropdownMenuLabel",SC=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=en(n);return x.jsx(c4,{...s,...r,ref:e})});SC.displayName=T4;var S4="DropdownMenuItem",PC=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=en(n);return x.jsx(u4,{...s,...r,ref:e})});PC.displayName=S4;var P4="DropdownMenuCheckboxItem",AC=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=en(n);return x.jsx(d4,{...s,...r,ref:e})});AC.displayName=P4;var A4="DropdownMenuRadioGroup",C4=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=en(n);return x.jsx(f4,{...s,...r,ref:e})});C4.displayName=A4;var R4="DropdownMenuRadioItem",CC=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=en(n);return x.jsx(h4,{...s,...r,ref:e})});CC.displayName=R4;var k4="DropdownMenuItemIndicator",RC=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=en(n);return x.jsx(p4,{...s,...r,ref:e})});RC.displayName=k4;var M4="DropdownMenuSeparator",kC=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=en(n);return x.jsx(g4,{...s,...r,ref:e})});kC.displayName=M4;var I4="DropdownMenuArrow",O4=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=en(n);return x.jsx(m4,{...s,...r,ref:e})});O4.displayName=I4;var L4="DropdownMenuSubTrigger",MC=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=en(n);return x.jsx(v4,{...s,...r,ref:e})});MC.displayName=L4;var N4="DropdownMenuSubContent",IC=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=en(n);return x.jsx(y4,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});IC.displayName=N4;var j4=_C,D4=bC,F4=xC,OC=TC,LC=SC,NC=PC,jC=AC,DC=CC,FC=RC,BC=kC,UC=MC,VC=IC;const zC=j4,$C=D4,B4=_.forwardRef(({className:t,inset:e,children:n,...r},s)=>x.jsxs(UC,{ref:s,className:$e("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,x.jsx(fL,{className:"ml-auto h-4 w-4"})]}));B4.displayName=UC.displayName;const U4=_.forwardRef(({className:t,...e},n)=>x.jsx(VC,{ref:n,className:$e("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));U4.displayName=VC.displayName;const Qv=_.forwardRef(({className:t,sideOffset:e=4,...n},r)=>x.jsx(F4,{children:x.jsx(OC,{ref:r,sideOffset:e,className:$e("z-50 min-w-[8rem] cursor-pointer overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Qv.displayName=OC.displayName;const cc=_.forwardRef(({className:t,inset:e,...n},r)=>x.jsx(NC,{ref:r,className:$e("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));cc.displayName=NC.displayName;const V4=_.forwardRef(({className:t,children:e,checked:n,...r},s)=>x.jsxs(jC,{ref:s,className:$e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[x.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:x.jsx(FC,{children:x.jsx(cS,{className:"h-4 w-4"})})}),e]}));V4.displayName=jC.displayName;const z4=_.forwardRef(({className:t,children:e,...n},r)=>x.jsxs(DC,{ref:r,className:$e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[x.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:x.jsx(FC,{children:x.jsx(pL,{className:"h-2 w-2 fill-current"})})}),e]}));z4.displayName=DC.displayName;const $4=_.forwardRef(({className:t,inset:e,...n},r)=>x.jsx(LC,{ref:r,className:$e("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));$4.displayName=LC.displayName;const G4=_.forwardRef(({className:t,...e},n)=>x.jsx(BC,{ref:n,className:$e("-mx-1 my-1 h-px bg-muted",t),...e}));G4.displayName=BC.displayName;const W4={fixos:{label:"Fixos",items:[{id:"fix1",label:"Camera Fixa 1",status:"online"},{id:"fix2",label:"Camera Fixa 2",status:"offline",lastSeen:"01/11/24 15:10"}]},veiculos:{label:"Veículos",items:{emTransito:{label:"Em Trânsito",items:[{id:"ssbpa",label:"SSBPA-P02",status:"offline",lastSeen:"01/11/24 15:10"},{id:"t01",label:"T01 - BANCADA",status:"online"}]},naBase:{label:"Na Base",items:[{id:"cam1",label:"Camera 1",status:"online"},{id:"cam2",label:"Camera 2",status:"online"}]}}},offline:{label:"Offline",items:[{id:"cam3",label:"Camera 3",status:"offline",lastSeen:"01/11/24 15:10"},{id:"cam4",label:"Camera 4",status:"offline",lastSeen:"01/11/24 15:10"}]}},H4=[{id:"usuarios",label:"Usuários",icon:"user",options:["cadastro","consultar"]},{id:"grupos",label:"Grupos",icon:"users",options:["cadastro","consultar"]},{id:"procurados",label:"Procurados",icon:"search",options:["faces","placas"]},{id:"dispositivos",label:"Dispositivos",icon:"smartphone",options:["cadastro","consultar"]},{id:"itens-monitorados",label:"Itens Monitorados",icon:"monitor",options:["cadastro","consultar"]},{id:"clientes",label:"Clientes",icon:"building",options:["cadastro","consultar"]},{id:"emails",label:"e-Mails Relatório",icon:"mail",options:["cadastro","consultar"]},{id:"relatorios",label:"Relatórios",icon:"file-text",options:["cadastro","consultar"]},{id:"notificacoes",label:"Tipo Notificações",icon:"bell",options:["cadastro","consultar"]}],q4={cadastro:"Cadastro",consultar:"Consultar",faces:"Faces",placas:"Placas"},K4=[{id:"monitoramento",label:"Monitoramento",badge:15},{id:"controle",label:"Controle"},{id:"historico",label:"Histórico de Vídeos"},{id:"estatisticas",label:"Estatísticas"}],Y4=[{id:"notifications",label:"Notificações"},{id:"location",label:"Localização"},{id:"darkMode",label:"Modo Escuro"},{id:"logout",label:"Sair"}],X4={user:x.jsx(SL,{size:16,strokeWidth:1.5}),users:x.jsx(PL,{size:16,strokeWidth:1.5}),search:x.jsx(W0,{size:16,strokeWidth:1.5}),smartphone:x.jsx(xL,{size:16,strokeWidth:1.5}),monitor:x.jsx(G0,{size:16,strokeWidth:1.5}),building:x.jsx(cL,{size:16,strokeWidth:1.5}),mail:x.jsx(_L,{size:16,strokeWidth:1.5}),"file-text":x.jsx(vL,{size:16,strokeWidth:1.5}),bell:x.jsx(lS,{size:16,strokeWidth:1.5})},Z4=({data:t,isDarkMode:e,onConsultarClick:n})=>{const r=_.useRef(null),s=(i,o)=>{o==="consultar"&&n&&n(i)};return x.jsxs("div",{className:"p-2 mt-1",ref:r,children:[x.jsxs("div",{className:"gap-3 mb-2",children:[x.jsxs("div",{className:"flex items-center mb-2",children:[x.jsx("div",{className:"rounded-lg mr-2",children:x.jsx(fS,{size:18,strokeWidth:1.5,className:e?"text-gray-300":"text-gray-900"})}),x.jsx("p",{className:`text-xs ${e?"text-gray-300":"text-gray-900"}`,children:"Controle"})]}),x.jsx("p",{className:`text-xs ${e?"text-gray-400":"text-gray-600"} mt-1`,children:"Escolha uma das opções abaixo para realizar o cadastro ou consultar os dados que precisa."})]}),x.jsx("div",{className:`h-[1px] ${e?"bg-gray-700":"bg-[#00000029]"}`}),x.jsx("div",{className:"space-y-1 mt-4 relative",children:t.map(i=>x.jsx("div",{className:"relative",children:x.jsxs(zC,{children:[x.jsx($C,{asChild:!0,children:x.jsxs("button",{className:`flex items-center w-full px-3 py-2 rounded-lg transition-colors ${e?"hover:bg-zinc-800":"hover:bg-gray-50"}`,children:[x.jsx("div",{className:`${e?"text-gray-300":"text-gray-600"}`,children:X4[i.icon]}),x.jsx("span",{className:`text-xs ml-3 ${e?"text-gray-300":"text-gray-600"}`,children:i.label})]})}),x.jsx(Qv,{className:`w-[var(--radix-dropdown-menu-trigger-width)] text-xs ${e?"bg-zinc-800 border-zinc-700":"bg-white"}`,align:"start",children:i.options.map(o=>x.jsx(cc,{className:`text-xs cursor-pointer ${e?"text-gray-300 focus:bg-zinc-700":"text-gray-600 focus:bg-gray-100"}`,onClick:()=>s(i.label,o),children:q4[o]},o))})]})},i.id))})]})};var sh="Dialog",[GC,aJ]=as(sh),[Q4,ar]=GC(sh),WC=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,c=_.useRef(null),u=_.useRef(null),[d,h]=Sa({prop:r,defaultProp:s??!1,onChange:i,caller:sh});return x.jsx(Q4,{scope:e,triggerRef:c,contentRef:u,contentId:Ar(),titleId:Ar(),descriptionId:Ar(),open:d,onOpenChange:h,onOpenToggle:_.useCallback(()=>h(p=>!p),[h]),modal:o,children:n})};WC.displayName=sh;var HC="DialogTrigger",J4=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ar(HC,n),i=We(e,s.triggerRef);return x.jsx(Le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ty(s.open),...r,ref:i,onClick:_e(t.onClick,s.onOpenToggle)})});J4.displayName=HC;var Jv="DialogPortal",[ez,qC]=GC(Jv,{forceMount:void 0}),KC=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=ar(Jv,e);return x.jsx(ez,{scope:e,forceMount:n,children:_.Children.map(r,o=>x.jsx(ls,{present:n||i.open,children:x.jsx(Qf,{asChild:!0,container:s,children:o})}))})};KC.displayName=Jv;var yf="DialogOverlay",YC=_.forwardRef((t,e)=>{const n=qC(yf,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ar(yf,t.__scopeDialog);return i.modal?x.jsx(ls,{present:r||i.open,children:x.jsx(nz,{...s,ref:e})}):null});YC.displayName=yf;var tz=Ta("DialogOverlay.RemoveScroll"),nz=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ar(yf,n);return x.jsx(eh,{as:tz,allowPinchZoom:!0,shards:[s.contentRef],children:x.jsx(Le.div,{"data-state":ty(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Hi="DialogContent",XC=_.forwardRef((t,e)=>{const n=qC(Hi,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ar(Hi,t.__scopeDialog);return x.jsx(ls,{present:r||i.open,children:i.modal?x.jsx(rz,{...s,ref:e}):x.jsx(sz,{...s,ref:e})})});XC.displayName=Hi;var rz=_.forwardRef((t,e)=>{const n=ar(Hi,t.__scopeDialog),r=_.useRef(null),s=We(e,n.contentRef,r);return _.useEffect(()=>{const i=r.current;if(i)return Gv(i)},[]),x.jsx(ZC,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_e(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:_e(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&i.preventDefault()}),onFocusOutside:_e(t.onFocusOutside,i=>i.preventDefault())})}),sz=_.forwardRef((t,e)=>{const n=ar(Hi,t.__scopeDialog),r=_.useRef(!1),s=_.useRef(!1);return x.jsx(ZC,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,c;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(c=n.triggerRef.current)==null||c.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var u,d;(u=t.onInteractOutside)==null||u.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),ZC=_.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,c=ar(Hi,n),u=_.useRef(null),d=We(e,u);return kv(),x.jsxs(x.Fragment,{children:[x.jsx(Kf,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:x.jsx(zc,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":ty(c.open),...o,ref:d,onDismiss:()=>c.onOpenChange(!1)})}),x.jsxs(x.Fragment,{children:[x.jsx(iz,{titleId:c.titleId}),x.jsx(az,{contentRef:u,descriptionId:c.descriptionId})]})]})}),ey="DialogTitle",QC=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ar(ey,n);return x.jsx(Le.h2,{id:s.titleId,...r,ref:e})});QC.displayName=ey;var JC="DialogDescription",eR=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ar(JC,n);return x.jsx(Le.p,{id:s.descriptionId,...r,ref:e})});eR.displayName=JC;var tR="DialogClose",nR=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ar(tR,n);return x.jsx(Le.button,{type:"button",...r,ref:e,onClick:_e(t.onClick,()=>s.onOpenChange(!1))})});nR.displayName=tR;function ty(t){return t?"open":"closed"}var rR="DialogTitleWarning",[lJ,sR]=rF(rR,{contentName:Hi,titleName:ey,docsSlug:"dialog"}),iz=({titleId:t})=>{const e=sR(rR),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},oz="DialogDescriptionWarning",az=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${sR(oz).contentName}}.`;return _.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},lz=WC,cz=KC,iR=YC,oR=XC,aR=QC,lR=eR,uz=nR;const dz=lz,fz=cz,cR=_.forwardRef(({className:t,...e},n)=>x.jsx(iR,{ref:n,className:$e("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));cR.displayName=iR.displayName;const uR=_.forwardRef(({className:t,children:e,...n},r)=>x.jsxs(fz,{children:[x.jsx(cR,{}),x.jsxs(oR,{ref:r,className:$e("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,x.jsxs(uz,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[x.jsx(gS,{className:"h-4 w-4"}),x.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));uR.displayName=oR.displayName;const dR=({className:t,...e})=>x.jsx("div",{className:$e("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});dR.displayName="DialogHeader";const Hm=({className:t,...e})=>x.jsx("div",{className:$e("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Hm.displayName="DialogFooter";const fR=_.forwardRef(({className:t,...e},n)=>x.jsx(aR,{ref:n,className:$e("text-lg font-semibold leading-none tracking-tight",t),...e}));fR.displayName=aR.displayName;const hz=_.forwardRef(({className:t,...e},n)=>x.jsx(lR,{ref:n,className:$e("text-sm text-muted-foreground",t),...e}));hz.displayName=lR.displayName;var pz="Label",hR=_.forwardRef((t,e)=>x.jsx(Le.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));hR.displayName=pz;var pR=hR;const gz=dA("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),sa=_.forwardRef(({className:t,...e},n)=>x.jsx(pR,{ref:n,className:$e(gz(),t),...e}));sa.displayName=pR.displayName;function d1(t,[e,n]){return Math.min(n,Math.max(e,t))}function mz(t){const e=_.useRef({value:t,previous:t});return _.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var gR=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),vz="VisuallyHidden",mR=_.forwardRef((t,e)=>x.jsx(Le.span,{...t,ref:e,style:{...gR,...t.style}}));mR.displayName=vz;var yz=mR,_z=[" ","Enter","ArrowUp","ArrowDown"],wz=[" ","Enter"],qi="Select",[ih,oh,bz]=Cv(qi),[Ha,cJ]=as(qi,[bz,Wa]),ah=Wa(),[xz,ai]=Ha(qi),[Ez,Tz]=Ha(qi),vR=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:c,onValueChange:u,dir:d,name:h,autoComplete:p,disabled:m,required:y,form:E}=t,b=ah(e),[T,P]=_.useState(null),[S,C]=_.useState(null),[I,O]=_.useState(!1),D=Rv(d),[U,G]=Sa({prop:r,defaultProp:s??!1,onChange:i,caller:qi}),[W,V]=Sa({prop:o,defaultProp:c,onChange:u,caller:qi}),Q=_.useRef(null),te=T?E||!!T.closest("form"):!0,[ae,ie]=_.useState(new Set),ve=Array.from(ae).map(le=>le.props.value).join(";");return x.jsx(Uv,{...b,children:x.jsxs(xz,{required:y,scope:e,trigger:T,onTriggerChange:P,valueNode:S,onValueNodeChange:C,valueNodeHasChildren:I,onValueNodeHasChildrenChange:O,contentId:Ar(),value:W,onValueChange:V,open:U,onOpenChange:G,dir:D,triggerPointerDownPosRef:Q,disabled:m,children:[x.jsx(ih.Provider,{scope:e,children:x.jsx(Ez,{scope:t.__scopeSelect,onNativeOptionAdd:_.useCallback(le=>{ie(ce=>new Set(ce).add(le))},[]),onNativeOptionRemove:_.useCallback(le=>{ie(ce=>{const K=new Set(ce);return K.delete(le),K})},[]),children:n})}),te?x.jsxs(VR,{"aria-hidden":!0,required:y,tabIndex:-1,name:h,autoComplete:p,value:W,onChange:le=>V(le.target.value),disabled:m,form:E,children:[W===void 0?x.jsx("option",{value:""}):null,Array.from(ae)]},ve):null]})})};vR.displayName=qi;var yR="SelectTrigger",_R=_.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=ah(n),o=ai(yR,n),c=o.disabled||r,u=We(e,o.onTriggerChange),d=oh(n),h=_.useRef("touch"),[p,m,y]=$R(b=>{const T=d().filter(C=>!C.disabled),P=T.find(C=>C.value===o.value),S=GR(T,b,P);S!==void 0&&o.onValueChange(S.value)}),E=b=>{c||(o.onOpenChange(!0),y()),b&&(o.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return x.jsx(Vv,{asChild:!0,...i,children:x.jsx(Le.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":zR(o.value)?"":void 0,...s,ref:u,onClick:_e(s.onClick,b=>{b.currentTarget.focus(),h.current!=="mouse"&&E(b)}),onPointerDown:_e(s.onPointerDown,b=>{h.current=b.pointerType;const T=b.target;T.hasPointerCapture(b.pointerId)&&T.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(E(b),b.preventDefault())}),onKeyDown:_e(s.onKeyDown,b=>{const T=p.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&m(b.key),!(T&&b.key===" ")&&_z.includes(b.key)&&(E(),b.preventDefault())})})})});_R.displayName=yR;var wR="SelectValue",bR=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...c}=t,u=ai(wR,n),{onValueNodeHasChildrenChange:d}=u,h=i!==void 0,p=We(e,u.onValueNodeChange);return Ct(()=>{d(h)},[d,h]),x.jsx(Le.span,{...c,ref:p,style:{pointerEvents:"none"},children:zR(u.value)?x.jsx(x.Fragment,{children:o}):i})});bR.displayName=wR;var Sz="SelectIcon",xR=_.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return x.jsx(Le.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});xR.displayName=Sz;var Pz="SelectPortal",ER=t=>x.jsx(Qf,{asChild:!0,...t});ER.displayName=Pz;var Ki="SelectContent",TR=_.forwardRef((t,e)=>{const n=ai(Ki,t.__scopeSelect),[r,s]=_.useState();if(Ct(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Qi.createPortal(x.jsx(SR,{scope:t.__scopeSelect,children:x.jsx(ih.Slot,{scope:t.__scopeSelect,children:x.jsx("div",{children:t.children})})}),i):null}return x.jsx(PR,{...t,ref:e})});TR.displayName=Ki;var er=10,[SR,li]=Ha(Ki),Az="SelectContentImpl",Cz=Ta("SelectContent.RemoveScroll"),PR=_.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:c,sideOffset:u,align:d,alignOffset:h,arrowPadding:p,collisionBoundary:m,collisionPadding:y,sticky:E,hideWhenDetached:b,avoidCollisions:T,...P}=t,S=ai(Ki,n),[C,I]=_.useState(null),[O,D]=_.useState(null),U=We(e,se=>I(se)),[G,W]=_.useState(null),[V,Q]=_.useState(null),te=oh(n),[ae,ie]=_.useState(!1),ve=_.useRef(!1);_.useEffect(()=>{if(C)return Gv(C)},[C]),kv();const le=_.useCallback(se=>{const[pe,...ue]=te().map(De=>De.ref.current),[be]=ue.slice(-1),Ne=document.activeElement;for(const De of se)if(De===Ne||(De==null||De.scrollIntoView({block:"nearest"}),De===pe&&O&&(O.scrollTop=0),De===be&&O&&(O.scrollTop=O.scrollHeight),De==null||De.focus(),document.activeElement!==Ne))return},[te,O]),ce=_.useCallback(()=>le([G,C]),[le,G,C]);_.useEffect(()=>{ae&&ce()},[ae,ce]);const{onOpenChange:K,triggerPointerDownPosRef:Y}=S;_.useEffect(()=>{if(C){let se={x:0,y:0};const pe=be=>{var Ne,De;se={x:Math.abs(Math.round(be.pageX)-(((Ne=Y.current)==null?void 0:Ne.x)??0)),y:Math.abs(Math.round(be.pageY)-(((De=Y.current)==null?void 0:De.y)??0))}},ue=be=>{se.x<=10&&se.y<=10?be.preventDefault():C.contains(be.target)||K(!1),document.removeEventListener("pointermove",pe),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",pe),document.addEventListener("pointerup",ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",pe),document.removeEventListener("pointerup",ue,{capture:!0})}}},[C,K,Y]),_.useEffect(()=>{const se=()=>K(!1);return window.addEventListener("blur",se),window.addEventListener("resize",se),()=>{window.removeEventListener("blur",se),window.removeEventListener("resize",se)}},[K]);const[Z,F]=$R(se=>{const pe=te().filter(Ne=>!Ne.disabled),ue=pe.find(Ne=>Ne.ref.current===document.activeElement),be=GR(pe,se,ue);be&&setTimeout(()=>be.ref.current.focus())}),X=_.useCallback((se,pe,ue)=>{const be=!ve.current&&!ue;(S.value!==void 0&&S.value===pe||be)&&(W(se),be&&(ve.current=!0))},[S.value]),Pe=_.useCallback(()=>C==null?void 0:C.focus(),[C]),Ee=_.useCallback((se,pe,ue)=>{const be=!ve.current&&!ue;(S.value!==void 0&&S.value===pe||be)&&Q(se)},[S.value]),ke=r==="popper"?qm:AR,Ce=ke===qm?{side:c,sideOffset:u,align:d,alignOffset:h,arrowPadding:p,collisionBoundary:m,collisionPadding:y,sticky:E,hideWhenDetached:b,avoidCollisions:T}:{};return x.jsx(SR,{scope:n,content:C,viewport:O,onViewportChange:D,itemRefCallback:X,selectedItem:G,onItemLeave:Pe,itemTextRefCallback:Ee,focusSelectedItem:ce,selectedItemText:V,position:r,isPositioned:ae,searchRef:Z,children:x.jsx(eh,{as:Cz,allowPinchZoom:!0,children:x.jsx(Kf,{asChild:!0,trapped:S.open,onMountAutoFocus:se=>{se.preventDefault()},onUnmountAutoFocus:_e(s,se=>{var pe;(pe=S.trigger)==null||pe.focus({preventScroll:!0}),se.preventDefault()}),children:x.jsx(zc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:se=>se.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:x.jsx(ke,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:se=>se.preventDefault(),...P,...Ce,onPlaced:()=>ie(!0),ref:U,style:{display:"flex",flexDirection:"column",outline:"none",...P.style},onKeyDown:_e(P.onKeyDown,se=>{const pe=se.ctrlKey||se.altKey||se.metaKey;if(se.key==="Tab"&&se.preventDefault(),!pe&&se.key.length===1&&F(se.key),["ArrowUp","ArrowDown","Home","End"].includes(se.key)){let be=te().filter(Ne=>!Ne.disabled).map(Ne=>Ne.ref.current);if(["ArrowUp","End"].includes(se.key)&&(be=be.slice().reverse()),["ArrowUp","ArrowDown"].includes(se.key)){const Ne=se.target,De=be.indexOf(Ne);be=be.slice(De+1)}setTimeout(()=>le(be)),se.preventDefault()}})})})})})})});PR.displayName=Az;var Rz="SelectItemAlignedPosition",AR=_.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=ai(Ki,n),o=li(Ki,n),[c,u]=_.useState(null),[d,h]=_.useState(null),p=We(e,U=>h(U)),m=oh(n),y=_.useRef(!1),E=_.useRef(!0),{viewport:b,selectedItem:T,selectedItemText:P,focusSelectedItem:S}=o,C=_.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&d&&b&&T&&P){const U=i.trigger.getBoundingClientRect(),G=d.getBoundingClientRect(),W=i.valueNode.getBoundingClientRect(),V=P.getBoundingClientRect();if(i.dir!=="rtl"){const Ne=V.left-G.left,De=W.left-Ne,st=U.left-De,vt=U.width+st,tn=Math.max(vt,G.width),wt=window.innerWidth-er,Lt=d1(De,[er,Math.max(er,wt-tn)]);c.style.minWidth=vt+"px",c.style.left=Lt+"px"}else{const Ne=G.right-V.right,De=window.innerWidth-W.right-Ne,st=window.innerWidth-U.right-De,vt=U.width+st,tn=Math.max(vt,G.width),wt=window.innerWidth-er,Lt=d1(De,[er,Math.max(er,wt-tn)]);c.style.minWidth=vt+"px",c.style.right=Lt+"px"}const Q=m(),te=window.innerHeight-er*2,ae=b.scrollHeight,ie=window.getComputedStyle(d),ve=parseInt(ie.borderTopWidth,10),le=parseInt(ie.paddingTop,10),ce=parseInt(ie.borderBottomWidth,10),K=parseInt(ie.paddingBottom,10),Y=ve+le+ae+K+ce,Z=Math.min(T.offsetHeight*5,Y),F=window.getComputedStyle(b),X=parseInt(F.paddingTop,10),Pe=parseInt(F.paddingBottom,10),Ee=U.top+U.height/2-er,ke=te-Ee,Ce=T.offsetHeight/2,se=T.offsetTop+Ce,pe=ve+le+se,ue=Y-pe;if(pe<=Ee){const Ne=Q.length>0&&T===Q[Q.length-1].ref.current;c.style.bottom="0px";const De=d.clientHeight-b.offsetTop-b.offsetHeight,st=Math.max(ke,Ce+(Ne?Pe:0)+De+ce),vt=pe+st;c.style.height=vt+"px"}else{const Ne=Q.length>0&&T===Q[0].ref.current;c.style.top="0px";const st=Math.max(Ee,ve+b.offsetTop+(Ne?X:0)+Ce)+ue;c.style.height=st+"px",b.scrollTop=pe-Ee+b.offsetTop}c.style.margin=`${er}px 0`,c.style.minHeight=Z+"px",c.style.maxHeight=te+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[m,i.trigger,i.valueNode,c,d,b,T,P,i.dir,r]);Ct(()=>C(),[C]);const[I,O]=_.useState();Ct(()=>{d&&O(window.getComputedStyle(d).zIndex)},[d]);const D=_.useCallback(U=>{U&&E.current===!0&&(C(),S==null||S(),E.current=!1)},[C,S]);return x.jsx(Mz,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:y,onScrollButtonChange:D,children:x.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:x.jsx(Le.div,{...s,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});AR.displayName=Rz;var kz="SelectPopperPosition",qm=_.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=er,...i}=t,o=ah(n);return x.jsx(zv,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});qm.displayName=kz;var[Mz,ny]=Ha(Ki,{}),Km="SelectViewport",CR=_.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=li(Km,n),o=ny(Km,n),c=We(e,i.onViewportChange),u=_.useRef(0);return x.jsxs(x.Fragment,{children:[x.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),x.jsx(ih.Slot,{scope:n,children:x.jsx(Le.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:_e(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&p){const y=Math.abs(u.current-h.scrollTop);if(y>0){const E=window.innerHeight-er*2,b=parseFloat(p.style.minHeight),T=parseFloat(p.style.height),P=Math.max(b,T);if(P<E){const S=P+y,C=Math.min(E,S),I=S-C;p.style.height=C+"px",p.style.bottom==="0px"&&(h.scrollTop=I>0?I:0,p.style.justifyContent="flex-end")}}}u.current=h.scrollTop})})})]})});CR.displayName=Km;var RR="SelectGroup",[Iz,Oz]=Ha(RR),Lz=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Ar();return x.jsx(Iz,{scope:n,id:s,children:x.jsx(Le.div,{role:"group","aria-labelledby":s,...r,ref:e})})});Lz.displayName=RR;var kR="SelectLabel",MR=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Oz(kR,n);return x.jsx(Le.div,{id:s.id,...r,ref:e})});MR.displayName=kR;var _f="SelectItem",[Nz,IR]=Ha(_f),OR=_.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,c=ai(_f,n),u=li(_f,n),d=c.value===r,[h,p]=_.useState(i??""),[m,y]=_.useState(!1),E=We(e,S=>{var C;return(C=u.itemRefCallback)==null?void 0:C.call(u,S,r,s)}),b=Ar(),T=_.useRef("touch"),P=()=>{s||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return x.jsx(Nz,{scope:n,value:r,disabled:s,textId:b,isSelected:d,onItemTextChange:_.useCallback(S=>{p(C=>C||((S==null?void 0:S.textContent)??"").trim())},[]),children:x.jsx(ih.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:x.jsx(Le.div,{role:"option","aria-labelledby":b,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:E,onFocus:_e(o.onFocus,()=>y(!0)),onBlur:_e(o.onBlur,()=>y(!1)),onClick:_e(o.onClick,()=>{T.current!=="mouse"&&P()}),onPointerUp:_e(o.onPointerUp,()=>{T.current==="mouse"&&P()}),onPointerDown:_e(o.onPointerDown,S=>{T.current=S.pointerType}),onPointerMove:_e(o.onPointerMove,S=>{var C;T.current=S.pointerType,s?(C=u.onItemLeave)==null||C.call(u):T.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:_e(o.onPointerLeave,S=>{var C;S.currentTarget===document.activeElement&&((C=u.onItemLeave)==null||C.call(u))}),onKeyDown:_e(o.onKeyDown,S=>{var I;((I=u.searchRef)==null?void 0:I.current)!==""&&S.key===" "||(wz.includes(S.key)&&P(),S.key===" "&&S.preventDefault())})})})})});OR.displayName=_f;var tc="SelectItemText",LR=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=ai(tc,n),c=li(tc,n),u=IR(tc,n),d=Tz(tc,n),[h,p]=_.useState(null),m=We(e,P=>p(P),u.onItemTextChange,P=>{var S;return(S=c.itemTextRefCallback)==null?void 0:S.call(c,P,u.value,u.disabled)}),y=h==null?void 0:h.textContent,E=_.useMemo(()=>x.jsx("option",{value:u.value,disabled:u.disabled,children:y},u.value),[u.disabled,u.value,y]),{onNativeOptionAdd:b,onNativeOptionRemove:T}=d;return Ct(()=>(b(E),()=>T(E)),[b,T,E]),x.jsxs(x.Fragment,{children:[x.jsx(Le.span,{id:u.textId,...i,ref:m}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Qi.createPortal(i.children,o.valueNode):null]})});LR.displayName=tc;var NR="SelectItemIndicator",jR=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return IR(NR,n).isSelected?x.jsx(Le.span,{"aria-hidden":!0,...r,ref:e}):null});jR.displayName=NR;var Ym="SelectScrollUpButton",DR=_.forwardRef((t,e)=>{const n=li(Ym,t.__scopeSelect),r=ny(Ym,t.__scopeSelect),[s,i]=_.useState(!1),o=We(e,r.onScrollButtonChange);return Ct(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=u.scrollTop>0;i(d)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),s?x.jsx(BR,{...t,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop-u.offsetHeight)}}):null});DR.displayName=Ym;var Xm="SelectScrollDownButton",FR=_.forwardRef((t,e)=>{const n=li(Xm,t.__scopeSelect),r=ny(Xm,t.__scopeSelect),[s,i]=_.useState(!1),o=We(e,r.onScrollButtonChange);return Ct(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=u.scrollHeight-u.clientHeight,h=Math.ceil(u.scrollTop)<d;i(h)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),s?x.jsx(BR,{...t,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop+u.offsetHeight)}}):null});FR.displayName=Xm;var BR=_.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=li("SelectScrollButton",n),o=_.useRef(null),c=oh(n),u=_.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return _.useEffect(()=>()=>u(),[u]),Ct(()=>{var h;const d=c().find(p=>p.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[c]),x.jsx(Le.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:_e(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:_e(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:_e(s.onPointerLeave,()=>{u()})})}),jz="SelectSeparator",UR=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return x.jsx(Le.div,{"aria-hidden":!0,...r,ref:e})});UR.displayName=jz;var Zm="SelectArrow",Dz=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ah(n),i=ai(Zm,n),o=li(Zm,n);return i.open&&o.position==="popper"?x.jsx($v,{...s,...r,ref:e}):null});Dz.displayName=Zm;var Fz="SelectBubbleInput",VR=_.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=_.useRef(null),i=We(r,s),o=mz(e);return _.useEffect(()=>{const c=s.current;if(!c)return;const u=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==e&&h){const p=new Event("change",{bubbles:!0});h.call(c,e),c.dispatchEvent(p)}},[o,e]),x.jsx(Le.select,{...n,style:{...gR,...n.style},ref:i,defaultValue:e})});VR.displayName=Fz;function zR(t){return t===""||t===void 0}function $R(t){const e=sr(t),n=_.useRef(""),r=_.useRef(0),s=_.useCallback(o=>{const c=n.current+o;e(c),function u(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(c)},[e]),i=_.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function GR(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=Bz(t,Math.max(i,0));s.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function Bz(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Uz=vR,WR=_R,Vz=bR,zz=xR,$z=ER,HR=TR,Gz=CR,qR=MR,KR=OR,Wz=LR,Hz=jR,YR=DR,XR=FR,ZR=UR;const qz=Uz,Kz=Vz,QR=_.forwardRef(({className:t,children:e,...n},r)=>x.jsxs(WR,{ref:r,className:$e("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,x.jsx(zz,{asChild:!0,children:x.jsx($0,{className:"h-4 w-4 opacity-50"})})]}));QR.displayName=WR.displayName;const JR=_.forwardRef(({className:t,...e},n)=>x.jsx(YR,{ref:n,className:$e("flex cursor-default items-center justify-center py-1",t),...e,children:x.jsx(hL,{className:"h-4 w-4"})}));JR.displayName=YR.displayName;const e2=_.forwardRef(({className:t,...e},n)=>x.jsx(XR,{ref:n,className:$e("flex cursor-default items-center justify-center py-1",t),...e,children:x.jsx($0,{className:"h-4 w-4"})}));e2.displayName=XR.displayName;const t2=_.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>x.jsx($z,{children:x.jsxs(HR,{ref:s,className:$e("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[x.jsx(JR,{}),x.jsx(Gz,{className:$e("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),x.jsx(e2,{})]})}));t2.displayName=HR.displayName;const Yz=_.forwardRef(({className:t,...e},n)=>x.jsx(qR,{ref:n,className:$e("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));Yz.displayName=qR.displayName;const n2=_.forwardRef(({className:t,children:e,...n},r)=>x.jsxs(KR,{ref:r,className:$e("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[x.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:x.jsx(Hz,{children:x.jsx(cS,{className:"h-4 w-4"})})}),x.jsx(Wz,{children:e})]}));n2.displayName=KR.displayName;const Xz=_.forwardRef(({className:t,...e},n)=>x.jsx(ZR,{ref:n,className:$e("-mx-1 my-1 h-px bg-muted",t),...e}));Xz.displayName=ZR.displayName;function lh(){return(lh=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function r2(t,e){if(t==null)return{};var n,r,s={},i=Object.keys(t);for(r=0;r<i.length;r++)e.indexOf(n=i[r])>=0||(s[n]=t[n]);return s}function Qm(t){var e=_.useRef(t),n=_.useRef(function(r){e.current&&e.current(r)});return e.current=t,n.current}var Cc=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t<e?e:t},uc=function(t){return"touches"in t},Jm=function(t){return t&&t.ownerDocument.defaultView||self},f1=function(t,e,n){var r=t.getBoundingClientRect(),s=uc(e)?function(i,o){for(var c=0;c<i.length;c++)if(i[c].identifier===o)return i[c];return i[0]}(e.touches,n):e;return{left:Cc((s.pageX-(r.left+Jm(t).pageXOffset))/r.width),top:Cc((s.pageY-(r.top+Jm(t).pageYOffset))/r.height)}},h1=function(t){!uc(t)&&t.preventDefault()},s2=Qe.memo(function(t){var e=t.onMove,n=t.onKey,r=r2(t,["onMove","onKey"]),s=_.useRef(null),i=Qm(e),o=Qm(n),c=_.useRef(null),u=_.useRef(!1),d=_.useMemo(function(){var y=function(T){h1(T),(uc(T)?T.touches.length>0:T.buttons>0)&&s.current?i(f1(s.current,T,c.current)):b(!1)},E=function(){return b(!1)};function b(T){var P=u.current,S=Jm(s.current),C=T?S.addEventListener:S.removeEventListener;C(P?"touchmove":"mousemove",y),C(P?"touchend":"mouseup",E)}return[function(T){var P=T.nativeEvent,S=s.current;if(S&&(h1(P),!function(I,O){return O&&!uc(I)}(P,u.current)&&S)){if(uc(P)){u.current=!0;var C=P.changedTouches||[];C.length&&(c.current=C[0].identifier)}S.focus(),i(f1(S,P,c.current)),b(!0)}},function(T){var P=T.which||T.keyCode;P<37||P>40||(T.preventDefault(),o({left:P===39?.05:P===37?-.05:0,top:P===40?.05:P===38?-.05:0}))},b]},[o,i]),h=d[0],p=d[1],m=d[2];return _.useEffect(function(){return m},[m]),Qe.createElement("div",lh({},r,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:s,onKeyDown:p,tabIndex:0,role:"slider"}))}),ry=function(t){return t.filter(Boolean).join(" ")},i2=function(t){var e=t.color,n=t.left,r=t.top,s=r===void 0?.5:r,i=ry(["react-colorful__pointer",t.className]);return Qe.createElement("div",{className:i,style:{top:100*s+"%",left:100*n+"%"}},Qe.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Ut=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n},Zz=function(t){return n5(e0(t))},e0=function(t){return t[0]==="#"&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Ut(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:t.length===8?Ut(parseInt(t.substring(6,8),16)/255,2):1}},Qz=function(t){return t5(e5(t))},Jz=function(t){var e=t.s,n=t.v,r=t.a,s=(200-e)*n/100;return{h:Ut(t.h),s:Ut(s>0&&s<200?e*n/100/(s<=100?s:200-s)*100:0),l:Ut(s/2),a:Ut(r,2)}},t0=function(t){var e=Jz(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},e5=function(t){var e=t.h,n=t.s,r=t.v,s=t.a;e=e/360*6,n/=100,r/=100;var i=Math.floor(e),o=r*(1-n),c=r*(1-(e-i)*n),u=r*(1-(1-e+i)*n),d=i%6;return{r:Ut(255*[r,c,o,o,u,r][d]),g:Ut(255*[u,r,r,c,o,o][d]),b:Ut(255*[o,o,u,r,r,c][d]),a:Ut(s,2)}},Cd=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},t5=function(t){var e=t.r,n=t.g,r=t.b,s=t.a,i=s<1?Cd(Ut(255*s)):"";return"#"+Cd(e)+Cd(n)+Cd(r)+i},n5=function(t){var e=t.r,n=t.g,r=t.b,s=t.a,i=Math.max(e,n,r),o=i-Math.min(e,n,r),c=o?i===e?(n-r)/o:i===n?2+(r-e)/o:4+(e-n)/o:0;return{h:Ut(60*(c<0?c+6:c)),s:Ut(i?o/i*100:0),v:Ut(i/255*100),a:s}},r5=Qe.memo(function(t){var e=t.hue,n=t.onChange,r=ry(["react-colorful__hue",t.className]);return Qe.createElement("div",{className:r},Qe.createElement(s2,{onMove:function(s){n({h:360*s.left})},onKey:function(s){n({h:Cc(e+360*s.left,0,360)})},"aria-label":"Hue","aria-valuenow":Ut(e),"aria-valuemax":"360","aria-valuemin":"0"},Qe.createElement(i2,{className:"react-colorful__hue-pointer",left:e/360,color:t0({h:e,s:100,v:100,a:1})})))}),s5=Qe.memo(function(t){var e=t.hsva,n=t.onChange,r={backgroundColor:t0({h:e.h,s:100,v:100,a:1})};return Qe.createElement("div",{className:"react-colorful__saturation",style:r},Qe.createElement(s2,{onMove:function(s){n({s:100*s.left,v:100-100*s.top})},onKey:function(s){n({s:Cc(e.s+100*s.left,0,100),v:Cc(e.v-100*s.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Ut(e.s)+"%, Brightness "+Ut(e.v)+"%"},Qe.createElement(i2,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:t0(e)})))}),o2=function(t,e){if(t===e)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0},i5=function(t,e){return t.toLowerCase()===e.toLowerCase()||o2(e0(t),e0(e))};function o5(t,e,n){var r=Qm(n),s=_.useState(function(){return t.toHsva(e)}),i=s[0],o=s[1],c=_.useRef({color:e,hsva:i});_.useEffect(function(){if(!t.equal(e,c.current.color)){var d=t.toHsva(e);c.current={hsva:d,color:e},o(d)}},[e,t]),_.useEffect(function(){var d;o2(i,c.current.hsva)||t.equal(d=t.fromHsva(i),c.current.color)||(c.current={hsva:i,color:d},r(d))},[i,t,r]);var u=_.useCallback(function(d){o(function(h){return Object.assign({},h,d)})},[]);return[i,u]}var a5=typeof window<"u"?_.useLayoutEffect:_.useEffect,l5=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},p1=new Map,c5=function(t){a5(function(){var e=t.current?t.current.ownerDocument:document;if(e!==void 0&&!p1.has(e)){var n=e.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,p1.set(e,n);var r=l5();r&&n.setAttribute("nonce",r),e.head.appendChild(n)}},[])},u5=function(t){var e=t.className,n=t.colorModel,r=t.color,s=r===void 0?n.defaultColor:r,i=t.onChange,o=r2(t,["className","colorModel","color","onChange"]),c=_.useRef(null);c5(c);var u=o5(n,s,i),d=u[0],h=u[1],p=ry(["react-colorful",e]);return Qe.createElement("div",lh({},o,{ref:c,className:p}),Qe.createElement(s5,{hsva:d,onChange:h}),Qe.createElement(r5,{hue:d.h,onChange:h,className:"react-colorful__last-control"}))},d5={defaultColor:"000",toHsva:Zz,fromHsva:function(t){return Qz({h:t.h,s:t.s,v:t.v,a:1})},equal:i5},f5=function(t){return Qe.createElement(u5,lh({},t,{colorModel:d5}))};const h5="modulepreload",p5=function(t,e){return new URL(t,e).href},g1={},Yi=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=Promise.allSettled(n.map(d=>{if(d=p5(d,r),d in g1)return;g1[d]=!0;const h=d.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(!!r)for(let E=o.length-1;E>=0;E--){const b=o[E];if(b.href===d&&(!h||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${p}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":h5,h||(y.as="script"),y.crossOrigin="",y.href=d,u&&y.setAttribute("nonce",u),document.head.appendChild(y),h)return new Promise((E,b)=>{y.addEventListener("load",E),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},g5=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Yi(async()=>{const{default:r}=await Promise.resolve().then(()=>qa);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class sy extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class m5 extends sy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class v5 extends sy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class y5 extends sy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var n0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(n0||(n0={}));var _5=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})};class w5{constructor(e,{headers:n={},customFetch:r,region:s=n0.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=g5(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return _5(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let c={},{region:u}=n;u||(u=this.region),u&&u!=="any"&&(c["x-region"]=u);let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(c["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(c["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:d}).catch(E=>{throw new m5(E)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new v5(h);if(!h.ok)throw new y5(h);let m=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return m==="application/json"?y=yield h.json():m==="application/octet-stream"?y=yield h.blob():m==="text/event-stream"?y=h:m==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null}}catch(s){return{data:null,error:s}}})}}var It={},Go={},Wo={},Ho={},qo={},Ko={},b5=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Aa=b5();const x5=Aa.fetch,a2=Aa.fetch.bind(Aa),l2=Aa.Headers,E5=Aa.Request,T5=Aa.Response,qa=Object.freeze(Object.defineProperty({__proto__:null,Headers:l2,Request:E5,Response:T5,default:a2,fetch:x5},Symbol.toStringTag,{value:"Module"})),S5=eO(qa);var Rd={},m1;function c2(){if(m1)return Rd;m1=1,Object.defineProperty(Rd,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Rd.default=t,Rd}var v1;function u2(){if(v1)return Ko;v1=1;var t=Ko&&Ko.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ko,"__esModule",{value:!0});const e=t(S5),n=t(c2());class r{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=Object.assign({},this.headers),this.headers[i]=o,this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const c=this.fetch;let u=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var h,p,m;let y=null,E=null,b=null,T=d.status,P=d.statusText;if(d.ok){if(this.method!=="HEAD"){const O=await d.text();O===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?E=O:E=JSON.parse(O))}const C=(h=this.headers.Prefer)===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),I=(p=d.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");C&&I&&I.length>1&&(b=parseInt(I[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(y={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,b=null,T=406,P="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const C=await d.text();try{y=JSON.parse(C),Array.isArray(y)&&d.status===404&&(E=[],y=null,T=200,P="OK")}catch{d.status===404&&C===""?(T=204,P="No Content"):y={message:C}}if(y&&this.isMaybeSingle&&(!((m=y==null?void 0:y.details)===null||m===void 0)&&m.includes("0 rows"))&&(y=null,T=200,P="OK"),y&&this.shouldThrowOnError)throw new n.default(y)}return{error:y,data:E,count:b,status:T,statusText:P}});return this.shouldThrowOnError||(u=u.catch(d=>{var h,p,m;return{error:{message:`${(h=d==null?void 0:d.name)!==null&&h!==void 0?h:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(p=d==null?void 0:d.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(m=d==null?void 0:d.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),u.then(i,o)}returns(){return this}overrideTypes(){return this}}return Ko.default=r,Ko}var y1;function d2(){if(y1)return qo;y1=1;var t=qo&&qo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qo,"__esModule",{value:!0});const e=t(u2());class n extends e.default{select(s){let i=!1;const o=(s??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:c,referencedTable:u=c}={}){const d=u?`${u}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:c=o}={}){const u=typeof c>"u"?"offset":`${c}.offset`,d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(u,`${s}`),this.url.searchParams.set(d,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:c=!1,wal:u=!1,format:d="text"}={}){var h;const p=[s?"analyze":null,i?"verbose":null,o?"settings":null,c?"buffers":null,u?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.Accept)!==null&&h!==void 0?h:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${m}"; options=${p};`,d==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return qo.default=n,qo}var _1;function iy(){if(_1)return Ho;_1=1;var t=Ho&&Ho.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ho,"__esModule",{value:!0});const e=t(d2());class n extends e.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const o=Array.from(new Set(i)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:o,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${u}fts${d}.${i}`),this}match(s){return Object.entries(s).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(s,i,o){return this.url.searchParams.append(s,`not.${i}.${o}`),this}or(s,{foreignTable:i,referencedTable:o=i}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${s})`),this}filter(s,i,o){return this.url.searchParams.append(s,`${i}.${o}`),this}}return Ho.default=n,Ho}var w1;function f2(){if(w1)return Wo;w1=1;var t=Wo&&Wo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wo,"__esModule",{value:!0});const e=t(iy());class n{constructor(s,{headers:i={},schema:o,fetch:c}){this.url=s,this.headers=i,this.schema=o,this.fetch=c}select(s,{head:i=!1,count:o}={}){const c=i?"HEAD":"GET";let u=!1;const d=(s??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",d),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:i,defaultToNull:o=!0}={}){const c="POST",u=[];if(this.headers.Prefer&&u.push(this.headers.Prefer),i&&u.push(`count=${i}`),o||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(s)){const d=s.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(d.length>0){const h=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:c,defaultToNull:u=!0}={}){const d="POST",h=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&h.push(this.headers.Prefer),c&&h.push(`count=${c}`),u||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(s)){const p=s.reduce((m,y)=>m.concat(Object.keys(y)),[]);if(p.length>0){const m=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:i}={}){const o="PATCH",c=[];return this.headers.Prefer&&c.push(this.headers.Prefer),i&&c.push(`count=${i}`),this.headers.Prefer=c.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const i="DELETE",o=[];return s&&o.push(`count=${s}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Wo.default=n,Wo}var Vl={},zl={},b1;function P5(){return b1||(b1=1,Object.defineProperty(zl,"__esModule",{value:!0}),zl.version=void 0,zl.version="0.0.0-automated"),zl}var x1;function A5(){if(x1)return Vl;x1=1,Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.DEFAULT_HEADERS=void 0;const t=P5();return Vl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},Vl}var E1;function C5(){if(E1)return Go;E1=1;var t=Go&&Go.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Go,"__esModule",{value:!0});const e=t(f2()),n=t(iy()),r=A5();class s{constructor(o,{headers:c={},schema:u,fetch:d}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),c),this.schemaName=u,this.fetch=d}from(o){const c=new URL(`${this.url}/${o}`);return new e.default(c,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new s(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,c={},{head:u=!1,get:d=!1,count:h}={}){let p;const m=new URL(`${this.url}/rpc/${o}`);let y;u||d?(p=u?"HEAD":"GET",Object.entries(c).filter(([b,T])=>T!==void 0).map(([b,T])=>[b,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([b,T])=>{m.searchParams.append(b,T)})):(p="POST",y=c);const E=Object.assign({},this.headers);return h&&(E.Prefer=`count=${h}`),new n.default({method:p,url:m,headers:E,schema:this.schemaName,body:y,fetch:this.fetch,allowEmpty:!1})}}return Go.default=s,Go}var T1;function R5(){if(T1)return It;T1=1;var t=It&&It.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(It,"__esModule",{value:!0}),It.PostgrestError=It.PostgrestBuilder=It.PostgrestTransformBuilder=It.PostgrestFilterBuilder=It.PostgrestQueryBuilder=It.PostgrestClient=void 0;const e=t(C5());It.PostgrestClient=e.default;const n=t(f2());It.PostgrestQueryBuilder=n.default;const r=t(iy());It.PostgrestFilterBuilder=r.default;const s=t(d2());It.PostgrestTransformBuilder=s.default;const i=t(u2());It.PostgrestBuilder=i.default;const o=t(c2());return It.PostgrestError=o.default,It.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:o.default},It}var k5=R5();const M5=jf(k5),{PostgrestClient:I5,PostgrestQueryBuilder:uJ,PostgrestFilterBuilder:dJ,PostgrestTransformBuilder:fJ,PostgrestBuilder:hJ,PostgrestError:pJ}=M5,O5="2.11.2",L5={"X-Client-Info":`realtime-js/${O5}`},N5="1.0.0",h2=1e4,j5=1e3;var ya;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ya||(ya={}));var xn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(xn||(xn={}));var tr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(tr||(tr={}));var r0;(function(t){t.websocket="websocket"})(r0||(r0={}));var Fi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Fi||(Fi={}));class D5{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const c=r.decode(e.slice(o,o+s));o=o+s;const u=r.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:c,event:u,payload:d}}}class p2{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ze;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ze||(Ze={}));const S1=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=F5(o,t,e,s),i),{})},F5=(t,e,n,r)=>{const s=e.find(c=>c.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?g2(i,o):s0(o)},g2=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return z5(e,n)}switch(t){case Ze.bool:return B5(e);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return U5(e);case Ze.json:case Ze.jsonb:return V5(e);case Ze.timestamp:return $5(e);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:return s0(e);default:return s0(e)}},s0=t=>t,B5=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},U5=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},V5=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},z5=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(c=>g2(e,c))}return t},$5=t=>typeof t=="string"?t.replace(" ","T"):t,m2=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Lg{constructor(e,n,r={},s=h2){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var P1;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(P1||(P1={}));class dc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=dc.syncState(this.state,s,i,o),this.pendingDiffs.forEach(u=>{this.state=dc.syncDiff(this.state,u,i,o)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=dc.syncDiff(this.state,s,i,o),c())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),c={},u={};return this.map(i,(d,h)=>{o[d]||(u[d]=h)}),this.map(o,(d,h)=>{const p=i[d];if(p){const m=h.map(T=>T.presence_ref),y=p.map(T=>T.presence_ref),E=h.filter(T=>y.indexOf(T.presence_ref)<0),b=p.filter(T=>m.indexOf(T.presence_ref)<0);E.length>0&&(c[d]=E),b.length>0&&(u[d]=b)}else c[d]=h}),this.syncDiff(i,{joins:c,leaves:u},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(c,u)=>{var d;const h=(d=e[c])!==null&&d!==void 0?d:[];if(e[c]=this.cloneDeep(u),h.length>0){const p=e[c].map(y=>y.presence_ref),m=h.filter(y=>p.indexOf(y.presence_ref)<0);e[c].unshift(...m)}r(c,h,u)}),this.map(o,(c,u)=>{let d=e[c];if(!d)return;const h=u.map(p=>p.presence_ref);d=d.filter(p=>h.indexOf(p.presence_ref)<0),e[c]=d,s(c,d,u),d.length===0&&delete e[c]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var A1;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(A1||(A1={}));var C1;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(C1||(C1={}));var Yr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Yr||(Yr={}));class oy{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=xn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Lg(this,tr.join,this.params,this.timeout),this.rejoinTimer=new p2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=xn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(tr.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new dc(this),this.broadcastEndpointURL=m2(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:c}}=this.params;this._onError(h=>e==null?void 0:e(Yr.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(Yr.CLOSED));const u={},d={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&s!==void 0?s:[],private:c};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var p;if(this.socket.setAuth(),h===void 0){e==null||e(Yr.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,y=(p=m==null?void 0:m.length)!==null&&p!==void 0?p:0,E=[];for(let b=0;b<y;b++){const T=m[b],{filter:{event:P,schema:S,table:C,filter:I}}=T,O=h&&h[b];if(O&&O.event===P&&O.schema===S&&O.table===C&&O.filter===I)E.push(Object.assign(Object.assign({},T),{id:O.id}));else{this.unsubscribe(),e==null||e(Yr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(Yr.SUBSCRIBED);return}}).receive("error",h=>{e==null||e(Yr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Yr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,c,u;const d=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=xn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(tr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new Lg(this,tr.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Lg(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:c,error:u,leave:d,join:h}=tr;if(r&&[c,u,d,h].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var E,b,T;return((E=y.filter)===null||E===void 0?void 0:E.event)==="*"||((T=(b=y.filter)===null||b===void 0?void 0:b.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===o}).map(y=>y.callback(m,r)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var E,b,T,P,S,C;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const I=y.id,O=(E=y.filter)===null||E===void 0?void 0:E.event;return I&&((b=n.ids)===null||b===void 0?void 0:b.includes(I))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((T=n.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const I=(S=(P=y==null?void 0:y.filter)===null||P===void 0?void 0:P.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return I==="*"||I===((C=n==null?void 0:n.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof m=="object"&&"ids"in m){const E=m.data,{schema:b,table:T,commit_timestamp:P,type:S,errors:C}=E;m=Object.assign(Object.assign({},{schema:b,table:T,commit_timestamp:P,eventType:S,new:{},old:{},errors:C}),this._getPayloadRecords(E))}y.callback(m,r)})}_isClosed(){return this.state===xn.closed}_isJoined(){return this.state===xn.joined}_isJoining(){return this.state===xn.joining}_isLeaving(){return this.state===xn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&oy.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(tr.close,{},e)}_onError(e){this._on(tr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=S1(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=S1(e.columns,e.old_record)),n}}const G5=()=>{},W5=typeof WebSocket<"u",H5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class q5{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=L5,this.params={},this.timeout=h2,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=G5,this.conn=null,this.sendBuffer=[],this.serializer=new D5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...c)=>Yi(async()=>{const{default:u}=await Promise.resolve().then(()=>qa);return{default:u}},void 0,import.meta.url).then(({default:u})=>u(...c)):o=fetch,(...c)=>o(...c)},this.endPoint=`${e}/${r0.websocket}`,this.httpEndpoint=m2(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new p2(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(W5){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new K5(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Yi(async()=>{const{default:e}=await import("./browser-BXp4eyqi.js").then(n=>n.b);return{default:e}},[],import.meta.url).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:N5}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ya.connecting:return Fi.Connecting;case ya.open:return Fi.Open;case ya.closing:return Fi.Closing;default:return Fi.Closed}}isConnected(){return this.connectionState()===Fi.Open}channel(e,n={config:{}}){const r=new oy(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,c=>{var u;(u=this.conn)===null||u===void 0||u.send(c)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(tr.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(j5,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(c=>c(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(tr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([H5],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class K5{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ya.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class ay extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ot(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Y5 extends ay{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class i0 extends ay{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var X5=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})};const v2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Yi(async()=>{const{default:r}=await Promise.resolve().then(()=>qa);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Z5=()=>X5(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Yi(()=>Promise.resolve().then(()=>qa),void 0,import.meta.url)).Response:Response}),o0=t=>{if(Array.isArray(t))return t.map(n=>o0(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=o0(r)}),e};var ro=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})};const Ng=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Q5=(t,e,n)=>ro(void 0,void 0,void 0,function*(){const r=yield Z5();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new Y5(Ng(s),t.status||500))}).catch(s=>{e(new i0(Ng(s),s))}):e(new i0(Ng(t),t))}),J5=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function qc(t,e,n,r,s,i){return ro(this,void 0,void 0,function*(){return new Promise((o,c)=>{t(n,J5(e,r,s,i)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>Q5(u,c,r))})})}function wf(t,e,n,r){return ro(this,void 0,void 0,function*(){return qc(t,"GET",e,n,r)})}function Ys(t,e,n,r,s){return ro(this,void 0,void 0,function*(){return qc(t,"POST",e,r,s,n)})}function e6(t,e,n,r,s){return ro(this,void 0,void 0,function*(){return qc(t,"PUT",e,r,s,n)})}function t6(t,e,n,r){return ro(this,void 0,void 0,function*(){return qc(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function y2(t,e,n,r,s){return ro(this,void 0,void 0,function*(){return qc(t,"DELETE",e,r,s,n)})}var fn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})};const n6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},R1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class r6{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=v2(s)}uploadOrUpdate(e,n,r,s){return fn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},R1),s);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u))):(i=r,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,u&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),s!=null&&s.headers&&(c=Object.assign(Object.assign({},c),s.headers));const d=this._removeEmptyFolders(n),h=this._getFinalPath(d),p=yield this.fetch(`${this.url}/object/${h}`,Object.assign({method:e,body:i,headers:c},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield p.json();return p.ok?{data:{path:d,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(Ot(i))return{data:null,error:i};throw i}})}upload(e,n,r){return fn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return fn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),c=new URL(this.url+`/object/upload/sign/${o}`);c.searchParams.set("token",n);try{let u;const d=Object.assign({upsert:R1.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",d.cacheControl)):(u=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const p=yield this.fetch(c.toString(),{method:"PUT",body:u,headers:h}),m=yield p.json();return p.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(u){if(Ot(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,n){return fn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Ys(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),c=o.searchParams.get("token");if(!c)throw new ay("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:c},error:null}}catch(r){if(Ot(r))return{data:null,error:r};throw r}})}update(e,n,r){return fn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return fn(this,void 0,void 0,function*(){try{return{data:yield Ys(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Ot(s))return{data:null,error:s};throw s}})}copy(e,n,r){return fn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ys(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Ot(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return fn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Ys(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Ot(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return fn(this,void 0,void 0,function*(){try{const s=yield Ys(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Ot(s))return{data:null,error:s};throw s}})}download(e,n){return fn(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield wf(this.fetch,`${this.url}/${s}/${c}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(Ot(c))return{data:null,error:c};throw c}})}info(e){return fn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield wf(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:o0(r),error:null}}catch(r){if(Ot(r))return{data:null,error:r};throw r}})}exists(e){return fn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield t6(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ot(r)&&r instanceof i0){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const c=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&s.push(u);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}remove(e){return fn(this,void 0,void 0,function*(){try{return{data:yield y2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Ot(n))return{data:null,error:n};throw n}})}list(e,n,r){return fn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},n6),n),{prefix:e||""});return{data:yield Ys(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Ot(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const s6="2.7.1",i6={"X-Client-Info":`storage-js/${s6}`};var Yo=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})};class o6{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},i6),n),this.fetch=v2(r)}listBuckets(){return Yo(this,void 0,void 0,function*(){try{return{data:yield wf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ot(e))return{data:null,error:e};throw e}})}getBucket(e){return Yo(this,void 0,void 0,function*(){try{return{data:yield wf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Ot(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Yo(this,void 0,void 0,function*(){try{return{data:yield Ys(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ot(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Yo(this,void 0,void 0,function*(){try{return{data:yield e6(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ot(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Yo(this,void 0,void 0,function*(){try{return{data:yield Ys(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Ot(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Yo(this,void 0,void 0,function*(){try{return{data:yield y2(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Ot(n))return{data:null,error:n};throw n}})}}class a6 extends o6{constructor(e,n={},r){super(e,n,r)}from(e){return new r6(this.url,this.headers,e,this.fetch)}}const l6="2.49.8";let nc="";typeof Deno<"u"?nc="deno":typeof document<"u"?nc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?nc="react-native":nc="node";const c6={"X-Client-Info":`supabase-js-${nc}/${l6}`},u6={headers:c6},d6={schema:"public"},f6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},h6={};var p6=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})};const g6=t=>{let e;return t?e=t:typeof fetch>"u"?e=a2:e=fetch,(...n)=>e(...n)},m6=()=>typeof Headers>"u"?l2:Headers,v6=(t,e,n)=>{const r=g6(n),s=m6();return(i,o)=>p6(void 0,void 0,void 0,function*(){var c;const u=(c=yield e())!==null&&c!==void 0?c:t;let d=new s(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${u}`),r(i,Object.assign(Object.assign({},o),{headers:d}))})};var y6=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})};function _6(t){return t.endsWith("/")?t:t+"/"}function w6(t,e){var n,r;const{db:s,auth:i,realtime:o,global:c}=t,{db:u,auth:d,realtime:h,global:p}=e,m={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},h),o),global:Object.assign(Object.assign(Object.assign({},p),c),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>y6(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const _2="2.69.1",ia=30*1e3,a0=3,jg=a0*ia,b6="http://localhost:9999",x6="supabase.auth.token",E6={"X-Client-Info":`gotrue-js/${_2}`},l0="X-Supabase-Api-Version",w2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},T6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,S6=6e5;class ly extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ie(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class P6 extends ly{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function A6(t){return Ie(t)&&t.name==="AuthApiError"}class b2 extends ly{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ci extends ly{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class qs extends ci{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function C6(t){return Ie(t)&&t.name==="AuthSessionMissingError"}class Dg extends ci{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class kd extends ci{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Md extends ci{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function R6(t){return Ie(t)&&t.name==="AuthImplicitGrantRedirectError"}class k1 extends ci{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class c0 extends ci{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Fg(t){return Ie(t)&&t.name==="AuthRetryableFetchError"}class M1 extends ci{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class fc extends ci{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const I1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),O1=` 	
\r=`.split(""),k6=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<O1.length;e+=1)t[O1[e].charCodeAt(0)]=-2;for(let e=0;e<I1.length;e+=1)t[I1[e].charCodeAt(0)]=e;return t})();function x2(t,e,n){const r=k6[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function L1(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{O6(o,r,n)};for(let o=0;o<t.length;o+=1)x2(t.charCodeAt(o),s,i);return e.join("")}function M6(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function I6(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}M6(r,e)}}function O6(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function L6(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)x2(t.charCodeAt(s),n,r);return new Uint8Array(e)}function N6(t){const e=[];return I6(t,n=>e.push(n)),new Uint8Array(e)}function j6(t){return Math.round(Date.now()/1e3)+t}function D6(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const wr=()=>typeof window<"u"&&typeof document<"u",ki={tested:!1,writable:!1},hc=()=>{if(!wr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ki.tested)return ki.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ki.tested=!0,ki.writable=!0}catch{ki.tested=!0,ki.writable=!1}return ki.writable};function F6(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const E2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Yi(async()=>{const{default:r}=await Promise.resolve().then(()=>qa);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},B6=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",T2=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Id=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Od=async(t,e)=>{await t.removeItem(e)};class ch{constructor(){this.promise=new ch.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}ch.promiseConstructor=Promise;function Bg(t){const e=t.split(".");if(e.length!==3)throw new fc("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!T6.test(e[r]))throw new fc("JWT not in base64url format");return{header:JSON.parse(L1(e[0])),payload:JSON.parse(L1(e[1])),signature:L6(e[2]),raw:{header:e[0],payload:e[1]}}}async function U6(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function V6(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function z6(t){return("0"+t.toString(16)).substr(-2)}function $6(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,z6).join("")}async function G6(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function W6(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await G6(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xo(t,e,n=!1){const r=$6();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await T2(t,`${e}-code-verifier`,s);const i=await W6(r);return[i,r===i?"plain":"s256"]}const H6=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function q6(t){const e=t.headers.get(l0);if(!e||!e.match(H6))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function K6(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Y6(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var X6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const ji=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Z6=[502,503,504];async function N1(t){var e;if(!B6(t))throw new c0(ji(t),0);if(Z6.includes(t.status))throw new c0(ji(t),t.status);let n;try{n=await t.json()}catch(i){throw new b2(ji(i),i)}let r;const s=q6(t);if(s&&s.getTime()>=w2["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new M1(ji(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new qs}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new M1(ji(n),t.status,n.weak_password.reasons);throw new P6(ji(n),t.status||500,r)}const Q6=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Fe(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[l0]||(i[l0]=w2["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await J6(t,e,n+c,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function J6(t,e,n,r,s,i){const o=Q6(e,r,s,i);let c;try{c=await t(n,Object.assign({},o))}catch(u){throw console.error(u),new c0(ji(u),0)}if(c.ok||await N1(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(u){await N1(u)}}function Ks(t){var e;let n=null;r8(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=j6(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function j1(t){const e=Ks(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Xs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function e8(t){return{data:t,error:null}}function t8(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=X6(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},u=Object.assign({},o);return{data:{properties:c,user:u},error:null}}function n8(t){return t}function r8(t){return t.access_token&&t.refresh_token&&t.expires_in}var s8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class i8{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=E2(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Fe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Xs})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=s8(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:t8,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ie(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Fe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Xs})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,c,u;try{const d={nextPage:null,lastPage:0,total:0},h=await Fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:n8});if(h.error)throw h.error;const p=await h.json(),m=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(u=(c=h.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(E=>{const b=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(E.split(";")[1].split("=")[1]);d[`${T}Page`]=b}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(Ie(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await Fe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Xs})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Fe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Xs})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Xs})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Fe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}}const o8={getItem:t=>hc()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{hc()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{hc()&&globalThis.localStorage.removeItem(t)}};function D1(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function a8(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Zo={debug:!!(globalThis&&hc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class S2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class l8 extends S2{}async function c8(t,e,n){Zo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Zo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Zo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Zo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Zo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new l8(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Zo.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}a8();const u8={url:b6,storageKey:x6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:E6,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function F1(t,e,n){return await n()}class Rc{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Rc.nextInstanceID,Rc.nextInstanceID+=1,this.instanceID>0&&wr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},u8),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new i8({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=E2(s.fetch),this.lock=s.lock||F1,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:wr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=c8:this.lock=F1,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:hc()?this.storage=o8:(this.memoryStorage={},this.storage=D1(this.memoryStorage)):(this.memoryStorage={},this.storage=D1(this.memoryStorage)),wr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${_2}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=F6(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),wr()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),R6(i)){const u=(e=i.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ie(n)?{error:n}:{error:new b2("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ks}),{data:o,error:c}=i;if(c||!o)return{data:{user:null,session:null},error:c};const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(i){if(Ie(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:h,password:p,options:m}=e;let y=null,E=null;this.flowType==="pkce"&&([y,E]=await Xo(this.storage,this.storageKey)),i=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:p,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:y,code_challenge_method:E},xform:Ks})}else if("phone"in e){const{phone:h,password:p,options:m}=e;i=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ks})}else throw new kd("You must provide either an email or phone number and a password");const{data:o,error:c}=i;if(c||!o)return{data:{user:null,session:null},error:c};const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(i){if(Ie(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:c}=e;n=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:j1})}else if("phone"in e){const{phone:i,password:o,options:c}=e;n=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:j1})}else throw new kd("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Dg}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Id(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ks});if(await Od(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Dg}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Ie(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,c=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ks}),{data:u,error:d}=c;return d?{data:{user:null,session:null},error:d}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new Dg}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:d})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:c,options:u}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Xo(this.storage,this.storageKey));const{error:p}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:c,options:u}=e,{data:d,error:h}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(o=u==null?void 0:u.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new kd("You must provide either an email or phone number.")}catch(c){if(Ie(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:c}=await Fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ks});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,d=o.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(s){if(Ie(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Xo(this.storage,this.storageKey)),await Fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:e8})}catch(i){if(Ie(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new qs;const{error:s}=await Fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Ie(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await Fe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:c}=await Fe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:c}}throw new kd("You must provide either an email or phone number and a type")}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Id(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<jg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(u,d,h)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,d,h))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Xs}):await this._useSession(async n=>{var r,s,i;const{data:o,error:c}=n;if(c)throw c;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qs}:await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Xs})})}catch(n){if(Ie(n))return C6(n)&&(await this._removeSession(),await Od(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new qs;const o=s.session;let c=null,u=null;this.flowType==="pkce"&&e.email!=null&&([c,u]=await Xo(this.storage,this.storageKey));const{data:d,error:h}=await Fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:u}),jwt:o.access_token,xform:Xs});if(h)throw h;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new qs;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Bg(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:c,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!c)return{data:{user:null,session:null},error:null};i=c}else{const{data:c,error:u}=await this._getUser(e.access_token);if(u)throw u;i={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Ie(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:c}=n;if(c)throw c;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new qs;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!wr())throw new Md("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Md(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new k1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Md("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new k1("No code detected.");const{data:S,error:C}=await this._exchangeCodeForSession(e.code);if(C)throw C;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:c,expires_at:u,token_type:d}=e;if(!i||!c||!o||!d)throw new Md("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(c);let m=h+p;u&&(m=parseInt(u));const y=m-h;y*1e3<=ia&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);const E=m-p;h-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,m,h):h-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,m,h);const{data:b,error:T}=await this._getUser(i);if(T)throw T;const P={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:m,refresh_token:o,token_type:d,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:P,redirectType:e.type},error:null}}catch(r){if(Ie(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Id(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:c}=await this.admin.signOut(o,e);if(c&&!(A6(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Od(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=D6(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Xo(this.storage,this.storageKey,!0));try{return await Fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Ie(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,c,u,d,h;const{data:p,error:m}=i;if(m)throw m;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Fe(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return wr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ie(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Fe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await V6(async s=>(s>0&&await U6(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ks})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Fg(i)&&Date.now()+o-r<ia})}catch(r){if(this._debug(n,"error",r),Ie(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),wr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Id(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<jg;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${jg}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),Fg(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new qs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ch;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new qs;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const c={session:i.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(i){if(this._debug(s,"error",i),Ie(i)){const o={session:null,error:i};return Fg(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,n)}catch(u){i.push(u)}});if(await Promise.all(o),i.length>0){for(let c=0;c<i.length;c+=1)console.error(i[c]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await T2(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Od(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&wr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ia);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/ia);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ia}ms, refresh threshold is ${a0} ticks`),s<=a0&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof S2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!wr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Xo(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(c.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Fe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:u,error:d}=await Fe(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:c}=await Fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:c})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Bg(s.access_token);let c=null;o.aal&&(c=o.aal);let u=c;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const h=o.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+S6>Date.now()))return r;const{data:s,error:i}=await Fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new fc("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new fc("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:y,error:E}=await this.getSession();if(E||!y.session)return{data:null,error:E};r=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:c,payload:u}}=Bg(r);if(K6(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const d=Y6(s.alg),h=await this.fetchJwk(s.kid,n),p=await crypto.subtle.importKey("jwk",h,d,!0,["verify"]);if(!await crypto.subtle.verify(d,p,o,N6(`${c}.${u}`)))throw new fc("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}}Rc.nextInstanceID=0;const d8=Rc;class f8 extends d8{constructor(e){super(e)}}var h8=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})};class p8{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const c=_6(e),u=new URL(c);this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,h={db:d6,realtime:h6,auth:Object.assign(Object.assign({},f6),{storageKey:d}),global:u6},p=w6(r??{},h);this.storageKey=(s=p.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=p.global.headers)!==null&&i!==void 0?i:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=p.auth)!==null&&o!==void 0?o:{},this.headers,p.global.fetch),this.fetch=v6(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new I5(new URL("rest/v1",u).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new w5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new a6(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return h8(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:c,debug:u},d,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new f8({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new q5(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const g8=(t,e,n)=>new p8(t,e,n),m8="https://oeszfegjwaauflelgxse.supabase.co",v8="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9lc3pmZWdqd2FhdWZsZWxneHNlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg0NzcwNjIsImV4cCI6MjA2NDA1MzA2Mn0.8QCsKap4r7jQ6bWt1b8hhTyjt3qn4bdyO5rxli_iiXE",Rr=g8(m8,v8),y8=({open:t,onOpenChange:e,isDarkMode:n})=>{const[r,s]=_.useState(!1),[i,o]=_.useState(""),[c,u]=_.useState("#000000"),[d,h]=_.useState(""),[p,m]=_.useState(""),[y,E]=_.useState(""),[b,T]=_.useState(""),[P,S]=_.useState(null),[C,I]=_.useState([]),O=async()=>{try{const{data:W,error:V}=await Rr.from("poi_types").select("*").order("name");if(V)throw V;I(W||[])}catch(W){console.error("Error fetching POI types:",W)}};_.useEffect(()=>{t&&O()},[t]);const D=async()=>{try{S(null);const{data:W,error:V}=await Rr.from("poi_types").insert([{name:i,color:c}]).select();if(V)throw S(V.message),V;await O(),s(!1),o(""),u("#000000"),W&&W[0]&&h(W[0].id)}catch(W){console.error("Error creating POI type:",W)}},U=()=>{const W=parseFloat(y),V=parseFloat(b);return isNaN(W)||isNaN(V)?(S("Latitude e longitude devem ser números válidos"),!1):W<-90||W>90?(S("Latitude deve estar entre -90 e 90 graus"),!1):V<-180||V>180?(S("Longitude deve estar entre -180 e 180 graus"),!1):!0},G=async()=>{try{if(S(null),!U())return;const{data:W,error:V}=await Rr.from("pois").insert([{name:p,type_id:d,latitude:parseFloat(y),longitude:parseFloat(b)}]).select();if(V)throw S(V.message),V;e(!1),m(""),h(""),E(""),T("")}catch(W){console.error("Error creating POI:",W)}};return x.jsx(dz,{open:t,onOpenChange:e,children:x.jsxs(uR,{className:`border-none rounded-2xl w-[400px] backdrop-blur-[2px] px-6 pt-5 shadow-md cursor-default z-50 ${n?"bg-zinc-900/60":"bg-[#EFF4FA]/70"}`,children:[x.jsx(dR,{children:x.jsx(fR,{className:`py-4 text-center ${n?"text-gray-200":""}`,children:r?"Criar Novo Tipo":"Criar Ponto de Interesse"})}),P&&x.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative text-sm text-center",role:"alert",children:x.jsx("span",{className:"block sm:inline",children:P})}),r?x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"block mb-5",children:[x.jsx(sa,{className:`${n?"text-gray-300":""} text-sm`,children:"Nome do Tipo"}),x.jsx("input",{type:"text",value:i,onChange:W=>o(W.target.value),className:`w-full mt-1.5 p-2 rounded-full text-sm ${n?"bg-zinc-700 text-gray-200 border-zinc-600":"border-gray-300"}`})]}),x.jsx("div",{className:"w-full flex flex-col justify-center items-center",children:x.jsx(f5,{color:c,onChange:u})}),x.jsxs(Hm,{className:"flex justify-between mt-4",children:[x.jsxs("button",{onClick:()=>s(!1),className:`px-3 py-2 text-destructive text-sm flex items-center justify-center gap-2 rounded-full ${n?"bg-zinc-700 text-gray-200 hover:bg-zinc-600":"bg-gray-200 hover:bg-gray-300"}`,children:[x.jsx(gS,{size:15})," Cancelar"]}),x.jsxs("button",{onClick:D,className:"px-3 py-2 flex items-center justify-center text-sm gap-2 rounded-full bg-blue-500 text-white hover:bg-blue-600",children:[x.jsx(Gd,{size:15})," Criar"]})]})]}):x.jsxs("div",{className:"space-y-2 text-sm",children:[x.jsxs("div",{children:[x.jsx(sa,{className:n?"text-gray-300 text-sm":"text-sm",children:"Nome"}),x.jsx("input",{type:"text",value:p,onChange:W=>m(W.target.value),className:`w-full mt-1.5 p-2 rounded-full text-sm ${n?"bg-zinc-700 text-gray-200 border-zinc-600":"border-gray-300"}`})]}),x.jsxs("div",{children:[x.jsx(sa,{className:n?"text-gray-300 text-sm":"text-sm",children:"Tipo"}),x.jsxs("div",{className:"flex gap-2 mt-1.5",children:[x.jsxs(qz,{value:d,onValueChange:h,children:[x.jsx(QR,{className:`text-sm rounded-full ${n?"bg-zinc-700 border-zinc-600 text-gray-200":""}`,children:x.jsx(Kz,{placeholder:"Selecione um Tipo"})}),x.jsx(t2,{className:n?"bg-zinc-700 border-zinc-600 text-sm":"text-sm",children:C.map(W=>x.jsx(n2,{value:W.id,className:n?"text-gray-200 focus:bg-zinc-600 text-sm":"text-sm",children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:W.color}}),W.name]})},W.id))})]}),x.jsx("button",{onClick:()=>s(!0),className:`p-2 rounded-full flex items-center justify-center ${n?"bg-zinc-700 text-gray-200 hover:bg-zinc-600":"bg-gray-100 hover:bg-gray-200"}`,children:x.jsx(Gd,{size:20})})]})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx(sa,{className:n?"text-gray-300 text-sm":"text-sm",children:"Latitude"}),x.jsx("input",{type:"number",value:y,onChange:W=>E(W.target.value),className:`w-full mt-1.5 p-2 rounded-full text-sm ${n?"bg-zinc-700 text-gray-200 border-zinc-600":"border-gray-300"}`,step:"any",min:"-90",max:"90"})]}),x.jsxs("div",{children:[x.jsx(sa,{className:n?"text-gray-300 text-sm":"text-sm",children:"Longitude"}),x.jsx("input",{type:"number",value:b,onChange:W=>T(W.target.value),className:`w-full mt-1.5 p-2 rounded-full text-sm ${n?"bg-zinc-700 text-gray-200 border-zinc-600":"border-gray-300"}`,step:"any",min:"-180",max:"180"})]})]}),x.jsx(Hm,{className:"flex justify-end",children:x.jsxs("button",{onClick:G,className:"mt-3 px-3 py-2 flex items-center justify-center text-sm gap-2 rounded-full bg-blue-500 text-white hover:bg-blue-600",children:[x.jsx(Gd,{size:15})," Criar"]})})]})]})})},u0=(t,e)=>{},P2=_.createContext({zoomToLocation:u0,setZoomToLocation:()=>u0,hiddenPOITypes:new Set,togglePOIType:()=>{}}),_8=({children:t})=>{const[e,n]=_.useState(()=>u0),[r,s]=_.useState(new Set),i=_.useCallback(o=>{s(c=>{const u=new Set(c);return u.has(o)?u.delete(o):u.add(o),u})},[]);return x.jsx(P2.Provider,{value:{zoomToLocation:e,setZoomToLocation:n,hiddenPOITypes:r,togglePOIType:i},children:t})},cy=()=>_.useContext(P2),w8=({isDarkMode:t,onPOITypeCreated:e})=>{const[n,r]=_.useState(!1),[s,i]=_.useState([]),{zoomToLocation:o}=cy(),c=async()=>{try{const{data:d,error:h}=await Rr.from("poi_types").select("*").order("name");if(h)throw h;const{data:p,error:m}=await Rr.from("pois").select("*").order("name");if(m)throw m;const y=d.map(E=>{const b=p.filter(T=>T.type_id===E.id);return{id:E.id,name:E.name,color:E.color,count:b.length,items:b.map(T=>({id:T.id,name:T.name,latitude:T.latitude,longitude:T.longitude}))}});i(y)}catch(d){console.error("Error fetching POI data:",d)}};_.useEffect(()=>{c()},[]);const u=(d,h)=>{o(d,h)};return x.jsxs("div",{className:"p-2 mt-1 h-[500px] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent hover:scrollbar-thumb-gray-400 dark:scrollbar-thumb-gray-600 dark:hover:scrollbar-thumb-gray-500",children:[x.jsxs("div",{className:"gap-3 mb-2",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"rounded-lg mr-2",children:x.jsx(dS,{size:18,strokeWidth:1.5,className:t?"text-gray-300":"text-gray-900"})}),x.jsx("p",{className:`text-xs ${t?"text-gray-300":"text-gray-900"}`,children:"Pontos de Interesse"})]}),x.jsxs(zC,{children:[x.jsx($C,{asChild:!0,children:x.jsx("button",{className:`p-1.5 rounded-lg transition-colors ${t?"hover:bg-zinc-700":"hover:bg-gray-100"}`,children:x.jsx(uS,{size:16,className:t?"text-gray-300":"text-gray-600"})})}),x.jsxs(Qv,{className:t?"bg-zinc-800 border-zinc-700 text-xs":"bg-white",align:"end",children:[x.jsx(cc,{className:`cursor-pointer ${t?"text-gray-300 focus:bg-zinc-700":"text-gray-600 focus:bg-gray-100"} text-xs`,onClick:()=>r(!0),children:"Criar"}),x.jsx(cc,{className:`cursor-pointer ${t?"text-gray-300 focus:bg-zinc-700":"text-gray-600 focus:bg-gray-100"} text-xs`,children:"Editar"}),x.jsx(cc,{className:`cursor-pointer ${t?"text-gray-300 focus:bg-zinc-700":"text-gray-600 focus:bg-gray-100"} text-xs`,children:"Excluir"})]})]})]}),x.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"} mt-1`,children:"Confira abaixo os pontos de interesse que foram cadastrados para acompanhamento e monitoramento."})]}),x.jsx("div",{className:`h-[1px] ${t?"bg-gray-700":"bg-[#00000029]"}`}),x.jsx("div",{className:"space-y-1 mt-4",children:s.map(d=>x.jsxs("div",{className:"mb-0 last:mb-0",children:[x.jsxs("div",{className:`flex items-center gap-2 mb-3 sticky top-[-8px] rounded-lg p-1 z-10 ${t?"bg-[#383838]":"bg-[#E9F0FA]"}`,children:[x.jsx(bm,{size:16,strokeWidth:1.5,style:{fill:d.color,color:d.color}}),x.jsxs("span",{className:`text-xs ${t?"text-gray-300":"text-gray-900"}`,children:[d.name," (",d.count,")"]})]}),x.jsx("div",{className:"space-y-0",children:d.items.map(h=>x.jsxs("div",{className:`flex flex-col px-3 py-2 rounded-lg transition-colors cursor-pointer ${t?"hover:bg-zinc-800":"hover:bg-gray-50"}`,onClick:()=>u(h.latitude,h.longitude),children:[x.jsx("span",{className:`text-xs ${t?"text-gray-300":"text-gray-600"}`,children:h.name}),x.jsxs("span",{className:"text-[10px] text-gray-400 mt-1",children:[h.latitude,", ",h.longitude]})]},h.id))})]},d.id))}),x.jsx(y8,{open:n,onOpenChange:d=>{r(d),d||(c(),e==null||e())},isDarkMode:t})]})};var[uh,gJ]=as("Tooltip",[Wa]),dh=Wa(),A2="TooltipProvider",b8=700,d0="tooltip.open",[x8,uy]=uh(A2),C2=t=>{const{__scopeTooltip:e,delayDuration:n=b8,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=_.useRef(!0),c=_.useRef(!1),u=_.useRef(0);return _.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),x.jsx(x8,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:_.useCallback(()=>{window.clearTimeout(u.current),o.current=!1},[]),onClose:_.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:_.useCallback(d=>{c.current=d},[]),disableHoverableContent:s,children:i})};C2.displayName=A2;var kc="Tooltip",[E8,fh]=uh(kc),R2=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:c}=t,u=uy(kc,t.__scopeTooltip),d=dh(e),[h,p]=_.useState(null),m=Ar(),y=_.useRef(0),E=o??u.disableHoverableContent,b=c??u.delayDuration,T=_.useRef(!1),[P,S]=Sa({prop:r,defaultProp:s??!1,onChange:U=>{U?(u.onOpen(),document.dispatchEvent(new CustomEvent(d0))):u.onClose(),i==null||i(U)},caller:kc}),C=_.useMemo(()=>P?T.current?"delayed-open":"instant-open":"closed",[P]),I=_.useCallback(()=>{window.clearTimeout(y.current),y.current=0,T.current=!1,S(!0)},[S]),O=_.useCallback(()=>{window.clearTimeout(y.current),y.current=0,S(!1)},[S]),D=_.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{T.current=!0,S(!0),y.current=0},b)},[b,S]);return _.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),x.jsx(Uv,{...d,children:x.jsx(E8,{scope:e,contentId:m,open:P,stateAttribute:C,trigger:h,onTriggerChange:p,onTriggerEnter:_.useCallback(()=>{u.isOpenDelayedRef.current?D():I()},[u.isOpenDelayedRef,D,I]),onTriggerLeave:_.useCallback(()=>{E?O():(window.clearTimeout(y.current),y.current=0)},[O,E]),onOpen:I,onClose:O,disableHoverableContent:E,children:n})})};R2.displayName=kc;var f0="TooltipTrigger",k2=_.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=fh(f0,n),i=uy(f0,n),o=dh(n),c=_.useRef(null),u=We(e,c,s.onTriggerChange),d=_.useRef(!1),h=_.useRef(!1),p=_.useCallback(()=>d.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),x.jsx(Vv,{asChild:!0,...o,children:x.jsx(Le.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:u,onPointerMove:_e(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:_e(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:_e(t.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:_e(t.onFocus,()=>{d.current||s.onOpen()}),onBlur:_e(t.onBlur,s.onClose),onClick:_e(t.onClick,s.onClose)})})});k2.displayName=f0;var T8="TooltipPortal",[mJ,S8]=uh(T8,{forceMount:void 0}),Ca="TooltipContent",M2=_.forwardRef((t,e)=>{const n=S8(Ca,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=fh(Ca,t.__scopeTooltip);return x.jsx(ls,{present:r||o.open,children:o.disableHoverableContent?x.jsx(I2,{side:s,...i,ref:e}):x.jsx(P8,{side:s,...i,ref:e})})}),P8=_.forwardRef((t,e)=>{const n=fh(Ca,t.__scopeTooltip),r=uy(Ca,t.__scopeTooltip),s=_.useRef(null),i=We(e,s),[o,c]=_.useState(null),{trigger:u,onClose:d}=n,h=s.current,{onPointerInTransitChange:p}=r,m=_.useCallback(()=>{c(null),p(!1)},[p]),y=_.useCallback((E,b)=>{const T=E.currentTarget,P={x:E.clientX,y:E.clientY},S=M8(P,T.getBoundingClientRect()),C=I8(P,S),I=O8(b.getBoundingClientRect()),O=N8([...C,...I]);c(O),p(!0)},[p]);return _.useEffect(()=>()=>m(),[m]),_.useEffect(()=>{if(u&&h){const E=T=>y(T,h),b=T=>y(T,u);return u.addEventListener("pointerleave",E),h.addEventListener("pointerleave",b),()=>{u.removeEventListener("pointerleave",E),h.removeEventListener("pointerleave",b)}}},[u,h,y,m]),_.useEffect(()=>{if(o){const E=b=>{const T=b.target,P={x:b.clientX,y:b.clientY},S=(u==null?void 0:u.contains(T))||(h==null?void 0:h.contains(T)),C=!L8(P,o);S?m():C&&(m(),d())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[u,h,o,d,m]),x.jsx(I2,{...t,ref:i})}),[A8,C8]=uh(kc,{isInside:!1}),R8=oF("TooltipContent"),I2=_.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...c}=t,u=fh(Ca,n),d=dh(n),{onClose:h}=u;return _.useEffect(()=>(document.addEventListener(d0,h),()=>document.removeEventListener(d0,h)),[h]),_.useEffect(()=>{if(u.trigger){const p=m=>{const y=m.target;y!=null&&y.contains(u.trigger)&&h()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[u.trigger,h]),x.jsx(zc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:p=>p.preventDefault(),onDismiss:h,children:x.jsxs(zv,{"data-state":u.stateAttribute,...d,...c,ref:e,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[x.jsx(R8,{children:r}),x.jsx(A8,{scope:n,isInside:!0,children:x.jsx(yz,{id:u.contentId,role:"tooltip",children:s||r})})]})})});M2.displayName=Ca;var O2="TooltipArrow",k8=_.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=dh(n);return C8(O2,n).isInside?null:x.jsx($v,{...s,...r,ref:e})});k8.displayName=O2;function M8(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function I8(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function O8(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function L8(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const c=e[i],u=e[o],d=c.x,h=c.y,p=u.x,m=u.y;h>r!=m>r&&n<(p-d)*(r-h)/(m-h)+d&&(s=!s)}return s}function N8(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),j8(e)}function j8(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var D8=C2,F8=R2,B8=k2,L2=M2;const U8=D8,$l=F8,Gl=B8,oa=_.forwardRef(({className:t,sideOffset:e=4,...n},r)=>x.jsx(L2,{ref:r,sideOffset:e,className:$e("z-50 overflow-hidden rounded-md px-3 py-1.5 text-xs animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","theme-aware-tooltip",t),...n}));oa.displayName=L2.displayName;const V8=({onDarkModeChange:t,onHistoryClick:e,onControlConsultarClick:n})=>{const[r,s]=_.useState("closed"),[i,o]=_.useState(null),[c,u]=_.useState({}),[d,h]=_.useState(!1),[p,m]=_.useState([]),{hiddenPOITypes:y,togglePOIType:E}=cy(),b=async()=>{try{const{data:V,error:Q}=await Rr.from("poi_types").select("*").order("name");if(Q)throw Q;const{data:te,error:ae}=await Rr.from("pois").select("*");if(ae)throw ae;const ie=V.map(ve=>({...ve,count:te.filter(le=>le.type_id===ve.id).length}));m(ie)}catch(V){console.error("Error fetching POI data:",V)}};_.useEffect(()=>{b()},[]);const T=V=>{const Q=V.split("_"),te=Q.includes("veiculos"),ae=Q.includes("emTransito")||Q.includes("naBase");u(ie=>{const ve={...ie};return Q.length===1?Object.keys(ie).forEach(le=>{le.split("_")[0]!==V&&delete ve[le]}):te&&ae&&Object.keys(ie).forEach(le=>{le.includes("veiculos")&&le!=="veiculos"&&le!==V&&delete ve[le]}),ve[V]=!ie[V],ve})},P=()=>{s("closed"),o(null),u({})},S=["monitoramento","controle","pontosInteresse"],C=V=>{if(V==="darkMode"){const Q=!d;h(Q),t==null||t(Q);return}if(V==="historico"){e==null||e();return}S.includes(V)?(s("full"),o(V)):(s("half"),o(V))},I={monitoramento:x.jsx(tB,{data:W4,expandedItems:c,onToggleItem:T,isDarkMode:d}),controle:x.jsx(Z4,{data:H4,isDarkMode:d,onConsultarClick:n}),pontosInteresse:x.jsx(w8,{isDarkMode:d,onPOITypeCreated:b})},O=()=>I[i||""]||null,D={monitoramento:x.jsx(G0,{size:20,strokeWidth:1.5}),controle:x.jsx(fS,{size:20,strokeWidth:1.5}),historico:x.jsx(AL,{size:20,strokeWidth:1.5}),estatisticas:x.jsx(uL,{size:20,strokeWidth:1.5})},U=V=>D[V]||null,G={notifications:x.jsx(lS,{size:16,strokeWidth:1.5}),location:x.jsx(bm,{size:16,strokeWidth:1.5}),darkMode:d?x.jsx(EL,{size:16}):x.jsx(wL,{size:16,strokeWidth:1.5}),logout:x.jsx(yL,{size:16,strokeWidth:1.5})},W=V=>G[V]||null;return x.jsx(U8,{children:x.jsxs(Tn.div,{className:$e("theme-aware-sidebar rounded-[20px] shadow-[2px_2px_7px_#00000040] backdrop-blur-[2px] backdrop-brightness-[100%] [-webkit-backdrop-filter:blur(2px)_brightness(100%)] relative flex flex-col select-none",d?"text-white":""),animate:{width:r==="closed"?66:r==="half"?220:450},transition:{duration:.3},children:[x.jsxs("div",{className:`p-2 flex ${r==="closed"?"justify-center":"justify-between items-center"}`,children:[x.jsxs("div",{className:`flex items-center ${r==="closed"?"":"gap-3"}`,children:[x.jsx(cA,{className:`w-[45px] h-[45px] border-2 ${d?"border-[#272727]":"border-white"}`,children:x.jsx(uA,{className:"bg-[#95C0FF] text-white text-lg",children:"BL"})}),r!=="closed"&&x.jsxs("div",{className:"flex flex-col",children:[x.jsx("span",{className:"theme-aware-text-secondary text-xs",children:"Bem-vindo"}),x.jsx("span",{className:`text-sm font-medium ${d?"text-gray-300":"text-gray-700"}`,children:"Bruno Leonardi"})]})]}),r!=="closed"&&x.jsxs($l,{children:[x.jsx(Gl,{asChild:!0,children:x.jsx("button",{onClick:P,className:"theme-aware-hover p-1 rounded-full transition-colors",children:x.jsx(dL,{size:20})})}),x.jsx(oa,{side:"right",className:"theme-aware-tooltip",children:"Fechar Menu"})]})]}),x.jsxs("div",{className:`w-full flex ${r==="closed"?"flex-col items-center gap-2":""}`,children:[x.jsxs("div",{className:`flex-1 ${r==="closed"?"flex flex-col items-center":""}`,children:[x.jsx("div",{className:`px-4 py-2 ${r==="closed"?"text-center":"flex items-center justify-between"}`,children:x.jsx("span",{className:"theme-aware-text-secondary text-xs",children:"Menu"})}),K4.map(V=>x.jsxs($l,{children:[x.jsx(Gl,{asChild:!0,children:x.jsxs("div",{className:$e("flex items-center h-10 px-4 cursor-pointer rounded-lg mx-2",r==="closed"?"justify-center":"",i===V.id?"theme-aware-active":"theme-aware-hover"),onClick:()=>C(V.id),children:[x.jsxs("div",{className:"relative theme-aware-text",children:[U(V.id),V.badge&&x.jsx($x,{className:`absolute -top-2 -right-3 w-[18px] h-[16px] rounded-full flex items-center justify-center border ${d?"bg-zinc-700 border-white text-white hover:bg-zinc-700":"bg-white border-black text-black hover:bg-white"}`,children:x.jsx("span",{className:"text-[10px] font-semibold",children:V.badge})})]}),r!=="closed"&&x.jsx("span",{className:"theme-aware-text ml-3 text-sm",children:V.label})]})}),r==="closed"&&x.jsx(oa,{side:"right",className:"theme-aware-tooltip",children:V.label})]},V.id)),x.jsx("div",{className:"my-2 px-3 w-full",children:x.jsx("div",{className:"theme-aware-divider h-[1px] w-full"})}),x.jsx("div",{className:`px-4 py-2 ${r==="closed"?"text-center":"flex items-center justify-between"}`,children:x.jsxs("span",{className:"theme-aware-text-secondary text-xs",children:[r==="closed"?"PIs: ":"Pontos de Interesse: ",x.jsx("span",{className:"font-bold",children:p.reduce((V,Q)=>V+Q.count,0)})]})}),x.jsxs($l,{children:[x.jsx(Gl,{asChild:!0,children:x.jsxs("div",{className:$e("flex items-center h-10 px-4 cursor-pointer rounded-lg mx-2",r==="closed"?"justify-center":"",i==="pontosInteresse"?"theme-aware-active":"theme-aware-hover"),onClick:()=>C("pontosInteresse"),children:[x.jsx(dS,{size:20,strokeWidth:1.5,className:"theme-aware-text"}),r!=="closed"&&x.jsx("span",{className:"theme-aware-text ml-3 text-sm",children:"Pontos de Interesse"})]})}),r==="closed"&&x.jsx(oa,{side:"right",className:"theme-aware-tooltip",children:"Pontos de Interesse"})]}),x.jsx("div",{className:"theme-aware-card mx-2 my-2 rounded-xl",children:x.jsx("div",{className:"p-4",children:p.map(V=>x.jsxs("div",{className:`flex items-center ${r==="closed"?"justify-center":""} gap-3 mb-5 last:mb-0 cursor-pointer`,onClick:()=>E(V.id),style:{opacity:y.has(V.id)?.5:1},children:[x.jsxs("div",{className:"relative",children:[x.jsx(bm,{size:20,style:{fill:V.color,color:V.color}}),x.jsx($x,{className:"absolute -top-2 -right-3 w-[18px] h-[16px] rounded-full border border-white flex items-center justify-center",style:{backgroundColor:V.color},children:x.jsx("span",{className:"text-[10px] text-white font-semibold",children:V.count})})]}),r!=="closed"&&x.jsx("span",{className:"theme-aware-text text-sm pl-3",children:V.name})]},V.id))})}),r!=="closed"?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"px-4 py-2",children:x.jsx("span",{className:"theme-aware-text-secondary text-xs",children:"Atalhos e Notificações"})}),x.jsx("div",{className:"mx-2 mb-4",children:x.jsx("div",{className:"theme-aware-card flex items-center justify-between px-3 py-1.5 rounded-lg",children:Y4.map(V=>x.jsxs($l,{children:[x.jsx(Gl,{asChild:!0,children:x.jsx("div",{className:$e("p-1.5 rounded-lg cursor-pointer transition-colors",i===V.id?"theme-aware-active":"theme-aware-hover theme-aware-text"),onClick:()=>C(V.id),children:W(V.id)})}),x.jsx(oa,{side:"top",className:"theme-aware-tooltip",children:V.label})]},V.id))})})]}):x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"px-4 py-2 text-center",children:x.jsx("span",{className:"theme-aware-text-secondary text-xs",children:"Mais"})}),x.jsxs($l,{children:[x.jsx(Gl,{asChild:!0,children:x.jsx("div",{className:"theme-aware-hover flex justify-center p-2 mb-2 cursor-pointer rounded-lg mx-2",onClick:()=>s("half"),children:x.jsx(uS,{size:20,className:"theme-aware-text"})})}),x.jsx(oa,{side:"right",className:"theme-aware-tooltip",children:"Expandir Menu"})]})]})]}),r==="full"&&x.jsx("div",{className:"theme-aware-divider w-[1px] mx-2"}),r==="full"&&x.jsx(Tn.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"flex-1",children:O()})]})]})})},B1=[{id:1,status:"Processando",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:2,status:"Processando",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:3,status:"Processando",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:4,status:"Concluído",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:5,status:"Processando",veiculo:"GRVT-P01",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:6,status:"Concluído",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:7,status:"Concluído",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:8,status:"Concluído",veiculo:"GRVT-P01",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:9,status:"Concluído",veiculo:"GRVT-P01",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:10,status:"Processando",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:11,status:"Processando",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:12,status:"Processando",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:13,status:"Processando",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:14,status:"Concluído",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:15,status:"Processando",veiculo:"GRVT-P01",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:16,status:"Concluído",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:17,status:"Concluído",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:18,status:"Concluído",veiculo:"GRVT-P01",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:19,status:"Concluído",veiculo:"GRVT-P01",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:20,status:"Processando",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"}],Ug=10,z8=({isDarkMode:t,onClose:e})=>{const[n,r]=_.useState([]),[s,i]=_.useState(""),[o,c]=_.useState(!1),[u,d]=_.useState(1),h=_.useMemo(()=>{if(!s)return B1;const S=s.toLowerCase();return B1.filter(C=>Object.values(C).some(I=>I.toString().toLowerCase().includes(S)))},[s]),p=Math.ceil(h.length/Ug),m=_.useMemo(()=>{const S=(u-1)*Ug;return h.slice(S,S+Ug)},[h,u]),y=()=>{n.length===m.length?r([]):r(m.map(S=>S.id))},E=S=>{r(C=>C.includes(S)?C.filter(I=>I!==S):[...C,S])},b=()=>{c(!0),setTimeout(e,50)},T=S=>{d(S),r([])},P=()=>{const S=[];let I=1,O=p;if(p>7){const D=Math.floor(3.5),U=7-D-1;u<=D?O=7:u>p-U?I=p-7+1:(I=u-D,O=u+U)}for(let D=I;D<=O;D++)S.push(x.jsx("button",{onClick:()=>T(D),className:`px-3 py-1 rounded-md ${u===D?"bg-blue-400 text-white":t?"text-gray-300 hover:bg-zinc-700":"text-gray-600 hover:bg-gray-100"}`,children:D},D));return I>1&&(S.unshift(x.jsx("span",{className:`px-3 py-1 ${t?"text-gray-300":"text-gray-600"}`,children:"..."},"start-ellipsis")),S.unshift(x.jsx("button",{onClick:()=>T(1),className:`px-3 py-1 rounded-md ${t?"text-gray-300 hover:bg-zinc-700":"text-gray-600 hover:bg-gray-100"}`,children:"1"},1))),O<p&&(S.push(x.jsx("span",{className:`px-3 py-1 ${t?"text-gray-300":"text-gray-600"}`,children:"..."},"end-ellipsis\\")),S.push(x.jsx("button",{onClick:()=>T(p),className:`px-3 py-1 rounded-md ${t?"text-gray-300 hover:bg-zinc-700":"text-gray-600 hover:bg-gray-100"}`,children:p},p))),S};return x.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[x.jsx(Tn.div,{className:"fixed inset-0 bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},onClick:b}),x.jsxs(Tn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.3,bounce:.2},className:`w-[90%] max-w-6xl max-h-[90dvh] rounded-2xl ${t?"bg-zinc-900/60":"bg-[#EFF4FA] bg-opacity-60"} backdrop-blur-[2px] px-6 pt-5 shadow-md flex flex-col relative cursor-default z-50`,onClick:S=>S.stopPropagation(),children:[x.jsxs(Tn.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:.1},className:"flex flex-col items-center mb-3",children:[x.jsx("h2",{className:`text-lg font-semibold absolute self-start mt-4 ${t?"text-gray-300":"text-gray-600"}`,children:"Histórico de Vídeos"}),x.jsx("div",{className:"w-full max-w-md",children:x.jsxs("div",{className:"relative",children:[x.jsx("input",{name:"search",type:"text",placeholder:"Busca por ID, status, data...",value:s,onChange:S=>i(S.target.value),className:`w-full h-8 pl-4 pr-8 text-sm rounded-full ${t?"bg-zinc-800 text-gray-200 placeholder-gray-400":"bg-white text-gray-900 placeholder-gray-500"}`}),x.jsx(W0,{className:`absolute right-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 ${t?"text-gray-400":"text-gray-500"}`})]})}),x.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[x.jsxs(Tn.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:y,className:`px-4 py-1.5 text-xs rounded-full transition-colors flex items-center gap-2 ${t?"bg-zinc-800 text-gray-300 hover:bg-zinc-700":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[x.jsx(hS,{size:14}),"Marcar Tudo"]}),x.jsxs(Tn.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>r([]),className:`px-4 py-1.5 text-xs rounded-full transition-colors flex items-center gap-2 ${t?"bg-zinc-800 text-gray-300 hover:bg-zinc-700":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[x.jsx(pS,{size:14}),"Desmarcar Tudo"]})]})]}),x.jsxs(Tn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:.2},className:"rounded-lg flex-1 overflow-hidden flex flex-col",children:[x.jsx("div",{className:"overflow-auto flex-1 shadow-md",children:x.jsxs("table",{className:`w-full ${t?"bg-zinc-800":"bg-white"} rounded-lg`,children:[x.jsx("thead",{className:"sticky top-0",children:x.jsxs("tr",{className:`${t?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"} border-b`,children:[x.jsx("th",{className:"px-3 py-2 text-left w-8"}),x.jsx("th",{className:`px-3 py-2 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"ID"}),x.jsx("th",{className:`px-3 py-2 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Status"}),x.jsx("th",{className:`px-3 py-2 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Veículo"}),x.jsx("th",{className:`px-3 py-2 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Início"}),x.jsx("th",{className:`px-3 py-2 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Fim"}),x.jsx("th",{className:`px-3 py-2 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Ações"})]})}),x.jsxs("tbody",{children:[m.map((S,C)=>x.jsxs(Tn.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{delay:C*.03,duration:.2},className:`border-t ${t?"border-zinc-700":"border-gray-200"} ${n.includes(S.id)?t?"bg-[#333333]":"bg-[#f9f9f9]":""}`,children:[x.jsx("td",{className:"px-3 py-3",children:x.jsx("input",{type:"checkbox",checked:n.includes(S.id),onChange:()=>E(S.id),className:`h-3 w-3 rounded ${t?"text-blue-500 bg-zinc-700 border-zinc-600":"text-blue-600 bg-white border-gray-300"}`})}),x.jsx("td",{className:`px-3 py-3 text-sm ${t?"text-gray-300":"text-gray-900"}`,children:S.id}),x.jsx("td",{className:`px-3 py-3 text-sm ${t?"text-gray-300":"text-gray-900"}`,children:S.status}),x.jsx("td",{className:`px-3 py-3 text-sm ${t?"text-gray-300":"text-gray-900"}`,children:S.veiculo}),x.jsx("td",{className:`px-3 py-3 text-sm ${t?"text-gray-300":"text-gray-900"}`,children:S.inicio}),x.jsx("td",{className:`px-3 py-3 text-sm ${t?"text-gray-300":"text-gray-900"}`,children:S.fim}),x.jsx("td",{className:"px-3 py-3",children:x.jsx(Tn.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-1.5 rounded-lg transition-colors ${t?"hover:bg-zinc-600":"hover:bg-gray-100"}`,children:x.jsx(gL,{className:`w-4 h-4 ${t?"text-gray-400":"text-gray-600"}`})})})]},S.id)),m.length===0&&x.jsx("tr",{children:x.jsx("td",{colSpan:7,className:`text-center py-4 ${t?"text-gray-400":"text-gray-500"}`,children:"Nenhum resultado encontrado"})})]})]})}),x.jsx("div",{className:"p-4 flex items-center justify-center",children:x.jsx("div",{className:`flex gap-1 rounded-lg p-0.5 shadow-md ${t?"bg-zinc-800":"bg-white"}`,children:P()})})]})]})]})};function bf(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const dy=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),U1=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);U1&&parseFloat(U1[1]);const $8="3.4.15";function ss(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const Zd=typeof process!="object"||String(process)!=="[object process]"||process.browser,G8=typeof window<"u"&&typeof window.orientation<"u",V1=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);V1&&parseFloat(V1[1]);function Mc(t){"@babel/helpers - typeof";return Mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mc(t)}function W8(t,e){if(Mc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function H8(t){var e=W8(t,"string");return Mc(e)=="symbol"?e:e+""}function R(t,e,n){return(e=H8(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class q8{constructor(e,n){R(this,"name",void 0),R(this,"workerThread",void 0),R(this,"isRunning",!0),R(this,"result",void 0),R(this,"_resolve",()=>{}),R(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((r,s)=>{this._resolve=r,this._reject=s})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){ss(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){ss(this.isRunning),this.isRunning=!1,this._reject(e)}}let Vg=class{terminate(){}};const zg=new Map;function K8(t){ss(t.source&&!t.url||!t.source&&t.url);let e=zg.get(t.source||t.url);return e||(t.url&&(e=Y8(t.url),zg.set(t.url,e)),t.source&&(e=N2(t.source),zg.set(t.source,e))),ss(e),e}function Y8(t){if(!t.startsWith("http"))return t;const e=X8(t);return N2(e)}function N2(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function X8(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function j2(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(t){if(z1(t))r.add(t);else if(z1(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const s in t)j2(t[s],e,r)}}return n===void 0?Array.from(r):[]}function z1(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const $g=()=>{};class h0{static isSupported(){return typeof Worker<"u"&&Zd||typeof Vg<"u"&&!Zd}constructor(e){R(this,"name",void 0),R(this,"source",void 0),R(this,"url",void 0),R(this,"terminated",!1),R(this,"worker",void 0),R(this,"onMessage",void 0),R(this,"onError",void 0),R(this,"_loadableURL","");const{name:n,source:r,url:s}=e;ss(r||s),this.name=n,this.source=r,this.url=s,this.onMessage=$g,this.onError=i=>console.log(i),this.worker=Zd?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=$g,this.onError=$g,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||j2(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=K8({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new Vg(r,{eval:!1})}else if(this.source)e=new Vg(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class Z8{static isSupported(){return h0.isSupported()}constructor(e){R(this,"name","unnamed"),R(this,"source",void 0),R(this,"url",void 0),R(this,"maxConcurrency",1),R(this,"maxMobileConcurrency",1),R(this,"onDebug",()=>{}),R(this,"reuseWorkers",!0),R(this,"props",{}),R(this,"jobQueue",[]),R(this,"idleQueue",[]),R(this,"count",0),R(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(i,o,c)=>i.done(c),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(i,o)=>i.error(o);const s=new Promise(i=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:i}),this));return this._startQueuedJob(),await s}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new q8(n.name,e);e.onMessage=s=>n.onMessage(r,s.type,s.payload),e.onError=s=>n.onError(r,s),n.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new h0({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return G8?this.maxMobileConcurrency:this.maxConcurrency}}const Q8={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Xr{static isSupported(){return h0.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Xr._workerFarm=Xr._workerFarm||new Xr({}),Xr._workerFarm.setProps(e),Xr._workerFarm}constructor(e){R(this,"props",void 0),R(this,"workerPools",new Map),this.props={...Q8},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:s}=e;let i=this.workerPools.get(n);return i||(i=new Z8({name:n,source:r,url:s}),i.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,i)),i}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}R(Xr,"_workerFarm",void 0);const J8="latest";function e$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let s=n.workerUrl;if(!s&&t.id==="compression"&&(s=e.workerUrl),e._workerType==="test"&&(s="modules/".concat(t.module,"/dist/").concat(r)),!s){let i=t.version;i==="latest"&&(i=J8);const o=i?"@".concat(i):"";s="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(r)}return ss(s),s}function t$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$8;ss(t,"no worker provided");const n=t.version;return!(!e||!n)}function n$(t,e){return!Xr.isSupported()||!Zd&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function r$(t,e,n,r,s){const i=t.id,o=e$(t,n),u=Xr.getWorkerFarm(n).getWorkerPool({name:i,url:o});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const d=await u.startJob("process-on-worker",s$.bind(null,s));return d.postMessage("process",{input:e,options:n,context:r}),await(await d.result).result}async function s$(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:s,input:i,options:o}=r;try{const c=await t(i,o);e.postMessage("done",{id:s,result:c})}catch(c){const u=c instanceof Error?c.message:"unknown error";e.postMessage("error",{id:s,error:u})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function i$(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),s=new Uint8Array(e);for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}function o$(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map(c=>c instanceof ArrayBuffer?new Uint8Array(c):c),s=r.reduce((c,u)=>c+u.byteLength,0),i=new Uint8Array(s);let o=0;for(const c of r)i.set(c,o),o+=c.byteLength;return i.buffer}async function a$(t){const e=[];for await(const n of t)e.push(n);return o$(...e)}function $1(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class G1{constructor(e,n){R(this,"name",void 0),R(this,"type",void 0),R(this,"sampleSize",1),R(this,"time",void 0),R(this,"count",void 0),R(this,"samples",void 0),R(this,"lastTiming",void 0),R(this,"lastSampleTime",void 0),R(this,"lastSampleCount",void 0),R(this,"_count",0),R(this,"_time",0),R(this,"_samples",0),R(this,"_startTime",0),R(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=$1(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime($1()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class fy{constructor(e){R(this,"id",void 0),R(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof G1?this.stats[n]=e:this.stats[n]=new G1(n,r)),this.stats[n]}}let l$="";const W1={};function c$(t){for(const e in W1)if(t.startsWith(e)){const n=W1[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(l$).concat(t)),t}function u$(t){return t&&typeof t=="object"&&t.isBuffer}function D2(t){if(u$(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function F2(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function d$(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const f$=t=>typeof t=="boolean",pc=t=>typeof t=="function",Kc=t=>t!==null&&typeof t=="object",H1=t=>Kc(t)&&t.constructor==={}.constructor,h$=t=>t&&typeof t[Symbol.iterator]=="function",p$=t=>t&&typeof t[Symbol.asyncIterator]=="function",so=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,io=t=>typeof Blob<"u"&&t instanceof Blob,g$=t=>t&&typeof t=="object"&&t.isBuffer,m$=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||Kc(t)&&pc(t.tee)&&pc(t.cancel)&&pc(t.getReader),v$=t=>Kc(t)&&pc(t.read)&&pc(t.pipe)&&f$(t.readable),B2=t=>m$(t)||v$(t),y$=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,_$=/^([-\w.]+\/[-\w.+]+)/;function w$(t){const e=_$.exec(t);return e?e[1]:t}function q1(t){const e=y$.exec(t);return e?e[1]:""}const U2=/\?.*/;function b$(t){const e=t.match(U2);return e&&e[0]}function hy(t){return t.replace(U2,"")}function hh(t){return so(t)?t.url:io(t)?t.name||"":typeof t=="string"?t:""}function py(t){if(so(t)){const e=t,n=e.headers.get("content-type")||"",r=hy(e.url);return w$(n)||q1(r)}return io(t)?t.type||"":typeof t=="string"?q1(t):""}function x$(t){return so(t)?t.headers["content-length"]||-1:io(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function V2(t){if(so(t))return t;const e={},n=x$(t);n>=0&&(e["content-length"]=String(n));const r=hh(t),s=py(t);s&&(e["content-type"]=s);const i=await S$(t);i&&(e["x-first-bytes"]=i),typeof t=="string"&&(t=new TextEncoder().encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:r}),o}async function E$(t){if(!t.ok){const e=await T$(t);throw new Error(e)}}async function T$(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}async function S$(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const s=new FileReader;s.onload=i=>{var o;return r(i==null||(o=i.target)===null||o===void 0?void 0:o.result)},s.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5),r=P$(n);return"data:base64,".concat(r)}return null}function P$(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}async function K1(t,e){if(typeof t=="string"){t=c$(t);let n=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(n=e.fetch),await fetch(t,n)}return await V2(t)}function z2(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const n=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent;return!!(n&&n.indexOf("Electron")>=0)}function cs(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||z2()}const Qd={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,process:typeof process=="object"&&process},Ld=Qd.window||Qd.self||Qd.global,Wl=Qd.process||{},$2=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";cs();const Gg=globalThis;function G2(t){if(!cs())return"Node";if(z2())return"Electron";const n=(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,s=n.indexOf("Trident/")!==-1;return r||s?"IE":Gg.chrome?"Chrome":Gg.safari?"Safari":Gg.mozInnerScreenX?"Firefox":"Unknown"}function A$(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class C${constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";R(this,"storage",void 0),R(this,"id",void 0),R(this,"config",void 0),this.storage=A$(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function R$(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function k$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function Wg(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const s=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const i=t.width*n,o=t.height*n,c=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(i/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(s,");"),"background-size:".concat(i,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),c]}let xf;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(xf||(xf={}));function Y1(t){return typeof t=="string"?xf[t.toUpperCase()]||xf.WHITE:t}function M$(t,e,n){return!cs&&typeof t=="string"&&(e&&(e=Y1(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=Y1(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function I$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const s of r)typeof t[s]=="function"&&(e.find(i=>s===i)||(t[s]=t[s].bind(t)))}function Ef(t,e){if(!t)throw new Error(e||"Assertion failed")}function Qo(){let t;if(cs&&"performance"in Ld){var e,n;t=Ld==null||(e=Ld.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in Wl){var r;const s=Wl==null||(r=Wl.hrtime)===null||r===void 0?void 0:r.call(Wl);t=s[0]*1e3+s[1]/1e6}else t=Date.now();return t}const Jo={debug:cs&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},O$={enabled:!0,level:0};function Vn(){}const X1={},Z1={once:!0};class Yc{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};R(this,"id",void 0),R(this,"VERSION",$2),R(this,"_startTs",Qo()),R(this,"_deltaTs",Qo()),R(this,"_storage",void 0),R(this,"userData",{}),R(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new C$("__probe-".concat(this.id,"__"),O$),this.timeStamp("".concat(this.id," started")),I$(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Qo()-this._startTs).toPrecision(10))}getDelta(){return Number((Qo()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){Ef(e,n)}warn(e){return this._getLogFunction(0,e,Jo.warn,arguments,Z1)}error(e){return this._getLogFunction(0,e,Jo.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Jo.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Jo.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];return this._getLogFunction(e,n,Jo.debug||Jo.info,arguments,Z1)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||Vn,r&&[r],{tag:D$(n)}):Vn}image(e){let{logLevel:n,priority:r,image:s,message:i="",scale:o=1}=e;return this._shouldLog(n||r)?cs?j$({image:s,message:i,scale:o}):N$():Vn}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||Vn)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const s=Q1({logLevel:e,message:n,opts:r}),{collapsed:i}=r;return s.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(s)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Vn)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=W2(e)}_getLogFunction(e,n,r,s,i){if(this._shouldLog(e)){i=Q1({logLevel:e,message:n,args:s,opts:i}),r=r||i.method,Ef(r),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=Qo();const o=i.tag||i.message;if(i.once)if(!X1[o])X1[o]=Qo();else return Vn;return n=L$(this.id,i.message,i),r.bind(console,n,...i.args)}return Vn}}R(Yc,"VERSION",$2);function W2(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Ef(Number.isFinite(e)&&e>=0),e}function Q1(t){const{logLevel:e,message:n}=t;t.logLevel=W2(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const s=typeof t.message;return Ef(s==="string"||s==="object"),Object.assign(t,{args:r},t.opts)}function L$(t,e,n){if(typeof e=="string"){const r=n.time?k$(R$(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=M$(e,n.color,n.background)}return e}function N$(t){return console.warn("removed"),Vn}function j$(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const i=new Image;return i.onload=()=>{const o=Wg(i,n,r);console.log(...o)},i.src=e,Vn}const s=e.nodeName||"";if(s.toLowerCase()==="img")return console.log(...Wg(e,n,r)),Vn;if(s.toLowerCase()==="canvas"){const i=new Image;return i.onload=()=>console.log(...Wg(i,n,r)),i.src=e.toDataURL(),Vn}return Vn}function D$(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const J1=new Yc({id:"loaders.gl"});class F${log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class B${constructor(){R(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.log.bind(this.console,...n)}info(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.info.bind(this.console,...n)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.warn.bind(this.console,...n)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.error.bind(this.console,...n)}}const H2={fetch:null,mimeType:void 0,nothrow:!1,log:new B$,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:dy,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},U$={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function q2(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const K2=()=>{const t=q2();return t.globalOptions=t.globalOptions||{...H2},t.globalOptions};function V$(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],z$(t,n),G$(e,t,r)}function z$(t,e){eE(t,null,H2,U$,e);for(const n of e){const r=t&&t[n.id]||{},s=n.options&&n.options[n.id]||{},i=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};eE(r,n.id,s,i,e)}}function eE(t,e,n,r,s){const i=e||"Top level",o=e?"".concat(e,"."):"";for(const c in t){const u=!e&&Kc(t[c]),d=c==="baseUri"&&!e,h=c==="workerUrl"&&e;if(!(c in n)&&!d&&!h){if(c in r)J1.warn("".concat(i," loader option '").concat(o).concat(c,"' no longer supported, use '").concat(r[c],"'"))();else if(!u){const p=$$(c,s);J1.warn("".concat(i," loader option '").concat(o).concat(c,"' not recognized. ").concat(p))()}}}}function $$(t,e){const n=t.toLowerCase();let r="";for(const s of e)for(const i in s.options){if(t===i)return"Did you mean '".concat(s.id,".").concat(i,"'?");const o=i.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(s.id,".").concat(i,"'?"))}return r}function G$(t,e,n){const s={...t.options||{}};return W$(s,n),s.log===null&&(s.log=new F$),tE(s,K2()),tE(s,e),s}function tE(t,e){for(const n in e)if(n in e){const r=e[n];H1(r)&&H1(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function W$(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function gy(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function my(t){var e,n;bf(t,"null loader"),bf(gy(t),"invalid loader");let r;return Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const Y2=()=>{const t=q2();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function H$(t){const e=Y2();t=Array.isArray(t)?t:[t];for(const n of t){const r=my(n);e.find(s=>r===s)||e.unshift(r)}}function q$(){return Y2()}const K$=new Yc({id:"loaders.gl"}),Y$=/\.([^.]+)$/;async function X$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!X2(t))return null;let s=nE(t,e,{...n,nothrow:!0},r);if(s)return s;if(io(t)&&(t=await t.slice(0,10).arrayBuffer(),s=nE(t,e,n,r)),!s&&!(n!=null&&n.nothrow))throw new Error(Z2(t));return s}function nE(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!X2(t))return null;if(e&&!Array.isArray(e))return my(e);let s=[];e&&(s=s.concat(e)),n!=null&&n.ignoreRegisteredLoaders||s.push(...q$()),Q$(s);const i=Z$(t,s,n,r);if(!i&&!(n!=null&&n.nothrow))throw new Error(Z2(t));return i}function Z$(t,e,n,r){const s=hh(t),i=py(t),o=hy(s)||(r==null?void 0:r.url);let c=null,u="";if(n!=null&&n.mimeType&&(c=Hg(e,n==null?void 0:n.mimeType),u="match forced by supplied MIME type ".concat(n==null?void 0:n.mimeType)),c=c||J$(e,o),u=u||(c?"matched url ".concat(o):""),c=c||Hg(e,i),u=u||(c?"matched MIME type ".concat(i):""),c=c||tG(e,t),u=u||(c?"matched initial data ".concat(Q2(t)):""),c=c||Hg(e,n==null?void 0:n.fallbackMimeType),u=u||(c?"matched fallback MIME type ".concat(i):""),u){var d;K$.log(1,"selectLoader selected ".concat((d=c)===null||d===void 0?void 0:d.name,": ").concat(u,"."))}return c}function X2(t){return!(t instanceof Response&&t.status===204)}function Z2(t){const e=hh(t),n=py(t);let r="No valid loader found (";r+=e?"".concat(F2(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const s=t?Q2(t):"";return r+=s?' first bytes: "'.concat(s,'"'):"first bytes: not available",r+=")",r}function Q$(t){for(const e of t)my(e)}function J$(t,e){const n=e&&Y$.exec(e),r=n&&n[1];return r?eG(t,r):null}function eG(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function Hg(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function tG(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(nG(e,n))return n}else if(ArrayBuffer.isView(e)){if(rE(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&rE(e,0,n))return n;return null}function nG(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function rE(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(s=>rG(t,e,n,s))}function rG(t,e,n,r){if(r instanceof ArrayBuffer)return i$(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":const s=p0(t,e,r.length);return r===s;default:return!1}}function Q2(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?p0(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?p0(t,0,e):""}function p0(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let s="";for(let i=0;i<n;i++)s+=String.fromCharCode(r.getUint8(e+i));return s}const sG=256*1024;function*iG(t,e){const n=(e==null?void 0:e.chunkSize)||sG;let r=0;const s=new TextEncoder;for(;r<t.length;){const i=Math.min(t.length-r,n),o=t.slice(r,r+i);r+=i,yield s.encode(o)}}const oG=256*1024;function aG(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{chunkSize:n=oG}=e;let r=0;for(;r<t.byteLength;){const s=Math.min(t.byteLength-r,n),i=new ArrayBuffer(s),o=new Uint8Array(t,r,s);new Uint8Array(i).set(o),r+=s,yield i}}()}const lG=1024*1024;async function*cG(t,e){const n=(e==null?void 0:e.chunkSize)||lG;let r=0;for(;r<t.size;){const s=r+n,i=await t.slice(r,s).arrayBuffer();r=s,yield i}}function sE(t,e){return dy?uG(t,e):dG(t)}async function*uG(t,e){const n=t.getReader();let r;try{for(;;){const s=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:i,value:o}=await s;if(i)return;yield D2(o)}}catch{n.releaseLock()}}async function*dG(t,e){for await(const n of t)yield D2(n)}function fG(t,e){if(typeof t=="string")return iG(t,e);if(t instanceof ArrayBuffer)return aG(t,e);if(io(t))return cG(t,e);if(B2(t))return sE(t,e);if(so(t))return sE(t.body,e);throw new Error("makeIterator")}const J2="Cannot convert supplied data type";function hG(t,e,n){if(e.text&&typeof t=="string")return t;if(g$(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const s=t.byteLength||t.length;return(t.byteOffset!==0||s!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+s)),r}throw new Error(J2)}async function pG(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return hG(t,e);if(io(t)&&(t=await V2(t)),so(t)){const s=t;return await E$(s),e.binary?await s.arrayBuffer():await s.text()}if(B2(t)&&(t=fG(t,n)),h$(t)||p$(t))return a$(t);throw new Error(J2)}function ek(t,e){const n=K2(),r=t||n;return typeof r.fetch=="function"?r.fetch:Kc(r.fetch)?s=>K1(s,r):e!=null&&e.fetch?e==null?void 0:e.fetch:K1}function gG(t,e,n){if(n)return n;const r={fetch:ek(e,t),...t};if(r.url){const s=hy(r.url);r.baseUrl=s,r.queryString=b$(r.url),r.filename=F2(s),r.baseUrl=d$(s)}return Array.isArray(r.loaders)||(r.loaders=null),r}function mG(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:null}async function vy(t,e,n,r){ss(!r||typeof r=="object"),e&&!Array.isArray(e)&&!gy(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const s=hh(t),o=mG(e,r),c=await X$(t,o,n);return c?(n=V$(n,c,o,s),r=gG({url:s,parse:vy,loaders:o},n,r||null),await vG(c,t,n,r)):null}async function vG(t,e,n,r){if(t$(t),so(e)){const s=e,{ok:i,redirected:o,status:c,statusText:u,type:d,url:h}=s,p=Object.fromEntries(s.headers.entries());r.response={headers:p,ok:i,redirected:o,status:c,statusText:u,type:d,url:h}}if(e=await pG(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,r,t);if(n$(t,n))return await r$(t,e,n,r,vy);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw ss(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function Tf(t,e,n,r){!Array.isArray(e)&&!gy(e)&&(n=e,e=void 0);const s=ek(n);let i=t;return typeof t=="string"&&(i=await s(t)),io(t)&&(i=await s(t)),await vy(i,e,n)}const yG="3.4.15",{_parseImageNode:_G}=globalThis,g0=typeof Image<"u",m0=typeof ImageBitmap<"u",wG=!!_G,v0=dy?!0:wG;function bG(t){switch(t){case"auto":return m0||g0||v0;case"imagebitmap":return m0;case"image":return g0;case"data":return v0;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function xG(){if(m0)return"imagebitmap";if(g0)return"image";if(v0)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function EG(t){const e=SG(t);if(!e)throw new Error("Not an image");return e}function TG(t){switch(EG(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function SG(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const PG=/^data:image\/svg\+xml/,AG=/\.svg((\?|#).*)?$/;function yy(t){return t&&(PG.test(t)||AG.test(t))}function CG(t,e){if(yy(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(i){throw new Error(i.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return tk(t,e)}function tk(t,e){if(yy(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function nk(t,e,n){const r=CG(t,n),s=self.URL||self.webkitURL,i=typeof r!="string"&&s.createObjectURL(r);try{return await RG(i||r,e)}finally{i&&s.revokeObjectURL(i)}}async function RG(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,s)=>{try{n.onload=()=>r(n),n.onerror=i=>s(new Error("Could not load image ".concat(t,": ").concat(i)))}catch(i){s(i)}})}const kG={};let iE=!0;async function MG(t,e,n){let r;yy(n)?r=await nk(t,e,n):r=tk(t,n);const s=e&&e.imagebitmap;return await IG(r,s)}async function IG(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((OG(e)||!iE)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),iE=!1}return await createImageBitmap(t)}function OG(t){for(const e in t||kG)return!1;return!0}function LG(t){return!FG(t,"ftyp",4)||!(t[8]&96)?null:NG(t)}function NG(t){switch(jG(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function jG(t,e,n){return String.fromCharCode(...t.slice(e,n))}function DG(t){return[...t].map(e=>e.charCodeAt(0))}function FG(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=DG(e);for(let s=0;s<r.length;++s)if(r[s]!==t[s+n])return!1;return!0}const xr=!1,gc=!0;function rk(t){const e=Xc(t);return UG(e)||$G(e)||VG(e)||zG(e)||BG(e)}function BG(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=LG(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function UG(t){const e=Xc(t);return e.byteLength>=24&&e.getUint32(0,xr)===2303741511?{mimeType:"image/png",width:e.getUint32(16,xr),height:e.getUint32(20,xr)}:null}function VG(t){const e=Xc(t);return e.byteLength>=10&&e.getUint32(0,xr)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,gc),height:e.getUint16(8,gc)}:null}function zG(t){const e=Xc(t);return e.byteLength>=14&&e.getUint16(0,xr)===16973&&e.getUint32(2,gc)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,gc),height:e.getUint32(22,gc)}:null}function $G(t){const e=Xc(t);if(!(e.byteLength>=3&&e.getUint16(0,xr)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:s}=GG();let i=2;for(;i+9<e.byteLength;){const o=e.getUint16(i,xr);if(s.has(o))return{mimeType:"image/jpeg",height:e.getUint16(i+5,xr),width:e.getUint16(i+7,xr)};if(!r.has(o))return null;i+=2,i+=e.getUint16(i,xr)}return null}function GG(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Xc(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function WG(t,e){const{mimeType:n}=rk(t)||{},r=globalThis._parseImageNode;return bf(r),await r(t,n)}async function HG(t,e,n){e=e||{};const s=(e.image||{}).type||"auto",{url:i}=n||{},o=qG(s);let c;switch(o){case"imagebitmap":c=await MG(t,e,i);break;case"image":c=await nk(t,e,i);break;case"data":c=await WG(t);break;default:bf(!1)}return s==="data"&&(c=TG(c)),c}function qG(t){switch(t){case"auto":case"data":return xG();default:return bG(t),t}}const KG=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],YG=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],XG={image:{type:"auto",decode:!0}},ZG={id:"image",module:"images",name:"Images",version:yG,mimeTypes:YG,extensions:KG,parse:HG,tests:[t=>!!rk(new DataView(t))],options:XG},He=new Yc({id:"deck"});let y0={};function QG(t){y0=t}function Qt(t,e,n,r){He.level>0&&y0[t]&&y0[t].call(null,e,n,r)}function JG(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const e9={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:JG,parseTextSync:JSON.parse};function t9(){const t="8.9.36",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(He.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:He,_registerLoggers:QG},H$([e9,[ZG,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const n9=t9(),Ge={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Ge,"IDENTITY",{get:()=>(He.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Er={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},_0={common:0,meters:1,pixels:2},oE={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},xe=new Yc({id:"luma.gl"});function Jt(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const r9="Invalid WebGLRenderingContext",s9="Requires WebGL2";function ph(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}function Be(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function i9(t){return Be(t)?t:null}function gh(t){return Jt(ph(t),r9),t}function Kt(t){return Jt(Be(t),s9),t}const rc={};function o9(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function a9(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function l9(t,e){rc[t]=!0,o9(e)}function c9(t){const e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(rc[r]=!0);while(r!==0);for(r in rc)if(rc[r])return delete rc[r],parseInt(r,10);return 0}}const Zc=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const s=new t.VertexAttrib(n);this.attribs[r]=s}this.maxAttrib=0};Zc.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};Zc.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const oo=function(e){const n=this;this.gl=e,c9(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(i){return i===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(i){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,i);const c=o.attribs[i];return c.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(i){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,i);const c=o.attribs[i];return c.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(i,o){switch(i){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o;break}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(i,o){const u=n.currentVertexArrayObject.attribs[i];switch(o){case 34975:return u.buffer;case 34338:return u.enabled;case 34339:return u.size;case 34340:return u.stride;case 34341:return u.type;case 34922:return u.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(i,o,c,u,d,h){const p=n.currentVertexArrayObject;p.maxAttrib=Math.max(p.maxAttrib,i);const m=p.attribs[i];return m.buffer=n.currentArrayBuffer,m.size=o,m.type=c,m.normalized=u,m.stride=d,m.offset=h,m.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{a9("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};oo.prototype.VERTEX_ARRAY_BINDING_OES=34229;oo.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;const n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new Zc(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};oo.prototype.createVertexArrayOES=function(){const e=new Zc(this);return this.vertexArrayObjects.push(e),e};oo.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};oo.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof Zc&&e.hasBeenBound&&e.ext===this)};oo.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive){l9(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const r=this.original,s=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const i=this.currentVertexArrayObject;if(s===i)return;(!s||i.elementArrayBuffer!==s.elementArrayBuffer)&&r.bindBuffer.call(n,34963,i.elementArrayBuffer);let o=this.currentArrayBuffer;const c=Math.max(s?s.maxAttrib:0,i.maxAttrib);for(let u=0;u<=c;u++){const d=i.attribs[u],h=s?s.attribs[u]:null;if((!s||d.enabled!==h.enabled)&&(d.enabled?r.enableVertexAttribArray.call(n,u):r.disableVertexAttribArray.call(n,u)),d.enabled){let p=!1;(!s||d.buffer!==h.buffer)&&(o!==d.buffer&&(r.bindBuffer.call(n,34962,d.buffer),o=d.buffer),p=!0),(p||d.cached!==h.cached)&&r.vertexAttribPointer.call(n,u,d.size,d.type,d.normalized,d.stride,d.offset)}}this.currentArrayBuffer!==o&&r.bindBuffer.call(n,34962,this.currentArrayBuffer)};function u9(t){if(typeof t.createVertexArray=="function")return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const s=e.call(this)||[];return s.indexOf("OES_vertex_array_object")<0&&s.push("OES_vertex_array_object"),s};const n=t.getExtension;t.getExtension=function(s){const i=n.call(this,s);return i||(s!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new oo(this)),this.__OESVertexArrayObject))}}const aE="OES_element_index",lE="WEBGL_draw_buffers",d9="EXT_disjoint_timer_query",f9="EXT_disjoint_timer_query_webgl2",h9="EXT_texture_filter_anisotropic",cE="WEBGL_debug_renderer_info",p9=35723,g9=4352,m9=36795,v9=34047,y9=37445,_9=37446,Xe=t=>Be(t)?void 0:0,w9={3074:t=>Be(t)?void 0:36064,[p9]:t=>Be(t)?void 0:g9,35977:Xe,32937:Xe,[m9]:(t,e)=>{const n=Be(t)?t.getExtension(f9):t.getExtension(d9);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[y9]:(t,e)=>{const n=t.getExtension(cE);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[_9]:(t,e)=>{const n=t.getExtension(cE);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[v9]:(t,e)=>{const n=t.luma.extensions[h9];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:Xe,35071:Xe,37447:Xe,36063:(t,e)=>{if(!Be(t)){const n=t.getExtension(lE);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:Xe,35374:Xe,35377:Xe,34852:t=>{if(!Be(t)){const e=t.getExtension(lE);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(aE)?2147483647:65535,33001:t=>t.getExtension(aE)?16777216:65535,33e3:t=>16777216,37157:Xe,35373:Xe,35657:Xe,36183:Xe,37137:Xe,34045:Xe,35978:Xe,35979:Xe,35968:Xe,35376:Xe,35375:Xe,35659:Xe,37154:Xe,35371:Xe,35658:Xe,35076:Xe,35077:Xe,35380:Xe};function b9(t,e,n){const r=w9[n],s=typeof r=="function"?r(t,e,n):r;return s!==void 0?s:e(n)}const x9="OES_vertex_array_object",sk="ANGLE_instanced_arrays",E9="WEBGL_draw_buffers",T9="EXT_disjoint_timer_query",S9="EXT_texture_filter_anisotropic",P9="VertexArray requires WebGL2 or OES_vertex_array_object extension";function A9(t,e){return{webgl2:Be(t),ext:t.getExtension(e)}}const ik={[x9]:{meta:{suffix:"OES"},createVertexArray:()=>{Jt(!1,P9)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[sk]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Jt(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[E9]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Jt(!1)}},[T9]:{meta:{suffix:"EXT"},createQuery:()=>{Jt(!1)},deleteQuery:()=>{Jt(!1)},beginQuery:()=>{Jt(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},qg={readBuffer:(t,e,n)=>{Be(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:s,ext:i}=A9(t,sk);let o;switch(r){case 35069:o=s?void 0:!1;break;case 35070:o=!s&&!i?0:void 0;break}return o!==void 0?o:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!Be(t))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,s)=>{if(!Be(t))switch(s){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,s)},getTexParameter(t,e,n,r){switch(r){case 34046:const{extensions:s}=t.luma,i=s[S9];r=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(n,r)},getParameter:b9,hint(t,e,n,r){return e(n,r)}};function C9(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(u9(t),R9(t),M9(t,ik),k9(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=C9;function R9(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}function k9(t,e){let{target:n,target2:r}=e;Object.keys(qg).forEach(s=>{if(typeof qg[s]=="function"){const i=t[s]?t[s].bind(t):()=>{},o=qg[s].bind(null,t,i);n[s]=o,r[s]=o}})}function M9(t,e){for(const n of Object.getOwnPropertyNames(e))n!=="overrides"&&I9(t,{extension:n,target:t.luma,target2:t})}function I9(t,e){let{extension:n,target:r,target2:s}=e;const i=ik[n];Jt(i);const{meta:o={}}=i,{suffix:c=""}=o,u=t.getExtension(n);for(const d of Object.keys(i)){const h="".concat(d).concat(c);let p=null;d==="meta"||typeof t[d]=="function"||(u&&typeof u[h]=="function"?p=function(){return u[h](...arguments)}:typeof i[d]=="function"&&(p=i[d].bind(r))),p&&(r[d]=p,s[d]=p)}}const _y={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Us=(t,e,n)=>e?t.enable(n):t.disable(n),uE=(t,e,n)=>t.hint(n,e),wn=(t,e,n)=>t.pixelStorei(n,e),O9=(t,e)=>{const n=Be(t)?36009:36160;return t.bindFramebuffer(n,e)},L9=(t,e)=>t.bindFramebuffer(36008,e);function Hl(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const N9={3042:Us,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Us,2885:(t,e)=>t.cullFace(e),2929:Us,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Us,35723:uE,36006:O9,2886:(t,e)=>t.frontFace(e),33170:uE,2849:(t,e)=>t.lineWidth(e),32823:Us,32824:"polygonOffset",10752:"polygonOffset",35977:Us,32938:"sampleCoverage",32939:"sampleCoverage",3089:Us,3088:(t,e)=>t.scissor(...e),2960:Us,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:wn,3317:wn,37440:wn,37441:wn,37443:wn,3330:wn,3332:wn,3331:wn,36010:L9,3314:wn,32878:wn,3316:wn,3315:wn,32877:wn,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=Hl(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=Hl(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=Hl(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=Hl(e)&&e.length===3?[...e,...e]:e;const[n,r,s,i,o,c]=e;t.stencilFuncSeparate(1028,n,r,s),t.stencilFuncSeparate(1029,i,o,c)},stencilOp:(t,e)=>{e=Hl(e)&&e.length===3?[...e,...e]:e;const[n,r,s,i,o,c]=e;t.stencilOpSeparate(1028,n,r,s),t.stencilOpSeparate(1029,i,o,c)},viewport:(t,e)=>t.viewport(...e)};function dt(t,e,n){return e[t]!==void 0?e[t]:n[t]}const j9={blendEquation:(t,e,n)=>t.blendEquationSeparate(dt(32777,e,n),dt(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(dt(32969,e,n),dt(32968,e,n),dt(32971,e,n),dt(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(dt(32824,e,n),dt(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(dt(32938,e,n),dt(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,dt(2962,e,n),dt(2967,e,n),dt(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,dt(34816,e,n),dt(36003,e,n),dt(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,dt(2964,e,n),dt(2965,e,n),dt(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,dt(34817,e,n),dt(34818,e,n),dt(34819,e,n))},dE={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,s)=>t({32773:new Float32Array([e,n,r,s])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,s)=>t({32969:e,32968:n,32971:r,32970:s}),clearColor:(t,e,n,r,s)=>t({3106:new Float32Array([e,n,r,s])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,s)=>t({3107:[e,n,r,s]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,s)=>t({3088:new Int32Array([e,n,r,s])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,s)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:s}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,s)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:s}),viewport:(t,e,n,r,s)=>t({2978:[e,n,r,s]})},vr=(t,e)=>t.isEnabled(e),fE={3042:vr,2884:vr,2929:vr,3024:vr,32823:vr,32926:vr,32928:vr,3089:vr,2960:vr,35977:vr};function ok(t){for(const e in t)return!1;return!0}function D9(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let s=0;s<t.length;++s)if(t[s]!==e[s])return!1;return!0}return!1}function hE(t,e){const n=t[e].bind(t);t[e]=function(){const s=arguments.length<=0?void 0:arguments[0];return s in t.state.cache?t.state.enable?t.state.cache[s]:n(...arguments):n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function F9(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];const{valueChanged:u,oldValue:d}=n(t.state._updateCache,...o);return u&&r(...o),d},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function B9(t){const e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}class U9{constructor(e){let{copyState:n=!1,log:r=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?z9(e):Object.assign({},_y),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Jt(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];is(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r;const s=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const i in e){Jt(i!==void 0);const o=e[i],c=this.cache[i];D9(o,c)||(n=!0,r=c,s&&!(i in s)&&(s[i]=c),this.cache[i]=o)}return{valueChanged:n,oldValue:r}}}function ak(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(Jt(r!==void 0),!t.state){const{polyfillContext:s}=globalThis;s&&s(t),t.state=new U9(t,{copyState:r}),B9(t);for(const i in dE){const o=dE[i];F9(t,i,o)}hE(t,"getParameter"),hE(t,"isEnabled")}return t.state.enable=n,t}function V9(t){t.state||ak(t,{copyState:!1}),t.state.push()}function pE(t){Jt(t.state),t.state.pop()}function is(t,e){if(Jt(ph(t),"setParameters requires a WebGL context"),ok(e))return;const n={};for(const s in e){const i=Number(s),o=N9[s];o&&(typeof o=="string"?n[o]=!0:o(t,e[s],i))}const r=t.state&&t.state.cache;if(r)for(const s in n){const i=j9[s];i(t,e,r)}}function z9(t,e){if(e=e||_y,typeof e=="number"){const s=e,i=fE[s];return i?i(t,s):t.getParameter(s)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const s of n){const i=fE[s];r[s]=i?i(t,Number(s)):t.getParameter(Number(s))}return r}function $9(t){is(t,_y)}function rr(t,e,n){if(ok(e))return n(t);const{nocatch:r=!0}=e;V9(t),is(t,e);let s;if(r)s=n(t),pE(t);else try{s=n(t)}finally{pE(t)}return s}function Ra(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return r?t.drawingBufferWidth/r:1}return 1}function Kg(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=Ra(t),s=t.drawingBufferWidth,i=t.drawingBufferHeight;return W9(e,r,s,i,n)}function G9(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function W9(t,e,n,r,s){const i=gE(t[0],e,n);let o=mE(t[1],e,r,s),c=gE(t[0]+1,e,n);const u=c===n-1?c:c-1;c=mE(t[1]+1,e,r,s);let d;return s?(c=c===0?c:c+1,d=o,o=c):d=c===r-1?c:c-1,{x:i,y:o,width:Math.max(u-i+1,1),height:Math.max(d-o+1,1)}}function gE(t,e,n){return Math.min(Math.round(t*e),n-1)}function mE(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const wy=cs(),H9=wy&&typeof document<"u",lk={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function ck(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Jt(wy,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},lk,t);const{width:e,height:n}=t;function r(c){if(t.throwOnError)throw new Error(c);return console.error(c),null}t.onError=r;let s;const{canvas:i}=t,o=X9({canvas:i,width:e,height:n,onError:r});return s=Y9(o,t),s?(s=by(s,t),Z9(s),s):null}function by(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||Q9(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},lk,e);const{manageState:n,debug:r}=e;return n&&ak(t,{copyState:!1,log:function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return xe.log(1,...i)()}}),wy&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),xe.level=Math.max(xe.level,1)):xe.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function q9(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),s=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),i=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:s||e,renderer:i||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function K9(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){const r=G9(e.useDevicePixels);J9(t,r,e);return}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function Y9(t,e){const{onError:n}=e;let r=null;const s=u=>r=u.statusMessage||r;t.addEventListener("webglcontextcreationerror",s,!1);const{webgl1:i=!0,webgl2:o=!0}=e;let c=null;return o&&(c=c||t.getContext("webgl2",e),c=c||t.getContext("experimental-webgl2",e)),i&&(c=c||t.getContext("webgl",e),c=c||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",s,!1),c?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),c):n("Failed to create ".concat(o&&!i?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function X9(t){let{canvas:e,width:n=800,height:r=600,onError:s}=t,i;return typeof e=="string"?(H9&&document.readyState==="complete"||s("createGLContext called on canvas '".concat(e,"' before page was loaded")),i=document.getElementById(e)):e?i=e:(i=document.createElement("canvas"),i.id="lumagl-canvas",i.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",i.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(i,document.body.firstChild)),i}function Z9(t){const e=Be(t)?"WebGL2":"WebGL1",n=q9(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",s=t.debug?" debug":"";xe.info(1,"".concat(e).concat(s," context ").concat(r))()}function Q9(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function J9(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,s="height"in n?n.height:t.canvas.clientHeight;(!r||!s)&&(xe.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,s=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const i=t.luma.canvasSizeInfo;if(i.clientWidth!==r||i.clientHeight!==s||i.devicePixelRatio!==e){let o=e;const c=Math.floor(r*o),u=Math.floor(s*o);t.canvas.width=c,t.canvas.height=u,(t.drawingBufferWidth!==c||t.drawingBufferHeight!==u)&&(xe.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/s),t.canvas.width=Math.floor(r*o),t.canvas.height=Math.floor(s*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:s,devicePixelRatio:e})}}const mc="8.5.21",eW="set luma.log.level=1 (or higher) to trace rendering";class tW{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new fy({id:e})),this.stats.get(e)}}const Ui=new tW;if(globalThis.luma&&globalThis.luma.VERSION!==mc)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(mc));globalThis.luma||(cs()&&xe.log(1,"luma.gl ".concat(mc," - ").concat(eW))(),globalThis.luma=globalThis.luma||{VERSION:mc,version:mc,log:xe,stats:Ui,globals:{modules:{},nodeIO:{}}});function nW(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function rW(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function de(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function Yg(t,e){if(typeof e!="string")return e;const n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");const r=t[e];return de(r!==void 0,"Accessing undefined constant GL.".concat(e)),r}function ei(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const Xg={};function ii(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";Xg[t]=Xg[t]||1;const e=Xg[t]++;return"".concat(t,"-").concat(e)}function vE(t){return de(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function ka(t){let e=!0;for(const n in t){e=!1;break}return e}function uk(t,e,n,r){const s="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),i=Object.getPrototypeOf(t);r.forEach(o=>{i.methodName||(i[o]=()=>{throw xe.removed("Calling removed method ".concat(e,".").concat(o,": "),s)(),new Error(o)})})}const ea="Resource subclass must define virtual methods";let us=class{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gh(e);const{id:r,userData:s={}}=n;this.gl=e,this.gl2=e,this.id=r||ii(this[Symbol.toStringTag]),this.userData=s,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(r=>r.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=Yg(this.gl,e),de(e);const s=(this.constructor.PARAMETERS||{})[e];if(s){const i=Be(this.gl);if(!((!("webgl2"in s)||i)&&(!("extension"in s)||this.gl.getExtension(s.extension)))){const c=s.webgl1,u="webgl2"in s?s.webgl2:s.webgl1;return i?u:c}}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:n,keys:r}=e,s=this.constructor.PARAMETERS||{},i=Be(this.gl),o={},c=n||Object.keys(s);for(const u of c){const d=s[u];if(d&&(!("webgl2"in d)||i)&&(!("extension"in d)||this.gl.getExtension(d.extension))){const p=r?ei(this.gl,u):u;o[p]=this.getParameter(u,e),r&&d.type==="GLenum"&&(o[p]=ei(this.gl,o[p]))}}return o}setParameter(e,n){e=Yg(this.gl,e),de(e);const s=(this.constructor.PARAMETERS||{})[e];if(s){const i=Be(this.gl);if(!((!("webgl2"in s)||i)&&(!("extension"in s)||this.gl.getExtension(s.extension))))throw new Error("Parameter not available on this platform");s.type==="GLenum"&&(n=Yg(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,r){return uk(this,e,n,r)}initialize(e){}_createHandle(){throw new Error(ea)}_deleteHandle(){throw new Error(ea)}_bindHandle(e){throw new Error(ea)}_getOptsFromHandle(){throw new Error(ea)}_getParameter(e,n){throw new Error(ea)}_setParameter(e,n){throw new Error(ea)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=Ui.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];Ui.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const s=Ui.get("Memory Usage".concat(r));s.get("GPU Memory").addCount(e),s.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=Ui.get("Memory Usage".concat(n));r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(e," Memory")).subtractCount(this.byteLength)}};const sW="Failed to deduce GL constant from typed array";function w0(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(sW)}}function Ic(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function iW(t){let{data:e,width:n,height:r,bytesPerPixel:s=4,temp:i}=t;const o=n*s;i=i||new Uint8Array(o);for(let c=0;c<r/2;++c){const u=c*o,d=(r-c-1)*o;i.set(e.subarray(u,u+o)),e.copyWithin(u,d,d+o),e.set(i,d)}}function oW(t){let{data:e,width:n,height:r}=t;const s=Math.round(n/2),i=Math.round(r/2),o=new Uint8Array(s*i*4);for(let c=0;c<i;c++)for(let u=0;u<s;u++)for(let d=0;d<4;d++)o[(c*s+u)*4+d]=e[(c*2*n+u*2)*4+d];return{data:o,width:s,height:i}}function b0(t,e,n){const{removedProps:r={},deprecatedProps:s={},replacedProps:i={}}=n;for(const c in r)if(c in e){const d=r[c]?"".concat(t,".").concat(r[c]):"N/A";xe.removed("".concat(t,".").concat(c),d)()}for(const c in s)if(c in e){const u=s[c];xe.deprecated("".concat(t,".").concat(c),"".concat(t,".").concat(u))()}let o=null;for(const c in i)if(c in e){const u=i[c];xe.deprecated("".concat(t,".").concat(c),"".concat(t,".").concat(u))(),o=o||Object.assign({},e),o[u]=e[c],delete o[c]}return o||e}const aW={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},lW={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class An{static getBytesPerElement(e){return Ic(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return de(e.size),Ic(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new An(aW,...n)}constructor(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(s=>this._assign(s)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return An.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return An.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=b0("Accessor",e,lW),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const yE=10,dk={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},cW={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:dk},uW={removedProps:dk};let qe=class extends us{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/An.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/An.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=b0("Buffer",e,cW),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=b0("Buffer",e,uW),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new An(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:r=0,srcOffset:s=0}=e,i=e.byteLength||e.length;de(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),s!==0||i!==void 0?(Kt(this.gl),this.gl.bufferSubData(this.target,r,n,s,i)):this.gl.bufferSubData(o,r,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:r=0,writeOffset:s=0,size:i}=e;const{gl:o}=this;return Kt(o),o.bindBuffer(36662,n.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,r,s,i),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:r=0,length:s=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Kt(this.gl);const i=Ic(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),c=r;let u,d;e?(d=e.length,u=d-c):(u=Math.min(o,s||o),d=c+u);const h=Math.min(o,u);return s=s||h,de(s<=h),e=e||new i(d),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,r,s),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:r=0,size:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?s!==void 0?this.gl.bindBufferRange(e,n,this.handle,r,s):(de(r===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(yE,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+n;de(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const s=this._getTarget();this.gl.bindBuffer(s,this.handle),this.gl.bufferData(s,r,this.usage),this.gl.bufferSubData(s,n,e),this.gl.bindBuffer(s,null),this.debugData=e.slice(0,yE),this.bytesUsed=r,this._trackAllocatedMemory(r);const i=w0(e);return de(i),this.setAccessor(new An(this.accessor,{type:i})),this}_setByteLength(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;de(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));const s=this._getTarget();return this.gl.bindBuffer(s,this.handle),this.gl.bufferData(s,r,n),this.gl.bindBuffer(s,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const n=Ic(this.accessor.type||5126,{clamped:!1}),r=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new An(this.accessor,{type:w0(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return xe.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return xe.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return xe.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return xe.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new An(this.accessor,e),this}};const xy={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},fk={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},hk={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function dW(t,e){const n=xy[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;const r=Be(t)&&n.gl2||n.gl1;return typeof r=="string"?t.getExtension(r):r}function fW(t,e){const n=xy[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}const hW=[9729,9728],_E=globalThis.WebGLBuffer||function(){};class Xi extends us{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:r,linearFiltering:s}=n;let i=!0;return r&&(i=i&&dW(e,r),i=i&&(!s||fW(e,r))),i}constructor(e,n){const{id:r=ii("texture"),handle:s,target:i}=n;super(e,{id:r,handle:s}),this.target=i,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(S=>this.initialize(Object.assign({},e,{pixels:S,data:S}))),this;const r=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:s=null,format:i=6408,border:o=0,recreate:c=!1,parameters:u={},pixelStore:d={},textureUnit:h=void 0}=e;n||(n=s);let{width:p,height:m,dataFormat:y,type:E,compressed:b=!1,mipmaps:T=!0}=e;const{depth:P=0}=e;return{width:p,height:m,compressed:b,dataFormat:y,type:E}=this._deduceParameters({format:i,type:E,dataFormat:y,compressed:b,data:n,width:p,height:m}),this.width=p,this.height=m,this.depth=P,this.format=i,this.type=E,this.dataFormat=y,this.border=o,this.textureUnit=h,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),T&&this._isNPOT()&&(xe.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),T=!1,this._updateForNPOT(u)),this.mipmaps=T,this.setImageData({data:n,width:p,height:m,depth:P,format:i,type:E,dataFormat:y,border:o,mipmaps:T,parameters:d,compressed:b}),T&&this.generateMipmap(),this.setParameters(u),c&&(this.data=n),r&&(this._video={video:n,parameters:u,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:r,mipmaps:s=!1}=e;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:s}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(xe.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),rr(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:r=null,level:s=0,format:i=this.format,border:o=this.border,offset:c=0,parameters:u={}}=e;let{data:d=null,type:h=this.type,width:p=this.width,height:m=this.height,dataFormat:y=this.dataFormat,compressed:E=!1}=e;d||(d=r),{type:h,dataFormat:y,compressed:E,width:p,height:m}=this._deduceParameters({format:i,type:h,dataFormat:y,compressed:E,data:d,width:p,height:m});const{gl:b}=this;b.bindTexture(this.target,this.handle);let T=null;({data:d,dataType:T}=this._getDataType({data:d,compressed:E}));let P,S=0;if(rr(this.gl,u,()=>{switch(T){case"null":b.texImage2D(n,s,i,p,m,o,y,h,d);break;case"typed-array":b.texImage2D(n,s,i,p,m,o,y,h,d,c);break;case"buffer":P=Kt(b),P.bindBuffer(35052,d.handle||d),P.texImage2D(n,s,i,p,m,o,y,h,c),P.bindBuffer(35052,null);break;case"browser-object":Be(b)?b.texImage2D(n,s,i,p,m,o,y,h,d):b.texImage2D(n,s,i,y,h,d);break;case"compressed":for(const[C,I]of d.entries())b.compressedTexImage2D(n,C,I.format,I.width,I.height,o,I.data),S+=I.levelSize;break;default:de(!1,"Unknown image data type")}}),T==="compressed")this._trackAllocatedMemory(S,"Texture");else if(d&&d.byteLength)this._trackAllocatedMemory(d.byteLength,"Texture");else{const C=fk[this.dataFormat]||4,I=hk[this.type]||1;this._trackAllocatedMemory(this.width*this.height*C*I,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:r=null,data:s=null,x:i=0,y:o=0,width:c=this.width,height:u=this.height,level:d=0,format:h=this.format,type:p=this.type,dataFormat:m=this.dataFormat,compressed:y=!1,offset:E=0,border:b=this.border,parameters:T={}}=e;if({type:p,dataFormat:m,compressed:y,width:c,height:u}=this._deduceParameters({format:h,type:p,dataFormat:m,compressed:y,data:s,width:c,height:u}),de(this.depth===0,"texSubImage not supported for 3D textures"),s||(s=r),s&&s.data){const P=s;s=P.data,c=P.shape[0],u=P.shape[1]}s instanceof qe&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),rr(this.gl,T,()=>{if(y)this.gl.compressedTexSubImage2D(n,d,i,o,c,u,h,s);else if(s===null)this.gl.texSubImage2D(n,d,i,o,c,u,m,p,null);else if(ArrayBuffer.isView(s))this.gl.texSubImage2D(n,d,i,o,c,u,m,p,s,E);else if(s instanceof _E){const P=Kt(this.gl);P.bindBuffer(35052,s),P.texSubImage2D(n,d,i,o,c,u,m,p,E),P.bindBuffer(35052,null)}else Be(this.gl)?Kt(this.gl).texSubImage2D(n,d,i,o,c,u,m,p,s):this.gl.texSubImage2D(n,d,i,o,m,p,s)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return xe.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:r=!1}=e;return r?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof qe?{data:n.handle,dataType:"buffer"}:n instanceof _E?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:r}=e;let{width:s,height:i,dataFormat:o,type:c,compressed:u}=e;const d=xy[n];return o=o||d&&d.dataFormat,c=c||d&&d.types[0],u=u||d&&d.compressed,{width:s,height:i}=this._deduceImageSize(r,s,i),{dataFormat:o,type:c,compressed:u,width:s,height:i,format:n,data:r}}_deduceImageSize(e,n,r){let s;return typeof ImageData<"u"&&e instanceof ImageData?s={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?s={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?s={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?s={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?s={width:e.videoWidth,height:e.videoHeight}:e?s={width:n,height:r}:s={width:n>=0?n:1,height:r>=0?r:1},de(s,"Could not deduced texture size"),de(n===void 0||s.width===n,"Deduced texture width does not match supplied width"),de(r===void 0||s.height===r,"Deduced texture height does not match supplied height"),s}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:de(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return Be(this.gl)||!this.width||!this.height?!1:!vE(this.width)||!vE(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:hW.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break}return n}}let pW="";function gW(t,e){return de(typeof t=="string"),t=pW+t,new Promise((n,r)=>{try{const s=new Image;s.onload=()=>n(s),s.onerror=()=>r(new Error("Could not load image ".concat(t,"."))),s.crossOrigin=e&&e.crossOrigin||"anonymous",s.src=t}catch(s){r(s)}})}class In extends Xi{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return Xi.isSupported(e,n)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gh(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:gW(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const x0=[34069,34070,34071,34072,34073,34074];class pk extends Xi{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gh(e),super(e,Object.assign({},n,{target:34067})),this.initialize(n),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:n=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(r)}),this}subImage(e){let{face:n,data:r,x:s=0,y:i=0,mipmapLevel:o=0}=e;return this._subImage({target:n,data:r,x:s,y:i,mipmapLevel:o})}async setCubeMapImageData(e){let{width:n,height:r,pixels:s,data:i,border:o=0,format:c=6408,type:u=5121}=e;const{gl:d}=this,h=s||i,p=await Promise.all(x0.map(m=>{const y=h[m];return Promise.all(Array.isArray(y)?y:[y])}));this.bind(),x0.forEach((m,y)=>{p[y].length>1&&this.opts.mipmaps!==!1&&xe.warn("".concat(this.id," has mipmap and multiple LODs."))(),p[y].forEach((E,b)=>{n&&r?d.texImage2D(m,b,c,n,r,o,c,u,E):d.texImage2D(m,b,c,c,u,E)})}),this.unbind()}setImageDataForFace(e){const{face:n,width:r,height:s,pixels:i,data:o,border:c=0,format:u=6408,type:d=5121}=e,{gl:h}=this,p=i||o;return this.bind(),p instanceof Promise?p.then(m=>this.setImageDataForFace(Object.assign({},e,{face:n,data:m,pixels:m}))):this.width||this.height?h.texImage2D(n,0,u,r,s,c,u,d,p):h.texImage2D(n,0,u,u,d,p),this}}pk.FACES=x0;class mW extends Xi{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return Be(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Kt(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:r=6408,width:s,height:i,depth:o=1,border:c=0,format:u,type:d=5121,offset:h=0,data:p,parameters:m={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),rr(this.gl,m,()=>{ArrayBuffer.isView(p)&&this.gl.texImage3D(this.target,n,r,s,i,o,c,u,d,p),p instanceof qe&&(this.gl.bindBuffer(35052,p.handle),this.gl.texImage3D(this.target,n,r,s,i,o,c,u,d,h))}),p&&p.byteLength)this._trackAllocatedMemory(p.byteLength,"Texture");else{const y=fk[this.dataFormat]||4,E=hk[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*y*E,"Texture")}return this.loaded=!0,this}}const Mi="EXT_color_buffer_float",wE={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Mi,bpp:2},33327:{gl2:Mi,bpp:4},34842:{gl2:Mi,bpp:8},33326:{gl2:Mi,bpp:4},33328:{gl2:Mi,bpp:8},34836:{gl2:Mi,bpp:16},35898:{gl2:Mi,bpp:4}};function vW(t,e,n){const r=n[e];if(!r)return!1;const s=Be(t)&&r.gl2||r.gl1;return typeof s=="string"?t.getExtension(s):s}class ha extends us{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!n||vW(e,n,wE)}static getSamplesForFormat(e,n){let{format:r}=n;return e.getInternalformatParameter(36161,r,32937)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:r=1,height:s=1,samples:i=0}=e;return de(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),i!==0&&Be(this.gl)?this.gl.renderbufferStorageMultisample(36161,i,n,r,s):this.gl.renderbufferStorage(36161,n,r,s),this.format=n,this.width=r,this.height=s,this.samples=i,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*wE[this.format].bpp),this}resize(e){let{width:n,height:r}=e;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const yW=256,_W=1024,wW=16384,bE=6144,xE=6145,EE=6146,TE=34041,gk="clear: bad arguments";function Ey(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:s=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};e&&(i.framebuffer=e);let o=0;n&&(o|=wW,n!==!0&&(i.clearColor=n)),r&&(o|=yW,r!==!0&&(i.clearDepth=r)),s&&(o|=_W,r!==!0&&(i.clearStencil=r)),de(o!==0,gk),rr(t,i,()=>{t.clear(o)})}function bW(t){let{framebuffer:e=null,buffer:n=bE,drawBuffer:r=0,value:s=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Kt(t),rr(t,{framebuffer:e},()=>{switch(n){case bE:switch(s.constructor){case Int32Array:t.clearBufferiv(n,r,s);break;case Uint32Array:t.clearBufferuiv(n,r,s);break;case Float32Array:default:t.clearBufferfv(n,r,s)}break;case xE:t.clearBufferfv(xE,0,[s]);break;case EE:t.clearBufferiv(EE,0,[s]);break;case TE:const[i,o]=s;t.clearBufferfi(TE,0,i,o);break;default:de(!1,gk)}})}function xW(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return de(!1),0}}function mh(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:s=6408}=e;let{sourceAttachment:i=36064,target:o=null,sourceWidth:c,sourceHeight:u,sourceType:d}=e;const{framebuffer:h,deleteFramebuffer:p}=mk(t);de(h);const{gl:m,handle:y,attachments:E}=h;c=c||h.width,u=u||h.height,i===36064&&y===null&&(i=1028),de(E[i]),d=d||E[i].type,o=TW(o,d,s,c,u),d=d||w0(o);const b=m.bindFramebuffer(36160,y);return m.readPixels(n,r,c,u,s,d,o),m.bindFramebuffer(36160,b||null),p&&h.delete(),o}function SE(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=mh(t,{sourceAttachment:e}),{width:s,height:i}=t;for(;i>n;)({data:r,width:s,height:i}=oW({data:r,width:s,height:i}));iW({data:r,width:s,height:i});const o=document.createElement("canvas");o.width=s,o.height=i;const c=o.getContext("2d"),u=c.createImageData(s,i);return u.data.set(r),c.putImageData(u,0,0),o.toDataURL()}function EW(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:r=0,sourceY:s=0,targetMipmaplevel:i=0,targetInternalFormat:o=6408}=n;let{targetX:c,targetY:u,targetZ:d,width:h,height:p}=n;const{framebuffer:m,deleteFramebuffer:y}=mk(t);de(m);const{gl:E,handle:b}=m,T=typeof c<"u"||typeof u<"u"||typeof d<"u";c=c||0,u=u||0,d=d||0;const P=E.bindFramebuffer(36160,b);de(e);let S=null;if(e instanceof Xi&&(S=e,h=Number.isFinite(h)?h:S.width,p=Number.isFinite(p)?p:S.height,S.bind(0),e=S.target),!T)E.copyTexImage2D(e,i,o,r,s,h,p,0);else switch(e){case 3553:case 34067:E.copyTexSubImage2D(e,i,c,u,r,s,h,p);break;case 35866:case 32879:Kt(E).copyTexSubImage3D(e,i,c,u,d,r,s,h,p);break}return S&&S.unbind(),E.bindFramebuffer(36160,P||null),y&&m.delete(),S}function mk(t){return t instanceof At?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:LW(t),deleteFramebuffer:!0}}function TW(t,e,n,r,s){if(t)return t;e=e||5121;const i=Ic(e,{clamped:!1}),o=xW(n);return new i(r*s*o)}const ot={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function SW(t){const e=new In(t,{format:6408,type:5126,dataFormat:6408}),n=new At(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=n.getStatus();return e.delete(),n.delete(),r===36053}const vk={[ot.WEBGL2]:[!1,!0],[ot.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[ot.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[ot.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[ot.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[ot.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[ot.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[ot.FLOAT_BLEND]:["EXT_float_blend"],[ot.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[ot.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[ot.TEXTURE_FLOAT]:["OES_texture_float",!0],[ot.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[ot.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[ot.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[ot.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[ot.COLOR_ATTACHMENT_RGBA32F]:[SW,"EXT_color_buffer_float"],[ot.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[ot.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[ot.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[ot.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[ot.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[ot.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},PW=2;function AW(t,e){return yk(t,e)}function yk(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>_k(t,n))}function CW(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in vk)t.luma.caps[e]===void 0&&(t.luma.caps[e]=_k(t,e));return t.luma.caps}function _k(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=RW(t,e)),t.luma.caps[e]||xe.log(PW,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function RW(t,e){const n=vk[e];de(n,e);let r;const s=Be(t)&&n[1]||n[0];if(typeof s=="function")r=s(t);else if(Array.isArray(s)){r=!0;for(const i of s)r=r&&!!t.getExtension(i)}else typeof s=="string"?r=!!t.getExtension(s):typeof s=="boolean"?r=s:de(!1);return r}const PE="Multiple render targets not supported";class At extends us{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:r,colorBufferHalfFloat:s}=n;let i=!0;return r&&(i=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),s&&(i=i&&!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),i}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new At(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Kt(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Kt(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:r=1,attachments:s=null,color:i=!0,depth:o=!0,stencil:c=!1,check:u=!0,readBuffer:d=void 0,drawBuffers:h=void 0}=e;if(de(n>=0&&r>=0,"Width and height need to be integers"),this.width=n,this.height=r,s)for(const p in s){const m=s[p];(Array.isArray(m)?m[0]:m).resize({width:n,height:r})}else s=this._createDefaultAttachments(i,o,c,n,r);this.update({clearAttachments:!0,attachments:s,readBuffer:d,drawBuffers:h}),s&&u&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:r,drawBuffers:s,clearAttachments:i=!1,resizeAttachments:o=!0}=e;this.attach(n,{clearAttachments:i,resizeAttachments:o});const{gl:c}=this,u=c.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),s&&this._setDrawBuffers(s),c.bindFramebuffer(36160,u||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:n,height:r}=e;if(this.handle===null)return de(n===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),n!==this.width&&r!==this.height&&xe.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(r))();for(const s in this.attachments)this.attachments[s].resize({width:n,height:r});return this.width=n,this.height=r,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s={};n&&Object.keys(this.attachments).forEach(o=>{s[o]=null}),Object.assign(s,e);const i=this.gl.bindFramebuffer(36160,this.handle);for(const o in s){de(o!==void 0,"Misspelled framebuffer binding point?");const c=Number(o),u=s[c];let d=u;if(!d)this._unattach(c);else if(d instanceof ha)this._attachRenderbuffer({attachment:c,renderbuffer:d});else if(Array.isArray(u)){const[h,p=0,m=0]=u;d=h,this._attachTexture({attachment:c,texture:h,layer:p,level:m})}else this._attachTexture({attachment:c,texture:d,layer:0,level:0});r&&d&&d.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,i||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const{gl:e}=this,n=this.getStatus();if(n!==36053)throw new Error(MW(n));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),r}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:n,depth:r,stencil:s,drawBuffers:i=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||r||s)&&Ey(this.gl,{color:n,depth:r,stencil:s}),i.forEach((c,u)=>{bW(this.gl,{drawBuffer:u,value:c})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return xe.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return xe.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return xe.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return xe.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return xe.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return xe.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:r=0,y:s=0,width:i,height:o}=e;const c=Kt(this.gl),u=c.bindFramebuffer(36008,this.handle);return r===0&&s===0&&i===void 0&&o===void 0?c.invalidateFramebuffer(36008,n):c.invalidateFramebuffer(36008,n,r,s,i,o),c.bindFramebuffer(36008,u),this}getAttachmentParameter(e,n,r){let s=this._getAttachmentParameterFallback(n);return s===null&&(this.gl.bindFramebuffer(36160,this.handle),s=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),r&&s>1e3&&(s=ei(this.gl,s)),s}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const s={};for(const i of r){const o=n?ei(this.gl,i):i;s[o]=this.getAttachmentParameter(e,i,n)}return s}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=Object.keys(this.attachments),r={};for(const s of n){const i=Number(s),o=e?ei(this.gl,i):i;r[o]=this.getAttachmentParameters(i,e)}return r}show(){return typeof window<"u"&&window.open(SE(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>xe.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const r=SE(this,{targetMaxHeight:100});return xe.image({logLevel:e,message:n,image:r},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,r,s,i){let o=null;return e&&(o=o||{},o[36064]=new In(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:s,height:i,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),n&&r?(o=o||{},o[33306]=new ha(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:s,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new ha(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:s,height:i}),this.ownResources.push(o[36096])):r&&de(!1),o}_unattach(e){const n=this.attachments[e];n&&(n instanceof ha?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:r}=e;const{gl:s}=this;s.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}_attachTexture(e){let{attachment:n=36064,texture:r,layer:s,level:i}=e;const{gl:o}=this;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:Kt(o).framebufferTextureLayer(36160,n,r.target,i,s);break;case 34067:const u=kW(s);o.framebufferTexture2D(36160,n,u,r.handle,i);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,i);break;default:de(!1,"Illegal texture type")}o.bindTexture(r.target,null),this.attachments[n]=r}_setReadBuffer(e){const n=i9(this.gl);n?n.readBuffer(e):de(e===36064||e===1029,PE),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,r=Kt(n);if(r)r.drawBuffers(e);else{const s=n.getExtension("WEBGL_draw_buffers");s?s.drawBuffersWEBGL(e):de(e.length===1&&(e[0]===36064||e[0]===1029),PE)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=CW(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function kW(t){return t<34069?t+34069:t}function MW(t){return(At.STATUS||{})[t]||"Framebuffer error ".concat(t)}const IW=[36049,36048,33296,33298,33299,33300,33301,33302,33303];At.ATTACHMENT_PARAMETERS=IW;function OW(t,e){de(t instanceof In||t instanceof pk||t instanceof mW);const n=t.constructor,{gl:r,width:s,height:i,format:o,type:c,dataFormat:u,border:d,mipmaps:h}=t,p=Object.assign({width:s,height:i,format:o,type:c,dataFormat:u,border:d,mipmaps:h},e);return new n(r,p)}function LW(t,e){const{gl:n,width:r,height:s,id:i}=t;return new At(n,Object.assign({},e,{id:"framebuffer-for-".concat(i),width:r,height:s,attachments:{36064:t}}))}function Jd(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}const NW=35632,jW=35633;function DW(t){switch(t){case NW:return"fragment";case jW:return"vertex";default:return"unknown type"}}function FW(t,e,n,r){const s=t.split(/\r?\n/),i={},o={},c=r||Jd(e)||"(unnamed)",u="".concat(DW(n)," shader ").concat(c);for(let h=0;h<s.length;h++){const p=s[h];if(p.length<=1)continue;const m=p.split(":"),y=m[0],E=parseInt(m[2],10);if(isNaN(E))throw new Error("GLSL compilation error in ".concat(u,": ").concat(t));y!=="WARNING"?i[E]=p:o[E]=p}const d=BW(e);return{shaderName:u,errors:AE(i,d),warnings:AE(o,d)}}function AE(t,e){let n="";for(let r=0;r<e.length;r++){const s=e[r];if(!(!t[r+3]&&!t[r+2]&&!t[r+1])&&(n+="".concat(s,`
`),t[r+1])){const i=t[r+1],o=i.split(":",3),c=o[0],u=parseInt(o[1],10)||0,d=i.substring(o.join(":").length+1).trim();n+=wk("^^^ ".concat(c,": ").concat(d,`

`),u)}}return n}function BW(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const r=t.split(/\r?\n/),s=String(r.length+e-1).length;return r.map((i,o)=>{const c=String(o+e),u=c.length;return wk(c,s-u)+n+i})}function wk(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}function bk(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}const UW="Shader: GLSL source code must be a JavaScript string";class Oc extends us{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return de(!1),"unknown"}}constructor(e,n){gh(e),de(typeof n.source=="string",UW);const r=Jd(n.source,null)||n.id||ii("unnamed ".concat(Oc.getTypeName(n.shaderType)));super(e,{id:r}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const r=Jd(n,null);r&&(this.id=ii(r)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(Oc.getTypeName(this.shaderType),":").concat(this.id)}getName(){return Jd(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:s,errors:i,warnings:o}=FW(r,this.source,this.shaderType,this.id);throw xe.error("GLSL compilation errors in ".concat(s,`
`).concat(i))(),xe.warn("GLSL compilation warnings in ".concat(s,`
`).concat(o))(),new Error("GLSL compilation errors in ".concat(s))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class Zg extends Oc{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class Qg extends Oc{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const VW={5126:nt.bind(null,"uniform1fv",bn,1,Ht),35664:nt.bind(null,"uniform2fv",bn,2,Ht),35665:nt.bind(null,"uniform3fv",bn,3,Ht),35666:nt.bind(null,"uniform4fv",bn,4,Ht),5124:nt.bind(null,"uniform1iv",Vs,1,Ht),35667:nt.bind(null,"uniform2iv",Vs,2,Ht),35668:nt.bind(null,"uniform3iv",Vs,3,Ht),35669:nt.bind(null,"uniform4iv",Vs,4,Ht),35670:nt.bind(null,"uniform1iv",Vs,1,Ht),35671:nt.bind(null,"uniform2iv",Vs,2,Ht),35672:nt.bind(null,"uniform3iv",Vs,3,Ht),35673:nt.bind(null,"uniform4iv",Vs,4,Ht),35674:nt.bind(null,"uniformMatrix2fv",bn,4,Kr),35675:nt.bind(null,"uniformMatrix3fv",bn,9,Kr),35676:nt.bind(null,"uniformMatrix4fv",bn,16,Kr),35678:Dt,35680:Dt,5125:nt.bind(null,"uniform1uiv",Nd,1,Ht),36294:nt.bind(null,"uniform2uiv",Nd,2,Ht),36295:nt.bind(null,"uniform3uiv",Nd,3,Ht),36296:nt.bind(null,"uniform4uiv",Nd,4,Ht),35685:nt.bind(null,"uniformMatrix2x3fv",bn,6,Kr),35686:nt.bind(null,"uniformMatrix2x4fv",bn,8,Kr),35687:nt.bind(null,"uniformMatrix3x2fv",bn,6,Kr),35688:nt.bind(null,"uniformMatrix3x4fv",bn,12,Kr),35689:nt.bind(null,"uniformMatrix4x2fv",bn,8,Kr),35690:nt.bind(null,"uniformMatrix4x3fv",bn,12,Kr),35678:Dt,35680:Dt,35679:Dt,35682:Dt,36289:Dt,36292:Dt,36293:Dt,36298:Dt,36299:Dt,36300:Dt,36303:Dt,36306:Dt,36307:Dt,36308:Dt,36311:Dt},zW={},$W={},GW={},CE=[0];function Ty(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(CE[0]=t,t=CE);const s=t.length;if(s%e&&xe.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let i=r[s];i||(i=new n(s),r[s]=i);for(let o=0;o<s;o++)i[o]=t[o];return i}function bn(t,e){return Ty(t,e,Float32Array,zW)}function Vs(t,e){return Ty(t,e,Int32Array,$W)}function Nd(t,e){return Ty(t,e,Uint32Array,GW)}function RE(t,e,n){const r=VW[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function WW(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function HW(t,e,n){for(const r in t){const s=t[r];if((!n||!!n[r])&&!qW(s))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),s),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function qW(t){return Array.isArray(t)||ArrayBuffer.isView(t)?YW(t):isFinite(t)||t===!0||t===!1||t instanceof Xi||t instanceof ha?!0:t instanceof At?!!t.texture:!1}function KW(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let s=0,i=n.length;s<i;++s)r[s]=n[s]}else t[e]=n.slice();else t[e]=n}function YW(t){if(t.length===0)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function Dt(){let t=null;return(e,n,r)=>{const s=t!==r;return s&&(e.uniform1i(n,r),t=r),s}}function nt(t,e,n,r){let s=null,i=null;return(o,c,u)=>{const d=e(u,n),h=d.length;let p=!1;if(s===null)s=new Float32Array(h),i=h,p=!0;else{de(i===h,"Uniform length cannot change.");for(let m=0;m<h;++m)if(d[m]!==s[m]){p=!0;break}}return p&&(r(o,t,c,d),s.set(d)),p}}function Ht(t,e,n,r){t[e](n,r)}function Kr(t,e,n,r){t[e](n,!1,r)}const XW=5120,ZW=5121,QW=5122,JW=5123,kE=0,jd=1,eH=2,tH=3,Dd=4,nH=5,rH=6,St=5126,sH=35664,iH=35665,oH=35666,ql=5124,aH=35667,lH=35668,cH=35669,Kl=5125,uH=36294,dH=36295,fH=36296,hH=35670,pH=35671,gH=35672,mH=35673,vH=35674,yH=35675,_H=35676,wH=35685,bH=35686,xH=35687,EH=35688,TH=35689,SH=35690,E0={[St]:[St,1,"float"],[sH]:[St,2,"vec2"],[iH]:[St,3,"vec3"],[oH]:[St,4,"vec4"],[ql]:[ql,1,"int"],[aH]:[ql,2,"ivec2"],[lH]:[ql,3,"ivec3"],[cH]:[ql,4,"ivec4"],[Kl]:[Kl,1,"uint"],[uH]:[Kl,2,"uvec2"],[dH]:[Kl,3,"uvec3"],[fH]:[Kl,4,"uvec4"],[hH]:[St,1,"bool"],[pH]:[St,2,"bvec2"],[gH]:[St,3,"bvec3"],[mH]:[St,4,"bvec4"],[vH]:[St,8,"mat2"],[wH]:[St,8,"mat2x3"],[bH]:[St,8,"mat2x4"],[yH]:[St,12,"mat3"],[xH]:[St,12,"mat3x2"],[EH]:[St,12,"mat3x4"],[_H]:[St,16,"mat4"],[TH]:[St,16,"mat4x2"],[SH]:[St,16,"mat4x3"]};function PH(t){switch(t){case kE:return kE;case jd:return jd;case tH:return jd;case eH:return jd;case Dd:return Dd;case nH:return Dd;case rH:return Dd;default:return de(!1),0}}function ME(t){const e=E0[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function xk(t,e){switch(t){case XW:case ZW:case QW:case JW:t=St;break}for(const n in E0){const[r,s,i]=E0[n];if(r===t&&s===e)return{glType:n,name:i}}return null}class AH{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,r=n.getProgramParameter(e.handle,35721);for(let s=0;s<r;s++){const{name:i,type:o,size:c}=n.getActiveAttrib(e.handle,s),u=n.getAttribLocation(e.handle,i);u>=0&&this._addAttribute(u,i,o,c)}this.attributeInfos.sort((s,i)=>s.location-i.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!Be(n))return;const r=n.getProgramParameter(e.handle,35971);for(let s=0;s<r;s++){const{name:i,type:o,size:c}=n.getTransformFeedbackVarying(e.handle,s);this._addVarying(s,i,o,c)}this.varyingInfos.sort((s,i)=>s.location-i.location)}_addAttribute(e,n,r,s){const{type:i,components:o}=ME(r),c={type:i,size:s*o};this._inferProperties(e,n,c);const u={location:e,name:n,accessor:new An(c)};this.attributeInfos.push(u),this.attributeInfosByLocation[e]=u,this.attributeInfosByName[u.name]=u}_inferProperties(e,n,r){/instance/i.test(n)&&(r.divisor=1)}_addVarying(e,n,r,s){const{type:i,components:o}=ME(r),c=new An({type:i,size:s*o}),u={location:e,name:n,accessor:c};this.varyingInfos.push(u),this.varyingInfosByName[u.name]=u}}const IE=4,CH=35981,RH=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class Ek extends us{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",RH),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:n,vs:r,fs:s,varyings:i,bufferMode:o=CH}=e;return this.hash=n||"",this.vs=typeof r=="string"?new Zg(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs=typeof s=="string"?new Qg(this.gl,{id:"".concat(e.id,"-fs"),source:s}):s,de(this.vs instanceof Zg),de(this.fs instanceof Qg),this.uniforms={},this._textureUniforms={},i&&i.length>0&&(Kt(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new AH(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:r=4,vertexCount:s,offset:i=0,start:o,end:c,isIndexed:u=!1,indexType:d=5123,instanceCount:h=0,isInstanced:p=h>0,vertexArray:m=null,transformFeedback:y,framebuffer:E,parameters:b={},uniforms:T,samplers:P}=e;if((T||P)&&(xe.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(T||{})),xe.priority>=n){const S=E?E.id:"default",C="mode=".concat(ei(this.gl,r)," verts=").concat(s," ")+"instances=".concat(h," indexType=").concat(ei(this.gl,d)," ")+"isInstanced=".concat(p," isIndexed=").concat(u," ")+"Framebuffer=".concat(S);xe.log(n,C)()}return de(m),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||s===0||p&&h===0?!1:(m.bindForDraw(s,h,()=>{if(E!==void 0&&(b=Object.assign({},b,{framebuffer:E})),y){const S=PH(r);y.begin(S)}this._bindTextures(),rr(this.gl,b,()=>{u&&p?this.gl2.drawElementsInstanced(r,s,d,i,h):u&&Be(this.gl)&&!isNaN(o)&&!isNaN(c)?this.gl2.drawRangeElements(r,o,c,s,d,i):u?this.gl.drawElements(r,s,d,i):p?this.gl2.drawArraysInstanced(r,i,s,h):this.gl.drawArrays(r,i,s)}),y&&y.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};xe.priority>=2&&HW(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const r=e[n],s=this._uniformSetters[n];if(s){let i=r,o=!1;if(i instanceof At&&(i=i.texture),i instanceof Xi)if(o=this.uniforms[n]!==r,o){s.textureIndex===void 0&&(s.textureIndex=this._textureIndexCounter++);const c=i,{textureIndex:u}=s;c.bind(u),i=u,this._textureUniforms[n]=c}else i=s.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(s(i)||o)&&KW(this.uniforms,n,r)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const r=this._textureUniforms[n];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),r={};for(const s of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new Zg({handle:s});break;case 35632:r.fs=new Qg({handle:s});break}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=ii(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),xe.time(IE,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),xe.timeEnd(IE,"linkProgram for ".concat(this._getName()))(),e.debug||xe.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const r=this.gl.getActiveUniform(this.handle,n),{name:s}=WW(r.name);let i=e.getUniformLocation(this.handle,s);if(this._uniformSetters[s]=RE(e,i,r),r.size>1)for(let o=0;o<r.size;o++)i=e.getUniformLocation(this.handle,"".concat(s,"[").concat(o,"]")),this._uniformSetters["".concat(s,"[").concat(o,"]")]=RE(e,i,r)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}const kH=34918,MH=34919,IH=35007,OH=36795,LH=35976,NH=35887,jH=36202;class Sf extends us{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=Be(e),s=yk(e,ot.TIMER_QUERY);let i=r||s;for(const o of n)switch(o){case"queries":i=i&&r;break;case"timers":i=i&&s;break;default:de(!1)}return i}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(IH)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?jH:NH)}beginTransformFeedbackQuery(){return this.begin(LH)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,MH);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(OH)}getResult(){return this.gl2.getQueryParameter(this.handle,kH)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,s)=>{const i=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>e?(s("Timed out"),this._pollingPromise=null):requestAnimationFrame(i)};requestAnimationFrame(i)}),this._pollingPromise}_createHandle(){return Sf.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class Tk extends us{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return Be(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Kt(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,ka(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const r=this._getVaryingIndex(e),{buffer:s,byteSize:i,byteOffset:o}=this._getBufferParams(n);return r<0?(this.unused[e]=s,xe.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[r]=n,this.bindOnUse||this._bindBuffer(r,s,o,i),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,r,s;return e instanceof qe?s=e:(s=e.buffer,r=e.byteSize,n=e.byteOffset),(n!==void 0||r!==void 0)&&(n=n||0,r=r||s.byteLength-n),{buffer:s,byteOffset:n,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:r,byteOffset:s}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,s,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0;const i=n&&n.handle;return!i||s===void 0?this.gl.bindBufferBase(35982,e,i):this.gl.bindBufferRange(35982,e,i,r,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let Fd=null;function DH(t){return(!Fd||Fd.byteLength<t)&&(Fd=new ArrayBuffer(t)),Fd}function FH(t,e){const n=DH(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function BH(t){let{target:e,source:n,start:r=0,count:s=1}=t;const i=n.length,o=s*i;let c=0;for(let u=r;c<i;c++)e[u++]=n[c];for(;c<o;)c<o-c?(e.copyWithin(r+c,r,r+c),c*=2):(e.copyWithin(r+c,r,r+o-c),c=o);return e}const UH="elements must be GL.ELEMENT_ARRAY_BUFFER";class En extends us{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?Be(e)||G2()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new En(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return En.MAX_ATTRIBUTES=En.MAX_ATTRIBUTES||e.getParameter(34921),En.MAX_ATTRIBUTES}static setConstant(e,n,r){switch(r.constructor){case Float32Array:En._setConstantFloatArray(e,n,r);break;case Int32Array:En._setConstantIntArray(e,n,r);break;case Uint32Array:En._setConstantUintArray(e,n,r);break;default:de(!1)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return En.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return de(!e||e.target===34963,UH),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,r){if(n.target===34963)return this.setElementBuffer(n,r);const{size:s,type:i,stride:o,offset:c,normalized:u,integer:d,divisor:h}=r,{gl:p,gl2:m}=this;return e=Number(e),this.bind(()=>{p.bindBuffer(34962,n.handle),d?(de(Be(p)),m.vertexAttribIPointer(e,s,i,o,c)):p.vertexAttribPointer(e,s,i,u,o,c),p.enableVertexAttribArray(e),m.vertexAttribDivisor(e,h||0)}),this}enable(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!n&&e===0&&!En.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const r=this._normalizeConstantArrayValue(n),s=r.byteLength*e,i=r.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new qe(this.gl,s),o=o||this.buffer.reallocate(s),o=o||!this._compareConstantArrayValues(r,this.bufferValue),o){const c=FH(n.constructor,i);BH({target:c,source:r,start:0,count:i}),this.buffer.subData(c),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==n[r])return!1;return!0}static _setConstantFloatArray(e,n,r){switch(r.length){case 1:e.vertexAttrib1fv(n,r);break;case 2:e.vertexAttrib2fv(n,r);break;case 3:e.vertexAttrib3fv(n,r);break;case 4:e.vertexAttrib4fv(n,r);break;default:de(!1)}}static _setConstantIntArray(e,n,r){switch(de(Be(e)),r.length){case 1:e.vertexAttribI1iv(n,r);break;case 2:e.vertexAttribI2iv(n,r);break;case 3:e.vertexAttribI3iv(n,r);break;case 4:e.vertexAttribI4iv(n,r);break;default:de(!1)}}static _setConstantUintArray(e,n,r){switch(de(Be(e)),r.length){case 1:e.vertexAttribI1uiv(n,r);break;case 2:e.vertexAttribI2uiv(n,r);break;case 3:e.vertexAttribI3uiv(n,r);break;case 4:e.vertexAttribI4uiv(n,r);break;default:de(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:r}=n;return de(Number.isFinite(r)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(r,e);default:return this.gl.getVertexAttrib(r,e)}})}}const VH="VertexArray: attributes must be Buffers or constants (i.e. typed array)",zH=/^(.+)__LOCATION_([0-9]+)$/,$H=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class GH{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new En(e),uk(this,"VertexArray","v6.0",$H),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e){const r=e[n];this._setAttribute(n,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,r);const{location:s,accessor:i}=this._resolveLocationAndAccessor(e,n,n.accessor,r);return s>=0&&(this.values[s]=n,this.accessors[s]=i,this.clearDrawParams(),this.vertexArrayObject.setBuffer(s,n,i)),this}setConstant(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:s,accessor:i}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},r));return s>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[s]=n,this.accessors[s]=i,this.clearDrawParams(),this.vertexArrayObject.enable(s,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new qe(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof qe&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof qe&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,r){let s;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),s=r()}),s}_resolveLocationAndAccessor(e,n,r,s){const i={location:-1,accessor:null},{location:o,name:c}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,xe.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),i;const u=this._getAttributeInfo(c||o);if(!u)return i;const d=this.accessors[o]||{},h=An.resolve(u.accessor,d,r,s),{size:p,type:m}=h;return de(Number.isFinite(p)&&Number.isFinite(m)),{location:o,accessor:h}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const r=zH.exec(e),s=r?r[1]:e,i=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(s)+i,name:s}:{location:-1}}_setAttribute(e,n){if(n instanceof qe)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof qe){const r=n[0],s=n[1];this.setBuffer(e,r,s)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){const r=n;this.setConstant(e,r)}else if(n.buffer instanceof qe){const r=n;this.setBuffer(e,r.buffer,r)}else throw new Error(VH)}_setConstantAttributes(e,n){const r=Math.max(e|0,n|0);let s=this.values[0];ArrayBuffer.isView(s)&&this._setConstantAttributeZero(s,r);for(let i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)s=this.values[i],ArrayBuffer.isView(s)&&this._setConstantAttribute(i,s)}_setConstantAttributeZero(e,n){if(En.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const r=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,n){En.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const r=this.values[n],s=this.accessors[n];if(!r)return;const{divisor:i}=s,o=i>0;if(e.isInstanced=e.isInstanced||o,r instanceof qe){const c=r;if(o){const u=c.getVertexCount(s);e.instanceCount=Math.min(e.instanceCount,u)}else{const u=c.getVertexCount(s);e.vertexCount=Math.min(e.vertexCount,u)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return xe.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function WH(t,e){const{maxElts:n=16,size:r=1}=e;let s="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(s+=",".concat(o%r===0?" ":"")),s+=Lc(t[o],e);const i=t.length>n?"...":"]";return"".concat(s).concat(i)}function Lc(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return WH(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const s=t.toPrecision(2);return s.indexOf(".0")===s.length-2?s.slice(0,-1):s}function OE(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:s=!1}=t;de(n);const i=".*_.*",o=".*Matrix",c=n._uniformSetters,u={},d=Object.keys(c).sort();let h=0;for(const y of d)!y.match(i)&&!y.match(o)&&Jg({table:u,header:e,uniforms:r,uniformName:y,undefinedOnly:s})&&h++;for(const y of d)y.match(o)&&Jg({table:u,header:e,uniforms:r,uniformName:y,undefinedOnly:s})&&h++;for(const y of d)u[y]||Jg({table:u,header:e,uniforms:r,uniformName:y,undefinedOnly:s})&&h++;let p=0;const m={};if(!s)for(const y in r){const E=r[y];u[y]||(p++,m[y]={Type:"NOT USED: ".concat(E),[e]:Lc(E)})}return{table:u,count:h,unusedTable:m,unusedCount:p}}function Jg(t){let{table:e,header:n,uniforms:r,uniformName:s,undefinedOnly:i}=t;const o=r[s],c=HH(o);return!i||!c?(e[s]={[n]:c?Lc(o):"N/A","Uniform Type":c?o:"NOT PROVIDED"},!0):!1}function HH(t){return t!=null}function qH(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=LE(e,e.elements,null,n));const s=e.values;for(const i in s){const o=e._getAttributeInfo(i);if(o){let c="".concat(i,": ").concat(o.name);const u=e.accessors[o.location];u&&(c="".concat(i,": ").concat(KH(o.name,u))),r[c]=LE(e,s[i],u,n)}}return r}function LE(t,e,n,r){const{gl:s}=t;if(!e)return{[r]:"null","Format ":"N/A"};let i="NOT PROVIDED",o=1,c=0,u=0,d,h,p;if(n&&(i=n.type,o=n.size,i=String(i).replace("Array",""),d=i.indexOf("nt")!==-1),e instanceof qe){const m=e,{data:y,changed:E}=m.getDebugData();h=E?"*":"",p=y,u=m.byteLength,c=u/y.BYTES_PER_ELEMENT/o;let b;if(n){const T=n.divisor>0;b="".concat(T?"I ":"P "," ").concat(c," (x").concat(o,"=").concat(u," bytes ").concat(ei(s,i),")")}else d=!0,b="".concat(u," bytes");return{[r]:"".concat(h).concat(Lc(p,{size:o,isInteger:d})),"Format ":b}}return p=e,o=e.length,i=String(e.constructor.name).replace("Array",""),d=i.indexOf("nt")!==-1,{[r]:"".concat(Lc(p,{size:o,isInteger:d})," (constant)"),"Format ":"".concat(o,"x").concat(i," (constant)")}}function KH(t,e){const{type:n,size:r}=e,s=xk(n,r);return s?"".concat(t," (").concat(s.name,")"):t}function YH(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const s=NE(r);e["in ".concat(s)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const s=NE(r);e["out ".concat(s)]={[n]:JSON.stringify(r.accessor)}}return e}function NE(t){const{type:e,size:n}=t.accessor,r=xk(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const jE=cs()&&typeof document<"u";let XH=0;class ZH{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:n=T=>ck(T),onAddHTML:r=null,onInitialize:s=()=>{},onRender:i=()=>{},onFinalize:o=()=>{},onError:c,gl:u=null,glOptions:d={},debug:h=!1,createFramebuffer:p=!1,autoResizeViewport:m=!0,autoResizeDrawingBuffer:y=!0,stats:E=Ui.get("animation-loop-".concat(XH++))}=e;let{useDevicePixels:b=!0}=e;"useDevicePixelRatio"in e&&(xe.deprecated("useDevicePixelRatio","useDevicePixels")(),b=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:r,onInitialize:s,onRender:i,onFinalize:o,onError:c,gl:u,glOptions:d,debug:h,createFramebuffer:p},this.gl=u,this.needsRedraw=null,this.timeline=null,this.stats=E,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:m,autoResizeDrawingBuffer:y,useDevicePixels:b}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return de(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Sf.isSupported(this.gl,["timers"])?new Sf(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=document.getElementById(e);return r?Number(r.value):n}setViewParameters(){return xe.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=jE?new Promise((e,n)=>{if(jE&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):rW(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):nW(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?by(this.props.gl,e):this.onCreateContext(e),!ph(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");$9(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let r=1;const{canvas:s}=this.gl;return s&&s.clientHeight?r=s.clientWidth/s.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&K9(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new At(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const Qc="vs",Sy="fs";function kn(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const em={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function QH(t){const e={};for(const n in t){const r=t[n],s=JH(r);e[n]=s}return e}function JH(t){let e=DE(t);return e==="object"?t?"type"in t?Object.assign({},t,em[t.type]):"value"in t?(e=DE(t.value),Object.assign({type:e},t,em[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},em[e])}function DE(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const e7="vs",t7="fs";class FE{constructor(e){let{name:n,vs:r,fs:s,dependencies:i=[],uniforms:o,getUniforms:c,deprecations:u=[],defines:d={},inject:h={},vertexShader:p,fragmentShader:m}=e;kn(typeof n=="string"),this.name=n,this.vs=r||p,this.fs=s||m,this.getModuleUniforms=c,this.dependencies=i,this.deprecations=this._parseDeprecationDefinitions(u),this.defines=d,this.injections=n7(h),o&&(this.uniforms=QH(o))}getModuleSource(e){let n;switch(e){case e7:n=this.vs||"";break;case t7:n=this.fs||"";break;default:kn(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={},r=this.uniforms;for(const s in r){const i=r[s];s in e&&!i.private?(i.validate&&kn(i.validate(e[s],i),"".concat(this.name,": invalid ").concat(s)),n[s]=e[s]):n[s]=i.value}return n}}function n7(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const s=n.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[s][n]=r}return e}function r7(t){return s7(Pk(t))}function s7(t){const e={},n={};return Sk({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,s)=>n[s]-n[r]).map(r=>e[r])}function Sk(t){let{modules:e,level:n,moduleMap:r,moduleDepth:s}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const i of e)r[i.name]=i,(s[i.name]===void 0||s[i.name]<n)&&(s[i.name]=n);for(const i of e)i.dependencies&&Sk({modules:i.dependencies,level:n+1,moduleMap:r,moduleDepth:s})}function Pk(t,e){return t.map(n=>(n instanceof FE||(kn(typeof n!="string","Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),kn(n.name,"shader module has no name"),n=new FE(n),n.dependencies=Pk(n.dependencies)),n))}function i7(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof window<"u"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",r=n.indexOf("MSIE ")!==-1,s=n.indexOf("Trident/")!==-1;return r||s}const o7=7936,a7=7937,l7=7938,c7=35724,Py={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Di={};Object.keys(Py).forEach(t=>{Di[t]=t});function u7(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function d7(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||o7),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||a7);return{gpuVendor:f7(n,r),vendor:n,renderer:r,version:t.getParameter(l7),shadingLanguageVersion:t.getParameter(c7)}}function f7(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const tm={};function BE(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=Py[e];if(kn(r,e),!i7(n))return!0;if(e in tm)return tm[e];const s=r[0],i=n.behavior||"enable",o="#extension GL_".concat(s," : ").concat(i,`
void main(void) {}`),c=t.createShader(35633);t.shaderSource(c,o),t.compileShader(c);const u=t.getShaderParameter(c,35713);return t.deleteShader(c),tm[e]=u,u}function h7(t,e){const n=Py[e];kn(n,e);const r=u7(t)&&n[1]||n[0],s=typeof r=="string"?!!t.getExtension(r):r;return kn(s===!1||s===!0),s}function Bd(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>h7(t,n))}function p7(t){switch(d7(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function g7(t,e,n){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return Bd(t,Di.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),Bd(t,Di.GLSL_DERIVATIVES)&&BE(t,Di.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),Bd(t,Di.GLSL_FRAG_DATA)&&BE(t,Di.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),Bd(t,Di.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}const m7=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,v7=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,y7={[Qc]:m7,[Sy]:v7},ef="__LUMA_INJECT_DECLARATIONS__",UE=/void\s+main\s*\([^)]*\)\s*\{\n?/,VE=/}\n?[^{}]*$/,nm=[];function zE(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const s=e===Qc;for(const i in n){const o=n[i];o.sort((u,d)=>u.order-d.order),nm.length=o.length;for(let u=0,d=o.length;u<d;++u)nm[u]=o[u].injection;const c="".concat(nm.join(`
`),`
`);switch(i){case"vs:#decl":s&&(t=t.replace(ef,c));break;case"vs:#main-start":s&&(t=t.replace(UE,u=>u+c));break;case"vs:#main-end":s&&(t=t.replace(VE,u=>c+u));break;case"fs:#decl":s||(t=t.replace(ef,c));break;case"fs:#main-start":s||(t=t.replace(UE,u=>u+c));break;case"fs:#main-end":s||(t=t.replace(VE,u=>c+u));break;default:t=t.replace(i,u=>u+c)}}return t=t.replace(ef,""),r&&(t=t.replace(/\}\s*$/,i=>i+y7[e])),t}function T0(t){const e={};return kn(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const r in n)e[r]=e[r]?"".concat(e[r],`
`).concat(n[r]):n[r]}),e}function Ma(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const Ak=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],_7=[...Ak,[Ma("attribute"),"in $1"],[Ma("varying"),"out $1"]],w7=[...Ak,[Ma("varying"),"in $1"]],Ck=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],b7=[...Ck,[Ma("in"),"attribute $1"],[Ma("out"),"varying $1"]],x7=[...Ck,[Ma("in"),"varying $1"]],S0="gl_FragColor",P0=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,E7=/void\s+main\s*\([^)]*\)\s*\{\n?/;function T7(t,e,n){switch(e){case 300:return n?Pf(t,_7):S7(t);case 100:return n?Pf(t,b7):P7(t);default:throw new Error("unknown GLSL version ".concat(e))}}function Pf(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function S7(t){t=Pf(t,w7);const e=t.match(P0);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(S0,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(E7,r=>"out vec4 ".concat(n,`;
`).concat(r)).replace(new RegExp("\\b".concat(S0,"\\b"),"g"),n)}return t}function P7(t){t=Pf(t,x7);const e=t.match(P0);if(e){const n=e[1];t=t.replace(P0,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),S0)}return t}const A7=`

`.concat(ef,`

`),Rk={[Qc]:"vertex",[Sy]:"fragment"},C7=`precision highp float;

`;function R7(t,e){const{vs:n,fs:r}=e,s=r7(e.modules||[]);return{gl:t,vs:$E(t,Object.assign({},e,{source:n,type:Qc,modules:s})),fs:$E(t,Object.assign({},e,{source:r,type:Sy,modules:s})),getUniforms:k7(s)}}function $E(t,e){let{id:n,source:r,type:s,modules:i,defines:o={},hookFunctions:c=[],inject:u={},transpileToGLSL100:d=!1,prologue:h=!0,log:p}=e;kn(typeof r=="string","shader source must be a string");const m=s===Qc,y=r.split(`
`);let E=100,b="",T=r;y[0].indexOf("#version ")===0?(E=300,b=y[0],T=y.slice(1).join(`
`)):b="#version ".concat(E);const P={};i.forEach(U=>{Object.assign(P,U.getDefines())}),Object.assign(P,o);let S=h?"".concat(b,`
`).concat(I7({id:n,source:r,type:s}),`
`).concat(M7({type:s}),`
`).concat(p7(t),`
`).concat(g7(t),`
`).concat(O7(P),`
`).concat(m?"":C7,`
`):"".concat(b,`
`);const C=N7(c),I={},O={},D={};for(const U in u){const G=typeof u[U]=="string"?{injection:u[U],order:0}:u[U],W=U.match(/^(v|f)s:(#)?([\w-]+)$/);if(W){const V=W[2],Q=W[3];V?Q==="decl"?O[U]=[G]:D[U]=[G]:I[U]=[G]}else D[U]=[G]}for(const U of i){p&&U.checkDeprecations(T,p);const G=U.getModuleSource(s,E);S+=G;const W=U.injections[s];for(const V in W){const Q=V.match(/^(v|f)s:#([\w-]+)$/);if(Q){const ae=Q[2]==="decl"?O:D;ae[V]=ae[V]||[],ae[V].push(W[V])}else I[V]=I[V]||[],I[V].push(W[V])}}return S+=A7,S=zE(S,s,O),S+=L7(C[s],I),S+=T,S=zE(S,s,D),S=T7(S,d?100:E,m),S}function k7(t){return function(n){const r={};for(const s of t){const i=s.getUniforms(n,r);Object.assign(r,i)}return r}}function M7(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(Rk[e].toUpperCase(),`
`)}function I7(t){let{id:e,source:n,type:r}=t;return e&&typeof e=="string"&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(Rk[r],`

`):""}function O7(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,n="";for(const r in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;const s=t[r];(s||Number.isFinite(s))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],`
`))}return e===0&&(n+=`
`),n}function L7(t,e){let n="";for(const r in t){const s=t[r];if(n+="void ".concat(s.signature,` {
`),s.header&&(n+="  ".concat(s.header)),e[r]){const i=e[r];i.sort((o,c)=>o.order-c.order);for(const o of i)n+="  ".concat(o.injection,`
`)}s.footer&&(n+="  ".concat(s.footer)),n+=`}
`}return n}function N7(t){const e={vs:{},fs:{}};return t.forEach(n=>{let r;typeof n!="string"?(r=n,n=r.hook):r={},n=n.trim();const[s,i]=n.split(":"),o=n.replace(/\(.+/,"");e[s][o]=Object.assign(r,{signature:i})}),e}const j7="void main() {gl_FragColor = vec4(0);}",kk=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,D7=`#version 300 es
`.concat(kk);function Mk(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,s,i]=n;if(!e.includes(r)||!s||!i)return null;const o=i.split(";")[0];return{qualifier:r,type:s,name:o}}function Ik(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:s}=t;if(!n)return e===300?D7:e>300?"#version ".concat(e,`
`).concat(kk):j7;const i=U7(n,r);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(r," ").concat(n,`;
out vec4 `).concat(s,`;
void main() {
  `).concat(s," = ").concat(i,`;
}`):"varying ".concat(r," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(i,`;
}`)}function F7(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return kn(!1),null}}function B7(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return kn(!1),null}}function U7(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return kn(!1),null}}const V7=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,z7={name:"fp32",vs:V7,fs:null};function GE(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}const $n={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function $7(t,{precision:e=$n.precision}={}){return t=G7(t),"".concat(parseFloat(t.toPrecision(e)))}function Ia(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Qs(t,e,n){return H7(t,r=>Math.max(e,Math.min(n,r)))}function Af(t,e,n){return Ia(t)?t.map((r,s)=>Af(r,e[s],n)):n*e+(1-n)*t}function Nc(t,e,n){const r=$n.EPSILON;try{if(t===e)return!0;if(Ia(t)&&Ia(e)){if(t.length!==e.length)return!1;for(let s=0;s<t.length;++s)if(!Nc(t[s],e[s]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=$n.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{$n.EPSILON=r}}function G7(t){return Math.round(t/$n.EPSILON)*$n.EPSILON}function W7(t){return t.clone?t.clone():new Array(t.length)}function H7(t,e,n){if(Ia(t)){const r=t;n=n||W7(r);for(let s=0;s<n.length&&s<r.length;++s)n[s]=e(t[s],s,n);return n}return e(t)}function q7(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class Ok extends q7(Array){clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Ia(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString($n)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+$7(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Nc(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let s=0;s<this.ELEMENTS;++s){const i=e[s];this[s]=i+r*(n[s]-i)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if($n.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function K7(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function Sn(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function rm(t,e,n=""){if($n.debug&&!K7(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}class Y7 extends Ok{get x(){return this[0]}set x(e){this[0]=Sn(e)}get y(){return this[1]}set y(e){this[1]=Sn(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const s=this[r]-e[r];n+=s*s}return Sn(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return Sn(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return GE(e>=0&&e<this.ELEMENTS,"index is out of range"),Sn(this[e])}setComponent(e,n){return GE(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var tf=1e-6,Oa=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function X7(){var t=new Oa(2);return Oa!=Float32Array&&(t[0]=0,t[1]=0),t}function WE(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function Z7(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Lk(t,e,n,r){var s=e[0],i=e[1];return t[0]=s+r*(n[0]-s),t[1]=i+r*(n[1]-i),t}function Q7(t,e,n){var r=e[0],s=e[1];return t[0]=n[0]*r+n[4]*s+n[12],t[1]=n[1]*r+n[5]*s+n[13],t}(function(){var t=X7();return function(e,n,r,s,i,o){var c,u;for(n||(n=2),r||(r=0),s?u=Math.min(s*n+r,e.length):u=e.length,c=r;c<u;c+=n)t[0]=e[c],t[1]=e[c+1],i(t,t,o),e[c]=t[0],e[c+1]=t[1];return e}})();function J7(t,e,n){const r=e[0],s=e[1],i=n[3]*r+n[7]*s||1;return t[0]=(n[0]*r+n[4]*s)/i,t[1]=(n[1]*r+n[5]*s)/i,t}function Nk(t,e,n){const r=e[0],s=e[1],i=e[2],o=n[3]*r+n[7]*s+n[11]*i||1;return t[0]=(n[0]*r+n[4]*s+n[8]*i)/o,t[1]=(n[1]*r+n[5]*s+n[9]*i)/o,t[2]=(n[2]*r+n[6]*s+n[10]*i)/o,t}function eq(t,e,n){const r=e[0],s=e[1];return t[0]=n[0]*r+n[2]*s,t[1]=n[1]*r+n[3]*s,t[2]=e[2],t}function tq(){var t=new Oa(3);return Oa!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function nq(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function rq(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function sq(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function iq(t,e,n){var r=e[0],s=e[1],i=e[2],o=n[0],c=n[1],u=n[2];return t[0]=s*u-i*c,t[1]=i*o-r*u,t[2]=r*c-s*o,t}function jk(t,e,n){var r=e[0],s=e[1],i=e[2],o=n[3]*r+n[7]*s+n[11]*i+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*s+n[8]*i+n[12])/o,t[1]=(n[1]*r+n[5]*s+n[9]*i+n[13])/o,t[2]=(n[2]*r+n[6]*s+n[10]*i+n[14])/o,t}function oq(t,e,n){var r=e[0],s=e[1],i=e[2];return t[0]=r*n[0]+s*n[3]+i*n[6],t[1]=r*n[1]+s*n[4]+i*n[7],t[2]=r*n[2]+s*n[5]+i*n[8],t}function aq(t,e,n){var r=n[0],s=n[1],i=n[2],o=n[3],c=e[0],u=e[1],d=e[2],h=s*d-i*u,p=i*c-r*d,m=r*u-s*c,y=s*m-i*p,E=i*h-r*m,b=r*p-s*h,T=o*2;return h*=T,p*=T,m*=T,y*=2,E*=2,b*=2,t[0]=c+h+y,t[1]=u+p+E,t[2]=d+m+b,t}function lq(t,e,n,r){var s=[],i=[];return s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],i[0]=s[0],i[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),i[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function cq(t,e,n,r){var s=[],i=[];return s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],i[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),i[1]=s[1],i[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function uq(t,e,n,r){var s=[],i=[];return s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],i[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),i[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),i[2]=s[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function dq(t,e){var n=t[0],r=t[1],s=t[2],i=e[0],o=e[1],c=e[2],u=Math.sqrt(n*n+r*r+s*s),d=Math.sqrt(i*i+o*o+c*c),h=u*d,p=h&&sq(t,e)/h;return Math.acos(Math.min(Math.max(p,-1),1))}var fq=nq;(function(){var t=tq();return function(e,n,r,s,i,o){var c,u;for(n||(n=3),r||(r=0),s?u=Math.min(s*n+r,e.length):u=e.length,c=r;c<u;c+=n)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],i(t,t,o),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2];return e}})();const sm=[0,0,0];let Ud;class Mr extends Y7{static get ZERO(){return Ud||(Ud=new Mr(0,0,0),Object.freeze(Ud)),Ud}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&Ia(e)?this.copy(e):($n.debug&&(Sn(e),Sn(n),Sn(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return $n.debug&&(Sn(e.x),Sn(e.y),Sn(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Sn(e)}angle(e){return dq(this,e)}cross(e){return iq(this,this,e),this.check()}rotateX({radians:e,origin:n=sm}){return lq(this,this,n,e),this.check()}rotateY({radians:e,origin:n=sm}){return cq(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=sm}){return uq(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return jk(this,this,e),this.check()}transformAsVector(e){return Nk(this,this,e),this.check()}transformByMatrix3(e){return oq(this,this,e),this.check()}transformByMatrix2(e){return eq(this,this,e),this.check()}transformByQuaternion(e){return aq(this,this,e),this.check()}}class hq extends Ok{toString(){let e="[";if($n.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=Sn(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let s=0;s<this.RANK;++s)n[s]=this[r+s];return n}setColumn(e,n){const r=e*this.RANK;for(let s=0;s<this.RANK;++s)this[r+s]=n[s];return this}}function pq(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gq(t,e){if(t===e){var n=e[1],r=e[2],s=e[3],i=e[6],o=e[7],c=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=s,t[13]=o,t[14]=c}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function A0(t,e){var n=e[0],r=e[1],s=e[2],i=e[3],o=e[4],c=e[5],u=e[6],d=e[7],h=e[8],p=e[9],m=e[10],y=e[11],E=e[12],b=e[13],T=e[14],P=e[15],S=n*c-r*o,C=n*u-s*o,I=n*d-i*o,O=r*u-s*c,D=r*d-i*c,U=s*d-i*u,G=h*b-p*E,W=h*T-m*E,V=h*P-y*E,Q=p*T-m*b,te=p*P-y*b,ae=m*P-y*T,ie=S*ae-C*te+I*Q+O*V-D*W+U*G;return ie?(ie=1/ie,t[0]=(c*ae-u*te+d*Q)*ie,t[1]=(s*te-r*ae-i*Q)*ie,t[2]=(b*U-T*D+P*O)*ie,t[3]=(m*D-p*U-y*O)*ie,t[4]=(u*V-o*ae-d*W)*ie,t[5]=(n*ae-s*V+i*W)*ie,t[6]=(T*I-E*U-P*C)*ie,t[7]=(h*U-m*I+y*C)*ie,t[8]=(o*te-c*V+d*G)*ie,t[9]=(r*V-n*te-i*G)*ie,t[10]=(E*D-b*I+P*S)*ie,t[11]=(p*I-h*D-y*S)*ie,t[12]=(c*W-o*Q-u*G)*ie,t[13]=(n*Q-r*W+s*G)*ie,t[14]=(b*C-E*O-T*S)*ie,t[15]=(h*O-p*C+m*S)*ie,t):null}function mq(t){var e=t[0],n=t[1],r=t[2],s=t[3],i=t[4],o=t[5],c=t[6],u=t[7],d=t[8],h=t[9],p=t[10],m=t[11],y=t[12],E=t[13],b=t[14],T=t[15],P=e*o-n*i,S=e*c-r*i,C=e*u-s*i,I=n*c-r*o,O=n*u-s*o,D=r*u-s*c,U=d*E-h*y,G=d*b-p*y,W=d*T-m*y,V=h*b-p*E,Q=h*T-m*E,te=p*T-m*b;return P*te-S*Q+C*V+I*W-O*G+D*U}function $i(t,e,n){var r=e[0],s=e[1],i=e[2],o=e[3],c=e[4],u=e[5],d=e[6],h=e[7],p=e[8],m=e[9],y=e[10],E=e[11],b=e[12],T=e[13],P=e[14],S=e[15],C=n[0],I=n[1],O=n[2],D=n[3];return t[0]=C*r+I*c+O*p+D*b,t[1]=C*s+I*u+O*m+D*T,t[2]=C*i+I*d+O*y+D*P,t[3]=C*o+I*h+O*E+D*S,C=n[4],I=n[5],O=n[6],D=n[7],t[4]=C*r+I*c+O*p+D*b,t[5]=C*s+I*u+O*m+D*T,t[6]=C*i+I*d+O*y+D*P,t[7]=C*o+I*h+O*E+D*S,C=n[8],I=n[9],O=n[10],D=n[11],t[8]=C*r+I*c+O*p+D*b,t[9]=C*s+I*u+O*m+D*T,t[10]=C*i+I*d+O*y+D*P,t[11]=C*o+I*h+O*E+D*S,C=n[12],I=n[13],O=n[14],D=n[15],t[12]=C*r+I*c+O*p+D*b,t[13]=C*s+I*u+O*m+D*T,t[14]=C*i+I*d+O*y+D*P,t[15]=C*o+I*h+O*E+D*S,t}function Cf(t,e,n){var r=n[0],s=n[1],i=n[2],o,c,u,d,h,p,m,y,E,b,T,P;return e===t?(t[12]=e[0]*r+e[4]*s+e[8]*i+e[12],t[13]=e[1]*r+e[5]*s+e[9]*i+e[13],t[14]=e[2]*r+e[6]*s+e[10]*i+e[14],t[15]=e[3]*r+e[7]*s+e[11]*i+e[15]):(o=e[0],c=e[1],u=e[2],d=e[3],h=e[4],p=e[5],m=e[6],y=e[7],E=e[8],b=e[9],T=e[10],P=e[11],t[0]=o,t[1]=c,t[2]=u,t[3]=d,t[4]=h,t[5]=p,t[6]=m,t[7]=y,t[8]=E,t[9]=b,t[10]=T,t[11]=P,t[12]=o*r+h*s+E*i+e[12],t[13]=c*r+p*s+b*i+e[13],t[14]=u*r+m*s+T*i+e[14],t[15]=d*r+y*s+P*i+e[15]),t}function Ay(t,e,n){var r=n[0],s=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function vq(t,e,n,r){var s=r[0],i=r[1],o=r[2],c=Math.hypot(s,i,o),u,d,h,p,m,y,E,b,T,P,S,C,I,O,D,U,G,W,V,Q,te,ae,ie,ve;return c<tf?null:(c=1/c,s*=c,i*=c,o*=c,u=Math.sin(n),d=Math.cos(n),h=1-d,p=e[0],m=e[1],y=e[2],E=e[3],b=e[4],T=e[5],P=e[6],S=e[7],C=e[8],I=e[9],O=e[10],D=e[11],U=s*s*h+d,G=i*s*h+o*u,W=o*s*h-i*u,V=s*i*h-o*u,Q=i*i*h+d,te=o*i*h+s*u,ae=s*o*h+i*u,ie=i*o*h-s*u,ve=o*o*h+d,t[0]=p*U+b*G+C*W,t[1]=m*U+T*G+I*W,t[2]=y*U+P*G+O*W,t[3]=E*U+S*G+D*W,t[4]=p*V+b*Q+C*te,t[5]=m*V+T*Q+I*te,t[6]=y*V+P*Q+O*te,t[7]=E*V+S*Q+D*te,t[8]=p*ae+b*ie+C*ve,t[9]=m*ae+T*ie+I*ve,t[10]=y*ae+P*ie+O*ve,t[11]=E*ae+S*ie+D*ve,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function Dk(t,e,n){var r=Math.sin(n),s=Math.cos(n),i=e[4],o=e[5],c=e[6],u=e[7],d=e[8],h=e[9],p=e[10],m=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*s+d*r,t[5]=o*s+h*r,t[6]=c*s+p*r,t[7]=u*s+m*r,t[8]=d*s-i*r,t[9]=h*s-o*r,t[10]=p*s-c*r,t[11]=m*s-u*r,t}function yq(t,e,n){var r=Math.sin(n),s=Math.cos(n),i=e[0],o=e[1],c=e[2],u=e[3],d=e[8],h=e[9],p=e[10],m=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*s-d*r,t[1]=o*s-h*r,t[2]=c*s-p*r,t[3]=u*s-m*r,t[8]=i*r+d*s,t[9]=o*r+h*s,t[10]=c*r+p*s,t[11]=u*r+m*s,t}function Fk(t,e,n){var r=Math.sin(n),s=Math.cos(n),i=e[0],o=e[1],c=e[2],u=e[3],d=e[4],h=e[5],p=e[6],m=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*s+d*r,t[1]=o*s+h*r,t[2]=c*s+p*r,t[3]=u*s+m*r,t[4]=d*s-i*r,t[5]=h*s-o*r,t[6]=p*s-c*r,t[7]=m*s-u*r,t}function _q(t,e){var n=e[0],r=e[1],s=e[2],i=e[3],o=n+n,c=r+r,u=s+s,d=n*o,h=r*o,p=r*c,m=s*o,y=s*c,E=s*u,b=i*o,T=i*c,P=i*u;return t[0]=1-p-E,t[1]=h+P,t[2]=m-T,t[3]=0,t[4]=h-P,t[5]=1-d-E,t[6]=y+b,t[7]=0,t[8]=m+T,t[9]=y-b,t[10]=1-d-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function wq(t,e,n,r,s,i,o){var c=1/(n-e),u=1/(s-r),d=1/(i-o);return t[0]=i*2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i*2*u,t[6]=0,t[7]=0,t[8]=(n+e)*c,t[9]=(s+r)*u,t[10]=(o+i)*d,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*d,t[15]=0,t}function bq(t,e,n,r,s){var i=1/Math.tan(e/2),o;return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0?(o=1/(r-s),t[10]=(s+r)*o,t[14]=2*s*r*o):(t[10]=-1,t[14]=-2*r),t}var xq=bq;function Eq(t,e,n,r,s,i,o){var c=1/(e-n),u=1/(r-s),d=1/(i-o);return t[0]=-2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*d,t[11]=0,t[12]=(e+n)*c,t[13]=(s+r)*u,t[14]=(o+i)*d,t[15]=1,t}var Tq=Eq;function Sq(t,e,n,r){var s,i,o,c,u,d,h,p,m,y,E=e[0],b=e[1],T=e[2],P=r[0],S=r[1],C=r[2],I=n[0],O=n[1],D=n[2];return Math.abs(E-I)<tf&&Math.abs(b-O)<tf&&Math.abs(T-D)<tf?pq(t):(h=E-I,p=b-O,m=T-D,y=1/Math.hypot(h,p,m),h*=y,p*=y,m*=y,s=S*m-C*p,i=C*h-P*m,o=P*p-S*h,y=Math.hypot(s,i,o),y?(y=1/y,s*=y,i*=y,o*=y):(s=0,i=0,o=0),c=p*o-m*i,u=m*s-h*o,d=h*i-p*s,y=Math.hypot(c,u,d),y?(y=1/y,c*=y,u*=y,d*=y):(c=0,u=0,d=0),t[0]=s,t[1]=c,t[2]=h,t[3]=0,t[4]=i,t[5]=u,t[6]=p,t[7]=0,t[8]=o,t[9]=d,t[10]=m,t[11]=0,t[12]=-(s*E+i*b+o*T),t[13]=-(c*E+u*b+d*T),t[14]=-(h*E+p*b+m*T),t[15]=1,t)}function Pq(){var t=new Oa(4);return Oa!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Aq(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Jc(t,e,n){var r=e[0],s=e[1],i=e[2],o=e[3];return t[0]=n[0]*r+n[4]*s+n[8]*i+n[12]*o,t[1]=n[1]*r+n[5]*s+n[9]*i+n[13]*o,t[2]=n[2]*r+n[6]*s+n[10]*i+n[14]*o,t[3]=n[3]*r+n[7]*s+n[11]*i+n[15]*o,t}(function(){var t=Pq();return function(e,n,r,s,i,o){var c,u;for(n||(n=4),r||(r=0),s?u=Math.min(s*n+r,e.length):u=e.length,c=r;c<u;c+=n)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],t[3]=e[c+3],i(t,t,o),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2],e[c+3]=t[3];return e}})();var C0;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(C0||(C0={}));const Cq=45*Math.PI/180,Rq=1,im=.1,om=500,kq=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Ir extends hq{static get IDENTITY(){return Iq()}static get ZERO(){return Mq()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return C0}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,s,i,o,c,u,d,h,p,m,y,E,b,T){return this[0]=e,this[1]=n,this[2]=r,this[3]=s,this[4]=i,this[5]=o,this[6]=c,this[7]=u,this[8]=d,this[9]=h,this[10]=p,this[11]=m,this[12]=y,this[13]=E,this[14]=b,this[15]=T,this.check()}setRowMajor(e,n,r,s,i,o,c,u,d,h,p,m,y,E,b,T){return this[0]=e,this[1]=i,this[2]=d,this[3]=y,this[4]=n,this[5]=o,this[6]=h,this[7]=E,this[8]=r,this[9]=c,this[10]=p,this[11]=b,this[12]=s,this[13]=u,this[14]=m,this[15]=T,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(kq)}fromObject(e){return this.check()}fromQuaternion(e){return _q(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:s,top:i,near:o=im,far:c=om}=e;return c===1/0?Oq(this,n,r,s,i,o):wq(this,n,r,s,i,o,c),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:s=[0,1,0]}=e;return Sq(this,n,r,s),this.check()}ortho(e){const{left:n,right:r,bottom:s,top:i,near:o=im,far:c=om}=e;return Tq(this,n,r,s,i,o,c),this.check()}orthographic(e){const{fovy:n=Cq,aspect:r=Rq,focalDistance:s=1,near:i=im,far:o=om}=e;HE(n);const c=n/2,u=s*Math.tan(c),d=u*r;return this.ortho({left:-d,right:d,bottom:-u,top:u,near:i,far:o})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:s=.1,far:i=500}=e;return HE(n),xq(this,n,r,s,i),this.check()}determinant(){return mq(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),s=1/r[0],i=1/r[1],o=1/r[2];return e[0]=this[0]*s,e[1]=this[1]*i,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*s,e[5]=this[5]*i,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*s,e[9]=this[9]*i,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),s=1/r[0],i=1/r[1],o=1/r[2];return e[0]=this[0]*s,e[1]=this[1]*i,e[2]=this[2]*o,e[3]=this[4]*s,e[4]=this[5]*i,e[5]=this[6]*o,e[6]=this[8]*s,e[7]=this[9]*i,e[8]=this[10]*o,e}transpose(){return gq(this,this),this.check()}invert(){return A0(this,this),this.check()}multiplyLeft(e){return $i(this,e,this),this.check()}multiplyRight(e){return $i(this,this,e),this.check()}rotateX(e){return Dk(this,this,e),this.check()}rotateY(e){return yq(this,this,e),this.check()}rotateZ(e){return Fk(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return vq(this,this,e,n),this.check()}scale(e){return Ay(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return Cf(this,this,e),this.check()}transform(e,n){return e.length===4?(n=Jc(n||[-0,-0,-0,-0],e,this),rm(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let s;switch(r){case 2:s=Q7(n||[-0,-0],e,this);break;case 3:s=jk(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return rm(s,e.length),s}transformAsVector(e,n){let r;switch(e.length){case 2:r=J7(n||[-0,-0],e,this);break;case 3:r=Nk(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return rm(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let Vd,zd;function Mq(){return Vd||(Vd=new Ir([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Vd)),Vd}function Iq(){return zd||(zd=new Ir,Object.freeze(zd)),zd}function HE(t){if(t>Math.PI*2)throw Error("expected radians")}function Oq(t,e,n,r,s,i){const o=2*i/(n-e),c=2*i/(s-r),u=(n+e)/(n-e),d=(s+r)/(s-r),h=-1,p=-1,m=-2*i;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=u,t[9]=d,t[10]=h,t[11]=p,t[12]=0,t[13]=0,t[14]=m,t[15]=0,t}const Lq=new Uint8Array([0,255,255,255]),Nq={pickingSelectedColor:null,pickingHighlightColor:Lq,pickingActive:!1,pickingAttribute:!1};function jq(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Nq;const e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}const Dq=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,Fq=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,Bq={name:"picking",vs:Dq,fs:Fq,getUniforms:jq},Uq=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,Vq={name:"transform",vs:Uq,fs:null};class eu{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new eu(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:n="",fs:r="",defines:s={},inject:i={},varyings:o=[],bufferMode:c=35981,transpileToGLSL100:u=!1}=e,d=this._getModuleList(e.modules),h=this._getHash(n),p=this._getHash(r),m=d.map(C=>this._getHash(C.name)).sort(),y=o.map(C=>this._getHash(C)),E=Object.keys(s).sort(),b=Object.keys(i).sort(),T=[],P=[];for(const C of E)T.push(this._getHash(C)),T.push(this._getHash(s[C]));for(const C of b)P.push(this._getHash(C)),P.push(this._getHash(i[C]));const S="".concat(h,"/").concat(p,"D").concat(T.join("/"),"M").concat(m.join("/"),"I").concat(P.join("/"),"V").concat(y.join("/"),"H").concat(this.stateHash,"B").concat(c).concat(u?"T":"");if(!this._programCache[S]){const C=R7(this.gl,{vs:n,fs:r,modules:d,inject:i,defines:s,hookFunctions:this._hookFunctions,transpileToGLSL100:u});this._programCache[S]=new Ek(this.gl,{hash:S,vs:C.vs,fs:C.fs,varyings:o,bufferMode:c}),this._getUniforms[S]=C.getUniforms||(I=>{}),this._useCounts[S]=0}return this._useCounts[S]++,this._programCache[S]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),r={};let s=0;for(let i=0,o=this._defaultModules.length;i<o;++i){const c=this._defaultModules[i],u=c.name;n[s++]=c,r[u]=!0}for(let i=0,o=e.length;i<o;++i){const c=e[i],u=c.name;r[u]||(n[s++]=c,r[u]=!0)}return n.length=s,n}}const zq={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function $q(t,e,n){const r={};let s=e.indices;for(const i in e.attributes){const o=e.attributes[i],c=Gq(i);if(i==="indices")s=o;else if(o.constant)r[c]=o.value;else{const u=o.value,d={...o};delete d.value,r[c]=[new qe(t,u),d],Wq(i,d)}}if(s){const i=s.value||s;de(i instanceof Uint16Array||i instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:s.isIndexed===void 0?!0:s.isIndexed};r.indices=[new qe(t,{data:i,target:34963}),o]}return r}function Gq(t,e){const{attributeMap:n=zq}={};return n&&n[t]||t}function Wq(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}de(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const ta=2,Hq=1e4,qq="Model needs drawMode and vertexCount",qE=()=>{},Kq={};class Bk{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:r=ii("model")}=n;de(ph(e)),this.id=r,this.gl=e,this.id=n.id||ii("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||eu.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:r,fs:s,modules:i,defines:o,inject:c,varyings:u,bufferMode:d,transpileToGLSL100:h}=e;this.programProps={program:n,vs:r,fs:s,modules:i,defines:o,inject:c,varyings:u,bufferMode:d,transpileToGLSL100:h},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},de(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),qq)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:r,fs:s,modules:i,defines:o,inject:c,varyings:u,bufferMode:d,transpileToGLSL100:h}=e;this.programProps={program:n,vs:r,fs:s,modules:i,defines:o,inject:c,varyings:u,bufferMode:d,transpileToGLSL100:h},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return de(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return de(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=$q(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ka(e))return this;const n={};for(const r in e){const s=e[r];n[r]=s.getValue?s.getValue():s}return this.vertexArray.setAttributes(n),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return Ey(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:r,uniforms:s={},attributes:i={},transformFeedback:o=this.transformFeedback,parameters:c={},vertexArray:u=this.vertexArray}=e;this.setAttributes(i),this.updateModuleSettings(n),this.setUniforms(s);let d;xe.priority>=ta&&(d=this._logDrawCallStart(ta));const h=this.vertexArray.getDrawParams(),{isIndexed:p=h.isIndexed,indexType:m=h.indexType,indexOffset:y=h.indexOffset,vertexArrayInstanced:E=h.isInstanced}=this.props;E&&!this.isInstanced&&xe.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:b,instanceCount:T}=this,{onBeforeRender:P=qE,onAfterRender:S=qE}=this.props;P(),this.program.setUniforms(this.uniforms);const C=this.program.draw(Object.assign(Kq,e,{logPriority:d,uniforms:null,framebuffer:r,parameters:c,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:u,transformFeedback:o,isIndexed:p,indexType:m,isInstanced:b,instanceCount:T,offset:p?y:0}));return S(),xe.priority>=ta&&this._logDrawCallEnd(d,u,r),C}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:n=!0,feedbackBuffers:r,unbindModels:s=[]}=e;let{parameters:i}=e;r&&this._setFeedbackBuffers(r),n&&(i=Object.assign({},i,{35977:n})),s.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:i}))}finally{s.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return xe.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:r,fs:s,modules:i,inject:o,defines:c,varyings:u,bufferMode:d,transpileToGLSL100:h}=this.programProps;n=this.programManager.get({vs:r,fs:s,modules:i,inject:o,defines:c,varyings:u,bufferMode:d,transpileToGLSL100:h}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}de(n instanceof Ek,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new GH(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof qe&&n.delete()}}_setAnimationProps(e){this.animated&&de(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ka(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new Tk(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:Hq;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),xe.group(ta,">>> DRAWING MODEL ".concat(this.id),{collapsed:xe.level<=2})(),e}_logDrawCallEnd(e,n,r,s){if(e===void 0)return;const i=qH({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:c,unusedCount:u}=OE({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:d,count:h}=OE({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});h>0&&xe.log("MISSING UNIFORMS",Object.keys(d))(),u>0&&xe.log("UNUSED UNIFORMS",Object.keys(c))();const p=YH(this.vertexArray.configuration);xe.table(e,i)(),xe.table(e,o)(),xe.table(e+1,p)(),s&&s.log({logLevel:ta,message:"Rendered to ".concat(s.id)}),xe.groupEnd(ta)()}}class Yq{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:s}=n;return{attributes:Object.assign({},r,e.attributes),transformFeedback:s}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],r=e?n[e]:null;return r?r instanceof qe?r:r.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:n}=e,r=this.getBuffer(n);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&de(Be(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const s in this.feedbackMap){const i=this.feedbackMap[s];s in n&&(r[i]=s)}Object.assign(r,e.feedbackBuffers);for(const s in r){const i=r[s];if(typeof i=="string"){const o=n[i],{byteLength:c,usage:u,accessor:d}=o;r[s]=this._createNewBuffer(s,{byteLength:c,usage:u,accessor:d})}}return r}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}_setupTransformFeedback(e,n){let{model:r}=n;const{program:s}=r;e.transformFeedback=new Tk(this.gl,{program:s,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),s=this._getNextIndex();this.bindings[s]=this._updateBinding(this.bindings[s],{sourceBuffers:n,feedbackBuffers:r})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const s in this.feedbackMap){const i=this.feedbackMap[s];n[s]=e.feedbackBuffers[i],r[i]=e.sourceBuffers[s],de(r[i]instanceof qe)}return{sourceBuffers:n,feedbackBuffers:r}}_createNewBuffer(e,n){const r=new qe(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}const Xq="transform_uSampler_",Rf="transform_uSize_",KE="transform_position";function Zq(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:s}=t,o=Object.keys(n).length,c=null;const u={};let d=e,h={};if(o>0||r){const p=d.split(`
`),m=p.slice();if(p.forEach((y,E,b)=>{if(o>0){const T=nK(y,n);if(T){const{updatedLine:P,inject:S}=T;m[E]=P,h=T0([h,S]),Object.assign(u,T.samplerTextureMap),o--}}r&&!c&&(c=tK(y,r))}),r){de(s);const y="".concat(Rf).concat(r),E="uniform vec2 ".concat(y,`;
`),b="     vec2 ".concat(KE," = transform_getPos(").concat(y,`);
     gl_Position = vec4(`).concat(KE,`, 0, 1.);
`);h=T0([h,{"vs:#decl":E,"vs:#main-start":b}])}d=m.join(`
`)}return{vs:d,targetTextureType:c,inject:h,samplerTextureMap:u}}function Qq(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const s={};let i,o;n&&({width:i,height:o}=r,s["".concat(Rf).concat(n)]=[i,o]);for(const c in e)({width:i,height:o}=e[c]),s["".concat(Rf).concat(c)]=[i,o];return s}function Jq(t){return Mk(t,["attribute","in"])}function eK(t){const e="".concat(Xq).concat(t),n="".concat(Rf).concat(t),r="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}function tK(t,e){const n=Mk(t,["varying","out"]);return n&&n.name===e?n.type:null}function nK(t,e){const n={},r=Jq(t);if(!r)return null;const{type:s,name:i}=r;if(i&&e[i]){const o="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:c,sizeName:u,uniformDeclerations:d}=eK(i),h=F7(s),p="  ".concat(s," ").concat(i," = transform_getInput(").concat(c,", ").concat(u,").").concat(h,`;
`);return n[c]=i,{updatedLine:o,inject:{"vs:#decl":d,"vs:#main-start":p},samplerTextureMap:n}}return null}const rK={10241:9728,10240:9728,10242:33071,10243:33071},sK="transform_output";class iK{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,sourceTextures:r,framebuffer:s,targetTexture:i}=this.bindings[this.currentIndex],o=Object.assign({},n,e.attributes),c=Object.assign({},e.uniforms),u=Object.assign({},e.parameters);let d=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const p in this.samplerTextureMap){const m=this.samplerTextureMap[p];c[p]=r[m]}this._setSourceTextureParameters();const h=Qq({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:i});Object.assign(c,h)}return this.hasTargetTexture&&(d=!1,u.viewport=[0,0,s.width,s.height]),{attributes:o,framebuffer:s,uniforms:c,discard:d,parameters:u}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],r=mh(n);if(!e)return r;const s=r.constructor,i=B7(this.targetTextureType),o=new s(r.length*i/4);let c=0;for(let u=0;u<r.length;u+=4)for(let d=0;d<i;d++)o[c++]=r[u+d];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:r}=e;if(r instanceof In)return r;const s=n[r];return s?(this._targetRefTexName=r,this._createNewTexture(s)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:r={},_targetTexture:s}=e,i=this._createTargetTexture({sourceTextures:r,textureOrReference:s});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:r,targetTexture:i}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((r,s,i)=>{i[s]=s}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new qe(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),s=this._getNextIndex();this.bindings[s]=this._updateBinding(this.bindings[s],{sourceTextures:n,targetTexture:r})}}_updateBinding(e,n){const{sourceBuffers:r,sourceTextures:s,targetTexture:i}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,s),Object.assign(e.sourceBuffers,r),i){e.targetTexture=i;const{width:o,height:c}=i,{framebuffer:u}=e;u?(u.update({attachments:{36064:i},resizeAttachments:!1}),u.resize({width:o,height:c})):e.framebuffer=new At(this.gl,{id:"transform-framebuffer",width:o,height:c,attachments:{36064:i}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const r in n)n[r].setParameters(rK)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;const r=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:r}}_createNewTexture(e){const n=OW(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:n,targetTexture:r}=this.bindings[this.currentIndex],{vs:s,uniforms:i,targetTextureType:o,inject:c,samplerTextureMap:u}=Zq({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),d=T0([e.inject||{},c]);this.targetTextureType=o,this.samplerTextureMap=u;const h=e._fs||Ik({version:bk(s),input:this.targetTextureVarying,inputType:o,output:sK}),p=this.hasSourceTextures||this.targetTextureVarying?[Vq].concat(e.modules||[]):e.modules;return{vs:s,fs:h,modules:p,uniforms:i,inject:d}}}class Cy{static isSupported(e){return Be(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:r}=this;e&&e.delete(),n&&n.delete(),r&&r.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:n=!0}=e,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=e||r.swap();de(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n){const s=r.getData(e);if(s)return s}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)r.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new Bk(n,Object.assign({},e,{fs:e.fs||Ik({version:bk(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const s of r)n=s.updateModelProps(n);return n}_buildResourceTransforms(e,n){oK(n)&&(this.bufferTransform=new Yq(e,n)),aK(n)&&(this.textureTransform=new iK(e,n)),de(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const s of r)n=Object.assign(n,s.getDrawOptions(n));return n}}function oK(t){return!!(!ka(t.feedbackBuffers)||!ka(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function aK(t){return!!(!ka(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}const YE={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class lK{static get DRAW_MODE(){return YE}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=ii("geometry"),drawMode:r=YE.TRIANGLES,attributes:s={},indices:i=null,vertexCount:o=null}=e;this.id=n,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(s,i),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const r in e){let s=e[r];s=ArrayBuffer.isView(s)?{value:s}:s,de(ArrayBuffer.isView(s.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),(r==="POSITION"||r==="positions")&&!s.size&&(s.size=3),r==="indices"?(de(!this.indices),this.indices=s):this.attributes[r]=s}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const s in e){const i=e[s],{value:o,size:c,constant:u}=i;!u&&o&&c>=1&&(r=Math.min(r,o.length/c))}return de(Number.isFinite(r)),r}}let cK=1,uK=1;class Uk{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:s=1,repeat:i=1}=e,o=cK++,c={time:0,delay:n,duration:r,rate:s,repeat:i};return this._setChannelTime(c,this.time),this.channels.set(o,c),o}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const s of n)this._setChannelTime(s,this.time);const r=this.animations.values();for(const s of r){const{animation:i,channel:o}=s;i.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=uK++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,s=e.duration*e.repeat;r>=s?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}const dK=[255,255,255],fK=1;let hK=0;class pK{constructor(e={}){R(this,"id",void 0),R(this,"color",void 0),R(this,"intensity",void 0),R(this,"type","ambient");const{color:n=dK}=e,{intensity:r=fK}=e;this.id=e.id||"ambient-".concat(hK++),this.color=n,this.intensity=r}}const gK=[255,255,255],mK=1,vK=[0,0,-1];let yK=0;class XE{constructor(e={}){R(this,"id",void 0),R(this,"color",void 0),R(this,"intensity",void 0),R(this,"type","directional"),R(this,"direction",void 0),R(this,"shadow",void 0);const{color:n=gK}=e,{intensity:r=mK}=e,{direction:s=vK}=e,{_shadow:i=!1}=e;this.id=e.id||"directional-".concat(yK++),this.color=n,this.intensity=r,this.type="directional",this.direction=new Mr(s).normalize().toArray(),this.shadow=i}getProjectedLight(e){return this}}class _K{constructor(e,n={id:"pass"}){R(this,"id",void 0),R(this,"gl",void 0),R(this,"props",void 0);const{id:r}=n;this.id=r,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class Ry extends _K{constructor(...e){super(...e),R(this,"_lastRenderIndex",-1)}render(e){const n=this.gl;return is(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:r,viewports:s,views:i,onViewportActive:o,clearStack:c=!0,clearCanvas:u=!0}=e;e.pass=e.pass||"unknown";const d=this.gl;u&&bK(d,n),c&&(this._lastRenderIndex=-1);const h=[];for(const p of s){const m=i&&i[p.id];o==null||o(p);const y=this._getDrawLayerParams(p,e),E=p.subViewports||[p];for(const b of E){const T=this._drawLayersInViewport(d,{target:n,moduleParameters:r,viewport:b,view:m,pass:e.pass,layers:e.layers},y);h.push(T)}}return h}_getDrawLayerParams(e,{layers:n,pass:r,isPicking:s=!1,layerFilter:i,cullRect:o,effects:c,moduleParameters:u},d=!1){const h=[],p=Vk(this._lastRenderIndex+1),m={layer:n[0],viewport:e,isPicking:s,renderPass:r,cullRect:o},y={};for(let E=0;E<n.length;E++){const b=n[E],T=this._shouldDrawLayer(b,m,i,y),P={shouldDrawLayer:T};T&&!d&&(P.layerRenderIndex=p(b,T),P.moduleParameters=this._getModuleParameters(b,c,r,u),P.layerParameters=this.getLayerParameters(b,E,e)),h[E]=P}return h}_drawLayersInViewport(e,{layers:n,moduleParameters:r,pass:s,target:i,viewport:o,view:c},u){const d=wK(e,{moduleParameters:r,target:i,viewport:o});if(c&&c.props.clear){const p=c.props.clear===!0?{color:!0,depth:!0}:c.props.clear;rr(e,{scissorTest:!0,scissor:d},()=>Ey(e,p))}const h={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};is(e,{viewport:d});for(let p=0;p<n.length;p++){const m=n[p],{shouldDrawLayer:y,layerRenderIndex:E,moduleParameters:b,layerParameters:T}=u[p];if(y&&m.props.pickable&&h.pickableCount++,m.isComposite)h.compositeCount++;else if(y){h.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,E),b.viewport=o;try{m._drawLayer({moduleParameters:b,uniforms:{layerIndex:E},parameters:T})}catch(P){m.raiseError(P,"drawing ".concat(m," to ").concat(s))}}}return h}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,s){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(r){const c=n.layer.id;if(c in s||(s[c]=r(n)),!s[c])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,s){var i;const o=Object.assign(Object.create(((i=e.internalState)===null||i===void 0?void 0:i.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Ra(this.gl)});if(n)for(const u of n){var c;Object.assign(o,(c=u.getModuleParameters)===null||c===void 0?void 0:c.call(u,e))}return Object.assign(o,this.getModuleParameters(e,n),s)}}function Vk(t=0,e={}){const n={},r=(s,i)=>{const o=s.props._offset,c=s.id,u=s.parent&&s.parent.id;let d;if(u&&!(u in e)&&r(s.parent,!1),u in n){const h=n[u]=n[u]||Vk(e[u],e);d=h(s,i),n[c]=h}else Number.isFinite(o)?(d=o+(e[u]||0),n[c]=null):d=t;return i&&d>=t&&(t=d+1),e[c]=d,d};return r}function wK(t,{moduleParameters:e,target:n,viewport:r}){const s=n&&n.id!=="default-framebuffer",i=e&&e.devicePixelRatio||Ra(t),o=s?n.height:t.drawingBufferHeight,c=r;return[c.x*i,o-(c.y+c.height)*i,c.width*i,c.height*i]}function bK(t,e){const n=e?e.width:t.drawingBufferWidth,r=e?e.height:t.drawingBufferHeight;is(t,{viewport:[0,0,n,r]}),t.clear(16640)}class xK extends Ry{constructor(e,n){super(e,n),R(this,"shadowMap",void 0),R(this,"depthBuffer",void 0),R(this,"fbo",void 0),this.shadowMap=new In(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new ha(e,{format:33189,width:1,height:1}),this.fbo=new At(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;rr(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],s=Ra(this.gl),i=r.width*s,o=r.height*s;(i!==n.width||o!==n.height)&&n.resize({width:i,height:o}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const zk="#define SMOOTH_EDGE_RADIUS 0.5",EK=`
`.concat(zk,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),TK=`
`.concat(zk,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),SK={name:"geometry",vs:EK,fs:TK},PK=Object.keys(Ge).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(Ge[t],";")).join(""),AK=Object.keys(Er).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(Er[t],";")).join(""),CK=Object.keys(_0).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(_0[t],";")).join(""),RK="".concat(PK,`
`).concat(AK,`
`).concat(CK,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function kK(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function tu(t){let e={},n;return r=>{for(const s in r)if(!kK(r[s],e[s])){n=t(r),e=r;break}return n}}const ZE=[0,0,0,0],MK=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],$k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],IK=[0,0,0],Gk=[0,0,0],OK=tu(jK);function Wk(t,e,n=Gk){n.length<3&&(n=[n[0],n[1],0]);let r=n,s,i=!0;switch(e===Ge.LNGLAT_OFFSETS||e===Ge.METER_OFFSETS?s=n:s=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Er.WEB_MERCATOR:(e===Ge.LNGLAT||e===Ge.CARTESIAN)&&(s=[0,0,0],i=!1);break;case Er.WEB_MERCATOR_AUTO_OFFSET:e===Ge.LNGLAT?r=s:e===Ge.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],s=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case Er.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case Er.GLOBE:i=!1,s=null;break;default:i=!1}return{geospatialOrigin:s,shaderCoordinateOrigin:r,offsetMode:i}}function LK(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:s}=t;let{viewMatrix:i,viewProjectionMatrix:o}=t,c=ZE,u=ZE,d=t.cameraPosition;const{geospatialOrigin:h,shaderCoordinateOrigin:p,offsetMode:m}=Wk(t,e,n);return m&&(u=t.projectPosition(h||p),d=[d[0]-u[0],d[1]-u[1],d[2]-u[2]],u[3]=1,c=Jc([],u,o),i=r||i,o=$i([],s,i),o=$i([],o,MK)),{viewMatrix:i,viewProjectionMatrix:o,projectionCenter:c,originCommon:u,cameraPosCommon:d,shaderCoordinateOrigin:p,geospatialOrigin:h}}function NK({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=Ge.DEFAULT,coordinateOrigin:s=Gk,autoWrapLongitude:i=!1}){r===Ge.DEFAULT&&(r=t.isGeospatial?Ge.LNGLAT:Ge.CARTESIAN);const o=OK({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:s});return o.project_uWrapLongitude=i,o.project_uModelMatrix=n||$k,o}function jK({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:s,viewProjectionMatrix:i,originCommon:o,cameraPosCommon:c,shaderCoordinateOrigin:u,geospatialOrigin:d}=LK(t,n,r),h=t.getDistanceScales(),p=[t.width*e,t.height*e],m=Jc([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,y={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:u,project_uCommonOrigin:o.slice(0,3),project_uCenter:s,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:p,project_uDevicePixelRatio:e,project_uFocalDistance:m,project_uCommonUnitsPerMeter:h.unitsPerMeter,project_uCommonUnitsPerWorldUnit:h.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:IK,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:i,project_uModelMatrix:$k,project_uCameraPosition:c};if(d){const E=t.getDistanceScales(d);switch(n){case Ge.METER_OFFSETS:y.project_uCommonUnitsPerWorldUnit=E.unitsPerMeter,y.project_uCommonUnitsPerWorldUnit2=E.unitsPerMeter2;break;case Ge.LNGLAT:case Ge.LNGLAT_OFFSETS:t._pseudoMeters||(y.project_uCommonUnitsPerMeter=E.unitsPerMeter),y.project_uCommonUnitsPerWorldUnit=E.unitsPerDegree,y.project_uCommonUnitsPerWorldUnit2=E.unitsPerDegree2;break;case Ge.CARTESIAN:y.project_uCommonUnitsPerWorldUnit=[1,1,E.unitsPerMeter[2]],y.project_uCommonUnitsPerWorldUnit2=[0,0,E.unitsPerMeter2[2]];break}}return y}const DK={};function FK(t=DK){return"viewport"in t?NK(t):{}}const ky={name:"project",dependencies:[z7,SK],vs:RK,getUniforms:FK};function BK(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function _a(t,e){const n=Jc([],e,t);return Aq(n,n,1/n[3]),n}function QE(t,e){const n=t%e;return n<0?e+n:n}function R0(t,e,n){return t<e?e:t>n?n:t}function UK(t){return Math.log(t)*Math.LOG2E}const My=Math.log2||UK;function os(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const nr=Math.PI,Hk=nr/4,Gn=nr/180,k0=180/nr,La=512,kf=4003e4,JE=85.051129,VK=1.5;function zK(t){return My(t)}function Mf(t){const[e,n]=t;os(Number.isFinite(e)),os(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*Gn,s=n*Gn,i=La*(r+nr)/(2*nr),o=La*(nr+Math.log(Math.tan(Hk+s*.5)))/(2*nr);return[i,o]}function Na(t){const[e,n]=t,r=e/La*(2*nr)-nr,s=2*(Math.atan(Math.exp(n/La*(2*nr)-nr))-Hk);return[r*k0,s*k0]}function $K(t){const{latitude:e}=t;os(Number.isFinite(e));const n=Math.cos(e*Gn);return zK(kf*n)-9}function am(t){const e=Math.cos(t*Gn);return La/kf/e}function M0(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;os(Number.isFinite(e)&&Number.isFinite(n));const s=La,i=Math.cos(e*Gn),o=s/360,c=o/i,u=s/kf/i,d={unitsPerMeter:[u,u,u],metersPerUnit:[1/u,1/u,1/u],unitsPerDegree:[o,c,u],degreesPerUnit:[1/o,1/c,1/u]};if(r){const h=Gn*Math.tan(e*Gn)/i,p=o*h/2,m=s/kf*h,y=m/c*u;d.unitsPerDegree2=[0,p,m],d.unitsPerMeter2=[y,0,y]}return d}function qk(t,e){const[n,r,s]=t,[i,o,c]=e,{unitsPerMeter:u,unitsPerMeter2:d}=M0({longitude:n,latitude:r,highPrecision:!0}),h=Mf(t);h[0]+=i*(u[0]+d[0]*o),h[1]+=o*(u[1]+d[1]*o);const p=Na(h),m=(s||0)+(c||0);return Number.isFinite(s)||Number.isFinite(c)?[p[0],p[1],m]:p}function GK(t){const{height:e,pitch:n,bearing:r,altitude:s,scale:i,center:o}=t,c=BK();Cf(c,c,[0,0,-s]),Dk(c,c,-n*Gn),Fk(c,c,r*Gn);const u=i/e;return Ay(c,c,[u,u,u]),o&&Cf(c,c,rq([],o)),c}function WK(t){const{width:e,height:n,altitude:r,pitch:s=0,offset:i,center:o,scale:c,nearZMultiplier:u=1,farZMultiplier:d=1}=t;let{fovy:h=If(VK)}=t;r!==void 0&&(h=If(r));const p=h*Gn,m=s*Gn,y=Kk(h);let E=y;o&&(E+=o[2]*c/Math.cos(m)/n);const b=p*(.5+(i?i[1]:0)/n),T=Math.sin(b)*E/Math.sin(R0(Math.PI/2-m-b,.01,Math.PI-.01)),P=Math.sin(m)*T+E,S=E*10,C=Math.min(P*d,S);return{fov:p,aspect:e/n,focalDistance:y,near:u,far:C}}function If(t){return 2*Math.atan(.5/t)*k0}function Kk(t){return .5/Math.tan(.5*t*Gn)}function Yk(t,e){const[n,r,s=0]=t;return os(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(s)),_a(e,[n,r,s,1])}function Iy(t,e,n=0){const[r,s,i]=t;if(os(Number.isFinite(r)&&Number.isFinite(s),"invalid pixel coordinate"),Number.isFinite(i))return _a(e,[r,s,i,1]);const o=_a(e,[r,s,0,1]),c=_a(e,[r,s,1,1]),u=o[2],d=c[2],h=u===d?0:((n||0)-u)/(d-u);return Lk([],o,c,h)}function HK(t){const{width:e,height:n,bounds:r,minExtent:s=0,maxZoom:i=24,offset:o=[0,0]}=t,[[c,u],[d,h]]=r,p=qK(t.padding),m=Mf([c,R0(h,-85.051129,JE)]),y=Mf([d,R0(u,-85.051129,JE)]),E=[Math.max(Math.abs(y[0]-m[0]),s),Math.max(Math.abs(y[1]-m[1]),s)],b=[e-p.left-p.right-Math.abs(o[0])*2,n-p.top-p.bottom-Math.abs(o[1])*2];os(b[0]>0&&b[1]>0);const T=b[0]/E[0],P=b[1]/E[1],S=(p.right-p.left)/2/T,C=(p.top-p.bottom)/2/P,I=[(y[0]+m[0])/2+S,(y[1]+m[1])/2+C],O=Na(I),D=Math.min(i,My(Math.abs(Math.min(T,P))));return os(Number.isFinite(D)),{longitude:O[0],latitude:O[1],zoom:D}}function qK(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(os(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const eT=Math.PI/180;function KK(t,e=0){const{width:n,height:r,unproject:s}=t,i={targetZ:e},o=s([0,r],i),c=s([n,r],i);let u,d;const h=t.fovy?.5*t.fovy*eT:Math.atan(.5/t.altitude),p=(90-t.pitch)*eT;return h>p-.01?(u=tT(t,0,e),d=tT(t,n,e)):(u=s([0,0],i),d=s([n,0],i)),[o,c,d,u]}function tT(t,e,n){const{pixelUnprojectionMatrix:r}=t,s=_a(r,[e,0,1,1]),i=_a(r,[e,t.height,1,1]),c=(n*t.distanceScales.unitsPerMeter[2]-s[2])/(i[2]-s[2]),u=Lk([],s,i,c),d=Na(u);return d.push(n),d}const nT=512;function YK(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:s,latitude:i,zoom:o,bearing:c=0}=t;(s<-180||s>180)&&(s=QE(s+180,360)-180),(c<-180||c>180)&&(c=QE(c+180,360)-180);const u=My(n/nT);if(o<=u)o=u,i=0;else{const d=n/2/Math.pow(2,o),h=Na([0,d])[1];if(i<h)i=h;else{const p=Na([0,nT-d])[1];i>p&&(i=p)}}return{width:e,height:n,longitude:s,latitude:i,zoom:o,pitch:r,bearing:c}}const XK=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,ZK=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,QK=tu(rY),JK=tu(sY),eY=[0,0,0,1],tY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function nY(t,e){const[n,r,s]=t,i=Iy([n,r,s],e);return Number.isFinite(s)?i:[i[0],i[1],0]}function rY({viewport:t,center:e}){return new Ir(t.viewProjectionMatrix).invert().transform(e)}function sY({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,s=t.isGeospatial?void 0:1,i=[[0,0,s],[t.width,0,s],[0,t.height,s],[t.width,t.height,s],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>nY(o,r));for(const o of e){const c=o.clone().translate(new Mr(t.center).negate()),u=i.map(h=>c.transform(h)),d=new Ir().ortho({left:Math.min(...u.map(h=>h[0])),right:Math.max(...u.map(h=>h[0])),bottom:Math.min(...u.map(h=>h[1])),top:Math.max(...u.map(h=>h[1])),near:Math.min(...u.map(h=>-h[2])),far:Math.max(...u.map(h=>-h[2]))});n.push(d.multiplyRight(o))}return n}function iY(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||eY,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},s=QK({viewport:t.viewport,center:e.project_uCenter}),i=[],o=JK({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let c=0;c<t.shadowMatrices.length;c++){const u=o[c],d=u.clone().translate(new Mr(t.viewport.center).negate());e.project_uCoordinateSystem===Ge.LNGLAT&&e.project_uProjectionMode===Er.WEB_MERCATOR?(o[c]=d,i[c]=s):(o[c]=u.clone().multiplyRight(tY),i[c]=d.transform(s))}for(let c=0;c<o.length;c++)r["shadow_uViewProjectionMatrices[".concat(c,"]")]=o[c],r["shadow_uProjectCenters[".concat(c,"]")]=i[c],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(c)]=t.shadowMaps[c]:r["shadow_uShadowMap".concat(c)]=t.dummyShadowMap;return r}const lm={name:"shadow",dependencies:[ky],vs:XK,fs:ZK,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?iY(t,e):{}},oY={color:[255,255,255],intensity:1},rT=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],aY=[0,0,0,200/255];class Xk{constructor(e={}){R(this,"id","lighting-effect"),R(this,"props",void 0),R(this,"shadowColor",aY),R(this,"shadow",void 0),R(this,"ambientLight",void 0),R(this,"directionalLights",void 0),R(this,"pointLights",void 0),R(this,"shadowPasses",[]),R(this,"shadowMaps",[]),R(this,"dummyShadowMap",null),R(this,"programManager",void 0),R(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.props=e}preRender(e,{layers:n,layerFilter:r,viewports:s,onViewportActive:i,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=eu.getDefaultProgramManager(e),lm&&this.programManager.addDefaultModule(lm)),this.dummyShadowMap||(this.dummyShadowMap=new In(e,{width:1,height:1}));for(let c=0;c<this.shadowPasses.length;c++)this.shadowPasses[c].render({layers:n,layerFilter:r,viewports:s,onViewportActive:i,views:o,moduleParameters:{shadowLightId:c,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(lm),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new Ir().lookAt({eye:new Mr(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new xK(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new pK(oY),this.directionalLights.push(new XE(rT[0]),new XE(rT[1])))}}class lY{constructor(e={}){R(this,"_pool",[]),R(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:s,padding:i=0,copy:o=!1,initialize:c=!1,maxCount:u}){const d=s||e&&e.constructor||Float32Array,h=n*r+i;if(ArrayBuffer.isView(e)){if(h<=e.length)return e;if(h*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new d(e.buffer,0,h)}let p=1/0;u&&(p=u*r+i);const m=this._allocate(d,h,c,p);return e&&o?m.set(e):c||m.fill(0,0,4),this._release(e),m}release(e){this._release(e)}_allocate(e,n,r,s){let i=Math.max(Math.ceil(n*this.opts.overAlloc),1);i>s&&(i=s);const o=this._pool,c=e.BYTES_PER_ELEMENT*i,u=o.findIndex(d=>d.byteLength>=c);if(u>=0){const d=new e(o.splice(u,1)[0],0,i);return r&&d.fill(0),d}return new e(i)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:s}=r,i=n.findIndex(o=>o.byteLength>=s);i<0?n.push(r):(i>0||n.length<this.opts.poolSize)&&n.splice(i,0,r),n.length>this.opts.poolSize&&n.shift()}}const jc=new lY;function sc(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function cY(t){return[t[12],t[13],t[14]]}function uY(t){return{left:na(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:na(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:na(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:na(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:na(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:na(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const sT=new Mr;function na(t,e,n,r){sT.set(t,e,n);const s=sT.len();return{distance:r/s,normal:new Mr(-t/s,-e/s,-n/s)}}function dY(t){return t-Math.fround(t)}let Yl;function cm(t,e){const{size:n=1,startIndex:r=0}=e,s=e.endIndex!==void 0?e.endIndex:t.length,i=(s-r)/n;Yl=jc.allocate(Yl,i,{type:Float32Array,size:n*2});let o=r,c=0;for(;o<s;){for(let u=0;u<n;u++){const d=t[o++];Yl[c+u]=d,Yl[c+u+n]=dY(d)}c+=n*2}return Yl.subarray(0,i*n*2)}function fY(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}const hY=Math.PI/180,pY=sc(),iT=[0,0,0],gY={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function mY({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:s,padding:i,near:o,far:c}){const u=t/e,d=n?new Ir().orthographic({fovy:r,aspect:u,focalDistance:s,near:o,far:c}):new Ir().perspective({fovy:r,aspect:u,near:o,far:c});if(i){const{left:h=0,right:p=0,top:m=0,bottom:y=0}=i,E=Qs((h+t-p)/2,0,t)-t/2,b=Qs((m+e-y)/2,0,e)-e/2;d[8]-=E*2/t,d[9]+=b*2/e}return d}class Ka{constructor(e={}){R(this,"id",void 0),R(this,"x",void 0),R(this,"y",void 0),R(this,"width",void 0),R(this,"height",void 0),R(this,"padding",void 0),R(this,"isGeospatial",void 0),R(this,"zoom",void 0),R(this,"focalDistance",void 0),R(this,"position",void 0),R(this,"modelMatrix",void 0),R(this,"distanceScales",void 0),R(this,"scale",void 0),R(this,"center",void 0),R(this,"cameraPosition",void 0),R(this,"projectionMatrix",void 0),R(this,"viewMatrix",void 0),R(this,"viewMatrixUncentered",void 0),R(this,"viewMatrixInverse",void 0),R(this,"viewProjectionMatrix",void 0),R(this,"pixelProjectionMatrix",void 0),R(this,"pixelUnprojectionMatrix",void 0),R(this,"resolution",void 0),R(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||gY,this.focalDistance=e.focalDistance||1,this.position=e.position||iT,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Er.WEB_MERCATOR:Er.WEB_MERCATOR_AUTO_OFFSET:Er.IDENTITY}equals(e){return e instanceof Ka?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Nc(e.projectionMatrix,this.projectionMatrix)&&Nc(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),s=Yk(r,this.pixelProjectionMatrix),[i,o]=s,c=n?o:this.height-o;return e.length===2?[i,c]:[i,c,s[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[s,i,o]=e,c=n?i:this.height-i,u=r&&r*this.distanceScales.unitsPerMeter[2],d=Iy([s,c,o],this.pixelUnprojectionMatrix,u),[h,p,m]=this.unprojectPosition(d);return Number.isFinite(o)?[h,p,m]:Number.isFinite(r)?[h,p,r]:[h,p]}projectPosition(e){const[n,r]=this.projectFlat(e),s=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,s]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),s=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,s]}projectFlat(e){if(this.isGeospatial){const n=Mf(e);return n[1]=Qs(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?Na(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),s=this.unproject([this.width,0],n),i=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(r[0],s[0],i[0],o[0]),Math.min(r[1],s[1],i[1],o[1]),Math.max(r[0],s[0],i[0],o[0]),Math.max(r[1],s[1],i[1],o[1])]}getDistanceScales(e){return e?M0({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:s=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+s}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,uY(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=$K({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||M0({latitude:r,longitude:n}));const s=Math.pow(2,this.zoom);this.scale=s;const{position:i,modelMatrix:o}=e;let c=iT;if(i&&(c=o?new Ir(o).transformAsVector(i,[]):i),this.isGeospatial){const u=this.projectPosition([n,r,0]);this.center=new Mr(c).scale(this.distanceScales.unitsPerMeter).add(u)}else this.center=this.projectPosition(c)}_initMatrices(e){const{viewMatrix:n=pY,projectionMatrix:r=null,orthographic:s=!1,fovyRadians:i,fovy:o=75,near:c=.1,far:u=1e3,padding:d=null,focalDistance:h=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new Ir().multiplyRight(n).translate(new Mr(this.center).negate()),this.projectionMatrix=r||mY({width:this.width,height:this.height,orthographic:s,fovyRadians:i||o*hY,focalDistance:h,padding:d,near:c,far:u});const p=sc();$i(p,p,this.projectionMatrix),$i(p,p,this.viewMatrix),this.viewProjectionMatrix=p,this.viewMatrixInverse=A0([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=cY(this.viewMatrixInverse);const m=sc(),y=sc();Ay(m,m,[this.width/2,-this.height/2,1]),Cf(m,m,[1,-1,0]),$i(y,m,this.viewProjectionMatrix),this.pixelProjectionMatrix=y,this.pixelUnprojectionMatrix=A0(sc(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||He.warn("Pixel project matrix not invertible")()}}R(Ka,"displayName","Viewport");class ja extends Ka{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:s=0,pitch:i=0,bearing:o=0,nearZMultiplier:c=.1,farZMultiplier:u=1.01,nearZ:d,farZ:h,orthographic:p=!1,projectionMatrix:m,repeat:y=!1,worldOffset:E=0,position:b,padding:T,legacyMeterSizes:P=!1}=e;let{width:S,height:C,altitude:I=1.5}=e;const O=Math.pow(2,s);S=S||1,C=C||1;let D,U=null;if(m)I=m[5]/2,D=If(I);else{e.fovy?(D=e.fovy,I=Kk(D)):D=If(I);let W;if(T){const{top:V=0,bottom:Q=0}=T;W=[0,Qs((V+C-Q)/2,0,C)-C/2]}U=WK({width:S,height:C,scale:O,center:b&&[0,0,b[2]*am(n)],offset:W,pitch:i,fovy:D,nearZMultiplier:c,farZMultiplier:u}),Number.isFinite(d)&&(U.near=d),Number.isFinite(h)&&(U.far=h)}let G=GK({height:C,pitch:i,bearing:o,scale:O,altitude:I});E&&(G=new Ir().translate([512*E,0,0]).multiplyLeft(G)),super({...e,width:S,height:C,viewMatrix:G,longitude:r,latitude:n,zoom:s,...U,fovy:D,focalDistance:I}),R(this,"longitude",void 0),R(this,"latitude",void 0),R(this,"pitch",void 0),R(this,"bearing",void 0),R(this,"altitude",void 0),R(this,"fovy",void 0),R(this,"orthographic",void 0),R(this,"_subViewports",void 0),R(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=r,this.zoom=s,this.pitch=i,this.bearing=o,this.altitude=I,this.fovy=D,this.orthographic=p,this._subViewports=y?[]:null,this._pseudoMeters=P,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let s=n;s<=r;s++){const i=s?new ja({...this,worldOffset:s}):this;this._subViewports.push(i)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),s=(e[2]||0)*am(e[1]);return[n,r,s]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),s=(e[2]||0)/am(r);return[n,r,s]}addMetersToLngLat(e,n){return qk(e,n)}panByPosition(e,n){const r=Iy(n,this.pixelUnprojectionMatrix),s=this.projectFlat(e),i=WE([],s,Z7([],r)),o=WE([],this.center,i),[c,u]=this.unprojectFlat(o);return{longitude:c,latitude:u}}getBounds(e={}){const n=KK(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:s}=this,{longitude:i,latitude:o,zoom:c}=HK({width:r,height:s,bounds:e,...n});return new ja({width:r,height:s,longitude:i,latitude:o,zoom:c})}}R(ja,"displayName","WebMercatorViewport");const oT=[0,0,0];function um(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof ja){const[s,i,o=0]=t,c=e.getDistanceScales([s,i]);r[2]=o*c.unitsPerMeter[2]}return r}function vY(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:s,fromCoordinateSystem:i,fromCoordinateOrigin:o}=t;return s===Ge.DEFAULT&&(s=e.isGeospatial?Ge.LNGLAT:Ge.CARTESIAN),i===void 0&&(i=s),o===void 0&&(o=r),{viewport:e,coordinateSystem:s,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:i,fromCoordinateOrigin:o}}function Zk(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:s,offsetMode:i}){let[o,c,u=0]=t;switch(n&&([o,c,u]=Jc([],[o,c,u,1],n)),r){case Ge.LNGLAT:return um([o,c,u],e,i);case Ge.LNGLAT_OFFSETS:return um([o+s[0],c+s[1],u+(s[2]||0)],e,i);case Ge.METER_OFFSETS:return um(qk(s,[o,c,u]),e,i);case Ge.CARTESIAN:default:return e.isGeospatial?[o+s[0],c+s[1],u+s[2]]:e.projectPosition([o,c,u])}}function yY(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:s,modelMatrix:i,fromCoordinateSystem:o,fromCoordinateOrigin:c}=vY(e),{autoOffset:u=!0}=e,{geospatialOrigin:d=oT,shaderCoordinateOrigin:h=oT,offsetMode:p=!1}=u?Wk(n,r,s):{},m=Zk(t,{viewport:n,modelMatrix:i,coordinateSystem:o,coordinateOrigin:c,offsetMode:p});if(p){const y=n.projectPosition(d||h);fq(m,m,y)}return m}const aT={blendFunc:[1,0,32771,0],blendEquation:32774};class Qk extends Ry{constructor(...e){super(...e),R(this,"pickZ",void 0),R(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:s,onViewportActive:i,pickingFBO:o,deviceRect:{x:c,y:u,width:d,height:h},cullRect:p,effects:m,pass:y="picking",pickZ:E,moduleParameters:b}){const T=this.gl;this.pickZ=E;const P=this._resetColorEncoder(E),S=rr(T,{scissorTest:!0,scissor:[c,u,d,h],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...aT,blend:!E},()=>super.render({target:o,layers:e,layerFilter:n,views:r,viewports:s,onViewportActive:i,cullRect:p,effects:m==null?void 0:m.filter(I=>I.useInPicking),pass:y,isPicking:!0,moduleParameters:b}));return this._colorEncoderState=null,{decodePickingColor:P&&wY.bind(null,P),stats:S}}shouldDrawLayer(e){const{pickable:n,operation:r}=e.props;return n&&r.includes("draw")||r.includes("terrain")||r.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,r){const s={...e.props.parameters},{pickable:i,operation:o}=e.props;return this._colorEncoderState?i&&o.includes("draw")&&(Object.assign(s,aT),s.blend=!0,s.blendColor=_Y(this._colorEncoderState,e,r)):s.blend=!1,o.includes("terrain")&&(s.blend=!1),s}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function _Y(t,e,n){const{byLayer:r,byAlpha:s}=t;let i,o=r.get(e);return o?(o.viewports.push(n),i=o.a):(i=r.size+1,i<=255?(o={a:i,layer:e,viewports:[n]},r.set(e,o),s[i]=o):(He.warn("Too many pickable layers, only picking the first 255")(),i=0)),[0,0,0,i/255]}function wY(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const aa={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},Of=Symbol.for("component"),Gi=Symbol.for("propTypes"),dm=Symbol.for("deprecatedProps"),wa=Symbol.for("asyncPropDefaults"),Zi=Symbol.for("asyncPropOriginal"),Js=Symbol.for("asyncPropResolved");function Jk(t,e=()=>!0){return Array.isArray(t)?eM(t,e,[]):e(t)?[t]:[]}function eM(t,e,n){let r=-1;for(;++r<t.length;){const s=t[r];Array.isArray(s)?eM(s,e,n):e(s)&&n.push(s)}return n}function bY({target:t,source:e,start:n=0,count:r=1}){const s=e.length,i=r*s;let o=0;for(let c=n;o<s;o++)t[c++]=e[o];for(;o<i;)o<i-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+i-o),o=i);return t}class xY{constructor(e,n,r){R(this,"id",void 0),R(this,"context",void 0),R(this,"isLoaded",void 0),R(this,"persistent",void 0),R(this,"_loadCount",0),R(this,"_subscribers",new Set),R(this,"_data",void 0),R(this,"_loader",void 0),R(this,"_error",void 0),R(this,"_content",void 0),this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let s=e;typeof e=="string"&&(s=Tf(e)),s instanceof Promise?(this.isLoaded=!1,this._loader=s.then(i=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=i)}).catch(i=>{this._loadCount===r&&(this.isLoaded=!0,this._error=i||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const i of this._subscribers)i.onChange(this.getData())}}class EY{constructor({gl:e,protocol:n}){R(this,"protocol",void 0),R(this,"_context",void 0),R(this,"_resources",void 0),R(this,"_consumers",void 0),R(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:s=!0}){let i=this._resources[e];i?i.setData(n,r):(i=new xY(e,n,this._context),this._resources[e]=i),i.persistent=s}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const s=n[r],i=this._resources[s.resourceId];i&&i.unsubscribe(s)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:s="default"}){const{_resources:i,protocol:o}=this;e.startsWith(o)&&(e=e.replace(o,""),i[e]||this.add({resourceId:e,data:null,persistent:!1}));const c=i[e];if(this._track(r,s,c,n),c)return c.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,s){const i=this._consumers,o=i[e]=i[e]||{},c=o[n]||{},u=c.resourceId&&this._resources[c.resourceId];u&&(u.unsubscribe(c),this.prune()),r&&(o[n]=c,c.onChange=s,c.resourceId=r.id,r.subscribe(c))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const TY=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,SY={name:"project32",dependencies:[ky],vs:TY},PY={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:#decl":`
uniform bool picking_uAttribute;
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...Bq},AY=[ky],CY=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function RY(t){const e=eu.getDefaultProgramManager(t);for(const n of AY)e.addDefaultModule(n);for(const n of CY)e.addShaderHook(n);return e}const kY="layerManager.setLayers",MY="layerManager.activateViewport";class IY{constructor(e,{deck:n,stats:r,viewport:s,timeline:i}={}){R(this,"layers",void 0),R(this,"context",void 0),R(this,"resourceManager",void 0),R(this,"_lastRenderedLayers",[]),R(this,"_needsRedraw",!1),R(this,"_needsUpdate",!1),R(this,"_nextLayers",null),R(this,"_debug",!1),R(this,"activateViewport",o=>{Qt(MY,this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new EY({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&RY(e),stats:r||new fy({id:"deck.gl"}),viewport:s||new Ka({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:i||new Uk,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const s=r.getNeedsRedraw(e);n=n||s}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){Qt(kY,this,n,e),this._lastRenderedLayers=e;const r=Jk(e,Boolean);for(const s of r)s.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,r){r.raiseError(n,"".concat(e," of ").concat(r))}_updateLayers(e,n){const r={};for(const o of e)r[o.id]?He.warn("Multiple old layers with same id ".concat(o.id))():r[o.id]=o;const s=[];this._updateSublayersRecursively(n,r,s),this._finalizeOldLayers(r);let i=!1;for(const o of s)if(o.hasUniformTransition()){i="Uniform transition in ".concat(o);break}this._needsUpdate=i,this.layers=s}_updateSublayersRecursively(e,n,r){for(const s of e){s.context=this.context;const i=n[s.id];i===null&&He.warn("Multiple new layers with same id ".concat(s.id))(),n[s.id]=null;let o=null;try{this._debug&&i!==s&&s.validateProps(),i?(this._transferLayerState(i,s),this._updateLayer(s)):this._initializeLayer(s),r.push(s),o=s.isComposite?s.getSubLayers():null}catch(c){this._handleError("matching",c,s)}o&&this._updateSublayersRecursively(o,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=aa.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=aa.MATCHED,n!==e&&(e.lifecycle=aa.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=aa.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=aa.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function Tr(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!Tr(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(const i of r)if(!e.hasOwnProperty(i)||!Tr(t[i],e[i],n-1))return!1;return!0}return!1}class OY{constructor(e){R(this,"width",void 0),R(this,"height",void 0),R(this,"views",void 0),R(this,"viewState",void 0),R(this,"controllers",void 0),R(this,"timeline",void 0),R(this,"_viewports",void 0),R(this,"_viewportMap",void 0),R(this,"_isUpdating",void 0),R(this,"_needsRedraw",void 0),R(this,"_needsUpdate",void 0),R(this,"_eventManager",void 0),R(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),s={x:e[0],y:e[1]};for(let i=r.length-1;i>=0;--i){const o=r[i];if(o.containsPixel(s)){const c=e.slice();return c[0]-=o.x,c[1]-=o.y,o.unproject(c,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=Jk(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!Tr(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):He.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:i=>{var o;return(o=this.getView(e.id))===null||o===void 0?void 0:o.makeViewport({viewState:i,width:this.width,height:this.height})}})}_updateController(e,n,r,s){const i=e.controller;if(i&&r){const o={...n,...i,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return(!s||s.constructor!==i.type)&&(s=this._createController(e,o)),s&&s.setProps(o),s}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let s=e.length;s--;){const i=e[s],o=this.getViewState(i),c=i.makeViewport({viewState:o,width:this.width,height:this.height});let u=n[i.id];const d=!!i.controller;d&&!u&&(r=!0),(r||!d)&&u&&(u.finalize(),u=null),this.controllers[i.id]=this._updateController(i,o,c,u),c&&this._viewports.unshift(c)}for(const s in n){const i=n[s];i&&!this.controllers[s]&&i.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,s)=>!e[s].equals(n[s]))}}const LY=/([0-9]+\.?[0-9]*)(%|px)/;function zs(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=LY.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function $s(t,e){return t.relative?Math.round(t.position*e):t.position}function Bt(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class Da{constructor(e){R(this,"id",void 0),R(this,"viewportInstance",void 0),R(this,"_x",void 0),R(this,"_y",void 0),R(this,"_width",void 0),R(this,"_height",void 0),R(this,"_padding",void 0),R(this,"props",void 0);const{id:n,x:r=0,y:s=0,width:i="100%",height:o="100%",padding:c=null,viewportInstance:u}=e||{};Bt(!u||u instanceof Ka),this.viewportInstance=u,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=zs(r),this._y=zs(s),this._width=zs(i),this._height=zs(o),this._padding=c&&{left:zs(c.left||0),right:zs(c.right||0),top:zs(c.top||0),bottom:zs(c.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&Tr(this.props,e.props,2)}makeViewport({width:e,height:n,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const s=this.getDimensions({width:e,height:n});return!s.height||!s.width?null:new this.ViewportType({...r,...this.props,...s})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:$s(this._x,e),y:$s(this._y,n),width:$s(this._width,e),height:$s(this._height,n)};return this._padding&&(r.padding={left:$s(this._padding.left,e),top:$s(this._padding.top,n),right:$s(this._padding.right,e),bottom:$s(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class nu{constructor(e){R(this,"_inProgress",void 0),R(this,"_handle",void 0),R(this,"_timeline",void 0),R(this,"time",void 0),R(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(n=(r=this.settings).onStart)===null||n===void 0||n.call(r,this)}end(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}cancel(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:s}=this;this._handle=r.addChannel({delay:r.getTime(),duration:s.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const lT=()=>{},I0={BREAK:1,SNAP_TO_END:2,IGNORE:3},NY=t=>t,jY=I0.BREAK;class DY{constructor(e){R(this,"getControllerState",void 0),R(this,"props",void 0),R(this,"propsInTransition",void 0),R(this,"transition",void 0),R(this,"onViewStateChange",void 0),R(this,"onStateChange",void 0),R(this,"_onTransitionUpdate",n=>{const{time:r,settings:{interpolator:s,startProps:i,endProps:o,duration:c,easing:u}}=n,d=u(r/c),h=s.interpolateProps(i,o,d);this.propsInTransition=this.getControllerState({...this.props,...h}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new nu(e.timeline),this.onViewStateChange=e.onViewStateChange||lT,this.onStateChange=e.onStateChange||lT}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let s=r;if(this.transition.inProgress){const{interruption:i,endProps:o}=this.transition.settings;s={...r,...i===I0.SNAP_TO_END?o:this.propsInTransition||r}}this._triggerTransition(s,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&!!r}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===I0.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),s=this.getControllerState(n).shortestPathFrom(r),i=n.transitionInterpolator,o=i.getDuration?i.getDuration(e,n):n.transitionDuration;if(o===0)return;const c=i.initializeProps(e,s);this.propsInTransition={};const u={duration:o,easing:n.transitionEasing||NY,interpolator:i,interruption:n.transitionInterruption||jY,startProps:c.start,endProps:c.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(u),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}class FY{constructor(e){R(this,"_propsToCompare",void 0),R(this,"_propsToExtract",void 0),R(this,"_requiredProps",void 0);const{compare:n,extract:r,required:s}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=s}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!Nc(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},s={};for(const i of this._propsToExtract)(i in e||i in n)&&(r[i]=e[i],s[i]=n[i]);return this._checkRequiredProps(r),this._checkRequiredProps(s),{start:r,end:s}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const r=e[n];Bt(Number.isFinite(r)||Array.isArray(r),"".concat(n," is required for transition"))})}}const BY=["longitude","latitude","zoom","bearing","pitch"],UY=["longitude","latitude","zoom"];class tM extends FY{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:BY,required:UY},super(r.transitionProps),R(this,"opts",void 0),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:s,around:i}=this.opts;if(s&&i){const o=s(e),c=s(n),u=o.unproject(i);r.start.around=i,Object.assign(r.end,{around:c.project(u),aroundPosition:u,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const s={};for(const i of this._propsToExtract)s[i]=Af(e[i]||0,n[i]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const i=this.opts.makeViewport({...n,...s});Object.assign(s,i.panByPosition(n.aroundPosition,Af(e.around,n.around,r)))}return s}}const Gs={transitionDuration:0},VY=300,$d=t=>1-(1-t)*(1-t),ra={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},Ii={};class zY{constructor(e){R(this,"props",void 0),R(this,"state",{}),R(this,"transitionManager",void 0),R(this,"eventManager",void 0),R(this,"onViewStateChange",void 0),R(this,"onStateChange",void 0),R(this,"makeViewport",void 0),R(this,"_controllerState",void 0),R(this,"_events",{}),R(this,"_interactionState",{isDragging:!1}),R(this,"_customEvents",[]),R(this,"_eventStartBlocked",null),R(this,"_panMove",!1),R(this,"invertPan",!1),R(this,"dragMode","rotate"),R(this,"inertia",0),R(this,"scrollZoom",!0),R(this,"dragPan",!0),R(this,"dragRotate",!0),R(this,"doubleClickZoom",!0),R(this,"touchZoom",!0),R(this,"touchRotate",!1),R(this,"keyboard",!0),this.transitionManager=new DY({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;(e=this.eventManager)===null||e===void 0||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:s}=e;return[s.x-n,s.y-r]}isPointInBounds(e,n){const{width:r,height:s}=this.props;if(n&&n.handled)return!1;const i=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=s;return i&&n&&n.stopPropagation(),i}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?VY:0;const{scrollZoom:r=!0,dragPan:s=!0,dragRotate:i=!0,doubleClickZoom:o=!0,touchZoom:c=!0,touchRotate:u=!1,keyboard:d=!0}=e,h=!!this.onViewStateChange;this.toggleEvents(ra.WHEEL,h&&r),this.toggleEvents(ra.PAN,h),this.toggleEvents(ra.PINCH,h&&(c||u)),this.toggleEvents(ra.TRIPLE_PAN,h&&u),this.toggleEvents(ra.DOUBLE_TAP,h&&o),this.toggleEvents(ra.KEYBOARD,h&&d),this.scrollZoom=r,this.dragPan=s,this.dragRotate=i,this.doubleClickZoom=o,this.touchZoom=c,this.touchRotate=u,this.keyboard=d}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const s={...e.getViewportProps(),...n},i=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),i){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:s,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const s=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(s,Gs,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,Gs,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),s=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],i=this.controllerState.pan({pos:s}).panEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:$d},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,Gs,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),s=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],i=this.controllerState.rotate({pos:s}).rotateEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:$d},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();const{speed:r=.01,smooth:s=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:i}=e;let o=2/(1+Math.exp(-Math.abs(i*r)));i<0&&o!==0&&(o=1/o);const c=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(c,{...this._getTransitionProps({around:n}),transitionDuration:s?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,Gs,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,Gs,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),s=[r[0],r[1]+=e.velocityY*n/2],i=this.controllerState.rotate({pos:s});this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:$d},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Ii._startPinchRotation=e.rotation,Ii._lastPinchEvent=e,this.updateViewport(r,Gs,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,s=this.getCenter(e);n=n.zoom({pos:s,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:Ii._startPinchRotation-r})}return this.updateViewport(n,Gs,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Ii._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=Ii;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const s=this.getCenter(e);let i=this.controllerState.rotateEnd();const o=Math.log2(e.scale),c=(o-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),u=Math.pow(2,o+c*n/2);i=i.zoom({pos:s,scale:u}).zoomEnd(),this.updateViewport(i,{...this._getTransitionProps({around:s}),transitionDuration:n,transitionEasing:$d},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const s=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(s,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Ii._startPinchRotation=null,Ii._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),s=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(s,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:s,rotateSpeedX:i,rotateSpeedY:o}=this.keyboard===!0?{}:this.keyboard,{controllerState:c}=this;let u;const d={};switch(e.srcEvent.code){case"Minus":u=n?c.zoomOut(r).zoomOut(r):c.zoomOut(r),d.isZooming=!0;break;case"Equal":u=n?c.zoomIn(r).zoomIn(r):c.zoomIn(r),d.isZooming=!0;break;case"ArrowLeft":n?(u=c.rotateLeft(i),d.isRotating=!0):(u=c.moveLeft(s),d.isPanning=!0);break;case"ArrowRight":n?(u=c.rotateRight(i),d.isRotating=!0):(u=c.moveRight(s),d.isPanning=!0);break;case"ArrowUp":n?(u=c.rotateUp(o),d.isRotating=!0):(u=c.moveUp(s),d.isPanning=!0);break;case"ArrowDown":n?(u=c.rotateDown(o),d.isRotating=!0):(u=c.moveDown(s),d.isPanning=!0);break;default:return!1}return this.updateViewport(u,this._getTransitionProps(),d),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?Gs:e?{...n,transitionInterpolator:new tM({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class $Y{constructor(e,n){R(this,"_viewportProps",void 0),R(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const cT=5,GY=1.2;class WY extends $Y{constructor(e){const{width:n,height:r,latitude:s,longitude:i,zoom:o,bearing:c=0,pitch:u=0,altitude:d=1.5,position:h=[0,0,0],maxZoom:p=20,minZoom:m=0,maxPitch:y=60,minPitch:E=0,startPanLngLat:b,startZoomLngLat:T,startRotatePos:P,startBearing:S,startPitch:C,startZoom:I,normalize:O=!0}=e;Bt(Number.isFinite(i)),Bt(Number.isFinite(s)),Bt(Number.isFinite(o)),super({width:n,height:r,latitude:s,longitude:i,zoom:o,bearing:c,pitch:u,altitude:d,maxZoom:p,minZoom:m,maxPitch:y,minPitch:E,normalize:O,position:h},{startPanLngLat:b,startZoomLngLat:T,startRotatePos:P,startBearing:S,startPitch:C,startZoom:I}),R(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const i=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(i)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:s,startBearing:i,startPitch:o}=this.getState();if(!s||i===void 0||o===void 0)return this;let c;return e?c=this._getNewRotation(e,s,o,i):c={bearing:i+n,pitch:o+r},this._getUpdatedState(c)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:s,startZoomLngLat:i}=this.getState();if(i||(s=this.getViewportProps().zoom,i=this._unproject(n)||this._unproject(e)),!i)return this;const{maxZoom:o,minZoom:c}=this.getViewportProps();let u=s+Math.log2(r);u=Qs(u,c,o);const d=this.makeViewport({...this.getViewportProps(),zoom:u});return this._getUpdatedState({zoom:u,...d.panByPosition(i,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:s,longitude:i}=r;return Math.abs(s-n.bearing)>180&&(r.bearing=s<0?s+360:s-360),Math.abs(i-n.longitude)>180&&(r.longitude=i<0?i+360:i-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:s}=e;e.zoom=Qs(s,r,n);const{maxPitch:i,minPitch:o,pitch:c}=e;e.pitch=Qs(c,o,i);const{normalize:u=!0}=e;return u&&Object.assign(e,YK(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,s){const i=e[0]-n[0],o=e[1]-n[1],c=e[1],u=n[1],{width:d,height:h}=this.getViewportProps(),p=i/d;let m=0;o>0?Math.abs(h-u)>cT&&(m=o/(u-h)*GY):o<0&&u>cT&&(m=1-c/u),m=Qs(m,-1,1);const{minPitch:y,maxPitch:E}=this.getViewportProps(),b=s+180*p;let T=r;return m>0?T=r+m*(E-r):m<0&&(T=r-m*(y-r)),{pitch:T,bearing:b}}}class HY extends zY{constructor(...e){super(...e),R(this,"ControllerState",WY),R(this,"transition",{transitionDuration:300,transitionInterpolator:new tM({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),R(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class nM extends Da{get ViewportType(){return ja}get ControllerType(){return HY}}R(nM,"displayName","MapView");const qY=new Xk;function KY(t,e){var n,r;const s=(n=t.order)!==null&&n!==void 0?n:1/0,i=(r=e.order)!==null&&r!==void 0?r:1/0;return s-i}class YY{constructor(){R(this,"effects",void 0),R(this,"_resolvedEffects",[]),R(this,"_defaultEffects",[]),R(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(r=>r.id===e.id)){const r=n.findIndex(s=>KY(s,e)>0);r<0?n.push(e):n.splice(r,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(Tr(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const s of this.effects)n[s.id]=s;const r=[];for(const s of e){const i=n[s.id];i&&i!==s?i.setProps?(i.setProps(s.props),r.push(i)):(i.cleanup(),r.push(s)):r.push(s),delete n[s.id]}for(const s in n)n[s].cleanup();this.effects=r,this._resolvedEffects=r.concat(this._defaultEffects),e.some(s=>s instanceof Xk)||this._resolvedEffects.push(qY),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class XY extends Ry{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const ZY="deckRenderer.renderLayers";class QY{constructor(e){R(this,"gl",void 0),R(this,"layerFilter",void 0),R(this,"drawPickingColors",void 0),R(this,"drawLayersPass",void 0),R(this,"pickLayersPass",void 0),R(this,"renderCount",void 0),R(this,"_needsRedraw",void 0),R(this,"renderBuffers",void 0),R(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new XY(e),this.pickLayersPass=new Qk(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,r={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||At.getDefaultFramebuffer(this.gl)};r.effects&&this._preRender(r.effects,r);const s=this.lastPostProcessEffect?this.renderBuffers[0]:r.target,i=n.render({...r,target:s});r.effects&&this._postRender(r.effects,r),this.renderCount++,Qt(ZY,this,i,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const r of e)n.preRenderStats[r.id]=r.preRender(this.gl,n),r.postRender&&(this.lastPostProcessEffect=r.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new At(this.gl),new At(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:r}=this,s={...n,inputBuffer:r[0],swapBuffer:r[1],target:null};for(const i of e)if(i.postRender){if(i.id===this.lastPostProcessEffect){s.target=n.target,i.postRender(this.gl,s);break}const o=i.postRender(this.gl,s);s.inputBuffer=o,s.swapBuffer=o===r[0]?r[1]:r[0]}}}const JY={pickedColor:null,pickedObjectIndex:-1};function eX({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:s,deviceRect:i}){const{x:o,y:c,width:u,height:d}=i;let h=s*s,p=-1,m=0;for(let y=0;y<d;y++){const E=y+c-r,b=E*E;if(b>h)m+=4*u;else for(let T=0;T<u;T++){if(t[m+3]-1>=0){const S=T+o-n,C=S*S+b;C<=h&&(h=C,p=m)}m+=4}}if(p>=0){const y=t.slice(p,p+4),E=e(y);if(E){const b=Math.floor(p/4/u),T=p/4-b*u;return{...E,pickedColor:y,pickedX:o+T,pickedY:c+b}}He.error("Picked non-existent layer. Is picking buffer corrupt?")()}return JY}function tX({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const i=t.slice(r,r+4),o=i.join(",");if(!n.has(o)){const c=e(i);c?n.set(o,{...c,color:i}):He.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function rM({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:s,z:i}){let o=e[0];e.length>1&&(o=rX((t==null?void 0:t.pickedViewports)||e,{x:r,y:s}));let c;if(o){const u=[r-o.x,s-o.y];i!==void 0&&(u[2]=i),c=o.unproject(u)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:r,y:s,pixel:[r,s],coordinate:c,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function nX(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:s}=t,{pickedColor:i,pickedLayer:o,pickedObjectIndex:c}=e,u=o?[o]:[];if(r==="hover"){const p=n.index,m=n.layerId,y=o?o.props.id:null;if(y!==m||c!==p){if(y!==m){const E=s.find(b=>b.props.id===m);E&&u.unshift(E)}n.layerId=y,n.index=c,n.info=null}}const d=rM(t),h=new Map;return h.set(null,d),u.forEach(p=>{let m={...d};p===o&&(m.color=i,m.index=c,m.picked=!0),m=sM({layer:p,info:m,mode:r});const y=m.layer;p===o&&r==="hover"&&(n.info=m),h.set(y.id,m),r==="hover"&&y.updateAutoHighlight(m)}),h}function sM({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function rX(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class sX{constructor(e){R(this,"gl",void 0),R(this,"pickingFBO",void 0),R(this,"depthFBO",void 0),R(this,"pickLayersPass",void 0),R(this,"layerFilter",void 0),R(this,"lastPickedInfo",void 0),R(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new Qk(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:s},i=this.lastPickedInfo.info){const o=i&&i.layer&&i.layer.id,c=i&&i.viewport&&i.viewport.id,u=o?r.find(m=>m.id===o):null,d=c&&s.find(m=>m.id===c)||s[0],h=d&&d.unproject([e-d.x,n-d.y]);return{...i,...{x:e,y:n,viewport:d,coordinate:h,layer:u}}}_resizeBuffer(){var e,n;const{gl:r}=this;if(!this.pickingFBO&&(this.pickingFBO=new At(r),At.isSupported(r,{colorBufferFloat:!0}))){const s=new At(r);s.attach({36064:new In(r,{format:Be(r)?34836:6408,type:5126})}),this.depthFBO=s}(e=this.pickingFBO)===null||e===void 0||e.resize({width:r.canvas.width,height:r.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:r.canvas.width,height:r.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>this.pickLayersPass.shouldDrawLayer(r)&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:s,y:i,radius:o=0,depth:c=1,mode:u="query",unproject3D:d,onViewportActive:h,effects:p}){const m=this._getPickable(e),y=Ra(this.gl);if(!m)return{result:[],emptyInfo:rM({viewports:r,x:s,y:i,pixelRatio:y})};this._resizeBuffer();const E=Kg(this.gl,[s,i],!0),b=[E.x+Math.floor(E.width/2),E.y+Math.floor(E.height/2)],T=Math.round(o*y),{width:P,height:S}=this.pickingFBO,C=this._getPickingRect({deviceX:b[0],deviceY:b[1],deviceRadius:T,deviceWidth:P,deviceHeight:S}),I={x:s-o,y:i-o,width:o*2+1,height:o*2+1};let O;const D=[],U=new Set;for(let G=0;G<c;G++){let W;if(C){const Q=this._drawAndSample({layers:m,views:n,viewports:r,onViewportActive:h,deviceRect:C,cullRect:I,effects:p,pass:"picking:".concat(u)});W=eX({...Q,deviceX:b[0],deviceY:b[1],deviceRadius:T,deviceRect:C})}else W={pickedColor:null,pickedObjectIndex:-1};let V;if(W.pickedLayer&&d&&this.depthFBO){const{pickedColors:Q}=this._drawAndSample({layers:[W.pickedLayer],views:n,viewports:r,onViewportActive:h,deviceRect:{x:W.pickedX,y:W.pickedY,width:1,height:1},cullRect:I,effects:p,pass:"picking:".concat(u,":z")},!0);Q[3]&&(V=Q[0])}W.pickedLayer&&G+1<c&&(U.add(W.pickedLayer),W.pickedLayer.disablePickingIndex(W.pickedObjectIndex)),O=nX({pickInfo:W,lastPickedInfo:this.lastPickedInfo,mode:u,layers:m,viewports:r,x:s,y:i,z:V,pixelRatio:y});for(const Q of O.values())Q.layer&&D.push(Q);if(!W.pickedColor)break}for(const G of U)G.restorePickingColors();return{result:D,emptyInfo:O.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:s,y:i,width:o=1,height:c=1,mode:u="query",maxObjects:d=null,onViewportActive:h,effects:p}){const m=this._getPickable(e);if(!m)return[];this._resizeBuffer();const y=Ra(this.gl),E=Kg(this.gl,[s,i],!0),b=E.x,T=E.y+E.height,P=Kg(this.gl,[s+o,i+c],!0),S=P.x+P.width,C=P.y,I={x:b,y:C,width:S-b,height:T-C},O=this._drawAndSample({layers:m,views:n,viewports:r,onViewportActive:h,deviceRect:I,cullRect:{x:s,y:i,width:o,height:c},effects:p,pass:"picking:".concat(u)}),D=tX(O),U=new Map,G=Number.isFinite(d);for(let V=0;V<D.length;V++){var W;if(G&&d&&U.size>=d)break;const Q=D[V];let te={color:Q.pickedColor,layer:null,index:Q.pickedObjectIndex,picked:!0,x:s,y:i,pixelRatio:y};te=sM({layer:Q.pickedLayer,info:te,mode:u});const ae=(W=te.object)!==null&&W!==void 0?W:"".concat(te.layer.id,"[").concat(te.index,"]");U.has(ae)||U.set(ae,te)}return Array.from(U.values())}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:s,deviceRect:i,cullRect:o,effects:c,pass:u},d=!1){const h=d?this.depthFBO:this.pickingFBO,p={layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:s,pickingFBO:h,deviceRect:i,cullRect:o,effects:c,pass:u,pickZ:d,preRenderStats:{}};for(const S of c)S.useInPicking&&(p.preRenderStats[S.id]=S.preRender(this.gl,p));const{decodePickingColor:m}=this.pickLayersPass.render(p),{x:y,y:E,width:b,height:T}=i,P=new(d?Float32Array:Uint8Array)(b*T*4);return mh(h,{sourceX:y,sourceY:E,sourceWidth:b,sourceHeight:T,target:P}),{pickedColors:P,decodePickingColor:m}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:s,deviceHeight:i}){const o=Math.max(0,e-r),c=Math.max(0,n-r),u=Math.min(s,e+r+1)-o,d=Math.min(i,n+r+1)-c;return u<=0||d<=0?null:{x:o,y:c,width:u,height:d}}}const iX={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class oX{constructor(e){R(this,"el",null),R(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,iX),n.appendChild(this.el))}setTooltip(e,n,r){const s=this.el;if(s){if(typeof e=="string")s.innerText=e;else if(e)e.text&&(s.innerText=e.text),e.html&&(s.innerHTML=e.html),e.className&&(s.className=e.className);else{this.isVisible=!1,s.style.display="none";return}this.isVisible=!0,s.style.display="block",s.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),e&&typeof e=="object"&&"style"in e&&Object.assign(s.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}var fm={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var uT;function aX(){return uT||(uT=1,function(t){(function(e,n,r,s){var i=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),c="function",u=Math.round,d=Math.abs,h=Date.now;function p(k,M,N){return setTimeout(C(k,N),M)}function m(k,M,N){return Array.isArray(k)?(y(k,N[M],N),!0):!1}function y(k,M,N){var H;if(k)if(k.forEach)k.forEach(M,N);else if(k.length!==s)for(H=0;H<k.length;)M.call(N,k[H],H,k),H++;else for(H in k)k.hasOwnProperty(H)&&M.call(N,k[H],H,k)}function E(k,M,N){var H="DEPRECATED METHOD: "+M+`
`+N+` AT 
`;return function(){var ee=new Error("get-stack-trace"),fe=ee&&ee.stack?ee.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Oe=e.console&&(e.console.warn||e.console.log);return Oe&&Oe.call(e.console,H,fe),k.apply(this,arguments)}}var b;typeof Object.assign!="function"?b=function(M){if(M===s||M===null)throw new TypeError("Cannot convert undefined or null to object");for(var N=Object(M),H=1;H<arguments.length;H++){var ee=arguments[H];if(ee!==s&&ee!==null)for(var fe in ee)ee.hasOwnProperty(fe)&&(N[fe]=ee[fe])}return N}:b=Object.assign;var T=E(function(M,N,H){for(var ee=Object.keys(N),fe=0;fe<ee.length;)(!H||H&&M[ee[fe]]===s)&&(M[ee[fe]]=N[ee[fe]]),fe++;return M},"extend","Use `assign`."),P=E(function(M,N){return T(M,N,!0)},"merge","Use `assign`.");function S(k,M,N){var H=M.prototype,ee;ee=k.prototype=Object.create(H),ee.constructor=k,ee._super=H,N&&b(ee,N)}function C(k,M){return function(){return k.apply(M,arguments)}}function I(k,M){return typeof k==c?k.apply(M&&M[0]||s,M):k}function O(k,M){return k===s?M:k}function D(k,M,N){y(V(M),function(H){k.addEventListener(H,N,!1)})}function U(k,M,N){y(V(M),function(H){k.removeEventListener(H,N,!1)})}function G(k,M){for(;k;){if(k==M)return!0;k=k.parentNode}return!1}function W(k,M){return k.indexOf(M)>-1}function V(k){return k.trim().split(/\s+/g)}function Q(k,M,N){if(k.indexOf&&!N)return k.indexOf(M);for(var H=0;H<k.length;){if(N&&k[H][N]==M||!N&&k[H]===M)return H;H++}return-1}function te(k){return Array.prototype.slice.call(k,0)}function ae(k,M,N){for(var H=[],ee=[],fe=0;fe<k.length;){var Oe=k[fe][M];Q(ee,Oe)<0&&H.push(k[fe]),ee[fe]=Oe,fe++}return H=H.sort(function(pt,yt){return pt[M]>yt[M]}),H}function ie(k,M){for(var N,H,ee=M[0].toUpperCase()+M.slice(1),fe=0;fe<i.length;){if(N=i[fe],H=N?N+ee:M,H in k)return H;fe++}return s}var ve=1;function le(){return ve++}function ce(k){var M=k.ownerDocument||k;return M.defaultView||M.parentWindow||e}var K=/mobile|tablet|ip(ad|hone|od)|android/i,Y="ontouchstart"in e,Z=ie(e,"PointerEvent")!==s,F=Y&&K.test(navigator.userAgent),X="touch",Pe="pen",Ee="mouse",ke="kinect",Ce=25,se=1,pe=2,ue=4,be=8,Ne=1,De=2,st=4,vt=8,tn=16,wt=De|st,Lt=vt|tn,ui=wt|Lt,Wn=["x","y"],lr=["clientX","clientY"];function bt(k,M){var N=this;this.manager=k,this.callback=M,this.element=k.element,this.target=k.options.inputTarget,this.domHandler=function(H){I(k.options.enable,[k])&&N.handler(H)},this.init()}bt.prototype={handler:function(){},init:function(){this.evEl&&D(this.element,this.evEl,this.domHandler),this.evTarget&&D(this.target,this.evTarget,this.domHandler),this.evWin&&D(ce(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&U(this.element,this.evEl,this.domHandler),this.evTarget&&U(this.target,this.evTarget,this.domHandler),this.evWin&&U(ce(this.element),this.evWin,this.domHandler)}};function Ya(k){var M,N=k.options.inputClass;return N?M=N:Z?M=co:F?M=hs:Y?M=gs:M=fs,new M(k,iu)}function iu(k,M,N){var H=N.pointers.length,ee=N.changedPointers.length,fe=M&se&&H-ee===0,Oe=M&(ue|be)&&H-ee===0;N.isFirst=!!fe,N.isFinal=!!Oe,fe&&(k.session={}),N.eventType=M,ou(k,N),k.emit("hammer.input",N),k.recognize(N),k.session.prevInput=N}function ou(k,M){var N=k.session,H=M.pointers,ee=H.length;N.firstInput||(N.firstInput=lo(M)),ee>1&&!N.firstMultiple?N.firstMultiple=lo(M):ee===1&&(N.firstMultiple=!1);var fe=N.firstInput,Oe=N.firstMultiple,ht=Oe?Oe.center:fe.center,pt=M.center=di(H);M.timeStamp=h(),M.deltaTime=M.timeStamp-fe.timeStamp,M.angle=Za(ht,pt),M.distance=cr(ht,pt),au(N,M),M.offsetDirection=ds(M.deltaX,M.deltaY);var yt=Xa(M.deltaTime,M.deltaX,M.deltaY);M.overallVelocityX=yt.x,M.overallVelocityY=yt.y,M.overallVelocity=d(yt.x)>d(yt.y)?yt.x:yt.y,M.scale=Oe?uu(Oe.pointers,H):1,M.rotation=Oe?cu(Oe.pointers,H):0,M.maxPointers=N.prevInput?M.pointers.length>N.prevInput.maxPointers?M.pointers.length:N.prevInput.maxPointers:M.pointers.length,lu(N,M);var xt=k.element;G(M.srcEvent.target,xt)&&(xt=M.srcEvent.target),M.target=xt}function au(k,M){var N=M.center,H=k.offsetDelta||{},ee=k.prevDelta||{},fe=k.prevInput||{};(M.eventType===se||fe.eventType===ue)&&(ee=k.prevDelta={x:fe.deltaX||0,y:fe.deltaY||0},H=k.offsetDelta={x:N.x,y:N.y}),M.deltaX=ee.x+(N.x-H.x),M.deltaY=ee.y+(N.y-H.y)}function lu(k,M){var N=k.lastInterval||M,H=M.timeStamp-N.timeStamp,ee,fe,Oe,ht;if(M.eventType!=be&&(H>Ce||N.velocity===s)){var pt=M.deltaX-N.deltaX,yt=M.deltaY-N.deltaY,xt=Xa(H,pt,yt);fe=xt.x,Oe=xt.y,ee=d(xt.x)>d(xt.y)?xt.x:xt.y,ht=ds(pt,yt),k.lastInterval=M}else ee=N.velocity,fe=N.velocityX,Oe=N.velocityY,ht=N.direction;M.velocity=ee,M.velocityX=fe,M.velocityY=Oe,M.direction=ht}function lo(k){for(var M=[],N=0;N<k.pointers.length;)M[N]={clientX:u(k.pointers[N].clientX),clientY:u(k.pointers[N].clientY)},N++;return{timeStamp:h(),pointers:M,center:di(M),deltaX:k.deltaX,deltaY:k.deltaY}}function di(k){var M=k.length;if(M===1)return{x:u(k[0].clientX),y:u(k[0].clientY)};for(var N=0,H=0,ee=0;ee<M;)N+=k[ee].clientX,H+=k[ee].clientY,ee++;return{x:u(N/M),y:u(H/M)}}function Xa(k,M,N){return{x:M/k||0,y:N/k||0}}function ds(k,M){return k===M?Ne:d(k)>=d(M)?k<0?De:st:M<0?vt:tn}function cr(k,M,N){N||(N=Wn);var H=M[N[0]]-k[N[0]],ee=M[N[1]]-k[N[1]];return Math.sqrt(H*H+ee*ee)}function Za(k,M,N){N||(N=Wn);var H=M[N[0]]-k[N[0]],ee=M[N[1]]-k[N[1]];return Math.atan2(ee,H)*180/Math.PI}function cu(k,M){return Za(M[1],M[0],lr)+Za(k[1],k[0],lr)}function uu(k,M){return cr(M[0],M[1],lr)/cr(k[0],k[1],lr)}var xh={mousedown:se,mousemove:pe,mouseup:ue},Qa="mousedown",Ja="mousemove mouseup";function fs(){this.evEl=Qa,this.evWin=Ja,this.pressed=!1,bt.apply(this,arguments)}S(fs,bt,{handler:function(M){var N=xh[M.type];N&se&&M.button===0&&(this.pressed=!0),N&pe&&M.which!==1&&(N=ue),this.pressed&&(N&ue&&(this.pressed=!1),this.callback(this.manager,N,{pointers:[M],changedPointers:[M],pointerType:Ee,srcEvent:M}))}});var el={pointerdown:se,pointermove:pe,pointerup:ue,pointercancel:be,pointerout:be},tl={2:X,3:Pe,4:Ee,5:ke},Lr="pointerdown",Nr="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Lr="MSPointerDown",Nr="MSPointerMove MSPointerUp MSPointerCancel");function co(){this.evEl=Lr,this.evWin=Nr,bt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}S(co,bt,{handler:function(M){var N=this.store,H=!1,ee=M.type.toLowerCase().replace("ms",""),fe=el[ee],Oe=tl[M.pointerType]||M.pointerType,ht=Oe==X,pt=Q(N,M.pointerId,"pointerId");fe&se&&(M.button===0||ht)?pt<0&&(N.push(M),pt=N.length-1):fe&(ue|be)&&(H=!0),!(pt<0)&&(N[pt]=M,this.callback(this.manager,fe,{pointers:N,changedPointers:[M],pointerType:Oe,srcEvent:M}),H&&N.splice(pt,1))}});var du={touchstart:se,touchmove:pe,touchend:ue,touchcancel:be},fu="touchstart",hu="touchstart touchmove touchend touchcancel";function nl(){this.evTarget=fu,this.evWin=hu,this.started=!1,bt.apply(this,arguments)}S(nl,bt,{handler:function(M){var N=du[M.type];if(N===se&&(this.started=!0),!!this.started){var H=rl.call(this,M,N);N&(ue|be)&&H[0].length-H[1].length===0&&(this.started=!1),this.callback(this.manager,N,{pointers:H[0],changedPointers:H[1],pointerType:X,srcEvent:M})}}});function rl(k,M){var N=te(k.touches),H=te(k.changedTouches);return M&(ue|be)&&(N=ae(N.concat(H),"identifier")),[N,H]}var pu={touchstart:se,touchmove:pe,touchend:ue,touchcancel:be},fi="touchstart touchmove touchend touchcancel";function hs(){this.evTarget=fi,this.targetIds={},bt.apply(this,arguments)}S(hs,bt,{handler:function(M){var N=pu[M.type],H=hi.call(this,M,N);H&&this.callback(this.manager,N,{pointers:H[0],changedPointers:H[1],pointerType:X,srcEvent:M})}});function hi(k,M){var N=te(k.touches),H=this.targetIds;if(M&(se|pe)&&N.length===1)return H[N[0].identifier]=!0,[N,N];var ee,fe,Oe=te(k.changedTouches),ht=[],pt=this.target;if(fe=N.filter(function(yt){return G(yt.target,pt)}),M===se)for(ee=0;ee<fe.length;)H[fe[ee].identifier]=!0,ee++;for(ee=0;ee<Oe.length;)H[Oe[ee].identifier]&&ht.push(Oe[ee]),M&(ue|be)&&delete H[Oe[ee].identifier],ee++;if(ht.length)return[ae(fe.concat(ht),"identifier"),ht]}var Eh=2500,ps=25;function gs(){bt.apply(this,arguments);var k=C(this.handler,this);this.touch=new hs(this.manager,k),this.mouse=new fs(this.manager,k),this.primaryTouch=null,this.lastTouches=[]}S(gs,bt,{handler:function(M,N,H){var ee=H.pointerType==X,fe=H.pointerType==Ee;if(!(fe&&H.sourceCapabilities&&H.sourceCapabilities.firesTouchEvents)){if(ee)uo.call(this,N,H);else if(fe&&Th.call(this,H))return;this.callback(M,N,H)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function uo(k,M){k&se?(this.primaryTouch=M.changedPointers[0].identifier,fo.call(this,M)):k&(ue|be)&&fo.call(this,M)}function fo(k){var M=k.changedPointers[0];if(M.identifier===this.primaryTouch){var N={x:M.clientX,y:M.clientY};this.lastTouches.push(N);var H=this.lastTouches,ee=function(){var fe=H.indexOf(N);fe>-1&&H.splice(fe,1)};setTimeout(ee,Eh)}}function Th(k){for(var M=k.srcEvent.clientX,N=k.srcEvent.clientY,H=0;H<this.lastTouches.length;H++){var ee=this.lastTouches[H],fe=Math.abs(M-ee.x),Oe=Math.abs(N-ee.y);if(fe<=ps&&Oe<=ps)return!0}return!1}var gu=ie(o.style,"touchAction"),mu=gu!==s,ur="compute",sl="auto",ho="manipulation",jr="none",ms="pan-x",vs="pan-y",pi=Ph();function po(k,M){this.manager=k,this.set(M)}po.prototype={set:function(k){k==ur&&(k=this.compute()),mu&&this.manager.element.style&&pi[k]&&(this.manager.element.style[gu]=k),this.actions=k.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var k=[];return y(this.manager.recognizers,function(M){I(M.options.enable,[M])&&(k=k.concat(M.getTouchAction()))}),Sh(k.join(" "))},preventDefaults:function(k){var M=k.srcEvent,N=k.offsetDirection;if(this.manager.session.prevented){M.preventDefault();return}var H=this.actions,ee=W(H,jr)&&!pi[jr],fe=W(H,vs)&&!pi[vs],Oe=W(H,ms)&&!pi[ms];if(ee){var ht=k.pointers.length===1,pt=k.distance<2,yt=k.deltaTime<250;if(ht&&pt&&yt)return}if(!(Oe&&fe)&&(ee||fe&&N&wt||Oe&&N&Lt))return this.preventSrc(M)},preventSrc:function(k){this.manager.session.prevented=!0,k.preventDefault()}};function Sh(k){if(W(k,jr))return jr;var M=W(k,ms),N=W(k,vs);return M&&N?jr:M||N?M?ms:vs:W(k,ho)?ho:sl}function Ph(){if(!mu)return!1;var k={},M=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(N){k[N]=M?e.CSS.supports("touch-action",N):!0}),k}var Ke=1,nn=2,dr=4,Hn=8,rn=Hn,gi=16,hn=32;function sn(k){this.options=b({},this.defaults,k||{}),this.id=le(),this.manager=null,this.options.enable=O(this.options.enable,!0),this.state=Ke,this.simultaneous={},this.requireFail=[]}sn.prototype={defaults:{},set:function(k){return b(this.options,k),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(k){if(m(k,"recognizeWith",this))return this;var M=this.simultaneous;return k=Vt(k,this),M[k.id]||(M[k.id]=k,k.recognizeWith(this)),this},dropRecognizeWith:function(k){return m(k,"dropRecognizeWith",this)?this:(k=Vt(k,this),delete this.simultaneous[k.id],this)},requireFailure:function(k){if(m(k,"requireFailure",this))return this;var M=this.requireFail;return k=Vt(k,this),Q(M,k)===-1&&(M.push(k),k.requireFailure(this)),this},dropRequireFailure:function(k){if(m(k,"dropRequireFailure",this))return this;k=Vt(k,this);var M=Q(this.requireFail,k);return M>-1&&this.requireFail.splice(M,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(k){return!!this.simultaneous[k.id]},emit:function(k){var M=this,N=this.state;function H(ee){M.manager.emit(ee,k)}N<Hn&&H(M.options.event+pn(N)),H(M.options.event),k.additionalEvent&&H(k.additionalEvent),N>=Hn&&H(M.options.event+pn(N))},tryEmit:function(k){if(this.canEmit())return this.emit(k);this.state=hn},canEmit:function(){for(var k=0;k<this.requireFail.length;){if(!(this.requireFail[k].state&(hn|Ke)))return!1;k++}return!0},recognize:function(k){var M=b({},k);if(!I(this.options.enable,[this,M])){this.reset(),this.state=hn;return}this.state&(rn|gi|hn)&&(this.state=Ke),this.state=this.process(M),this.state&(nn|dr|Hn|gi)&&this.tryEmit(M)},process:function(k){},getTouchAction:function(){},reset:function(){}};function pn(k){return k&gi?"cancel":k&Hn?"end":k&dr?"move":k&nn?"start":""}function vu(k){return k==tn?"down":k==vt?"up":k==De?"left":k==st?"right":""}function Vt(k,M){var N=M.manager;return N?N.get(k):k}function gn(){sn.apply(this,arguments)}S(gn,sn,{defaults:{pointers:1},attrTest:function(k){var M=this.options.pointers;return M===0||k.pointers.length===M},process:function(k){var M=this.state,N=k.eventType,H=M&(nn|dr),ee=this.attrTest(k);return H&&(N&be||!ee)?M|gi:H||ee?N&ue?M|Hn:M&nn?M|dr:nn:hn}});function go(){gn.apply(this,arguments),this.pX=null,this.pY=null}S(go,gn,{defaults:{event:"pan",threshold:10,pointers:1,direction:ui},getTouchAction:function(){var k=this.options.direction,M=[];return k&wt&&M.push(vs),k&Lt&&M.push(ms),M},directionTest:function(k){var M=this.options,N=!0,H=k.distance,ee=k.direction,fe=k.deltaX,Oe=k.deltaY;return ee&M.direction||(M.direction&wt?(ee=fe===0?Ne:fe<0?De:st,N=fe!=this.pX,H=Math.abs(k.deltaX)):(ee=Oe===0?Ne:Oe<0?vt:tn,N=Oe!=this.pY,H=Math.abs(k.deltaY))),k.direction=ee,N&&H>M.threshold&&ee&M.direction},attrTest:function(k){return gn.prototype.attrTest.call(this,k)&&(this.state&nn||!(this.state&nn)&&this.directionTest(k))},emit:function(k){this.pX=k.deltaX,this.pY=k.deltaY;var M=vu(k.direction);M&&(k.additionalEvent=this.options.event+M),this._super.emit.call(this,k)}});function il(){gn.apply(this,arguments)}S(il,gn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[jr]},attrTest:function(k){return this._super.attrTest.call(this,k)&&(Math.abs(k.scale-1)>this.options.threshold||this.state&nn)},emit:function(k){if(k.scale!==1){var M=k.scale<1?"in":"out";k.additionalEvent=this.options.event+M}this._super.emit.call(this,k)}});function ys(){sn.apply(this,arguments),this._timer=null,this._input=null}S(ys,sn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[sl]},process:function(k){var M=this.options,N=k.pointers.length===M.pointers,H=k.distance<M.threshold,ee=k.deltaTime>M.time;if(this._input=k,!H||!N||k.eventType&(ue|be)&&!ee)this.reset();else if(k.eventType&se)this.reset(),this._timer=p(function(){this.state=rn,this.tryEmit()},M.time,this);else if(k.eventType&ue)return rn;return hn},reset:function(){clearTimeout(this._timer)},emit:function(k){this.state===rn&&(k&&k.eventType&ue?this.manager.emit(this.options.event+"up",k):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}});function _s(){gn.apply(this,arguments)}S(_s,gn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[jr]},attrTest:function(k){return this._super.attrTest.call(this,k)&&(Math.abs(k.rotation)>this.options.threshold||this.state&nn)}});function Dr(){gn.apply(this,arguments)}S(Dr,gn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:wt|Lt,pointers:1},getTouchAction:function(){return go.prototype.getTouchAction.call(this)},attrTest:function(k){var M=this.options.direction,N;return M&(wt|Lt)?N=k.overallVelocity:M&wt?N=k.overallVelocityX:M&Lt&&(N=k.overallVelocityY),this._super.attrTest.call(this,k)&&M&k.offsetDirection&&k.distance>this.options.threshold&&k.maxPointers==this.options.pointers&&d(N)>this.options.velocity&&k.eventType&ue},emit:function(k){var M=vu(k.offsetDirection);M&&this.manager.emit(this.options.event+M,k),this.manager.emit(this.options.event,k)}});function Fr(){sn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}S(Fr,sn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ho]},process:function(k){var M=this.options,N=k.pointers.length===M.pointers,H=k.distance<M.threshold,ee=k.deltaTime<M.time;if(this.reset(),k.eventType&se&&this.count===0)return this.failTimeout();if(H&&ee&&N){if(k.eventType!=ue)return this.failTimeout();var fe=this.pTime?k.timeStamp-this.pTime<M.interval:!0,Oe=!this.pCenter||cr(this.pCenter,k.center)<M.posThreshold;this.pTime=k.timeStamp,this.pCenter=k.center,!Oe||!fe?this.count=1:this.count+=1,this._input=k;var ht=this.count%M.taps;if(ht===0)return this.hasRequireFailures()?(this._timer=p(function(){this.state=rn,this.tryEmit()},M.interval,this),nn):rn}return hn},failTimeout:function(){return this._timer=p(function(){this.state=hn},this.options.interval,this),hn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==rn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function fr(k,M){return M=M||{},M.recognizers=O(M.recognizers,fr.defaults.preset),new vo(k,M)}fr.VERSION="2.0.7",fr.defaults={domEvents:!1,touchAction:ur,enable:!0,inputTarget:null,inputClass:null,preset:[[_s,{enable:!1}],[il,{enable:!1},["rotate"]],[Dr,{direction:wt}],[go,{direction:wt},["swipe"]],[Fr],[Fr,{event:"doubletap",taps:2},["tap"]],[ys]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ah=1,mo=2;function vo(k,M){this.options=b({},fr.defaults,M||{}),this.options.inputTarget=this.options.inputTarget||k,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=k,this.input=Ya(this),this.touchAction=new po(this,this.options.touchAction),yo(this,!0),y(this.options.recognizers,function(N){var H=this.add(new N[0](N[1]));N[2]&&H.recognizeWith(N[2]),N[3]&&H.requireFailure(N[3])},this)}vo.prototype={set:function(k){return b(this.options,k),k.touchAction&&this.touchAction.update(),k.inputTarget&&(this.input.destroy(),this.input.target=k.inputTarget,this.input.init()),this},stop:function(k){this.session.stopped=k?mo:Ah},recognize:function(k){var M=this.session;if(!M.stopped){this.touchAction.preventDefaults(k);var N,H=this.recognizers,ee=M.curRecognizer;(!ee||ee&&ee.state&rn)&&(ee=M.curRecognizer=null);for(var fe=0;fe<H.length;)N=H[fe],M.stopped!==mo&&(!ee||N==ee||N.canRecognizeWith(ee))?N.recognize(k):N.reset(),!ee&&N.state&(nn|dr|Hn)&&(ee=M.curRecognizer=N),fe++}},get:function(k){if(k instanceof sn)return k;for(var M=this.recognizers,N=0;N<M.length;N++)if(M[N].options.event==k)return M[N];return null},add:function(k){if(m(k,"add",this))return this;var M=this.get(k.options.event);return M&&this.remove(M),this.recognizers.push(k),k.manager=this,this.touchAction.update(),k},remove:function(k){if(m(k,"remove",this))return this;if(k=this.get(k),k){var M=this.recognizers,N=Q(M,k);N!==-1&&(M.splice(N,1),this.touchAction.update())}return this},on:function(k,M){if(k!==s&&M!==s){var N=this.handlers;return y(V(k),function(H){N[H]=N[H]||[],N[H].push(M)}),this}},off:function(k,M){if(k!==s){var N=this.handlers;return y(V(k),function(H){M?N[H]&&N[H].splice(Q(N[H],M),1):delete N[H]}),this}},emit:function(k,M){this.options.domEvents&&mi(k,M);var N=this.handlers[k]&&this.handlers[k].slice();if(!(!N||!N.length)){M.type=k,M.preventDefault=function(){M.srcEvent.preventDefault()};for(var H=0;H<N.length;)N[H](M),H++}},destroy:function(){this.element&&yo(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function yo(k,M){var N=k.element;if(N.style){var H;y(k.options.cssProps,function(ee,fe){H=ie(N.style,fe),M?(k.oldCssProps[H]=N.style[H],N.style[H]=ee):N.style[H]=k.oldCssProps[H]||""}),M||(k.oldCssProps={})}}function mi(k,M){var N=n.createEvent("Event");N.initEvent(k,!0,!0),N.gesture=M,M.target.dispatchEvent(N)}b(fr,{INPUT_START:se,INPUT_MOVE:pe,INPUT_END:ue,INPUT_CANCEL:be,STATE_POSSIBLE:Ke,STATE_BEGAN:nn,STATE_CHANGED:dr,STATE_ENDED:Hn,STATE_RECOGNIZED:rn,STATE_CANCELLED:gi,STATE_FAILED:hn,DIRECTION_NONE:Ne,DIRECTION_LEFT:De,DIRECTION_RIGHT:st,DIRECTION_UP:vt,DIRECTION_DOWN:tn,DIRECTION_HORIZONTAL:wt,DIRECTION_VERTICAL:Lt,DIRECTION_ALL:ui,Manager:vo,Input:bt,TouchAction:po,TouchInput:hs,MouseInput:fs,PointerEventInput:co,TouchMouseInput:gs,SingleTouchInput:nl,Recognizer:sn,AttrRecognizer:gn,Tap:Fr,Pan:go,Swipe:Dr,Pinch:il,Rotate:_s,Press:ys,on:D,off:U,each:y,merge:P,extend:T,assign:b,inherit:S,bindFn:C,prefixed:ie});var Ch=typeof e<"u"?e:typeof self<"u"?self:{};Ch.Hammer=fr,t.exports?t.exports=fr:e[r]=fr})(window,document,"Hammer")}(fm)),fm.exports}var ru=aX();const lX=jf(ru),yr=HT({__proto__:null,default:lX},[ru]),iM=1,oM=2,O0=4,cX={mousedown:iM,mousemove:oM,mouseup:O0};function uX(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function dX(t){const e=t.prototype.handler;t.prototype.handler=function(r){const s=this.store;r.button>0&&r.type==="pointerdown"&&(uX(s,i=>i.pointerId===r.pointerId)||s.push(r)),e.call(this,r)}}function fX(t){t.prototype.handler=function(n){let r=cX[n.type];r&iM&&n.button>=0&&(this.pressed=!0),r&oM&&n.buttons===0&&(r=O0),this.pressed&&(r&O0&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}dX(ru.PointerEventInput);fX(ru.MouseInput);const hX=ru.Manager;class vh{constructor(e,n,r){this.element=e,this.callback=n,this.options={enable:!0,...r}}}const pX=yr?[[yr.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[yr.Rotate,{enable:!1}],[yr.Pinch,{enable:!1}],[yr.Swipe,{enable:!1}],[yr.Pan,{threshold:0,enable:!1}],[yr.Press,{enable:!1}],[yr.Tap,{event:"doubletap",taps:2,enable:!1}],[yr.Tap,{event:"anytap",enable:!1}],[yr.Tap,{enable:!1}]]:null,dT={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},gX={doubletap:["tap"]},mX={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Oy={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},vX={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},fT={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},yX=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",pa=typeof window<"u"?window:global;let L0=!1;try{const t={get passive(){return L0=!0,!0}};pa.addEventListener("test",null,t),pa.removeEventListener("test",null)}catch{L0=!1}const _X=yX.indexOf("firefox")!==-1,{WHEEL_EVENTS:wX}=Oy,hT="wheel",pT=4.000244140625,bX=40,xX=.25;class EX extends vh{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{if(!this.options.enable)return;let i=s.deltaY;pa.WheelEvent&&(_X&&s.deltaMode===pa.WheelEvent.DOM_DELTA_PIXEL&&(i/=pa.devicePixelRatio),s.deltaMode===pa.WheelEvent.DOM_DELTA_LINE&&(i*=bX)),i!==0&&i%pT===0&&(i=Math.floor(i/pT)),s.shiftKey&&i&&(i=i*xX),this.callback({type:hT,center:{x:s.clientX,y:s.clientY},delta:-i,srcEvent:s,pointerType:"mouse",target:s.target})},this.events=(this.options.events||[]).concat(wX),this.events.forEach(s=>e.addEventListener(s,this.handleEvent,L0?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===hT&&(this.options.enable=n)}}const{MOUSE_EVENTS:TX}=Oy,gT="pointermove",mT="pointerover",vT="pointerout",yT="pointerenter",_T="pointerleave";class SX extends vh{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{this.handleOverEvent(i),this.handleOutEvent(i),this.handleEnterEvent(i),this.handleLeaveEvent(i),this.handleMoveEvent(i)},this.pressed=!1;const{enable:s}=this.options;this.enableMoveEvent=s,this.enableLeaveEvent=s,this.enableEnterEvent=s,this.enableOutEvent=s,this.enableOverEvent=s,this.events=(this.options.events||[]).concat(TX),this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===gT&&(this.enableMoveEvent=n),e===mT&&(this.enableOverEvent=n),e===vT&&(this.enableOutEvent=n),e===yT&&(this.enableEnterEvent=n),e===_T&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(mT,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(vT,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(yT,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(_T,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.buttons===0&&(this.pressed=!1),this.pressed||this._emit(gT,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:PX}=Oy,wT="keydown",bT="keyup";class AX extends vh{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{const i=s.target||s.srcElement;i.tagName==="INPUT"&&i.type==="text"||i.tagName==="TEXTAREA"||(this.enableDownEvent&&s.type==="keydown"&&this.callback({type:wT,srcEvent:s,key:s.key,target:s.target}),this.enableUpEvent&&s.type==="keyup"&&this.callback({type:bT,srcEvent:s,key:s.key,target:s.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(PX),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===wT&&(this.enableDownEvent=n),e===bT&&(this.enableUpEvent=n)}}const xT="contextmenu";class CX extends vh{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{this.options.enable&&this.callback({type:xT,center:{x:s.clientX,y:s.clientY},srcEvent:s,pointerType:"mouse",target:s.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===xT&&(this.options.enable=n)}}const ET=1,N0=2,TT=4,RX={pointerdown:ET,pointermove:N0,pointerup:TT,mousedown:ET,mousemove:N0,mouseup:TT},kX=0,MX=1,IX=2,OX=1,LX=2,NX=4;function jX(t){const e=RX[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r}=t.srcEvent;let s=!1,i=!1,o=!1;return e===N0?(s=!!(n&OX),i=!!(n&NX),o=!!(n&LX)):(s=r===kX,i=r===MX,o=r===IX),{leftButton:s,middleButton:i,rightButton:o}}function DX(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),s=r.width/e.offsetWidth||1,i=r.height/e.offsetHeight||1,o={x:(n.x-r.left-e.clientLeft)/s,y:(n.y-r.top-e.clientTop)/i};return{center:n,offsetCenter:o}}const hm={srcElement:"root",priority:0};class FX{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const r=this._normalizeEvent(n);let s=n.srcEvent.target;for(;s&&s!==r.rootElement;){if(this._emit(r,s),r.handled)return;s=s.parentNode}this._emit(r,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,s=!1,i=!1){const{handlers:o,handlersByElement:c}=this;let u=hm;typeof r=="string"||r&&r.addEventListener?u={...hm,srcElement:r}:r&&(u={...hm,...r});let d=c.get(u.srcElement);d||(d=[],c.set(u.srcElement,d));const h={type:e,handler:n,srcElement:u.srcElement,priority:u.priority};s&&(h.once=!0),i&&(h.passive=!0),o.push(h),this._active=this._active||!h.passive;let p=d.length-1;for(;p>=0&&!(d[p].priority>=h.priority);)p--;d.splice(p+1,0,h)}remove(e,n){const{handlers:r,handlersByElement:s}=this;for(let i=r.length-1;i>=0;i--){const o=r[i];if(o.type===e&&o.handler===n){r.splice(i,1);const c=s.get(o.srcElement);c.splice(c.indexOf(o),1),c.length===0&&s.delete(o.srcElement)}}this._active=r.some(i=>!i.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let s=!1;const i=()=>{e.handled=!0},o=()=>{e.handled=!0,s=!0},c=[];for(let u=0;u<r.length;u++){const{type:d,handler:h,once:p}=r[u];if(h({...e,type:d,stopPropagation:i,stopImmediatePropagation:o}),p&&c.push(r[u]),s)break}for(let u=0;u<c.length;u++){const{type:d,handler:h}=c[u];this.remove(d,h)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...jX(e),...DX(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const BX={events:null,recognizers:null,recognizerOptions:{},Manager:hX,touchAction:"none",tabIndex:0};class UX{constructor(e=null,n){this._onBasicInput=s=>{const{srcEvent:i}=s,o=mX[i.type];o&&this.manager.emit(o,s)},this._onOtherEvent=s=>{this.manager.emit(s.type,s)},this.options={...BX,...n},this.events=new Map,this.setElement(e);const{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||pX}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(dT).forEach(s=>{const i=this.manager.get(s);i&&dT[s].forEach(o=>{i.recognizeWith(o)})});for(const s in n.recognizerOptions){const i=this.manager.get(s);if(i){const o=n.recognizerOptions[s];delete o.enable,i.set(o)}}this.wheelInput=new EX(e,this._onOtherEvent,{enable:!1}),this.moveInput=new SX(e,this._onOtherEvent,{enable:!1}),this.keyInput=new AX(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new CX(e,this._onOtherEvent,{enable:!1});for(const[s,i]of this.events)i.isEmpty()||(this._toggleRecognizer(i.recognizerName,!0),this.manager.on(s,i.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:r}=this;if(!r)return;const s=r.get(e);if(s&&s.options.enable!==n){s.set({enable:n});const i=gX[e];i&&!this.options.recognizers&&i.forEach(o=>{const c=r.get(o);n?(c.requireFailure(e),s.dropRequireFailure(o)):c.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,s,i){if(typeof e!="string"){r=n;for(const h in e)this._addEventHandler(h,e[h],r,s,i);return}const{manager:o,events:c}=this,u=fT[e]||e;let d=c.get(u);d||(d=new FX(this),c.set(u,d),d.recognizerName=vX[u]||u,o&&o.on(u,d.handleEvent)),d.add(e,n,r,s,i),d.isEmpty()||this._toggleRecognizer(d.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:r}=this,s=fT[e]||e,i=r.get(s);if(i&&(i.remove(e,n),i.isEmpty())){const{recognizerName:o}=i;let c=!1;for(const u of r.values())if(u.recognizerName===o&&!u.isEmpty()){c=!0;break}c||this._toggleRecognizer(o,!1)}}}function Oi(){}const VX=({isDragging:t})=>t?"grabbing":"grab",aM={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Oi,onResize:Oi,onViewStateChange:Oi,onInteractionStateChange:Oi,onBeforeRender:Oi,onAfterRender:Oi,onLoad:Oi,onError:t=>He.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:VX,getTooltip:null,debug:!1,drawPickingColors:!1};class yh{constructor(e){R(this,"props",void 0),R(this,"width",0),R(this,"height",0),R(this,"userData",{}),R(this,"canvas",null),R(this,"viewManager",null),R(this,"layerManager",null),R(this,"effectManager",null),R(this,"deckRenderer",null),R(this,"deckPicker",null),R(this,"eventManager",null),R(this,"tooltip",null),R(this,"metrics",void 0),R(this,"animationLoop",void 0),R(this,"stats",void 0),R(this,"viewState",void 0),R(this,"cursorState",void 0),R(this,"_needsRedraw",void 0),R(this,"_pickRequest",void 0),R(this,"_lastPointerDownInfo",null),R(this,"_metricsCounter",void 0),R(this,"_onPointerMove",n=>{const{_pickRequest:r}=this;if(n.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(n.leftButton||n.rightButton)return;{const s=n.offsetCenter;if(!s)return;r.x=s.x,r.y=s.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=n}),R(this,"_onEvent",n=>{const r=oE[n.type],s=n.offsetCenter;if(!r||!s||!this.layerManager)return;const i=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:s.x,y:s.y,layers:i,viewports:this.getViewports(s)},this._lastPointerDownInfo),{layer:c}=o,u=c&&(c[r.handler]||c.props[r.handler]),d=this.props[r.handler];let h=!1;u&&(h=u.call(c,o,n)),!h&&d&&d(o,n)}),R(this,"_onPointerDown",n=>{const r=n.offsetCenter,s=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=s.result[0]||s.emptyInfo}),this.props={...aM,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&He.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),G2()==="IE"&&He.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new fy({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&jc.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,s,i,o,c,u;if((e=this.animationLoop)===null||e===void 0||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(n=this.layerManager)===null||n===void 0||n.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(s=this.effectManager)===null||s===void 0||s.finalize(),this.effectManager=null,(i=this.deckRenderer)===null||i===void 0||i.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(c=this.eventManager)===null||c===void 0||c.destroy(),this.eventManager=null,(u=this.tooltip)===null||u===void 0||u.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var d;(d=this.canvas.parentElement)===null||d===void 0||d.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&He.removed("onLayerHover","onHover")(),"onLayerClick"in e&&He.removed("onLayerClick","onClick")(),e.initialViewState&&!Tr(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),s=this.layerManager.needsRedraw(e),i=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||r||s||i||o,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return Bt(this.viewManager),this.viewManager.views}getViewports(e){return Bt(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,n,r){Bt(this.deckPicker);const{stats:s}=this;s.get("Pick Count").incrementCount(),s.get(n).timeStart();const i=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return s.get(n).timeEnd(),i}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),Bt(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const i=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=i}if(r||r===0){var s;const i=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.position=((s=e.style)===null||s===void 0?void 0:s.position)||"absolute",this.canvas.style.height=i}}_updateCanvasSize(){var e,n;const{canvas:r}=this;if(!r)return;const s=(e=r.clientWidth)!==null&&e!==void 0?e:r.width,i=(n=r.clientHeight)!==null&&n!==void 0?n:r.height;if(s!==this.width||i!==this.height){var o,c;this.width=s,this.height=i,(o=this.viewManager)===null||o===void 0||o.setProps({width:s,height:i}),(c=this.layerManager)===null||c===void 0||c.activateViewport(this.getViewports()[0]),this.props.onResize({width:s,height:i})}}_createAnimationLoop(e){const{width:n,height:r,gl:s,glOptions:i,debug:o,onError:c,onBeforeRender:u,onAfterRender:d,useDevicePixels:h}=e;return new ZH({width:n,height:r,useDevicePixels:h,autoResizeDrawingBuffer:!s,autoResizeViewport:!1,gl:s,onCreateContext:p=>ck({...i,...p,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:p=>this._setGLContext(p.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:u,onAfterRender:d,onError:c})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new nM({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:r,emptyInfo:s}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=r.length>0;let i=s,o=!1;for(const c of r){var n;i=c,o=((n=c.layer)===null||n===void 0?void 0:n.onHover(c,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(i,e.event),this.props.getTooltip&&this.tooltip){const c=this.props.getTooltip(i);this.tooltip.setTooltip(c,i.x,i.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,by(e,{enable:!0,copyState:!0})),this.tooltip=new oX(this.canvas),is(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new Uk;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new UX(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const s in oE)this.eventManager.on(s,this._onEvent);this.viewManager=new OY({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new IY(e,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new YY,this.deckRenderer=new QY(e),this.deckPicker=new sX(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:r}=this.layerManager.context;is(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),He.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=Ui.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}R(yh,"defaultProps",aM);R(yh,"VERSION",n9);class pm{constructor(e,n){R(this,"opts",void 0),R(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:r}=this.source,{size:s}=n;let i=r;if(r&&r.length!==s){i=new Float32Array(s);const o=n.elementOffset||0;for(let c=0;c<s;++c)i[c]=r[o+c]}return i}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function zX(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function nf(t){return t.stride||t.size*t.bytesPerElement}function lM(t,e){e.offset&&He.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=nf(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,s=e.elementOffset||0,i=r*n+s*t.bytesPerElement+(t.offset||0);return{...e,offset:i,stride:n}}function $X(t,e){const n=lM(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class GX{constructor(e,n,r){R(this,"gl",void 0),R(this,"id",void 0),R(this,"size",void 0),R(this,"settings",void 0),R(this,"value",void 0),R(this,"doublePrecision",void 0),R(this,"_buffer",void 0),R(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const s=n.logicalType||n.type,i=s===5130;let{defaultValue:o}=n;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0);let c;i?c=5126:!s&&n.isIndexed?c=e&&AW(e,ot.ELEMENT_INDEX_UINT32)?5125:5123:c=s||5126;let u=zX(s||c||5126);this.doublePrecision=i,i&&n.fp64===!1&&(u=Float32Array),this.value=null,this.settings={...n,defaultType:u,defaultValue:o,logicalType:s,type:c,size:this.size,bytesPerElement:u.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new qe(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*nf(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),jc.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const r={},s=this.value instanceof Float64Array,i=$X(this.getAccessor(),n||{});return r[e]=new pm(this,i.high),r["".concat(e,"64Low")]=s?new pm(this,i.low):new Float32Array(this.size),r}if(n){const r=lM(this.getAccessor(),n);return{[e]:new pm(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:s}=this,i=r*s;if(n&&i&&n.length>=i){const o=new Array(s).fill(1/0),c=new Array(s).fill(-1/0);for(let u=0;u<i;)for(let d=0;d<s;d++){const h=n[u++];h<o[d]&&(o[d]=h),h>c[d]&&(c[d]=h)}e=[o,c]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof qe?r={buffer:e}:r=e;const s={...this.settings,...r};if(n.bufferAccessor=s,n.bounds=null,r.constant){let i=r.value;if(i=this._normalizeValue(i,[],0),this.settings.normalized&&(i=this.normalizeConstant(i)),!(!n.constant||!this._areValuesEqual(i,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=i}else if(r.buffer){const i=r.buffer;n.externalBuffer=i,n.constant=!1,this.value=r.value||null;const o=r.value instanceof Float64Array;s.type=r.type||i.accessor.type,s.bytesPerElement=i.accessor.BYTES_PER_ELEMENT*(o?2:1),s.stride=nf(s)}else if(r.value){this._checkExternalBuffer(r);let i=r.value;n.externalBuffer=null,n.constant=!1,this.value=i,s.bytesPerElement=i.BYTES_PER_ELEMENT,s.stride=nf(s);const{buffer:o,byteOffset:c}=this;this.doublePrecision&&i instanceof Float64Array&&(i=cm(i,s));const u=i.byteLength+c+s.stride*2;o.byteLength<u&&o.reallocate(u),o.setAccessor(null),o.subData({data:i,offset:c}),s.type=r.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:s}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?cm(n,{size:this.size,startIndex:r,endIndex:s}):n.subarray(r,s),offset:r*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:r}=this,s=r.allocatedValue,i=jc.allocate(s,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=i;const{buffer:o,byteOffset:c}=this;return o.byteLength<i.byteLength+c&&(o.reallocate(i.byteLength+c),n&&s&&o.subData({data:s instanceof Float64Array?cm(s,this):s,offset:c})),r.allocatedValue=i,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const r=this.settings.defaultType;let s=!1;if(this.doublePrecision&&(s=n.BYTES_PER_ELEMENT<4),s)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&He.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:s,size:i}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e){let o=i;for(;--o>=0;)n[r+o]=s[o];return n}switch(i){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:s[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:s[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:s[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:s[0];break;default:let o=i;for(;--o>=0;)n[r+o]=Number.isFinite(e[o])?e[o]:s[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let s=0;s<r;s++)if(e[s]!==n[s])return!1;return!0}}const ST=[],PT=[];function cM(t,e=0,n=1/0){let r=ST;const s={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(PT.length=t.length,r=PT):r=ST,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),s.index=e-1),{iterable:r,objectInfo:s}}function uM(t){return t&&t[Symbol.asyncIterator]}function WX(t,e){const{size:n,stride:r,offset:s,startIndices:i,nested:o}=e,c=t.BYTES_PER_ELEMENT,u=r?r/c:n,d=s?s/c:0,h=Math.floor((t.length-d)/u);return(p,{index:m,target:y})=>{if(!i){const P=m*u+d;for(let S=0;S<n;S++)y[S]=t[P+S];return y}const E=i[m],b=i[m+1]||h;let T;if(o){T=new Array(b-E);for(let P=E;P<b;P++){const S=P*u+d;y=new Array(n);for(let C=0;C<n;C++)y[C]=t[S+C];T[P-E]=y}}else if(u===n)T=t.subarray(E*n+d,b*n+d);else{T=new t.constructor((b-E)*n);let P=0;for(let S=E;S<b;S++){const C=S*u+d;for(let I=0;I<n;I++)T[P++]=t[C+I]}}return T}}const HX=[],rf=[[0,1/0]];function qX(t,e){if(t===rf||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let s=0;for(let i=0;i<r;i++){const o=t[i];o[1]<e[0]?(n.push(o),s=i+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(s,0,e),n}function gm(t){const{source:e,target:n,start:r=0,size:s,getData:i}=t,o=t.end||n.length,c=e.length,u=o-r;if(c>u){n.set(e.subarray(0,u),r);return}if(n.set(e,r),!i)return;let d=c;for(;d<u;){const h=i(d,e);for(let p=0;p<s;p++)n[r+d]=h[p]||0,d++}}function KX({source:t,target:e,size:n,getData:r,sourceStartIndices:s,targetStartIndices:i}){if(!Array.isArray(i))return gm({source:t,target:e,size:n,getData:r}),e;let o=0,c=0;const u=r&&((h,p)=>r(h+c,p)),d=Math.min(s.length,i.length);for(let h=1;h<d;h++){const p=s[h]*n,m=i[h]*n;gm({source:t.subarray(o,p),target:e,start:c,end:m,size:n,getData:u}),o=p,c=m}return c<e.length&&gm({source:[],target:e,start:c,size:n,getData:u}),e}const YX={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function dM(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...YX[n],...e,...t,type:n}}function fM(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function hM(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function pM(t){t.push(t.shift())}function Ly(t,e){const{doublePrecision:n,settings:r,value:s,size:i}=t,o=n&&s instanceof Float64Array?2:1;return(r.noAlloc?s.length:e*i)*o}function gM({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:s,getData:i=o=>o}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,c=n.size*o,u=n.byteOffset,d=n.startIndices,h=s&&d,p=Ly(n,e),m=n.isConstant;if(!h&&r>=p)return;const y=m?n.value:n.getBuffer().getData({srcByteOffset:u});if(n.settings.normalized&&!m){const P=i;i=(S,C)=>n.normalizeConstant(P(S,C))}const E=m?(P,S)=>i(y,S):(P,S)=>i(y.subarray(P,P+c),S),b=t.getData({length:r}),T=new Float32Array(p);KX({source:b,target:T,sourceStartIndices:s,targetStartIndices:d,size:c,getData:E}),t.byteLength<T.byteLength+u&&t.reallocate(T.byteLength+u),t.subData({data:T,offset:u})}class Ny extends GX{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:rf}),R(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,s=Array.isArray(n)?e[n.find(i=>e[i])]:e[n];return dM(s,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:s=1/0}=n;this.state.updateRanges=qX(this.state.updateRanges,[r,s])}else this.state.updateRanges=rf}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=HX}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==rf),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:s}){if(!this.needsUpdate())return!1;const{state:{updateRanges:i},settings:{update:o,noAlloc:c}}=this;let u=!0;if(o){for(const[d,h]of i)o.call(s,this,{data:n,startRow:d,endRow:h,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[d,h]of i){const p=Number.isFinite(d)?this.getVertexOffset(d):0,m=Number.isFinite(h)?this.getVertexOffset(h):c||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:p,endOffset:m})}this._checkAttributeArray()}else u=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),u}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:s}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(s.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),s.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;Bt(ArrayBuffer.isView(o.value),"invalid ".concat(s.accessor));const c=!!o.size&&o.size!==this.size;return r.binaryAccessor=WX(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:n,nested:c}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const r in e)Object.assign(n,super.getShaderAttributes(r,e[r]));return n}_autoUpdater(e,{data:n,startRow:r,endRow:s,props:i,numInstances:o}){if(e.constant)return;const{settings:c,state:u,value:d,size:h,startIndices:p}=e,{accessor:m,transform:y}=c,E=u.binaryAccessor||(typeof m=="function"?m:i[m]);Bt(typeof E=="function",'accessor "'.concat(m,'" is not a function'));let b=e.getVertexOffset(r);const{iterable:T,objectInfo:P}=cM(n,r,s);for(const S of T){P.index++;let C=E(S,P);if(y&&(C=y.call(this,C)),p){const I=(P.index<p.length-1?p[P.index+1]:o)-p[P.index];if(C&&Array.isArray(C[0])){let O=b;for(const D of C)e._normalizeValue(D,d,O),O+=h}else C&&C.length>h?d.set(C,b):(e._normalizeValue(C,P.target,0),bY({target:d,source:P.target,start:b,count:I}));b+=I*h}else e._normalizeValue(C,d,b),b+=h}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class XX{constructor({gl:e,attribute:n,timeline:r}){R(this,"gl",void 0),R(this,"type","interpolation"),R(this,"attributeInTransition",void 0),R(this,"settings",void 0),R(this,"attribute",void 0),R(this,"transition",void 0),R(this,"currentStartIndices",void 0),R(this,"currentLength",void 0),R(this,"transform",void 0),R(this,"buffers",void 0),this.gl=e,this.transition=new nu(r),this.attribute=n,this.attributeInTransition=new Ny(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=QX(e,n);const s={byteLength:0,usage:35050};this.buffers=[new qe(e,s),new qe(e,s)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;const{gl:r,buffers:s,attribute:i}=this;pM(s);const o={numInstances:n,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const c of s)gM({buffer:c,...o});this.currentStartIndices=i.startIndices,this.currentLength=Ly(i,n),this.attributeInTransition.setData({buffer:s[1],value:i.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aFrom:s[0],aTo:fM(r,i)},feedbackBuffers:{vCurrent:s[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:r}=this.settings,{time:s}=this.transition;let i=s/n;r&&(i=r(i)),this.transform.run({uniforms:{time:i}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}}const ZX=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function QX(t,e){const n=hM(e.size);return new Cy(t,{vs:ZX,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}class JX{constructor({gl:e,attribute:n,timeline:r}){R(this,"gl",void 0),R(this,"type","spring"),R(this,"attributeInTransition",void 0),R(this,"settings",void 0),R(this,"attribute",void 0),R(this,"transition",void 0),R(this,"currentStartIndices",void 0),R(this,"currentLength",void 0),R(this,"texture",void 0),R(this,"framebuffer",void 0),R(this,"transform",void 0),R(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new nu(r),this.attribute=n,this.attributeInTransition=new Ny(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=tZ(e),this.framebuffer=nZ(e,this.texture),this.transform=eZ(e,n,this.framebuffer);const s={byteLength:0,usage:35050};this.buffers=[new qe(e,s),new qe(e,s),new qe(e,s)]}get inProgress(){return this.transition.inProgress}start(e,n){const{gl:r,buffers:s,attribute:i}=this,o={numInstances:n,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const c of s)gM({buffer:c,...o});this.settings=e,this.currentStartIndices=i.startIndices,this.currentLength=Ly(i,n),this.attributeInTransition.setData({buffer:s[1],value:i.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aTo:fM(r,i)}})}update(){const{buffers:e,transform:n,framebuffer:r,transition:s}=this;if(!s.update())return!1;const o=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),pM(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),mh(r)[0]>0||s.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function eZ(t,e,n){const r=hM(e.size);return new Cy(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function tZ(t){return new In(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function nZ(t,e){return new At(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}const rZ={interpolation:XX,spring:JX};class sZ{constructor(e,{id:n,timeline:r}){R(this,"id",void 0),R(this,"isSupported",void 0),R(this,"gl",void 0),R(this,"timeline",void 0),R(this,"transitions",void 0),R(this,"needsRedraw",void 0),R(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=Cy.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const s in e){const i=e[s],o=i.getTransitionSetting(n);o&&this._updateAttribute(s,i,o)}for(const s in this.transitions){const i=e[s];(!i||!i.getTransitionSetting(n))&&this._removeTransition(s)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,r){const s=this.transitions[e];let i=!s||s.type!==r.type;if(i){if(!this.isSupported){He.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}s&&this._removeTransition(e);const o=rZ[r.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,gl:this.gl}):(He.error("unsupported transition type '".concat(r.type,"'"))(),i=!1)}(i||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const AT="attributeManager.invalidate",iZ="attributeManager.updateStart",oZ="attributeManager.updateEnd",aZ="attribute.updateStart",lZ="attribute.allocate",cZ="attribute.updateEnd";class uZ{constructor(e,{id:n="attribute-manager",stats:r,timeline:s}={}){R(this,"id",void 0),R(this,"gl",void 0),R(this,"attributes",void 0),R(this,"updateTriggers",void 0),R(this,"needsRedraw",void 0),R(this,"userData",void 0),R(this,"stats",void 0),R(this,"attributeTransitionManager",void 0),R(this,"mergeBoundsMemoized",tu(fY)),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new sZ(e,{id:"".concat(n,"-transitions"),timeline:s}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);Qt(AT,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);Qt(AT,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:s,props:i={},buffers:o={},context:c={}}){let u=!1;Qt(iZ,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const d in this.attributes){const h=this.attributes[d],p=h.settings.accessor;h.startIndices=r,h.numInstances=n,i[d]&&He.removed("props.".concat(d),"data.attributes.".concat(d))(),h.setExternalBuffer(o[d])||h.setBinaryValue(typeof p=="string"?o[p]:void 0,e.startIndices)||typeof p=="string"&&!o[p]&&h.setConstantValue(i[p])||h.needsUpdate()&&(u=!0,this._updateAttribute({attribute:h,numInstances:n,data:e,props:i,context:c})),this.needsRedraw=this.needsRedraw||h.needsRedraw()}u&&Qt(oZ,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:s})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getBounds(e){const n=e.map(r=>{var s;return(s=this.attributes[r])===null||s===void 0?void 0:s.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,s={...r.getAttributes()};for(const i in n){const o=n[i];o.needsRedraw(e)&&!r.hasAttribute(i)&&(s[i]=o)}return s}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const r={};for(const s in e)n[s]||Object.assign(r,e[s].getShaderAttributes());return r}_add(e,n={}){for(const r in e){const s=e[r];this.attributes[r]=this._createAttribute(r,s,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,r){const s={...n,id:e,size:n.isIndexed&&1||n.size||1,divisor:r.instanced?1:n.divisor||0};return new Ny(this.gl,s)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(s=>{e[s]||(e[s]=[]),e[s].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:s}=this,i=s[e];return i&&i.forEach(o=>{const c=r[o];c&&c.setNeedsUpdate(c.id,n)}),i}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(Qt(aZ,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&Qt(lZ,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,Qt(cZ,n,r))}}class dZ extends nu{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:s,easing:i}}=this,o=i(e/s);this._value=Af(n,r,o)}}const CT=1e-5;function RT(t,e,n,r,s){const i=e-t,c=(n-e)*s,u=-i*r;return c+u+i+e}function fZ(t,e,n,r,s){if(Array.isArray(n)){const i=[];for(let o=0;o<n.length;o++)i[o]=RT(t[o],e[o],n[o],r,s);return i}return RT(t,e,n,r,s)}function kT(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const s=t[r]-e[r];n+=s*s}return Math.sqrt(n)}return Math.abs(t-e)}class hZ extends nu{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:s}=this.settings,{_prevValue:i=e,_currValue:o=e}=this;let c=fZ(i,o,n,r,s);const u=kT(c,n),d=kT(c,o);u<CT&&d<CT&&(c=n,this.end()),this._prevValue=o,this._currValue=c}}const pZ={interpolation:dZ,spring:hZ};class gZ{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,s){const{transitions:i}=this;if(i.has(e)){const u=i.get(e),{value:d=u.settings.fromValue}=u;n=d,this.remove(e)}if(s=dM(s),!s)return;const o=pZ[s.type];if(!o){He.error("unsupported transition type '".concat(s.type,"'"))();return}const c=new o(this.timeline);c.start({...s,fromValue:n,toValue:r}),i.set(e,c)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function mZ(t){const e=t[Gi];for(const n in e){const r=e[n],{validate:s}=r;if(s&&!s(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function vZ(t,e){const n=mM({newProps:t,oldProps:e,propTypes:t[Gi],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=_Z(t,e);let s=!1;return r||(s=wZ(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:s,extensionsChanged:bZ(t,e),transitionsChanged:yZ(t,e)}}function yZ(t,e){if(!t.transitions)return!1;const n={},r=t[Gi];let s=!1;for(const i in t.transitions){const o=r[i],c=o&&o.type;(c==="number"||c==="color"||c==="array")&&j0(t[i],e[i],o)&&(n[i]=!0,s=!0)}return s?n:!1}function mM({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:s="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(s," changed shallowly");for(const i of Object.keys(t))if(!(i in n)){if(!(i in e))return"".concat(s,".").concat(i," added");const o=j0(t[i],e[i],r[i]);if(o)return"".concat(s,".").concat(i," ").concat(o)}for(const i of Object.keys(e))if(!(i in n)){if(!(i in t))return"".concat(s,".").concat(i," dropped");if(!Object.hasOwnProperty.call(t,i)){const o=j0(t[i],e[i],r[i]);if(o)return"".concat(s,".").concat(i," ").concat(o)}}return!1}function j0(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function _Z(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:s}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&s&&(n=s(t.data,e.data)||n),n}function wZ(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&MT(t,e,"all"))return{all:!0};const n={};let r=!1;for(const s in t.updateTriggers)s!=="all"&&MT(t,e,s)&&(n[s]=!0,r=!0);return r?n:!1}function bZ(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let s=0;s<r.length;s++)if(!r[s].equals(n[s]))return!0;return!1}function MT(t,e,n){let r=t.updateTriggers[n];r=r??{};let s=e.updateTriggers[n];return s=s??{},mM({oldProps:s,newProps:r,triggerName:n})}const xZ="count(): argument not an object",EZ="count(): argument not a container";function TZ(t){if(!PZ(t))throw new Error(xZ);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(SZ(t))return Object.keys(t).length;throw new Error(EZ)}function SZ(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function PZ(t){return t!==null&&typeof t=="object"}function AZ(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(s=>s.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const s in e.inject)r[s]=(r[s]||"")+e.inject[s];n.inject=r}return n}const CZ={10241:9987,10240:9729,10242:33071,10243:33071},D0={};function RZ(t,e,n,r){if(n instanceof In)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let s=null;n.compressed&&(s={10241:n.data.length>1?9985:9729});const i=new In(e,{...n,parameters:{...CZ,...s,...r}});return D0[i.id]=t,i}function kZ(t,e){!e||!(e instanceof In)||D0[e.id]===t&&(e.delete(),delete D0[e.id])}const MZ={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||F0(t)&&(t.length===3||t.length===4)},equal(t,e,n){return Tr(t,e,1)}},accessor:{validate(t,e){const n=Lf(t);return n==="function"||n===Lf(e.value)},equal(t,e,n){return typeof e=="function"?!0:Tr(t,e,1)}},array:{validate(t,e){return e.optional&&!t||F0(t)},equal(t,e,n){const{compare:r}=n,s=Number.isInteger(r)?r:r?1:0;return r?Tr(t,e,s):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,s=Number.isInteger(r)?r:r?1:0;return r?Tr(t,e,s):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>{const r=n.context;return!r||!r.gl?null:RZ(n.id,r.gl,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{kZ(n.id,t)}}};function IZ(t){const e={},n={},r={};for(const[s,i]of Object.entries(t)){const o=i==null?void 0:i.deprecatedFor;if(o)r[s]=Array.isArray(o)?o:[o];else{const c=OZ(s,i);e[s]=c,n[s]=c.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function OZ(t,e){switch(Lf(e)){case"object":return Xl(t,e);case"array":return Xl(t,{type:"array",value:e,compare:!1});case"boolean":return Xl(t,{type:"boolean",value:e});case"number":return Xl(t,{type:"number",value:e});case"function":return Xl(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function Xl(t,e){return"type"in e?{name:t,...MZ[e.type],...e}:"value"in e?{name:t,type:Lf(e.value),...e}:{name:t,type:"object",value:e}}function F0(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function Lf(t){return F0(t)?"array":t===null?"null":typeof t}function LZ(t,e){let n;for(let i=e.length-1;i>=0;i--){const o=e[i];"extensions"in o&&(n=o.extensions)}const r=B0(t.constructor,n),s=Object.create(r);s[Of]=t,s[Zi]={},s[Js]={};for(let i=0;i<e.length;++i){const o=e[i];for(const c in o)s[c]=o[c]}return Object.freeze(s),s}const NZ="_mergedDefaultProps";function B0(t,e){let n=NZ;if(e)for(const s of e){const i=s.constructor;i&&(n+=":".concat(i.extensionName||i.name))}const r=vM(t,n);return r||(t[n]=jZ(t,e||[]))}function jZ(t,e){if(!t.prototype)return null;const r=Object.getPrototypeOf(t),s=B0(r),i=vM(t,"defaultProps")||{},o=IZ(i),c=Object.assign(Object.create(null),s,o.defaultProps),u=Object.assign(Object.create(null),s==null?void 0:s[Gi],o.propTypes),d=Object.assign(Object.create(null),s==null?void 0:s[dm],o.deprecatedProps);for(const h of e){const p=B0(h.constructor);p&&(Object.assign(c,p),Object.assign(u,p[Gi]),Object.assign(d,p[dm]))}return DZ(c,t),BZ(c,u),FZ(c,d),c[Gi]=u,c[dm]=d,e.length===0&&!jy(t,"_propTypes")&&(t._propTypes=u),c}function DZ(t,e){const n=VZ(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function FZ(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const s="".concat(this.id,": ").concat(n);for(const i of e[n])jy(this,i)||(this[i]=r);He.deprecated(s,e[n].join("/"))()}})}function BZ(t,e){const n={},r={};for(const s in e){const i=e[s],{name:o,value:c}=i;i.async&&(n[o]=c,r[o]=UZ(o))}t[wa]=n,t[Zi]={},Object.defineProperties(t,r)}function UZ(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||uM(e)?this[Zi][t]=e:this[Js][t]=e},get(){if(this[Js]){if(t in this[Js])return this[Js][t]||this[wa][t];if(t in this[Zi]){const e=this[Of]&&this[Of].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[wa][t]}}return this[wa][t]}}}function jy(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function vM(t,e){return jy(t,e)&&t[e]}function VZ(t){const e=t.componentName;return e||He.warn("".concat(t.name,".componentName not specified"))(),e||t.name}let zZ=0;class Dy{constructor(...e){R(this,"id",void 0),R(this,"props",void 0),R(this,"count",void 0),this.props=LZ(this,e),this.id=this.props.id,this.count=zZ++}clone(e){const{props:n}=this,r={};for(const s in n[wa])s in n[Js]?r[s]=n[Js][s]:s in n[Zi]&&(r[s]=n[Zi][s]);return new this.constructor({...n,...r,...e})}}R(Dy,"componentName","Component");R(Dy,"defaultProps",{});const $Z=Object.freeze({});class GZ{constructor(e){R(this,"component",void 0),R(this,"onAsyncPropUpdated",void 0),R(this,"asyncProps",void 0),R(this,"oldProps",void 0),R(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||$Z}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[Of]||this.component;const n=e[Js]||{},r=e[Zi]||e,s=e[wa]||{};for(const i in n){const o=n[i];this._createAsyncPropData(i,s[i]),this._updateAsyncProp(i,o),n[i]=this.getAsyncProp(i)}for(const i in r){const o=r[i];this._createAsyncPropData(i,s[i]),this._updateAsyncProp(i,o)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(uM(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const s=this.asyncProps[e];s&&r>=s.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),s.resolvedValue=n,s.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const s=r.pendingLoadCount;n.then(i=>{this.component&&(i=this._postProcessValue(r,i),this._setAsyncPropValue(e,i,s),this._onResolve(e,i))}).catch(i=>{this._onError(e,i)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const s=r.pendingLoadCount;let i=[],o=0;for await(const c of n){if(!this.component)return;const{dataTransform:u}=this.component.props;u?i=u(c,i):i=i.concat(c),Object.defineProperty(i,"__diff",{enumerable:!1,value:[{startRow:o,endRow:i.length}]}),o=i.length,this._setAsyncPropValue(e,i,s)}this._onResolve(e,i)}_postProcessValue(e,n){const r=e.type;return r&&this.component&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const s=this.component&&this.component.props[Gi];this.asyncProps[e]={type:s&&s[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class WZ extends GZ{constructor({attributeManager:e,layer:n}){super(n),R(this,"attributeManager",void 0),R(this,"needsRedraw",void 0),R(this,"needsUpdate",void 0),R(this,"subLayers",void 0),R(this,"usesPickingColorCache",void 0),R(this,"hasPickingBuffer",void 0),R(this,"changeFlags",void 0),R(this,"viewport",void 0),R(this,"uniformTransitions",void 0),R(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const r=this.layer,s=r==null?void 0:r.props.fetch;return s?s(n,{propName:e,layer:r}):super._fetch(e,n)}_onResolve(e,n){const r=this.layer;if(r){const s=r.props.onDataLoad;e==="data"&&s&&s(n,{propName:e,layer:r})}}_onError(e,n){const r=this.layer;r&&r.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const HZ="layer.changeFlag",qZ="layer.initialize",KZ="layer.update",YZ="layer.finalize",XZ="layer.matched",IT=2**24-1,ZZ=Object.freeze([]),QZ=tu(({oldViewport:t,viewport:e})=>t.equals(e));let _r=new Uint8ClampedArray(0);const JZ={data:{type:"data",value:ZZ,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:s,signal:i})=>{const{resourceManager:o}=n.context;if(s=s||n.getLoadOptions(),r=r||n.props.loaders,i){var c;s={...s,fetch:{...(c=s)===null||c===void 0?void 0:c.fetch,signal:i}}}let u=o.contains(t);return!u&&!s&&(o.add({resourceId:t,data:Tf(t,r),persistent:!1}),u=!0),u?o.subscribe({resourceId:t,onChange:d=>{var h;return(h=n.internalState)===null||h===void 0?void 0:h.reloadAsyncProp(e,d)},consumerId:n.id,requestId:e}):Tf(t,r,s)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:Ge.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class _h extends Dy{constructor(...e){super(...e),R(this,"internalState",null),R(this,"lifecycle",aa.NO_STATE),R(this,"context",void 0),R(this,"state",void 0),R(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){Bt(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=Zk(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[s,i,o]=Yk(r,n.pixelProjectionMatrix);return e.length===2?[s,i]:[s,i,o]}unproject(e){return Bt(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){Bt(this.internalState);const r=this.internalState.viewport||this.context.viewport;return yY(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===Ge.DEFAULT||e===Ge.LNGLAT||e===Ge.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){Bt(e instanceof Uint8Array);const[n,r,s]=e;return n+r*256+s*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:TZ(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())===null||e===void 0?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const n of this.props.extensions)e=AZ(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const s of r)n.invalidateAll(s);else n.invalidateAll();if(n){const{props:s}=e,i=this.internalState.hasPickingBuffer,o=Number.isInteger(s.highlightedObjectIndex)||s.pickable||s.extensions.some(c=>c.getNeedsPickingBuffer.call(this,c));if(i!==o){this.internalState.hasPickingBuffer=o;const{pickingColors:c,instancePickingColors:u}=n.attributes,d=c||u;d&&(o&&d.constant&&(d.constant=!1,n.invalidate(d.id)),!d.value&&!o&&(d.constant=!0,d.value=[0,0,0]))}}}finalizeState(e){for(const r of this.getModels())r.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:s}=e;return s>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[s]),e}raiseError(e,n){var r,s;if(n&&(e=new Error("".concat(n,": ").concat(e.message),{cause:e})),!((r=(s=this.props).onError)!==null&&r!==void 0&&r.call(s,e))){var i,o;(i=this.context)===null||i===void 0||(o=i.onError)===null||o===void 0||o.call(i,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!QZ({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),s=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:s,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const i=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const s in n)Object.defineProperty(r,s,{value:n[s]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(_r.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>IT&&He.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),_r=jc.allocate(_r,n,{size:3,copy:!0,maxCount:Math.max(n,IT)});const s=Math.floor(_r.length/3),i=[];for(let o=r;o<s;o++)this.encodePickingColor(o,i),_r[o*3+0]=i[0],_r[o*3+1]=i[1],_r[o*3+2]=i[2]}e.value=_r.subarray(0,n*3)}_setModelAttributes(e,n){const r=this.getAttributeManager(),s=e.userData.excludeAttributes||{},i=r.getShaderAttributes(n,s);e.setAttributes(i)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}const{pickingColors:r,instancePickingColors:s}=this.getAttributeManager().attributes,i=r||s,o=i&&n.attributes&&n.attributes[i.id];if(o&&o.value){const c=o.value,u=this.encodePickingColor(e);for(let d=0;d<n.length;d++){const h=i.getVertexOffset(d);c[h]===u[0]&&c[h+1]===u[1]&&c[h+2]===u[2]&&this._disablePickingIndex(d)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,s=n||r;if(!s)return;const i=s.getVertexOffset(e),o=s.getVertexOffset(e+1);s.buffer.subData({data:new Uint8Array(o-i),offset:i})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;r&&(this.internalState.usesPickingColorCache&&r.value.buffer!==_r.buffer&&(r.value=_r.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){Bt(!this.internalState),Bt(Number.isFinite(this.props.coordinateSystem)),Qt(qZ,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new WZ({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(He.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new gZ(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Qt(XZ,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Qt(KZ,this,e),!e)return;const n=this.props,r=this.context,s=this.internalState,i=r.viewport,o=this._updateUniformTransition();s.propsInTransition=o,r.viewport=s.viewport||i,this.props=o;try{const c=this._getUpdateParams(),u=this.getModels();if(r.gl)this.updateState(c);else try{this.updateState(c)}catch{}for(const h of this.props.extensions)h.updateState.call(this,c,h);const d=this.getModels()[0]!==u[0];this._postUpdate(c,d)}finally{r.viewport=i,this.props=n,this._clearChangeFlags(),s.needsUpdate=!1,s.resetOldProps()}}_finalize(){Qt(YZ,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();const s=this.props,i=this.context;this.props=this.internalState.propsInTransition||s;const o=this.props.opacity;n.opacity=Math.pow(o,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:c}=this.props,u=c&&c(n)||[0,0];is(i.gl,{polygonOffset:u}),rr(i.gl,r,()=>{const d={moduleParameters:e,uniforms:n,parameters:r,context:i};for(const h of this.props.extensions)h.draw.call(this,d,h);this.draw(d)})}finally{this.props=s}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const s in e)if(e[s]){let i=!1;switch(s){case"dataChanged":const o=e[s],c=n[s];o&&Array.isArray(c)&&(n.dataChanged=Array.isArray(o)?c.concat(o):o,i=!0);default:n[s]||(n[s]=e[s],i=!0)}i&&Qt(HZ,this,s,e)}const r=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const r=vZ(e,n);if(r.updateTriggersChanged)for(const i in r.updateTriggersChanged)r.updateTriggersChanged[i]&&this.invalidateAttribute(i);if(r.transitionsChanged)for(const i in r.transitionsChanged){var s;this.internalState.uniformTransitions.add(i,n[i],e[i],(s=e.transitions)===null||s===void 0?void 0:s[i])}return this.setChangeFlags(r)}validateProps(){mZ(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.pickingHighlightColor=r(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new uZ(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:s}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:i}=this.state;i==null||i.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:c,highlightColor:u}=r;if(n||s.autoHighlight!==o||s.highlightedObjectIndex!==c||s.highlightColor!==u){const d={};o||(d.pickingSelectedColor=null),Array.isArray(u)&&(d.pickingHighlightColor=u),(n||c!==s.highlightedObjectIndex)&&(d.pickingSelectedColor=Number.isFinite(c)&&c>=0?this.encodePickingColor(c):null),this.setModuleParameters(d)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const r=this.getAttributeManager(),s=r?r.getNeedsRedraw(e):!1;if(n=n||s,n)for(const i of this.props.extensions)i.onNeedsRedraw.call(this,i);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}R(_h,"defaultProps",JZ);R(_h,"layerName","Layer");const eQ=typeof window<"u"?_.useLayoutEffect:_.useEffect;function Nf(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const tQ={position:"absolute",zIndex:-1};function yM(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>yM(n,e));if(wh(t)){if(nQ(t))return e.style=tQ,_.cloneElement(t,e);if(rQ(t))return _.cloneElement(t,e)}return t}function wh(t){return t&&typeof t=="object"&&"type"in t||!1}function nQ(t){var e;return(e=t.props)===null||e===void 0?void 0:e.mapStyle}function rQ(t){const e=t.type;return e&&e.deckGLViewProps}function U0(t){if(typeof t=="function")return _.createElement(Da,{},t);if(Array.isArray(t))return t.map(U0);if(wh(t)){if(t.type===_.Fragment)return U0(t.props.children);if(Nf(t.type,Da))return t}return t}function sQ({children:t,layers:e=[],views:n=null}){const r=[],s=[],i={};return _.Children.forEach(U0(t),o=>{if(wh(o)){const c=o.type;if(Nf(c,_h)){const u=iQ(c,o.props);s.push(u)}else r.push(o);if(Nf(c,Da)&&c!==Da&&o.props.id){const u=new c(o.props);i[u.id]=u}}else o&&r.push(o)}),Object.keys(i).length>0&&(Array.isArray(n)?n.forEach(o=>{i[o.id]=o}):n&&(i[n.id]=n),n=Object.values(i)),e=s.length>0?[...s,...e]:e,{layers:e,children:r,views:n}}function iQ(t,e){const n={},r=t.defaultProps||{};for(const s in e)r[s]!==e[s]&&(n[s]=e[s]);return new t(n)}function oQ({children:t,deck:e,ContextProvider:n}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const s={},i=r.views[0].id;for(const o of t){let c=i,u=o;wh(o)&&Nf(o.type,Da)&&(c=o.props.id||i,u=o.props.children);const d=r.getViewport(c),h=r.getViewState(c);if(d){h.padding=d.padding;const{x:p,y:m,width:y,height:E}=d;u=yM(u,{x:p,y:m,width:y,height:E,viewport:d,viewState:h}),s[c]||(s[c]={viewport:d,children:[]}),s[c].children.push(u)}}return Object.keys(s).map(o=>{const{viewport:c,children:u}=s[o],{x:d,y:h,width:p,height:m}=c,y={position:"absolute",left:d,top:h,width:p,height:m},E="view-".concat(o),b=_.createElement("div",{key:E,id:E,style:y},...u);if(n){const T={viewport:c,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:P=>{P.viewId=o,e._onViewStateChange(P)}};return _.createElement(n,{key:E,value:T},b)}return b})}const aQ={mixBlendMode:null};function lQ({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},s={left:0,top:0};if(n)for(const i in n)i in aQ?s[i]=n[i]:r[i]=n[i];return{containerStyle:r,canvasStyle:s}}function cQ(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function _M(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function uQ(t,e,n){const r=new e({...n,_customRender:s=>{t.redrawReason=s;const i=r.getViewports();t.lastRenderedViewports!==i?t.forceUpdate():_M(t)}});return r}const wM=_.forwardRef((t,e)=>{const[n,r]=_.useState(0),i=_.useRef({control:null,version:n,forceUpdate:()=>r(O=>O+1)}).current,o=_.useRef(null),c=_.useRef(null),u=_.useMemo(()=>sQ(t),[t.layers,t.views,t.children]);let d=!0;const h=O=>{var D;return d&&t.viewState?(i.viewStateUpdateRequested=O,null):(i.viewStateUpdateRequested=null,(D=t.onViewStateChange)===null||D===void 0?void 0:D.call(t,O))},p=O=>{if(d)i.interactionStateUpdateRequested=O;else{var D;i.interactionStateUpdateRequested=null,(D=t.onInteractionStateChange)===null||D===void 0||D.call(t,O)}},m=_.useMemo(()=>{const O={...t,style:null,width:"100%",height:"100%",parent:o.current,canvas:c.current,layers:u.layers,views:u.views,onViewStateChange:h,onInteractionStateChange:p};return delete O._customRender,i.deck&&i.deck.setProps(O),O},[t]);_.useEffect(()=>{const O=t.Deck||yh;return i.deck=uQ(i,O,{...m,parent:o.current,canvas:c.current}),()=>{var D;return(D=i.deck)===null||D===void 0?void 0:D.finalize()}},[]),eQ(()=>{_M(i);const{viewStateUpdateRequested:O,interactionStateUpdateRequested:D}=i;O&&h(O),D&&p(D)}),_.useImperativeHandle(e,()=>cQ(i),[]);const y=i.deck&&i.deck.isInitialized?i.deck.getViewports():void 0,{ContextProvider:E,width:b,height:T,id:P,style:S}=t,{containerStyle:C,canvasStyle:I}=_.useMemo(()=>lQ({width:b,height:T,style:S}),[b,T,S]);if(!i.viewStateUpdateRequested&&i.lastRenderedViewports===y||i.version!==n){i.lastRenderedViewports=y,i.version=n;const O=oQ({children:u.children,deck:i.deck,ContextProvider:E}),D=_.createElement("canvas",{key:"canvas",id:P||"deckgl-overlay",ref:c,style:I});i.control=_.createElement("div",{id:"".concat(P||"deckgl","-wrapper"),ref:o,style:C},[D,O])}return d=!1,i.control});wM.defaultProps=yh.defaultProps;const dQ=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,fQ=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,hQ=1024,pQ=4,OT=()=>{},LT={10241:9987,10240:9729,10242:33071,10243:33071};function gQ(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function mQ(t,e,n,r){const s=Math.min(n/e.width,r/e.height),i=Math.floor(e.width*s),o=Math.floor(e.height*s);return s===1?{data:e,width:i,height:o}:(t.canvas.height=o,t.canvas.width=i,t.clearRect(0,0,i,o),t.drawImage(e,0,0,e.width,e.height,0,0,i,o),{data:t.canvas,width:i,height:o})}function Dc(t){return t&&(t.id||t.url)}function vQ(t,e,n,r){const s=t.width,i=t.height,o=new In(t.gl,{width:e,height:n,parameters:r});return EW(t,o,{targetY:0,width:s,height:i}),t.delete(),o}function NT(t,e,n){for(let r=0;r<e.length;r++){const{icon:s,xOffset:i}=e[r],o=Dc(s);t[o]={...s,x:i,y:n}}}function yQ({icons:t,buffer:e,mapping:n={},xOffset:r=0,yOffset:s=0,rowHeight:i=0,canvasWidth:o}){let c=[];for(let u=0;u<t.length;u++){const d=t[u],h=Dc(d);if(!n[h]){const{height:p,width:m}=d;r+m+e>o&&(NT(n,c,s),r=0,s=i+s+e,i=0,c=[]),c.push({icon:d,xOffset:r}),r=r+m+e,i=Math.max(i,p)}}return c.length>0&&NT(n,c,s),{mapping:n,rowHeight:i,xOffset:r,yOffset:s,canvasWidth:o,canvasHeight:gQ(i+s+e)}}function _Q(t,e,n){if(!t||!e)return null;n=n||{};const r={},{iterable:s,objectInfo:i}=cM(t);for(const o of s){i.index++;const c=e(o,i),u=Dc(c);if(!c)throw new Error("Icon is missing.");if(!c.url)throw new Error("Icon url is missing.");!r[u]&&(!n[u]||c.url!==n[u].url)&&(r[u]={...c,source:o,sourceIndex:i.index})}return r}class wQ{constructor(e,{onUpdate:n=OT,onError:r=OT}){R(this,"gl",void 0),R(this,"onUpdate",void 0),R(this,"onError",void 0),R(this,"_loadOptions",null),R(this,"_texture",null),R(this,"_externalTexture",null),R(this,"_mapping",{}),R(this,"_textureParameters",null),R(this,"_pendingCount",0),R(this,"_autoPacking",!1),R(this,"_xOffset",0),R(this,"_yOffset",0),R(this,"_rowHeight",0),R(this,"_buffer",pQ),R(this,"_canvasWidth",hQ),R(this,"_canvasHeight",0),R(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=r}finalize(){var e;(e=this._texture)===null||e===void 0||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?Dc(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:r,iconMapping:s,textureParameters:i}){if(e&&(this._loadOptions=e),n!==void 0&&(this._autoPacking=n),s&&(this._mapping=s),r){var o;(o=this._texture)===null||o===void 0||o.delete(),this._texture=null,this._externalTexture=r}i&&(this._textureParameters=i)}get isLoaded(){return this._pendingCount===0}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const r=Object.values(_Q(e,n,this._mapping)||{});if(r.length>0){const{mapping:s,xOffset:i,yOffset:o,rowHeight:c,canvasHeight:u}=yQ({icons:r,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=c,this._mapping=s,this._xOffset=i,this._yOffset=o,this._canvasHeight=u,this._texture||(this._texture=new In(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||LT})),this._texture.height!==this._canvasHeight&&(this._texture=vQ(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||LT)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(r)}}_loadIcons(e){const n=this._canvas.getContext("2d",{willReadFrequently:!0});for(const r of e)this._pendingCount++,Tf(r.url,this._loadOptions).then(s=>{const i=Dc(r),o=this._mapping[i],{x:c,y:u,width:d,height:h}=o,{data:p,width:m,height:y}=mQ(n,s,d,h);this._texture.setSubImageData({data:p,x:c+(d-m)/2,y:u+(h-y)/2,width:m,height:y}),o.width=m,o.height=y,this._texture.generateMipmap(),this.onUpdate()}).catch(s=>{this.onError({url:r.url,source:r.source,sourceIndex:r.sourceIndex,loadOptions:this._loadOptions,error:s})}).finally(()=>{this._pendingCount--})}}const bM=[0,0,0,255],bQ={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:bM},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class Fy extends _h{constructor(...e){super(...e),R(this,"state",void 0)}getShaders(){return super.getShaders({vs:dQ,fs:fQ,modules:[SY,PY]})}initializeState(){this.state={iconManager:new wQ(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:bM},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:r,changeFlags:s}=e,i=this.getAttributeManager(),{iconAtlas:o,iconMapping:c,data:u,getIcon:d,textureParameters:h}=n,{iconManager:p}=this.state,m=o||this.internalState.isAsyncPropLoading("iconAtlas");if(p.setProps({loadOptions:n.loadOptions,autoPacking:!m,iconAtlas:o,iconMapping:m?c:null,textureParameters:h}),m?r.iconMapping!==n.iconMapping&&i.invalidate("getIcon"):(s.dataChanged||s.updateTriggersChanged&&(s.updateTriggersChanged.all||s.updateTriggersChanged.getIcon))&&p.packIcons(u,d),s.extensionsChanged){var y;const{gl:E}=this.context;(y=this.state.model)===null||y===void 0||y.delete(),this.state.model=this._getModel(E),i.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:r,sizeMaxPixels:s,sizeUnits:i,billboard:o,alphaCutoff:c}=this.props,{iconManager:u}=this.state,d=u.getTexture();d&&this.state.model.setUniforms(e).setUniforms({iconsTexture:d,iconsTextureDim:[d.width,d.height],sizeUnits:_0[i],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:s,billboard:o,alphaCutoff:c}).draw()}_getModel(e){const n=[-1,-1,-1,1,1,1,1,-1];return new Bk(e,{...this.getShaders(),id:this.props.id,geometry:new lK({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const r=(n=this.getCurrentLayer())===null||n===void 0?void 0:n.props.onIconError;r?r(e):He.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:r,anchorX:s=n/2,anchorY:i=r/2}=this.state.iconManager.getIconMapping(e);return[n/2-s,r/2-i]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:r,width:s,height:i}=this.state.iconManager.getIconMapping(e);return[n,r,s,i]}}R(Fy,"defaultProps",bQ);R(Fy,"layerName","IconLayer");const xQ=_.createContext(null);function EQ(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,s=Array.isArray(e)?e[0]:e?e.x:0,i=Array.isArray(e)?e[1]:e?e.y:0;return n===s&&r===i}function Zr(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Zr(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n)if(!e.hasOwnProperty(s)||!Zr(t[s],e[s]))return!1;return!0}return!1}function TQ(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function jT(t,e){if(!t.getProjection)return;const n=t.getProjection(),r=e.getProjection();Zr(n,r)||e.setProjection(n)}function DT(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function FT(t,e){const n=e.viewState||e;let r=!1;if("zoom"in n){const s=t.zoom;t.zoom=n.zoom,r=r||s!==t.zoom}if("bearing"in n){const s=t.bearing;t.bearing=n.bearing,r=r||s!==t.bearing}if("pitch"in n){const s=t.pitch;t.pitch=n.pitch,r=r||s!==t.pitch}if(n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),"longitude"in n&&"latitude"in n){const s=t.center;t.center=new s.constructor(n.longitude,n.latitude),r=r||s!==t.center}return r}const SQ=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function BT(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map(r=>{let s=null;"interactive"in r&&(s=Object.assign({},r),delete s.interactive);const i=e[r.ref];if(i){s=s||Object.assign({},r),delete s.ref;for(const o of SQ)o in i&&(s[o]=i[o])}return s||r});return{...t,layers:n}}var UT={};const VT={version:8,sources:{},layers:[]},zT={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},mm={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},$T={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},PQ=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],AQ=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Fa{constructor(e,n,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=s=>{const i=this.props[$T[s.type]];i?i(s):s.type==="error"&&console.error(s.error)},this._onPointerEvent=s=>{(s.type==="mousemove"||s.type==="mouseout")&&this._updateHover(s);const i=this.props[zT[s.type]];i&&(this.props.interactiveLayerIds&&s.type!=="mouseover"&&s.type!=="mouseout"&&(s.features=this._hoveredFeatures||this._queryRenderedFeatures(s.point)),i(s),delete s.features)},this._onCameraEvent=s=>{if(!this._internalUpdate){const i=this.props[mm[s.type]];i&&i(s)}s.type in this._deferredEvents&&(this._deferredEvents[s.type]=!1)},this._MapClass=e,this.props=n,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const r=this._updateSettings(e,n);r&&this._createShadowTransform(this._map);const s=this._updateSize(e),i=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(r||s||i&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const r=Fa.savedMaps.pop();if(!r)return null;const s=r.map,i=s.getContainer();for(n.className=i.className;i.childNodes.length>0;)n.appendChild(i.childNodes[0]);s._container=n;const o=s._resizeObserver;o&&(o.disconnect(),o.observe(n)),r.setProps({...e,styleDiffing:!1}),s.resize();const{initialViewState:c}=e;return c&&(c.bounds?s.fitBounds(c.bounds,{...c.fitBoundsOptions,duration:0}):r._updateViewState(c,!1)),s.isStyleLoaded()?s.fire("load"):s.once("styledata",()=>s.fire("load")),s._update(),r}_initialize(e){const{props:n}=this,{mapStyle:r=VT}=n,s={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||CQ()||null,container:e,style:BT(r)},i=s.initialViewState||s.viewState||s;if(Object.assign(s,{center:[i.longitude||0,i.latitude||0],zoom:i.zoom||0,pitch:i.pitch||0,bearing:i.bearing||0}),n.gl){const h=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=h,n.gl)}const o=new this._MapClass(s);i.padding&&o.setPadding(i.padding),n.cursor&&(o.getCanvas().style.cursor=n.cursor),this._createShadowTransform(o);const c=o._render;o._render=h=>{this._inRender=!0,c.call(o,h),this._inRender=!1};const u=o._renderTaskQueue.run;o._renderTaskQueue.run=h=>{u.call(o._renderTaskQueue,h),this._onBeforeRepaint()},o.on("render",()=>this._onAfterRepaint());const d=o.fire;o.fire=this._fireEvent.bind(this,d),o.on("resize",()=>{this._renderTransform.resize(o.transform.width,o.transform.height)}),o.on("styledata",()=>{this._updateStyleComponents(this.props,{}),jT(o.transform,this._renderTransform)}),o.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const h in zT)o.on(h,this._onPointerEvent);for(const h in mm)o.on(h,this._onCameraEvent);for(const h in $T)o.on(h,this._onEvent);this._map=o}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),Fa.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const n=TQ(e.transform);e.painter.transform=n,this._renderTransform=n}_updateSize(e){const{viewState:n}=e;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const r=this._map,s=this._renderTransform,{zoom:i,pitch:o,bearing:c}=s,u=r.isMoving();u&&(s.cameraElevationReference="sea");const d=FT(s,{...DT(r.transform),...e});if(u&&(s.cameraElevationReference="ground"),d&&n){const h=this._deferredEvents;h.move=!0,h.zoom||(h.zoom=i!==s.zoom),h.rotate||(h.rotate=c!==s.bearing),h.pitch||(h.pitch=o!==s.pitch)}return u||FT(r.transform,e),d}_updateSettings(e,n){const r=this._map;let s=!1;for(const i of PQ)if(i in e&&!Zr(e[i],n[i])){s=!0;const o=r[`set${i[0].toUpperCase()}${i.slice(1)}`];o==null||o.call(r,e[i])}return s}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==n.mapStyle){const{mapStyle:r=VT,styleDiffing:s=!0}=e,i={diff:s};return"localIdeographFontFamily"in e&&(i.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(BT(r),i),!0}return!1}_updateStyleComponents(e,n){const r=this._map;let s=!1;return r.isStyleLoaded()&&("light"in e&&r.setLight&&!Zr(e.light,n.light)&&(s=!0,r.setLight(e.light)),"fog"in e&&r.setFog&&!Zr(e.fog,n.fog)&&(s=!0,r.setFog(e.fog)),"terrain"in e&&r.setTerrain&&!Zr(e.terrain,n.terrain)&&(!e.terrain||r.getSource(e.terrain.source))&&(s=!0,r.setTerrain(e.terrain))),s}_updateHandlers(e,n){var r,s;const i=this._map;let o=!1;for(const c of AQ){const u=(r=e[c])!==null&&r!==void 0?r:!0,d=(s=n[c])!==null&&s!==void 0?s:!0;Zr(u,d)||(o=!0,u?i[c].enable(u):i[c].disable())}return o}_queryRenderedFeatures(e){const n=this._map,r=n.transform,{interactiveLayerIds:s=[]}=this.props;try{return n.transform=this._renderTransform,n.queryRenderedFeatures(e,{layers:s.filter(n.getLayer.bind(n))})}catch{return[]}finally{n.transform=r}}_updateHover(e){var n;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const i=e.type,o=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,c=this._queryRenderedFeatures(e.point),u=c.length>0;!u&&o&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=c,u&&!o&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=i}else this._hoveredFeatures=null}_fireEvent(e,n,r){const s=this._map,i=s.transform,o=typeof n=="string"?n:n.type;return o==="move"&&this._updateViewState(this.props,!1),o in mm&&(typeof n=="object"&&(n.viewState=DT(i)),this._map.isMoving())?(s.transform=this._renderTransform,e.call(s,n,r),s.transform=i,s):(e.call(s,n,r),s)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&e.fire(r);this._internalUpdate=!1;const n=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{jT(this._renderTransform,n),e.transform=n}}}Fa.savedMaps=[];function CQ(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||UT.MapboxAccessToken}catch{}try{t=t||UT.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const RQ=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function kQ(t){if(!t)return null;const e=t.map,n={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:r=>{const s=e.transform;e.transform=t.transform;const i=e.project(r);return e.transform=s,i},unproject:r=>{const s=e.transform;e.transform=t.transform;const i=e.unproject(r);return e.transform=s,i},queryTerrainElevation:(r,s)=>{const i=e.transform;e.transform=t.transform;const o=e.queryTerrainElevation(r,s);return e.transform=i,o},queryRenderedFeatures:(r,s)=>{const i=e.transform;e.transform=t.transform;const o=e.queryRenderedFeatures(r,s);return e.transform=i,o}};for(const r of MQ(e))!(r in n)&&!RQ.includes(r)&&(n[r]=e[r].bind(e));return n}function MQ(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof t[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}const IQ=typeof document<"u"?_.useLayoutEffect:_.useEffect,OQ=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function LQ(t,e){for(const r of OQ)r in e&&(t[r]=e[r]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;n&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(n,r=>{r&&console.error(r)},!0)}const bh=_.createContext(null);function NQ(t,e,n){const r=_.useContext(xQ),[s,i]=_.useState(null),o=_.useRef(),{current:c}=_.useRef({mapLib:null,map:null});_.useEffect(()=>{const h=t.mapLib;let p=!0,m;return Promise.resolve(h||n).then(y=>{if(!p)return;if(!y)throw new Error("Invalid mapLib");const E="Map"in y?y:y.default;if(!E.Map)throw new Error("Invalid mapLib");if(LQ(E,t),!E.supported||E.supported(t))t.reuseMaps&&(m=Fa.reuse(t,o.current)),m||(m=new Fa(E.Map,t,o.current)),c.map=kQ(m),c.mapLib=E,i(m),r==null||r.onMapMount(c.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(y=>{const{onError:E}=t;E?E({type:"error",target:null,originalEvent:null,error:y}):console.error(y)}),()=>{p=!1,m&&(r==null||r.onMapUnmount(t.id),t.reuseMaps?m.recycle():m.destroy())}},[]),IQ(()=>{s&&s.setProps(t)}),_.useImperativeHandle(e,()=>c.map,[s]);const u=_.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),d={height:"100%"};return _.createElement("div",{id:t.id,ref:o,style:u},s&&_.createElement(bh.Provider,{value:c},_.createElement("div",{"mapboxgl-children":"",style:d},t.children)))}const jQ=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function ao(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const s=e[r];Number.isFinite(s)&&!jQ.test(r)?n[r]=`${s}px`:n[r]=s}}function DQ(t,e){const{map:n,mapLib:r}=_.useContext(bh),s=_.useRef({props:t});s.current.props=t;const i=_.useMemo(()=>{let b=!1;_.Children.forEach(t.children,S=>{S&&(b=!0)});const T={...t,element:b?document.createElement("div"):null},P=new r.Marker(T);return P.setLngLat([t.longitude,t.latitude]),P.getElement().addEventListener("click",S=>{var C,I;(I=(C=s.current.props).onClick)===null||I===void 0||I.call(C,{type:"click",target:P,originalEvent:S})}),P.on("dragstart",S=>{var C,I;const O=S;O.lngLat=i.getLngLat(),(I=(C=s.current.props).onDragStart)===null||I===void 0||I.call(C,O)}),P.on("drag",S=>{var C,I;const O=S;O.lngLat=i.getLngLat(),(I=(C=s.current.props).onDrag)===null||I===void 0||I.call(C,O)}),P.on("dragend",S=>{var C,I;const O=S;O.lngLat=i.getLngLat(),(I=(C=s.current.props).onDragEnd)===null||I===void 0||I.call(C,O)}),P},[]);_.useEffect(()=>(i.addTo(n.getMap()),()=>{i.remove()}),[]);const{longitude:o,latitude:c,offset:u,style:d,draggable:h=!1,popup:p=null,rotation:m=0,rotationAlignment:y="auto",pitchAlignment:E="auto"}=t;return _.useEffect(()=>{ao(i.getElement(),d)},[d]),_.useImperativeHandle(e,()=>i,[]),(i.getLngLat().lng!==o||i.getLngLat().lat!==c)&&i.setLngLat([o,c]),u&&!EQ(i.getOffset(),u)&&i.setOffset(u),i.isDraggable()!==h&&i.setDraggable(h),i.getRotation()!==m&&i.setRotation(m),i.getRotationAlignment()!==y&&i.setRotationAlignment(y),i.getPitchAlignment()!==E&&i.setPitchAlignment(E),i.getPopup()!==p&&i.setPopup(p),Qi.createPortal(t.children,i.getElement())}_.memo(_.forwardRef(DQ));function GT(t){return new Set(t?t.trim().split(/\s+/):[])}function FQ(t,e){const{map:n,mapLib:r}=_.useContext(bh),s=_.useMemo(()=>document.createElement("div"),[]),i=_.useRef({props:t});i.current.props=t;const o=_.useMemo(()=>{const c={...t},u=new r.Popup(c);return u.setLngLat([t.longitude,t.latitude]),u.once("open",d=>{var h,p;(p=(h=i.current.props).onOpen)===null||p===void 0||p.call(h,d)}),u},[]);if(_.useEffect(()=>{const c=u=>{var d,h;(h=(d=i.current.props).onClose)===null||h===void 0||h.call(d,u)};return o.on("close",c),o.setDOMContent(s).addTo(n.getMap()),()=>{o.off("close",c),o.isOpen()&&o.remove()}},[]),_.useEffect(()=>{ao(o.getElement(),t.style)},[t.style]),_.useImperativeHandle(e,()=>o,[]),o.isOpen()&&((o.getLngLat().lng!==t.longitude||o.getLngLat().lat!==t.latitude)&&o.setLngLat([t.longitude,t.latitude]),t.offset&&!Zr(o.options.offset,t.offset)&&o.setOffset(t.offset),(o.options.anchor!==t.anchor||o.options.maxWidth!==t.maxWidth)&&(o.options.anchor=t.anchor,o.setMaxWidth(t.maxWidth)),o.options.className!==t.className)){const c=GT(o.options.className),u=GT(t.className);for(const d of c)u.has(d)||o.removeClassName(d);for(const d of u)c.has(d)||o.addClassName(d);o.options.className=t.className}return Qi.createPortal(t.children,s)}_.memo(_.forwardRef(FQ));function su(t,e,n,r){const s=_.useContext(bh),i=_.useMemo(()=>t(s),[]);return _.useEffect(()=>{const o=e,c=null,u=typeof e=="function"?e:null,{map:d}=s;return d.hasControl(i)||(d.addControl(i,o==null?void 0:o.position),c&&c(s)),()=>{u&&u(s),d.hasControl(i)&&d.removeControl(i)}},[]),i}function BQ(t){const e=su(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return _.useEffect(()=>{ao(e._container,t.style)},[t.style]),null}_.memo(BQ);function UQ(t){const e=su(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return _.useEffect(()=>{ao(e._controlContainer,t.style)},[t.style]),null}_.memo(UQ);function VQ(t,e){const n=_.useRef({props:t}),r=su(({mapLib:s})=>{const i=new s.GeolocateControl(t),o=i._setupUI;return i._setupUI=c=>{i._container.hasChildNodes()||o(c)},i.on("geolocate",c=>{var u,d;(d=(u=n.current.props).onGeolocate)===null||d===void 0||d.call(u,c)}),i.on("error",c=>{var u,d;(d=(u=n.current.props).onError)===null||d===void 0||d.call(u,c)}),i.on("outofmaxbounds",c=>{var u,d;(d=(u=n.current.props).onOutOfMaxBounds)===null||d===void 0||d.call(u,c)}),i.on("trackuserlocationstart",c=>{var u,d;(d=(u=n.current.props).onTrackUserLocationStart)===null||d===void 0||d.call(u,c)}),i.on("trackuserlocationend",c=>{var u,d;(d=(u=n.current.props).onTrackUserLocationEnd)===null||d===void 0||d.call(u,c)}),i},{position:t.position});return n.current.props=t,_.useImperativeHandle(e,()=>r,[]),_.useEffect(()=>{ao(r._container,t.style)},[t.style]),null}_.memo(_.forwardRef(VQ));function zQ(t){const e=su(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return _.useEffect(()=>{ao(e._container,t.style)},[t.style]),null}_.memo(zQ);function $Q(t){const e=su(({mapLib:i})=>new i.ScaleControl(t),{position:t.position}),n=_.useRef(t),r=n.current;n.current=t;const{style:s}=t;return t.maxWidth!==void 0&&t.maxWidth!==r.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==r.unit&&e.setUnit(t.unit),_.useEffect(()=>{ao(e._container,s)},[s]),null}_.memo($Q);const GQ=Yi(()=>import("./mapbox-gl-C02rYQR0.js").then(t=>t.m),[],import.meta.url),WQ=_.forwardRef(function(e,n){return NQ(e,n,GQ)}),HQ="mapbox://styles/geovista-fdte/clu7c9nmj00vs01pad3m97qqa",qQ="mapbox://styles/geovista-fdte/clon6qm3o008t01peeqk31rg7",KQ="pk.eyJ1IjoiZ2VvdmlzdGEtZmR0ZSIsImEiOiJja3plOG9wM2UzNmdkMnZuZnkzdHhrY3N1In0.8FxWCItNfns7J7hXCt-tFQ",YQ={longitude:-46.6388,latitude:-23.5489,zoom:12,pitch:0,bearing:0},XQ={marker:{x:0,y:-0,width:26,height:26,mask:!0}},ZQ=t=>typeof t.latitude=="number"&&typeof t.longitude=="number"&&!isNaN(t.latitude)&&!isNaN(t.longitude)&&t.latitude>=-90&&t.latitude<=90&&t.longitude>=-180&&t.longitude<=180,QQ=({isDarkMode:t})=>{const[e,n]=_.useState(YQ),[r,s]=_.useState([]),{setZoomToLocation:i,hiddenPOITypes:o}=cy(),c=async()=>{try{const{data:h,error:p}=await Rr.from("pois").select(`
          id,
          name,
          latitude,
          longitude,
          type_id,
          poi_types (
            name,
            color
          )
        `);if(p)throw p;const m=h.map(y=>({id:y.id,name:y.name,latitude:Number(y.latitude),longitude:Number(y.longitude),type_id:y.type_id,type_name:y.poi_types.name,type_color:y.poi_types.color})).filter(ZQ);s(m)}catch(h){console.error("Error fetching POIs:",h)}},u=_.useCallback((h,p)=>{typeof h=="number"&&typeof p=="number"&&!isNaN(h)&&!isNaN(p)&&h>=-90&&h<=90&&p>=-180&&p<=180&&n(m=>({...m,latitude:h,longitude:p,zoom:16,transitionDuration:2e3}))},[]);_.useEffect(()=>{i(()=>u)},[i,u]),_.useEffect(()=>{c();const h=Rr.channel("poi_changes").on("postgres_changes",{event:"*",schema:"public",table:"pois"},()=>{c()}).subscribe();return()=>{Rr.removeChannel(h)}},[]);const d=[new Fy({id:"poi-layer",data:r.filter(h=>!o.has(h.type_id)),pickable:!0,iconAtlas:"/map-pin.svg",iconMapping:XQ,getIcon:h=>"marker",sizeScale:2,getPosition:h=>[h.longitude,h.latitude],getSize:h=>8,getColor:h=>{var b;const p=((b=h.type_color.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))==null?void 0:b[0])||"#000000",m=parseInt(p.slice(1,3),16),y=parseInt(p.slice(3,5),16),E=parseInt(p.slice(5,7),16);return[m,y,E,255]},onHover:({object:h})=>{h&&console.log(`Hovering over ${h.name} (${h.type_name})`)}})];return x.jsxs("div",{className:"relative w-full h-full",onContextMenu:h=>h.preventDefault(),children:[x.jsx(wM,{viewState:e,onViewStateChange:({viewState:h})=>n(h),controller:!0,layers:d,style:{position:"absolute",width:"100%",height:"100%"},children:x.jsx(WQ,{mapboxAccessToken:KQ,mapStyle:t?HQ:qQ,reuseMaps:!0,attributionControl:!1})}),x.jsxs("div",{className:`absolute bottom-0 right-0 p-2 z-10 text-xs ${t?"text-gray-400":"text-gray-600"}`,children:["© ",x.jsx("a",{href:"https://www.mapbox.com/about/maps/",target:"_blank",rel:"noopener noreferrer",children:"Mapbox"})," | © ",x.jsx("a",{href:"https://www.openstreetmap.org/about/",target:"_blank",rel:"noopener noreferrer",children:"OpenStreetMap"})," |",x.jsx("a",{href:"https://www.mapbox.com/map-feedback/",target:"_blank",rel:"noopener noreferrer",children:"Improve this map"})]})]})},JQ=()=>{const[t,e]=_.useState(()=>typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!1),[n,r]=_.useState(!1),s=rS();_.useEffect(()=>{const u=window.matchMedia("(prefers-color-scheme: dark)"),d=h=>{e(h.matches)};return u.addEventListener("change",d),document.body.setAttribute("data-theme",t?"dark":"light"),()=>{u.removeEventListener("change",d)}},[t]);const i=u=>{e(u)},o=()=>{r(!0)},c=u=>{s(`/control/${u}`)};return x.jsx(_8,{children:x.jsx("div",{className:"theme-aware-bg flex flex-row justify-center w-full h-screen overflow-hidden",children:x.jsx("div",{className:"w-full h-full relative",children:x.jsxs("div",{className:`h-full ${t?"bg-zinc-900":""}`,children:[x.jsx(QQ,{isDarkMode:t}),x.jsx("div",{className:"absolute top-[50%] left-[17px] -translate-y-1/2 z-10",children:x.jsx(V8,{onDarkModeChange:i,onHistoryClick:o,onControlConsultarClick:c})}),n&&x.jsx(z8,{isDarkMode:t,onClose:()=>r(!1)})]})})})})},WT=[{id:"P08",tipo:"Móvel",logradouro:"",local:"DT-2700"},{id:"P07",tipo:"Móvel",logradouro:"",local:"DT-2700"},{id:"P10",tipo:"Móvel",logradouro:"",local:"DT-2700"},{id:"P12",tipo:"Fixo",logradouro:"Rua das Laranjeiras, 123 - Vila Mariana",local:"DT-2699"},{id:"P13",tipo:"Fixo",logradouro:"Rua das Laranjeiras, 123 - Vila Mariana",local:"DT-2699"},{id:"P17",tipo:"Móvel",logradouro:"",local:"DT-2700"},{id:"P20",tipo:"Fixo",logradouro:"Rua das Laranjeiras, 123 - Vila Mariana",local:"DT-2699"},{id:"P21",tipo:"Móvel",logradouro:"",local:"DT-2700"},{id:"P24",tipo:"Móvel",logradouro:"",local:"DT-2700"},{id:"P25",tipo:"Móvel",logradouro:"",local:"DT-2700"}],vm=10,eJ=({isDarkMode:t,title:e})=>{const[n,r]=_.useState([]),[s,i]=_.useState(""),[o,c]=_.useState(1),u=Qe.useMemo(()=>{if(!s)return WT;const y=s.toLowerCase();return WT.filter(E=>Object.values(E).some(b=>b.toString().toLowerCase().includes(y)))},[s]),d=Math.ceil(u.length/vm),h=Qe.useMemo(()=>{const y=(o-1)*vm;return u.slice(y,y+vm)},[u,o]),p=()=>{n.length===h.length?r([]):r(h.map(y=>y.id))},m=y=>{r(E=>E.includes(y)?E.filter(b=>b!==y):[...E,y])};return x.jsx("div",{className:`w-full h-full p-6 ${t?"bg-zinc-900":"bg-[#EEF3FA]"}`,children:x.jsxs("div",{className:"max-w-[90dvw] mx-auto relative",children:[x.jsx("h2",{className:`text-lg font-semibold absolute pt-4 left-0 top-0 ${t?"text-gray-300":"text-gray-600"}`,children:e}),x.jsxs("div",{className:"flex flex-col",children:[x.jsx("div",{className:"flex justify-center mb-3",children:x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"text",placeholder:"Busca por Nome, Tipo...",value:s,onChange:y=>i(y.target.value),className:`w-[300px] h-8 pl-4 pr-8 text-sm rounded-full ${t?"bg-zinc-800 text-gray-200 placeholder-gray-400":"bg-white text-gray-900 placeholder-gray-500"}`}),x.jsx(W0,{className:`absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 ${t?"text-gray-400":"text-gray-500"}`})]})}),x.jsxs("div",{className:"flex justify-center gap-3 mb-3",children:[x.jsxs("button",{className:"px-4 py-1.5 text-xs rounded-full transition-colors flex items-center gap-2 bg-blue-500 text-white hover:bg-blue-600",children:[x.jsx(Gd,{size:14})," ",e]}),x.jsxs("button",{onClick:p,className:`px-4 py-1.5 text-xs rounded-full transition-colors flex items-center gap-2 ${t?"bg-zinc-800 text-gray-300 hover:bg-zinc-700":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[x.jsx(hS,{size:14})," Marcar Tudo"]}),x.jsxs("button",{onClick:()=>r([]),className:`px-4 py-1.5 text-xs rounded-full transition-colors flex items-center gap-2 ${t?"bg-zinc-800 text-gray-300 hover:bg-zinc-700":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[x.jsx(pS,{size:14})," Desmarcar Tudo"]})]}),x.jsx("div",{className:`rounded-lg overflow-hidden shadow-lg ${t?"bg-zinc-800":"bg-white"}`,children:x.jsxs("table",{className:"w-full",children:[x.jsx("thead",{children:x.jsxs("tr",{className:`${t?"bg-zinc-800":"bg-white"} border-b ${t?"border-zinc-700":"border-gray-200"}`,children:[x.jsx("th",{className:"w-12 px-4 py-3"}),x.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Nome"}),x.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Tipo"}),x.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Logradouro"}),x.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Local de Instalação"}),x.jsx("th",{className:`px-4 py-3 text-center text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Ações"})]})}),x.jsx("tbody",{children:h.map((y,E)=>x.jsxs(Tn.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:E*.05},className:`border-t ${t?"border-zinc-700":"border-gray-200"}`,children:[x.jsx("td",{className:"px-4 py-3",children:x.jsx("input",{type:"checkbox",checked:n.includes(y.id),onChange:()=>m(y.id),className:`h-4 w-4 rounded ${t?"text-blue-500 bg-zinc-700 border-zinc-600":"text-blue-600 bg-gray-100 border-gray-300"}`})}),x.jsx("td",{className:`px-4 py-3 text-sm ${t?"text-gray-300":"text-gray-900"}`,children:y.id}),x.jsx("td",{className:`px-4 py-3 text-sm ${t?"text-gray-300":"text-gray-900"}`,children:y.tipo}),x.jsx("td",{className:`px-4 py-3 text-sm ${t?"text-gray-300":"text-gray-900"}`,children:y.logradouro}),x.jsx("td",{className:`px-4 py-3 text-sm ${t?"text-gray-300":"text-gray-900"}`,children:y.local}),x.jsx("td",{className:"px-4 py-3",children:x.jsxs("div",{className:"flex items-center justify-center gap-2",children:[x.jsx("button",{className:`p-1.5 rounded-lg transition-colors ${t?"hover:bg-zinc-700":"hover:bg-gray-100"}`,children:x.jsx(mL,{className:"w-4 h-4"})}),x.jsx("button",{className:`p-1.5 rounded-lg transition-colors ${t?"hover:bg-zinc-700":"hover:bg-gray-100"}`,children:x.jsx(bL,{className:"w-4 h-4"})}),x.jsx("button",{className:`p-1.5 rounded-lg transition-colors ${t?"hover:bg-zinc-700":"hover:bg-gray-100"}`,children:x.jsx(TL,{className:"w-4 h-4 text-destructive"})})]})})]},y.id))})]})}),x.jsx("div",{className:"flex justify-center mt-4",children:x.jsx("div",{className:`flex gap-1 rounded-lg shadow-md p-0.5 ${t?"bg-zinc-800":"bg-white"}`,children:Array.from({length:d},(y,E)=>x.jsx("button",{onClick:()=>c(E+1),className:`px-3 py-1 rounded-md ${o===E+1?"bg-blue-500 text-white":t?"text-gray-300 hover:bg-zinc-700":"text-gray-600 hover:bg-gray-100"}`,children:E+1},E+1))})})]})]})})},tJ=()=>{const{section:t}=UO();rS();const[e,n]=_.useState(!1);return x.jsx("div",{className:`min-h-screen ${e?"bg-zinc-900":"bg-[#EFF4FA]"}`,children:x.jsx(eJ,{isDarkMode:e,title:t||""})})};function nJ(){return x.jsx(iL,{children:x.jsxs(nL,{children:[x.jsx(_m,{path:"/",element:x.jsx(JQ,{})}),x.jsx(_m,{path:"/control/:section",element:x.jsx(tJ,{})})]})})}lO.createRoot(document.getElementById("app")).render(x.jsx(_.StrictMode,{children:x.jsx(nJ,{})}));export{jf as g};
