function oC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Xh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function aj(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var _g={exports:{}},Mc={},wg={exports:{}},Je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gb;function lj(){if(Gb)return Je;Gb=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(V){return V===null||typeof V!="object"?null:(V=p&&V[p]||V["@@iterator"],typeof V=="function"?V:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,x={};function E(V,J,De){this.props=V,this.context=J,this.refs=x,this.updater=De||y}E.prototype.isReactComponent={},E.prototype.setState=function(V,J){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,J,"setState")},E.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function A(){}A.prototype=E.prototype;function S(V,J,De){this.props=V,this.context=J,this.refs=x,this.updater=De||y}var C=S.prototype=new A;C.constructor=S,T(C,E.prototype),C.isPureReactComponent=!0;var O=Array.isArray,M=Object.prototype.hasOwnProperty,D={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function B(V,J,De){var Ne,ze={},Ue=null,le=null;if(J!=null)for(Ne in J.ref!==void 0&&(le=J.ref),J.key!==void 0&&(Ue=""+J.key),J)M.call(J,Ne)&&!z.hasOwnProperty(Ne)&&(ze[Ne]=J[Ne]);var Te=arguments.length-2;if(Te===1)ze.children=De;else if(1<Te){for(var ve=Array(Te),ke=0;ke<Te;ke++)ve[ke]=arguments[ke+2];ze.children=ve}if(V&&V.defaultProps)for(Ne in Te=V.defaultProps,Te)ze[Ne]===void 0&&(ze[Ne]=Te[Ne]);return{$$typeof:t,type:V,key:Ue,ref:le,props:ze,_owner:D.current}}function $(V,J){return{$$typeof:t,type:V.type,key:J,ref:V.ref,props:V.props,_owner:V._owner}}function G(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function te(V){var J={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(De){return J[De]})}var Q=/\/+/g;function se(V,J){return typeof V=="object"&&V!==null&&V.key!=null?te(""+V.key):J.toString(36)}function re(V,J,De,Ne,ze){var Ue=typeof V;(Ue==="undefined"||Ue==="boolean")&&(V=null);var le=!1;if(V===null)le=!0;else switch(Ue){case"string":case"number":le=!0;break;case"object":switch(V.$$typeof){case t:case e:le=!0}}if(le)return le=V,ze=ze(le),V=Ne===""?"."+se(le,0):Ne,O(ze)?(De="",V!=null&&(De=V.replace(Q,"$&/")+"/"),re(ze,J,De,"",function(ke){return ke})):ze!=null&&(G(ze)&&(ze=$(ze,De+(!ze.key||le&&le.key===ze.key?"":(""+ze.key).replace(Q,"$&/")+"/")+V)),J.push(ze)),1;if(le=0,Ne=Ne===""?".":Ne+":",O(V))for(var Te=0;Te<V.length;Te++){Ue=V[Te];var ve=Ne+se(Ue,Te);le+=re(Ue,J,De,ve,ze)}else if(ve=g(V),typeof ve=="function")for(V=ve.call(V),Te=0;!(Ue=V.next()).done;)Ue=Ue.value,ve=Ne+se(Ue,Te++),le+=re(Ue,J,De,ve,ze);else if(Ue==="object")throw J=String(V),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return le}function ge(V,J,De){if(V==null)return V;var Ne=[],ze=0;return re(V,Ne,"","",function(Ue){return J.call(De,Ue,ze++)}),Ne}function ue(V){if(V._status===-1){var J=V._result;J=J(),J.then(function(De){(V._status===0||V._status===-1)&&(V._status=1,V._result=De)},function(De){(V._status===0||V._status===-1)&&(V._status=2,V._result=De)}),V._status===-1&&(V._status=0,V._result=J)}if(V._status===1)return V._result.default;throw V._result}var pe={current:null},X={transition:null},Z={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:X,ReactCurrentOwner:D};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Je.Children={map:ge,forEach:function(V,J,De){ge(V,function(){J.apply(this,arguments)},De)},count:function(V){var J=0;return ge(V,function(){J++}),J},toArray:function(V){return ge(V,function(J){return J})||[]},only:function(V){if(!G(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Je.Component=E,Je.Fragment=n,Je.Profiler=s,Je.PureComponent=S,Je.StrictMode=r,Je.Suspense=u,Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,Je.act=ne,Je.cloneElement=function(V,J,De){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var Ne=T({},V.props),ze=V.key,Ue=V.ref,le=V._owner;if(J!=null){if(J.ref!==void 0&&(Ue=J.ref,le=D.current),J.key!==void 0&&(ze=""+J.key),V.type&&V.type.defaultProps)var Te=V.type.defaultProps;for(ve in J)M.call(J,ve)&&!z.hasOwnProperty(ve)&&(Ne[ve]=J[ve]===void 0&&Te!==void 0?Te[ve]:J[ve])}var ve=arguments.length-2;if(ve===1)Ne.children=De;else if(1<ve){Te=Array(ve);for(var ke=0;ke<ve;ke++)Te[ke]=arguments[ke+2];Ne.children=Te}return{$$typeof:t,type:V.type,key:ze,ref:Ue,props:Ne,_owner:le}},Je.createContext=function(V){return V={$$typeof:o,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:i,_context:V},V.Consumer=V},Je.createElement=B,Je.createFactory=function(V){var J=B.bind(null,V);return J.type=V,J},Je.createRef=function(){return{current:null}},Je.forwardRef=function(V){return{$$typeof:l,render:V}},Je.isValidElement=G,Je.lazy=function(V){return{$$typeof:h,_payload:{_status:-1,_result:V},_init:ue}},Je.memo=function(V,J){return{$$typeof:d,type:V,compare:J===void 0?null:J}},Je.startTransition=function(V){var J=X.transition;X.transition={};try{V()}finally{X.transition=J}},Je.unstable_act=ne,Je.useCallback=function(V,J){return pe.current.useCallback(V,J)},Je.useContext=function(V){return pe.current.useContext(V)},Je.useDebugValue=function(){},Je.useDeferredValue=function(V){return pe.current.useDeferredValue(V)},Je.useEffect=function(V,J){return pe.current.useEffect(V,J)},Je.useId=function(){return pe.current.useId()},Je.useImperativeHandle=function(V,J,De){return pe.current.useImperativeHandle(V,J,De)},Je.useInsertionEffect=function(V,J){return pe.current.useInsertionEffect(V,J)},Je.useLayoutEffect=function(V,J){return pe.current.useLayoutEffect(V,J)},Je.useMemo=function(V,J){return pe.current.useMemo(V,J)},Je.useReducer=function(V,J,De){return pe.current.useReducer(V,J,De)},Je.useRef=function(V){return pe.current.useRef(V)},Je.useState=function(V){return pe.current.useState(V)},Je.useSyncExternalStore=function(V,J,De){return pe.current.useSyncExternalStore(V,J,De)},Je.useTransition=function(){return pe.current.useTransition()},Je.version="18.3.1",Je}var Wb;function Zh(){return Wb||(Wb=1,wg.exports=lj()),wg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb;function cj(){if(Hb)return Mc;Hb=1;var t=Zh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,d){var h,p={},g=null,y=null;d!==void 0&&(g=""+d),u.key!==void 0&&(g=""+u.key),u.ref!==void 0&&(y=u.ref);for(h in u)r.call(u,h)&&!i.hasOwnProperty(h)&&(p[h]=u[h]);if(l&&l.defaultProps)for(h in u=l.defaultProps,u)p[h]===void 0&&(p[h]=u[h]);return{$$typeof:e,type:l,key:g,ref:y,props:p,_owner:s.current}}return Mc.Fragment=n,Mc.jsx=o,Mc.jsxs=o,Mc}var qb;function uj(){return qb||(qb=1,_g.exports=cj()),_g.exports}var w=uj(),_=Zh();const je=Xh(_),h0=oC({__proto__:null,default:je},[_]);var wf={},xg={exports:{}},Bn={},bg={exports:{}},Eg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kb;function dj(){return Kb||(Kb=1,function(t){function e(X,Z){var ne=X.length;X.push(Z);e:for(;0<ne;){var V=ne-1>>>1,J=X[V];if(0<s(J,Z))X[V]=Z,X[ne]=J,ne=V;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var Z=X[0],ne=X.pop();if(ne!==Z){X[0]=ne;e:for(var V=0,J=X.length,De=J>>>1;V<De;){var Ne=2*(V+1)-1,ze=X[Ne],Ue=Ne+1,le=X[Ue];if(0>s(ze,ne))Ue<J&&0>s(le,ze)?(X[V]=le,X[Ue]=ne,V=Ue):(X[V]=ze,X[Ne]=ne,V=Ne);else if(Ue<J&&0>s(le,ne))X[V]=le,X[Ue]=ne,V=Ue;else break e}}return Z}function s(X,Z){var ne=X.sortIndex-Z.sortIndex;return ne!==0?ne:X.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,p=null,g=3,y=!1,T=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(X){for(var Z=n(d);Z!==null;){if(Z.callback===null)r(d);else if(Z.startTime<=X)r(d),Z.sortIndex=Z.expirationTime,e(u,Z);else break;Z=n(d)}}function O(X){if(x=!1,C(X),!T)if(n(u)!==null)T=!0,ue(M);else{var Z=n(d);Z!==null&&pe(O,Z.startTime-X)}}function M(X,Z){T=!1,x&&(x=!1,A(B),B=-1),y=!0;var ne=g;try{for(C(Z),p=n(u);p!==null&&(!(p.expirationTime>Z)||X&&!te());){var V=p.callback;if(typeof V=="function"){p.callback=null,g=p.priorityLevel;var J=V(p.expirationTime<=Z);Z=t.unstable_now(),typeof J=="function"?p.callback=J:p===n(u)&&r(u),C(Z)}else r(u);p=n(u)}if(p!==null)var De=!0;else{var Ne=n(d);Ne!==null&&pe(O,Ne.startTime-Z),De=!1}return De}finally{p=null,g=ne,y=!1}}var D=!1,z=null,B=-1,$=5,G=-1;function te(){return!(t.unstable_now()-G<$)}function Q(){if(z!==null){var X=t.unstable_now();G=X;var Z=!0;try{Z=z(!0,X)}finally{Z?se():(D=!1,z=null)}}else D=!1}var se;if(typeof S=="function")se=function(){S(Q)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ge=re.port2;re.port1.onmessage=Q,se=function(){ge.postMessage(null)}}else se=function(){E(Q,0)};function ue(X){z=X,D||(D=!0,se())}function pe(X,Z){B=E(function(){X(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){T||y||(T=!0,ue(M))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(X){switch(g){case 1:case 2:case 3:var Z=3;break;default:Z=g}var ne=g;g=Z;try{return X()}finally{g=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,Z){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ne=g;g=X;try{return Z()}finally{g=ne}},t.unstable_scheduleCallback=function(X,Z,ne){var V=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?V+ne:V):ne=V,X){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ne+J,X={id:h++,callback:Z,priorityLevel:X,startTime:ne,expirationTime:J,sortIndex:-1},ne>V?(X.sortIndex=ne,e(d,X),n(u)===null&&X===n(d)&&(x?(A(B),B=-1):x=!0,pe(O,ne-V))):(X.sortIndex=J,e(u,X),T||y||(T=!0,ue(M))),X},t.unstable_shouldYield=te,t.unstable_wrapCallback=function(X){var Z=g;return function(){var ne=g;g=Z;try{return X.apply(this,arguments)}finally{g=ne}}}}(Eg)),Eg}var Yb;function fj(){return Yb||(Yb=1,bg.exports=dj()),bg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xb;function hj(){if(Xb)return Bn;Xb=1;var t=Zh(),e=fj();function n(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,f=1;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(a,c){o(a,c),o(a+"Capture",c)}function o(a,c){for(s[a]=c,a=0;a<c.length;a++)r.add(c[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function g(a){return u.call(p,a)?!0:u.call(h,a)?!1:d.test(a)?p[a]=!0:(h[a]=!0,!1)}function y(a,c,f,m){if(f!==null&&f.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return m?!1:f!==null?!f.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function T(a,c,f,m){if(c===null||typeof c>"u"||y(a,c,f,m))return!0;if(m)return!1;if(f!==null)switch(f.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function x(a,c,f,m,v,b,P){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=m,this.attributeNamespace=v,this.mustUseProperty=f,this.propertyName=a,this.type=c,this.sanitizeURL=b,this.removeEmptyString=P}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){E[a]=new x(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];E[c]=new x(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){E[a]=new x(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){E[a]=new x(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){E[a]=new x(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){E[a]=new x(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){E[a]=new x(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){E[a]=new x(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){E[a]=new x(a,5,!1,a.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function S(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(A,S);E[c]=new x(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(A,S);E[c]=new x(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(A,S);E[c]=new x(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){E[a]=new x(a,1,!1,a.toLowerCase(),null,!1,!1)}),E.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){E[a]=new x(a,1,!1,a.toLowerCase(),null,!0,!0)});function C(a,c,f,m){var v=E.hasOwnProperty(c)?E[c]:null;(v!==null?v.type!==0:m||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(T(c,f,v,m)&&(f=null),m||v===null?g(c)&&(f===null?a.removeAttribute(c):a.setAttribute(c,""+f)):v.mustUseProperty?a[v.propertyName]=f===null?v.type===3?!1:"":f:(c=v.attributeName,m=v.attributeNamespace,f===null?a.removeAttribute(c):(v=v.type,f=v===3||v===4&&f===!0?"":""+f,m?a.setAttributeNS(m,c,f):a.setAttribute(c,f))))}var O=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),D=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),te=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),ge=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),X=Symbol.iterator;function Z(a){return a===null||typeof a!="object"?null:(a=X&&a[X]||a["@@iterator"],typeof a=="function"?a:null)}var ne=Object.assign,V;function J(a){if(V===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);V=c&&c[1]||""}return`
`+V+a}var De=!1;function Ne(a,c){if(!a||De)return"";De=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(Y){var m=Y}Reflect.construct(a,[],c)}else{try{c.call()}catch(Y){m=Y}a.call(c.prototype)}else{try{throw Error()}catch(Y){m=Y}a()}}catch(Y){if(Y&&m&&typeof Y.stack=="string"){for(var v=Y.stack.split(`
`),b=m.stack.split(`
`),P=v.length-1,L=b.length-1;1<=P&&0<=L&&v[P]!==b[L];)L--;for(;1<=P&&0<=L;P--,L--)if(v[P]!==b[L]){if(P!==1||L!==1)do if(P--,L--,0>L||v[P]!==b[L]){var F=`
`+v[P].replace(" at new "," at ");return a.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",a.displayName)),F}while(1<=P&&0<=L);break}}}finally{De=!1,Error.prepareStackTrace=f}return(a=a?a.displayName||a.name:"")?J(a):""}function ze(a){switch(a.tag){case 5:return J(a.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return a=Ne(a.type,!1),a;case 11:return a=Ne(a.type.render,!1),a;case 1:return a=Ne(a.type,!0),a;default:return""}}function Ue(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case z:return"Fragment";case D:return"Portal";case $:return"Profiler";case B:return"StrictMode";case se:return"Suspense";case re:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case te:return(a.displayName||"Context")+".Consumer";case G:return(a._context.displayName||"Context")+".Provider";case Q:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ge:return c=a.displayName||null,c!==null?c:Ue(a.type)||"Memo";case ue:c=a._payload,a=a._init;try{return Ue(a(c))}catch{}}return null}function le(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ue(c);case 8:return c===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Te(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ve(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ke(a){var c=ve(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),m=""+a[c];if(!a.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,b=f.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return v.call(this)},set:function(P){m=""+P,b.call(this,P)}}),Object.defineProperty(a,c,{enumerable:f.enumerable}),{getValue:function(){return m},setValue:function(P){m=""+P},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Ye(a){a._valueTracker||(a._valueTracker=ke(a))}function Xe(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var f=c.getValue(),m="";return a&&(m=ve(a)?a.checked?"true":"false":a.value),a=m,a!==f?(c.setValue(a),!0):!1}function mt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ct(a,c){var f=c.checked;return ne({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??a._wrapperState.initialChecked})}function an(a,c){var f=c.defaultValue==null?"":c.defaultValue,m=c.checked!=null?c.checked:c.defaultChecked;f=Te(c.value!=null?c.value:f),a._wrapperState={initialChecked:m,initialValue:f,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Lt(a,c){c=c.checked,c!=null&&C(a,"checked",c,!1)}function Gt(a,c){Lt(a,c);var f=Te(c.value),m=c.type;if(f!=null)m==="number"?(f===0&&a.value===""||a.value!=f)&&(a.value=""+f):a.value!==""+f&&(a.value=""+f);else if(m==="submit"||m==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?On(a,c.type,f):c.hasOwnProperty("defaultValue")&&On(a,c.type,Te(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function Ys(a,c,f){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var m=c.type;if(!(m!=="submit"&&m!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,f||c===a.value||(a.value=c),a.defaultValue=c}f=a.name,f!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,f!==""&&(a.name=f)}function On(a,c,f){(c!=="number"||mt(a.ownerDocument)!==a)&&(f==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+f&&(a.defaultValue=""+f))}var j=Array.isArray;function W(a,c,f,m){if(a=a.options,c){c={};for(var v=0;v<f.length;v++)c["$"+f[v]]=!0;for(f=0;f<a.length;f++)v=c.hasOwnProperty("$"+a[f].value),a[f].selected!==v&&(a[f].selected=v),v&&m&&(a[f].defaultSelected=!0)}else{for(f=""+Te(f),c=null,v=0;v<a.length;v++){if(a[v].value===f){a[v].selected=!0,m&&(a[v].defaultSelected=!0);return}c!==null||a[v].disabled||(c=a[v])}c!==null&&(c.selected=!0)}}function ee(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return ne({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function _e(a,c){var f=c.value;if(f==null){if(f=c.children,c=c.defaultValue,f!=null){if(c!=null)throw Error(n(92));if(j(f)){if(1<f.length)throw Error(n(93));f=f[0]}c=f}c==null&&(c=""),f=c}a._wrapperState={initialValue:Te(f)}}function me(a,c){var f=Te(c.value),m=Te(c.defaultValue);f!=null&&(f=""+f,f!==a.value&&(a.value=f),c.defaultValue==null&&a.defaultValue!==f&&(a.defaultValue=f)),m!=null&&(a.defaultValue=""+m)}function fe(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function Me(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tt(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?Me(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var st,en=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,f,m,v){MSApp.execUnsafeLocalFunction(function(){return a(c,f,m,v)})}:a}(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(st=st||document.createElement("div"),st.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=st.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function $n(a,c){if(c){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=c;return}}a.textContent=c}var Wt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},no=["Webkit","ms","Moz","O"];Object.keys(Wt).forEach(function(a){no.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),Wt[c]=Wt[a]})});function Xs(a,c,f){return c==null||typeof c=="boolean"||c===""?"":f||typeof c!="number"||c===0||Wt.hasOwnProperty(a)&&Wt[a]?(""+c).trim():c+"px"}function Zs(a,c){a=a.style;for(var f in c)if(c.hasOwnProperty(f)){var m=f.indexOf("--")===0,v=Xs(f,c[f],m);f==="float"&&(f="cssFloat"),m?a.setProperty(f,v):a[f]=v}}var Yl=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qs(a,c){if(c){if(Yl[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function ro(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sr=null;function Xl(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Zl=null,gs=null,vs=null;function ia(a){if(a=yc(a)){if(typeof Zl!="function")throw Error(n(280));var c=a.stateNode;c&&(c=Ld(c),Zl(a.stateNode,a.type,c))}}function hd(a){gs?vs?vs.push(a):vs=[a]:gs=a}function pd(){if(gs){var a=gs,c=vs;if(vs=gs=null,ia(a),c)for(a=0;a<c.length;a++)ia(c[a])}}function md(a,c){return a(c)}function Ql(){}var Jl=!1;function gd(a,c,f){if(Jl)return a(c,f);Jl=!0;try{return md(a,c,f)}finally{Jl=!1,(gs!==null||vs!==null)&&(Ql(),pd())}}function so(a,c){var f=a.stateNode;if(f===null)return null;var m=Ld(f);if(m===null)return null;f=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(n(231,c,typeof f));return f}var Js=!1;if(l)try{var io={};Object.defineProperty(io,"passive",{get:function(){Js=!0}}),window.addEventListener("test",io,io),window.removeEventListener("test",io,io)}catch{Js=!1}function Vp(a,c,f,m,v,b,P,L,F){var Y=Array.prototype.slice.call(arguments,3);try{c.apply(f,Y)}catch(ae){this.onError(ae)}}var ei=!1,ti=null,oa=!1,aa=null,Up={onError:function(a){ei=!0,ti=a}};function vd(a,c,f,m,v,b,P,L,F){ei=!1,ti=null,Vp.apply(Up,arguments)}function yd(a,c,f,m,v,b,P,L,F){if(vd.apply(this,arguments),ei){if(ei){var Y=ti;ei=!1,ti=null}else throw Error(n(198));oa||(oa=!0,aa=Y)}}function Gr(a){var c=a,f=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,c.flags&4098&&(f=c.return),a=c.return;while(a)}return c.tag===3?f:null}function ec(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function la(a){if(Gr(a)!==a)throw Error(n(188))}function ys(a){var c=a.alternate;if(!c){if(c=Gr(a),c===null)throw Error(n(188));return c!==a?null:a}for(var f=a,m=c;;){var v=f.return;if(v===null)break;var b=v.alternate;if(b===null){if(m=v.return,m!==null){f=m;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===f)return la(v),a;if(b===m)return la(v),c;b=b.sibling}throw Error(n(188))}if(f.return!==m.return)f=v,m=b;else{for(var P=!1,L=v.child;L;){if(L===f){P=!0,f=v,m=b;break}if(L===m){P=!0,m=v,f=b;break}L=L.sibling}if(!P){for(L=b.child;L;){if(L===f){P=!0,f=b,m=v;break}if(L===m){P=!0,m=b,f=v;break}L=L.sibling}if(!P)throw Error(n(189))}}if(f.alternate!==m)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?a:c}function ni(a){return a=ys(a),a!==null?ri(a):null}function ri(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=ri(a);if(c!==null)return c;a=a.sibling}return null}var oo=e.unstable_scheduleCallback,ca=e.unstable_cancelCallback,Bp=e.unstable_shouldYield,zp=e.unstable_requestPaint,gt=e.unstable_now,Mn=e.unstable_getCurrentPriorityLevel,Wr=e.unstable_ImmediatePriority,Ar=e.unstable_UserBlockingPriority,Ln=e.unstable_NormalPriority,ao=e.unstable_LowPriority,Gn=e.unstable_IdlePriority,Nn=null,Wn=null;function _d(a){if(Wn&&typeof Wn.onCommitFiberRoot=="function")try{Wn.onCommitFiberRoot(Nn,a,void 0,(a.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:tc,Hn=Math.log,ua=Math.LN2;function tc(a){return a>>>=0,a===0?32:31-(Hn(a)/ua|0)|0}var si=64,ii=4194304;function _s(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function ws(a,c){var f=a.pendingLanes;if(f===0)return 0;var m=0,v=a.suspendedLanes,b=a.pingedLanes,P=f&268435455;if(P!==0){var L=P&~v;L!==0?m=_s(L):(b&=P,b!==0&&(m=_s(b)))}else P=f&~v,P!==0?m=_s(P):b!==0&&(m=_s(b));if(m===0)return 0;if(c!==0&&c!==m&&!(c&v)&&(v=m&-m,b=c&-c,v>=b||v===16&&(b&4194240)!==0))return c;if(m&4&&(m|=f&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=m;0<c;)f=31-mn(c),v=1<<f,m|=a[f],c&=~v;return m}function Hr(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $p(a,c){for(var f=a.suspendedLanes,m=a.pingedLanes,v=a.expirationTimes,b=a.pendingLanes;0<b;){var P=31-mn(b),L=1<<P,F=v[P];F===-1?(!(L&f)||L&m)&&(v[P]=Hr(L,c)):F<=c&&(a.expiredLanes|=L),b&=~L}}function da(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function fa(){var a=si;return si<<=1,!(si&4194240)&&(si=64),a}function ha(a){for(var c=[],f=0;31>f;f++)c.push(a);return c}function lo(a,c,f){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-mn(c),a[c]=f}function Gp(a,c){var f=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var m=a.eventTimes;for(a=a.expirationTimes;0<f;){var v=31-mn(f),b=1<<v;c[v]=0,m[v]=-1,a[v]=-1,f&=~b}}function k(a,c){var f=a.entangledLanes|=c;for(a=a.entanglements;f;){var m=31-mn(f),v=1<<m;v&c|a[m]&c&&(a[m]|=c),f&=~v}}var I=0;function N(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var K,oe,xe,Ze,Nt,jt=!1,Bt=[],Ht=null,oi=null,ai=null,nc=new Map,rc=new Map,li=[],RL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cw(a,c){switch(a){case"focusin":case"focusout":Ht=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":nc.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":rc.delete(c.pointerId)}}function sc(a,c,f,m,v,b){return a===null||a.nativeEvent!==b?(a={blockedOn:c,domEventName:f,eventSystemFlags:m,nativeEvent:b,targetContainers:[v]},c!==null&&(c=yc(c),c!==null&&oe(c)),a):(a.eventSystemFlags|=m,c=a.targetContainers,v!==null&&c.indexOf(v)===-1&&c.push(v),a)}function kL(a,c,f,m,v){switch(c){case"focusin":return Ht=sc(Ht,a,c,f,m,v),!0;case"dragenter":return oi=sc(oi,a,c,f,m,v),!0;case"mouseover":return ai=sc(ai,a,c,f,m,v),!0;case"pointerover":var b=v.pointerId;return nc.set(b,sc(nc.get(b)||null,a,c,f,m,v)),!0;case"gotpointercapture":return b=v.pointerId,rc.set(b,sc(rc.get(b)||null,a,c,f,m,v)),!0}return!1}function Pw(a){var c=co(a.target);if(c!==null){var f=Gr(c);if(f!==null){if(c=f.tag,c===13){if(c=ec(f),c!==null){a.blockedOn=c,Nt(a.priority,function(){xe(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function wd(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var f=Hp(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(f===null){f=a.nativeEvent;var m=new f.constructor(f.type,f);Sr=m,f.target.dispatchEvent(m),Sr=null}else return c=yc(f),c!==null&&oe(c),a.blockedOn=f,!1;c.shift()}return!0}function Rw(a,c,f){wd(a)&&f.delete(c)}function IL(){jt=!1,Ht!==null&&wd(Ht)&&(Ht=null),oi!==null&&wd(oi)&&(oi=null),ai!==null&&wd(ai)&&(ai=null),nc.forEach(Rw),rc.forEach(Rw)}function ic(a,c){a.blockedOn===c&&(a.blockedOn=null,jt||(jt=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,IL)))}function oc(a){function c(v){return ic(v,a)}if(0<Bt.length){ic(Bt[0],a);for(var f=1;f<Bt.length;f++){var m=Bt[f];m.blockedOn===a&&(m.blockedOn=null)}}for(Ht!==null&&ic(Ht,a),oi!==null&&ic(oi,a),ai!==null&&ic(ai,a),nc.forEach(c),rc.forEach(c),f=0;f<li.length;f++)m=li[f],m.blockedOn===a&&(m.blockedOn=null);for(;0<li.length&&(f=li[0],f.blockedOn===null);)Pw(f),f.blockedOn===null&&li.shift()}var pa=O.ReactCurrentBatchConfig,xd=!0;function OL(a,c,f,m){var v=I,b=pa.transition;pa.transition=null;try{I=1,Wp(a,c,f,m)}finally{I=v,pa.transition=b}}function ML(a,c,f,m){var v=I,b=pa.transition;pa.transition=null;try{I=4,Wp(a,c,f,m)}finally{I=v,pa.transition=b}}function Wp(a,c,f,m){if(xd){var v=Hp(a,c,f,m);if(v===null)cm(a,c,m,bd,f),Cw(a,m);else if(kL(v,a,c,f,m))m.stopPropagation();else if(Cw(a,m),c&4&&-1<RL.indexOf(a)){for(;v!==null;){var b=yc(v);if(b!==null&&K(b),b=Hp(a,c,f,m),b===null&&cm(a,c,m,bd,f),b===v)break;v=b}v!==null&&m.stopPropagation()}else cm(a,c,m,null,f)}}var bd=null;function Hp(a,c,f,m){if(bd=null,a=Xl(m),a=co(a),a!==null)if(c=Gr(a),c===null)a=null;else if(f=c.tag,f===13){if(a=ec(c),a!==null)return a;a=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return bd=a,null}function kw(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mn()){case Wr:return 1;case Ar:return 4;case Ln:case ao:return 16;case Gn:return 536870912;default:return 16}default:return 16}}var ci=null,qp=null,Ed=null;function Iw(){if(Ed)return Ed;var a,c=qp,f=c.length,m,v="value"in ci?ci.value:ci.textContent,b=v.length;for(a=0;a<f&&c[a]===v[a];a++);var P=f-a;for(m=1;m<=P&&c[f-m]===v[b-m];m++);return Ed=v.slice(a,1<m?1-m:void 0)}function Td(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Sd(){return!0}function Ow(){return!1}function qn(a){function c(f,m,v,b,P){this._reactName=f,this._targetInst=v,this.type=m,this.nativeEvent=b,this.target=P,this.currentTarget=null;for(var L in a)a.hasOwnProperty(L)&&(f=a[L],this[L]=f?f(b):b[L]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Sd:Ow,this.isPropagationStopped=Ow,this}return ne(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Sd)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Sd)},persist:function(){},isPersistent:Sd}),c}var ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kp=qn(ma),ac=ne({},ma,{view:0,detail:0}),LL=qn(ac),Yp,Xp,lc,Ad=ne({},ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qp,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==lc&&(lc&&a.type==="mousemove"?(Yp=a.screenX-lc.screenX,Xp=a.screenY-lc.screenY):Xp=Yp=0,lc=a),Yp)},movementY:function(a){return"movementY"in a?a.movementY:Xp}}),Mw=qn(Ad),NL=ne({},Ad,{dataTransfer:0}),jL=qn(NL),DL=ne({},ac,{relatedTarget:0}),Zp=qn(DL),FL=ne({},ma,{animationName:0,elapsedTime:0,pseudoElement:0}),VL=qn(FL),UL=ne({},ma,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),BL=qn(UL),zL=ne({},ma,{data:0}),Lw=qn(zL),$L={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HL(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=WL[a])?!!c[a]:!1}function Qp(){return HL}var qL=ne({},ac,{key:function(a){if(a.key){var c=$L[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Td(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?GL[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qp,charCode:function(a){return a.type==="keypress"?Td(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Td(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),KL=qn(qL),YL=ne({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nw=qn(YL),XL=ne({},ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qp}),ZL=qn(XL),QL=ne({},ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),JL=qn(QL),eN=ne({},Ad,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),tN=qn(eN),nN=[9,13,27,32],Jp=l&&"CompositionEvent"in window,cc=null;l&&"documentMode"in document&&(cc=document.documentMode);var rN=l&&"TextEvent"in window&&!cc,jw=l&&(!Jp||cc&&8<cc&&11>=cc),Dw=" ",Fw=!1;function Vw(a,c){switch(a){case"keyup":return nN.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uw(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ga=!1;function sN(a,c){switch(a){case"compositionend":return Uw(c);case"keypress":return c.which!==32?null:(Fw=!0,Dw);case"textInput":return a=c.data,a===Dw&&Fw?null:a;default:return null}}function iN(a,c){if(ga)return a==="compositionend"||!Jp&&Vw(a,c)?(a=Iw(),Ed=qp=ci=null,ga=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return jw&&c.locale!=="ko"?null:c.data;default:return null}}var oN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bw(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!oN[a.type]:c==="textarea"}function zw(a,c,f,m){hd(m),c=Id(c,"onChange"),0<c.length&&(f=new Kp("onChange","change",null,f,m),a.push({event:f,listeners:c}))}var uc=null,dc=null;function aN(a){ox(a,0)}function Cd(a){var c=xa(a);if(Xe(c))return a}function lN(a,c){if(a==="change")return c}var $w=!1;if(l){var em;if(l){var tm="oninput"in document;if(!tm){var Gw=document.createElement("div");Gw.setAttribute("oninput","return;"),tm=typeof Gw.oninput=="function"}em=tm}else em=!1;$w=em&&(!document.documentMode||9<document.documentMode)}function Ww(){uc&&(uc.detachEvent("onpropertychange",Hw),dc=uc=null)}function Hw(a){if(a.propertyName==="value"&&Cd(dc)){var c=[];zw(c,dc,a,Xl(a)),gd(aN,c)}}function cN(a,c,f){a==="focusin"?(Ww(),uc=c,dc=f,uc.attachEvent("onpropertychange",Hw)):a==="focusout"&&Ww()}function uN(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Cd(dc)}function dN(a,c){if(a==="click")return Cd(c)}function fN(a,c){if(a==="input"||a==="change")return Cd(c)}function hN(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Cr=typeof Object.is=="function"?Object.is:hN;function fc(a,c){if(Cr(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var f=Object.keys(a),m=Object.keys(c);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var v=f[m];if(!u.call(c,v)||!Cr(a[v],c[v]))return!1}return!0}function qw(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Kw(a,c){var f=qw(a);a=0;for(var m;f;){if(f.nodeType===3){if(m=a+f.textContent.length,a<=c&&m>=c)return{node:f,offset:c-a};a=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=qw(f)}}function Yw(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?Yw(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function Xw(){for(var a=window,c=mt();c instanceof a.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)a=c.contentWindow;else break;c=mt(a.document)}return c}function nm(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function pN(a){var c=Xw(),f=a.focusedElem,m=a.selectionRange;if(c!==f&&f&&f.ownerDocument&&Yw(f.ownerDocument.documentElement,f)){if(m!==null&&nm(f)){if(c=m.start,a=m.end,a===void 0&&(a=c),"selectionStart"in f)f.selectionStart=c,f.selectionEnd=Math.min(a,f.value.length);else if(a=(c=f.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var v=f.textContent.length,b=Math.min(m.start,v);m=m.end===void 0?b:Math.min(m.end,v),!a.extend&&b>m&&(v=m,m=b,b=v),v=Kw(f,b);var P=Kw(f,m);v&&P&&(a.rangeCount!==1||a.anchorNode!==v.node||a.anchorOffset!==v.offset||a.focusNode!==P.node||a.focusOffset!==P.offset)&&(c=c.createRange(),c.setStart(v.node,v.offset),a.removeAllRanges(),b>m?(a.addRange(c),a.extend(P.node,P.offset)):(c.setEnd(P.node,P.offset),a.addRange(c)))}}for(c=[],a=f;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<c.length;f++)a=c[f],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var mN=l&&"documentMode"in document&&11>=document.documentMode,va=null,rm=null,hc=null,sm=!1;function Zw(a,c,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;sm||va==null||va!==mt(m)||(m=va,"selectionStart"in m&&nm(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),hc&&fc(hc,m)||(hc=m,m=Id(rm,"onSelect"),0<m.length&&(c=new Kp("onSelect","select",null,c,f),a.push({event:c,listeners:m}),c.target=va)))}function Pd(a,c){var f={};return f[a.toLowerCase()]=c.toLowerCase(),f["Webkit"+a]="webkit"+c,f["Moz"+a]="moz"+c,f}var ya={animationend:Pd("Animation","AnimationEnd"),animationiteration:Pd("Animation","AnimationIteration"),animationstart:Pd("Animation","AnimationStart"),transitionend:Pd("Transition","TransitionEnd")},im={},Qw={};l&&(Qw=document.createElement("div").style,"AnimationEvent"in window||(delete ya.animationend.animation,delete ya.animationiteration.animation,delete ya.animationstart.animation),"TransitionEvent"in window||delete ya.transitionend.transition);function Rd(a){if(im[a])return im[a];if(!ya[a])return a;var c=ya[a],f;for(f in c)if(c.hasOwnProperty(f)&&f in Qw)return im[a]=c[f];return a}var Jw=Rd("animationend"),ex=Rd("animationiteration"),tx=Rd("animationstart"),nx=Rd("transitionend"),rx=new Map,sx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ui(a,c){rx.set(a,c),i(c,[a])}for(var om=0;om<sx.length;om++){var am=sx[om],gN=am.toLowerCase(),vN=am[0].toUpperCase()+am.slice(1);ui(gN,"on"+vN)}ui(Jw,"onAnimationEnd"),ui(ex,"onAnimationIteration"),ui(tx,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(nx,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yN=new Set("cancel close invalid load scroll toggle".split(" ").concat(pc));function ix(a,c,f){var m=a.type||"unknown-event";a.currentTarget=f,yd(m,c,void 0,a),a.currentTarget=null}function ox(a,c){c=(c&4)!==0;for(var f=0;f<a.length;f++){var m=a[f],v=m.event;m=m.listeners;e:{var b=void 0;if(c)for(var P=m.length-1;0<=P;P--){var L=m[P],F=L.instance,Y=L.currentTarget;if(L=L.listener,F!==b&&v.isPropagationStopped())break e;ix(v,L,Y),b=F}else for(P=0;P<m.length;P++){if(L=m[P],F=L.instance,Y=L.currentTarget,L=L.listener,F!==b&&v.isPropagationStopped())break e;ix(v,L,Y),b=F}}}if(oa)throw a=aa,oa=!1,aa=null,a}function wt(a,c){var f=c[mm];f===void 0&&(f=c[mm]=new Set);var m=a+"__bubble";f.has(m)||(ax(c,a,2,!1),f.add(m))}function lm(a,c,f){var m=0;c&&(m|=4),ax(f,a,m,c)}var kd="_reactListening"+Math.random().toString(36).slice(2);function mc(a){if(!a[kd]){a[kd]=!0,r.forEach(function(f){f!=="selectionchange"&&(yN.has(f)||lm(f,!1,a),lm(f,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[kd]||(c[kd]=!0,lm("selectionchange",!1,c))}}function ax(a,c,f,m){switch(kw(c)){case 1:var v=OL;break;case 4:v=ML;break;default:v=Wp}f=v.bind(null,c,f,a),v=void 0,!Js||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(v=!0),m?v!==void 0?a.addEventListener(c,f,{capture:!0,passive:v}):a.addEventListener(c,f,!0):v!==void 0?a.addEventListener(c,f,{passive:v}):a.addEventListener(c,f,!1)}function cm(a,c,f,m,v){var b=m;if(!(c&1)&&!(c&2)&&m!==null)e:for(;;){if(m===null)return;var P=m.tag;if(P===3||P===4){var L=m.stateNode.containerInfo;if(L===v||L.nodeType===8&&L.parentNode===v)break;if(P===4)for(P=m.return;P!==null;){var F=P.tag;if((F===3||F===4)&&(F=P.stateNode.containerInfo,F===v||F.nodeType===8&&F.parentNode===v))return;P=P.return}for(;L!==null;){if(P=co(L),P===null)return;if(F=P.tag,F===5||F===6){m=b=P;continue e}L=L.parentNode}}m=m.return}gd(function(){var Y=b,ae=Xl(f),ce=[];e:{var ie=rx.get(a);if(ie!==void 0){var be=Kp,Ae=a;switch(a){case"keypress":if(Td(f)===0)break e;case"keydown":case"keyup":be=KL;break;case"focusin":Ae="focus",be=Zp;break;case"focusout":Ae="blur",be=Zp;break;case"beforeblur":case"afterblur":be=Zp;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=Mw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=jL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=ZL;break;case Jw:case ex:case tx:be=VL;break;case nx:be=JL;break;case"scroll":be=LL;break;case"wheel":be=tN;break;case"copy":case"cut":case"paste":be=BL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=Nw}var Pe=(c&4)!==0,Dt=!Pe&&a==="scroll",H=Pe?ie!==null?ie+"Capture":null:ie;Pe=[];for(var U=Y,q;U!==null;){q=U;var de=q.stateNode;if(q.tag===5&&de!==null&&(q=de,H!==null&&(de=so(U,H),de!=null&&Pe.push(gc(U,de,q)))),Dt)break;U=U.return}0<Pe.length&&(ie=new be(ie,Ae,null,f,ae),ce.push({event:ie,listeners:Pe}))}}if(!(c&7)){e:{if(ie=a==="mouseover"||a==="pointerover",be=a==="mouseout"||a==="pointerout",ie&&f!==Sr&&(Ae=f.relatedTarget||f.fromElement)&&(co(Ae)||Ae[xs]))break e;if((be||ie)&&(ie=ae.window===ae?ae:(ie=ae.ownerDocument)?ie.defaultView||ie.parentWindow:window,be?(Ae=f.relatedTarget||f.toElement,be=Y,Ae=Ae?co(Ae):null,Ae!==null&&(Dt=Gr(Ae),Ae!==Dt||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(be=null,Ae=Y),be!==Ae)){if(Pe=Mw,de="onMouseLeave",H="onMouseEnter",U="mouse",(a==="pointerout"||a==="pointerover")&&(Pe=Nw,de="onPointerLeave",H="onPointerEnter",U="pointer"),Dt=be==null?ie:xa(be),q=Ae==null?ie:xa(Ae),ie=new Pe(de,U+"leave",be,f,ae),ie.target=Dt,ie.relatedTarget=q,de=null,co(ae)===Y&&(Pe=new Pe(H,U+"enter",Ae,f,ae),Pe.target=q,Pe.relatedTarget=Dt,de=Pe),Dt=de,be&&Ae)t:{for(Pe=be,H=Ae,U=0,q=Pe;q;q=_a(q))U++;for(q=0,de=H;de;de=_a(de))q++;for(;0<U-q;)Pe=_a(Pe),U--;for(;0<q-U;)H=_a(H),q--;for(;U--;){if(Pe===H||H!==null&&Pe===H.alternate)break t;Pe=_a(Pe),H=_a(H)}Pe=null}else Pe=null;be!==null&&lx(ce,ie,be,Pe,!1),Ae!==null&&Dt!==null&&lx(ce,Dt,Ae,Pe,!0)}}e:{if(ie=Y?xa(Y):window,be=ie.nodeName&&ie.nodeName.toLowerCase(),be==="select"||be==="input"&&ie.type==="file")var Ie=lN;else if(Bw(ie))if($w)Ie=fN;else{Ie=uN;var Fe=cN}else(be=ie.nodeName)&&be.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(Ie=dN);if(Ie&&(Ie=Ie(a,Y))){zw(ce,Ie,f,ae);break e}Fe&&Fe(a,ie,Y),a==="focusout"&&(Fe=ie._wrapperState)&&Fe.controlled&&ie.type==="number"&&On(ie,"number",ie.value)}switch(Fe=Y?xa(Y):window,a){case"focusin":(Bw(Fe)||Fe.contentEditable==="true")&&(va=Fe,rm=Y,hc=null);break;case"focusout":hc=rm=va=null;break;case"mousedown":sm=!0;break;case"contextmenu":case"mouseup":case"dragend":sm=!1,Zw(ce,f,ae);break;case"selectionchange":if(mN)break;case"keydown":case"keyup":Zw(ce,f,ae)}var Ve;if(Jp)e:{switch(a){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else ga?Vw(a,f)&&($e="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&($e="onCompositionStart");$e&&(jw&&f.locale!=="ko"&&(ga||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&ga&&(Ve=Iw()):(ci=ae,qp="value"in ci?ci.value:ci.textContent,ga=!0)),Fe=Id(Y,$e),0<Fe.length&&($e=new Lw($e,a,null,f,ae),ce.push({event:$e,listeners:Fe}),Ve?$e.data=Ve:(Ve=Uw(f),Ve!==null&&($e.data=Ve)))),(Ve=rN?sN(a,f):iN(a,f))&&(Y=Id(Y,"onBeforeInput"),0<Y.length&&(ae=new Lw("onBeforeInput","beforeinput",null,f,ae),ce.push({event:ae,listeners:Y}),ae.data=Ve))}ox(ce,c)})}function gc(a,c,f){return{instance:a,listener:c,currentTarget:f}}function Id(a,c){for(var f=c+"Capture",m=[];a!==null;){var v=a,b=v.stateNode;v.tag===5&&b!==null&&(v=b,b=so(a,f),b!=null&&m.unshift(gc(a,b,v)),b=so(a,c),b!=null&&m.push(gc(a,b,v))),a=a.return}return m}function _a(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function lx(a,c,f,m,v){for(var b=c._reactName,P=[];f!==null&&f!==m;){var L=f,F=L.alternate,Y=L.stateNode;if(F!==null&&F===m)break;L.tag===5&&Y!==null&&(L=Y,v?(F=so(f,b),F!=null&&P.unshift(gc(f,F,L))):v||(F=so(f,b),F!=null&&P.push(gc(f,F,L)))),f=f.return}P.length!==0&&a.push({event:c,listeners:P})}var _N=/\r\n?/g,wN=/\u0000|\uFFFD/g;function cx(a){return(typeof a=="string"?a:""+a).replace(_N,`
`).replace(wN,"")}function Od(a,c,f){if(c=cx(c),cx(a)!==c&&f)throw Error(n(425))}function Md(){}var um=null,dm=null;function fm(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var hm=typeof setTimeout=="function"?setTimeout:void 0,xN=typeof clearTimeout=="function"?clearTimeout:void 0,ux=typeof Promise=="function"?Promise:void 0,bN=typeof queueMicrotask=="function"?queueMicrotask:typeof ux<"u"?function(a){return ux.resolve(null).then(a).catch(EN)}:hm;function EN(a){setTimeout(function(){throw a})}function pm(a,c){var f=c,m=0;do{var v=f.nextSibling;if(a.removeChild(f),v&&v.nodeType===8)if(f=v.data,f==="/$"){if(m===0){a.removeChild(v),oc(c);return}m--}else f!=="$"&&f!=="$?"&&f!=="$!"||m++;f=v}while(f);oc(c)}function di(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function dx(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return a;c--}else f==="/$"&&c++}a=a.previousSibling}return null}var wa=Math.random().toString(36).slice(2),qr="__reactFiber$"+wa,vc="__reactProps$"+wa,xs="__reactContainer$"+wa,mm="__reactEvents$"+wa,TN="__reactListeners$"+wa,SN="__reactHandles$"+wa;function co(a){var c=a[qr];if(c)return c;for(var f=a.parentNode;f;){if(c=f[xs]||f[qr]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(a=dx(a);a!==null;){if(f=a[qr])return f;a=dx(a)}return c}a=f,f=a.parentNode}return null}function yc(a){return a=a[qr]||a[xs],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function xa(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function Ld(a){return a[vc]||null}var gm=[],ba=-1;function fi(a){return{current:a}}function xt(a){0>ba||(a.current=gm[ba],gm[ba]=null,ba--)}function vt(a,c){ba++,gm[ba]=a.current,a.current=c}var hi={},gn=fi(hi),jn=fi(!1),uo=hi;function Ea(a,c){var f=a.type.contextTypes;if(!f)return hi;var m=a.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===c)return m.__reactInternalMemoizedMaskedChildContext;var v={},b;for(b in f)v[b]=c[b];return m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=v),v}function Dn(a){return a=a.childContextTypes,a!=null}function Nd(){xt(jn),xt(gn)}function fx(a,c,f){if(gn.current!==hi)throw Error(n(168));vt(gn,c),vt(jn,f)}function hx(a,c,f){var m=a.stateNode;if(c=c.childContextTypes,typeof m.getChildContext!="function")return f;m=m.getChildContext();for(var v in m)if(!(v in c))throw Error(n(108,le(a)||"Unknown",v));return ne({},f,m)}function jd(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||hi,uo=gn.current,vt(gn,a),vt(jn,jn.current),!0}function px(a,c,f){var m=a.stateNode;if(!m)throw Error(n(169));f?(a=hx(a,c,uo),m.__reactInternalMemoizedMergedChildContext=a,xt(jn),xt(gn),vt(gn,a)):xt(jn),vt(jn,f)}var bs=null,Dd=!1,vm=!1;function mx(a){bs===null?bs=[a]:bs.push(a)}function AN(a){Dd=!0,mx(a)}function pi(){if(!vm&&bs!==null){vm=!0;var a=0,c=I;try{var f=bs;for(I=1;a<f.length;a++){var m=f[a];do m=m(!0);while(m!==null)}bs=null,Dd=!1}catch(v){throw bs!==null&&(bs=bs.slice(a+1)),oo(Wr,pi),v}finally{I=c,vm=!1}}return null}var Ta=[],Sa=0,Fd=null,Vd=0,fr=[],hr=0,fo=null,Es=1,Ts="";function ho(a,c){Ta[Sa++]=Vd,Ta[Sa++]=Fd,Fd=a,Vd=c}function gx(a,c,f){fr[hr++]=Es,fr[hr++]=Ts,fr[hr++]=fo,fo=a;var m=Es;a=Ts;var v=32-mn(m)-1;m&=~(1<<v),f+=1;var b=32-mn(c)+v;if(30<b){var P=v-v%5;b=(m&(1<<P)-1).toString(32),m>>=P,v-=P,Es=1<<32-mn(c)+v|f<<v|m,Ts=b+a}else Es=1<<b|f<<v|m,Ts=a}function ym(a){a.return!==null&&(ho(a,1),gx(a,1,0))}function _m(a){for(;a===Fd;)Fd=Ta[--Sa],Ta[Sa]=null,Vd=Ta[--Sa],Ta[Sa]=null;for(;a===fo;)fo=fr[--hr],fr[hr]=null,Ts=fr[--hr],fr[hr]=null,Es=fr[--hr],fr[hr]=null}var Kn=null,Yn=null,St=!1,Pr=null;function vx(a,c){var f=vr(5,null,null,0);f.elementType="DELETED",f.stateNode=c,f.return=a,c=a.deletions,c===null?(a.deletions=[f],a.flags|=16):c.push(f)}function yx(a,c){switch(a.tag){case 5:var f=a.type;return c=c.nodeType!==1||f.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,Kn=a,Yn=di(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,Kn=a,Yn=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(f=fo!==null?{id:Es,overflow:Ts}:null,a.memoizedState={dehydrated:c,treeContext:f,retryLane:1073741824},f=vr(18,null,null,0),f.stateNode=c,f.return=a,a.child=f,Kn=a,Yn=null,!0):!1;default:return!1}}function wm(a){return(a.mode&1)!==0&&(a.flags&128)===0}function xm(a){if(St){var c=Yn;if(c){var f=c;if(!yx(a,c)){if(wm(a))throw Error(n(418));c=di(f.nextSibling);var m=Kn;c&&yx(a,c)?vx(m,f):(a.flags=a.flags&-4097|2,St=!1,Kn=a)}}else{if(wm(a))throw Error(n(418));a.flags=a.flags&-4097|2,St=!1,Kn=a}}}function _x(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Kn=a}function Ud(a){if(a!==Kn)return!1;if(!St)return _x(a),St=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!fm(a.type,a.memoizedProps)),c&&(c=Yn)){if(wm(a))throw wx(),Error(n(418));for(;c;)vx(a,c),c=di(c.nextSibling)}if(_x(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"){if(c===0){Yn=di(a.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++}a=a.nextSibling}Yn=null}}else Yn=Kn?di(a.stateNode.nextSibling):null;return!0}function wx(){for(var a=Yn;a;)a=di(a.nextSibling)}function Aa(){Yn=Kn=null,St=!1}function bm(a){Pr===null?Pr=[a]:Pr.push(a)}var CN=O.ReactCurrentBatchConfig;function _c(a,c,f){if(a=f.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(n(309));var m=f.stateNode}if(!m)throw Error(n(147,a));var v=m,b=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===b?c.ref:(c=function(P){var L=v.refs;P===null?delete L[b]:L[b]=P},c._stringRef=b,c)}if(typeof a!="string")throw Error(n(284));if(!f._owner)throw Error(n(290,a))}return a}function Bd(a,c){throw a=Object.prototype.toString.call(c),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function xx(a){var c=a._init;return c(a._payload)}function bx(a){function c(H,U){if(a){var q=H.deletions;q===null?(H.deletions=[U],H.flags|=16):q.push(U)}}function f(H,U){if(!a)return null;for(;U!==null;)c(H,U),U=U.sibling;return null}function m(H,U){for(H=new Map;U!==null;)U.key!==null?H.set(U.key,U):H.set(U.index,U),U=U.sibling;return H}function v(H,U){return H=bi(H,U),H.index=0,H.sibling=null,H}function b(H,U,q){return H.index=q,a?(q=H.alternate,q!==null?(q=q.index,q<U?(H.flags|=2,U):q):(H.flags|=2,U)):(H.flags|=1048576,U)}function P(H){return a&&H.alternate===null&&(H.flags|=2),H}function L(H,U,q,de){return U===null||U.tag!==6?(U=hg(q,H.mode,de),U.return=H,U):(U=v(U,q),U.return=H,U)}function F(H,U,q,de){var Ie=q.type;return Ie===z?ae(H,U,q.props.children,de,q.key):U!==null&&(U.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===ue&&xx(Ie)===U.type)?(de=v(U,q.props),de.ref=_c(H,U,q),de.return=H,de):(de=ff(q.type,q.key,q.props,null,H.mode,de),de.ref=_c(H,U,q),de.return=H,de)}function Y(H,U,q,de){return U===null||U.tag!==4||U.stateNode.containerInfo!==q.containerInfo||U.stateNode.implementation!==q.implementation?(U=pg(q,H.mode,de),U.return=H,U):(U=v(U,q.children||[]),U.return=H,U)}function ae(H,U,q,de,Ie){return U===null||U.tag!==7?(U=xo(q,H.mode,de,Ie),U.return=H,U):(U=v(U,q),U.return=H,U)}function ce(H,U,q){if(typeof U=="string"&&U!==""||typeof U=="number")return U=hg(""+U,H.mode,q),U.return=H,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case M:return q=ff(U.type,U.key,U.props,null,H.mode,q),q.ref=_c(H,null,U),q.return=H,q;case D:return U=pg(U,H.mode,q),U.return=H,U;case ue:var de=U._init;return ce(H,de(U._payload),q)}if(j(U)||Z(U))return U=xo(U,H.mode,q,null),U.return=H,U;Bd(H,U)}return null}function ie(H,U,q,de){var Ie=U!==null?U.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return Ie!==null?null:L(H,U,""+q,de);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case M:return q.key===Ie?F(H,U,q,de):null;case D:return q.key===Ie?Y(H,U,q,de):null;case ue:return Ie=q._init,ie(H,U,Ie(q._payload),de)}if(j(q)||Z(q))return Ie!==null?null:ae(H,U,q,de,null);Bd(H,q)}return null}function be(H,U,q,de,Ie){if(typeof de=="string"&&de!==""||typeof de=="number")return H=H.get(q)||null,L(U,H,""+de,Ie);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case M:return H=H.get(de.key===null?q:de.key)||null,F(U,H,de,Ie);case D:return H=H.get(de.key===null?q:de.key)||null,Y(U,H,de,Ie);case ue:var Fe=de._init;return be(H,U,q,Fe(de._payload),Ie)}if(j(de)||Z(de))return H=H.get(q)||null,ae(U,H,de,Ie,null);Bd(U,de)}return null}function Ae(H,U,q,de){for(var Ie=null,Fe=null,Ve=U,$e=U=0,rn=null;Ve!==null&&$e<q.length;$e++){Ve.index>$e?(rn=Ve,Ve=null):rn=Ve.sibling;var lt=ie(H,Ve,q[$e],de);if(lt===null){Ve===null&&(Ve=rn);break}a&&Ve&&lt.alternate===null&&c(H,Ve),U=b(lt,U,$e),Fe===null?Ie=lt:Fe.sibling=lt,Fe=lt,Ve=rn}if($e===q.length)return f(H,Ve),St&&ho(H,$e),Ie;if(Ve===null){for(;$e<q.length;$e++)Ve=ce(H,q[$e],de),Ve!==null&&(U=b(Ve,U,$e),Fe===null?Ie=Ve:Fe.sibling=Ve,Fe=Ve);return St&&ho(H,$e),Ie}for(Ve=m(H,Ve);$e<q.length;$e++)rn=be(Ve,H,$e,q[$e],de),rn!==null&&(a&&rn.alternate!==null&&Ve.delete(rn.key===null?$e:rn.key),U=b(rn,U,$e),Fe===null?Ie=rn:Fe.sibling=rn,Fe=rn);return a&&Ve.forEach(function(Ei){return c(H,Ei)}),St&&ho(H,$e),Ie}function Pe(H,U,q,de){var Ie=Z(q);if(typeof Ie!="function")throw Error(n(150));if(q=Ie.call(q),q==null)throw Error(n(151));for(var Fe=Ie=null,Ve=U,$e=U=0,rn=null,lt=q.next();Ve!==null&&!lt.done;$e++,lt=q.next()){Ve.index>$e?(rn=Ve,Ve=null):rn=Ve.sibling;var Ei=ie(H,Ve,lt.value,de);if(Ei===null){Ve===null&&(Ve=rn);break}a&&Ve&&Ei.alternate===null&&c(H,Ve),U=b(Ei,U,$e),Fe===null?Ie=Ei:Fe.sibling=Ei,Fe=Ei,Ve=rn}if(lt.done)return f(H,Ve),St&&ho(H,$e),Ie;if(Ve===null){for(;!lt.done;$e++,lt=q.next())lt=ce(H,lt.value,de),lt!==null&&(U=b(lt,U,$e),Fe===null?Ie=lt:Fe.sibling=lt,Fe=lt);return St&&ho(H,$e),Ie}for(Ve=m(H,Ve);!lt.done;$e++,lt=q.next())lt=be(Ve,H,$e,lt.value,de),lt!==null&&(a&&lt.alternate!==null&&Ve.delete(lt.key===null?$e:lt.key),U=b(lt,U,$e),Fe===null?Ie=lt:Fe.sibling=lt,Fe=lt);return a&&Ve.forEach(function(oj){return c(H,oj)}),St&&ho(H,$e),Ie}function Dt(H,U,q,de){if(typeof q=="object"&&q!==null&&q.type===z&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case M:e:{for(var Ie=q.key,Fe=U;Fe!==null;){if(Fe.key===Ie){if(Ie=q.type,Ie===z){if(Fe.tag===7){f(H,Fe.sibling),U=v(Fe,q.props.children),U.return=H,H=U;break e}}else if(Fe.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===ue&&xx(Ie)===Fe.type){f(H,Fe.sibling),U=v(Fe,q.props),U.ref=_c(H,Fe,q),U.return=H,H=U;break e}f(H,Fe);break}else c(H,Fe);Fe=Fe.sibling}q.type===z?(U=xo(q.props.children,H.mode,de,q.key),U.return=H,H=U):(de=ff(q.type,q.key,q.props,null,H.mode,de),de.ref=_c(H,U,q),de.return=H,H=de)}return P(H);case D:e:{for(Fe=q.key;U!==null;){if(U.key===Fe)if(U.tag===4&&U.stateNode.containerInfo===q.containerInfo&&U.stateNode.implementation===q.implementation){f(H,U.sibling),U=v(U,q.children||[]),U.return=H,H=U;break e}else{f(H,U);break}else c(H,U);U=U.sibling}U=pg(q,H.mode,de),U.return=H,H=U}return P(H);case ue:return Fe=q._init,Dt(H,U,Fe(q._payload),de)}if(j(q))return Ae(H,U,q,de);if(Z(q))return Pe(H,U,q,de);Bd(H,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,U!==null&&U.tag===6?(f(H,U.sibling),U=v(U,q),U.return=H,H=U):(f(H,U),U=hg(q,H.mode,de),U.return=H,H=U),P(H)):f(H,U)}return Dt}var Ca=bx(!0),Ex=bx(!1),zd=fi(null),$d=null,Pa=null,Em=null;function Tm(){Em=Pa=$d=null}function Sm(a){var c=zd.current;xt(zd),a._currentValue=c}function Am(a,c,f){for(;a!==null;){var m=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),a===f)break;a=a.return}}function Ra(a,c){$d=a,Em=Pa=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&c&&(Fn=!0),a.firstContext=null)}function pr(a){var c=a._currentValue;if(Em!==a)if(a={context:a,memoizedValue:c,next:null},Pa===null){if($d===null)throw Error(n(308));Pa=a,$d.dependencies={lanes:0,firstContext:a}}else Pa=Pa.next=a;return c}var po=null;function Cm(a){po===null?po=[a]:po.push(a)}function Tx(a,c,f,m){var v=c.interleaved;return v===null?(f.next=f,Cm(c)):(f.next=v.next,v.next=f),c.interleaved=f,Ss(a,m)}function Ss(a,c){a.lanes|=c;var f=a.alternate;for(f!==null&&(f.lanes|=c),f=a,a=a.return;a!==null;)a.childLanes|=c,f=a.alternate,f!==null&&(f.childLanes|=c),f=a,a=a.return;return f.tag===3?f.stateNode:null}var mi=!1;function Pm(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sx(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function As(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function gi(a,c,f){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,it&2){var v=m.pending;return v===null?c.next=c:(c.next=v.next,v.next=c),m.pending=c,Ss(a,f)}return v=m.interleaved,v===null?(c.next=c,Cm(m)):(c.next=v.next,v.next=c),m.interleaved=c,Ss(a,f)}function Gd(a,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194240)!==0)){var m=c.lanes;m&=a.pendingLanes,f|=m,c.lanes=f,k(a,f)}}function Ax(a,c){var f=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var v=null,b=null;if(f=f.firstBaseUpdate,f!==null){do{var P={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};b===null?v=b=P:b=b.next=P,f=f.next}while(f!==null);b===null?v=b=c:b=b.next=c}else v=b=c;f={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:m.shared,effects:m.effects},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=c}function Wd(a,c,f,m){var v=a.updateQueue;mi=!1;var b=v.firstBaseUpdate,P=v.lastBaseUpdate,L=v.shared.pending;if(L!==null){v.shared.pending=null;var F=L,Y=F.next;F.next=null,P===null?b=Y:P.next=Y,P=F;var ae=a.alternate;ae!==null&&(ae=ae.updateQueue,L=ae.lastBaseUpdate,L!==P&&(L===null?ae.firstBaseUpdate=Y:L.next=Y,ae.lastBaseUpdate=F))}if(b!==null){var ce=v.baseState;P=0,ae=Y=F=null,L=b;do{var ie=L.lane,be=L.eventTime;if((m&ie)===ie){ae!==null&&(ae=ae.next={eventTime:be,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var Ae=a,Pe=L;switch(ie=c,be=f,Pe.tag){case 1:if(Ae=Pe.payload,typeof Ae=="function"){ce=Ae.call(be,ce,ie);break e}ce=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Pe.payload,ie=typeof Ae=="function"?Ae.call(be,ce,ie):Ae,ie==null)break e;ce=ne({},ce,ie);break e;case 2:mi=!0}}L.callback!==null&&L.lane!==0&&(a.flags|=64,ie=v.effects,ie===null?v.effects=[L]:ie.push(L))}else be={eventTime:be,lane:ie,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ae===null?(Y=ae=be,F=ce):ae=ae.next=be,P|=ie;if(L=L.next,L===null){if(L=v.shared.pending,L===null)break;ie=L,L=ie.next,ie.next=null,v.lastBaseUpdate=ie,v.shared.pending=null}}while(!0);if(ae===null&&(F=ce),v.baseState=F,v.firstBaseUpdate=Y,v.lastBaseUpdate=ae,c=v.shared.interleaved,c!==null){v=c;do P|=v.lane,v=v.next;while(v!==c)}else b===null&&(v.shared.lanes=0);vo|=P,a.lanes=P,a.memoizedState=ce}}function Cx(a,c,f){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var m=a[c],v=m.callback;if(v!==null){if(m.callback=null,m=f,typeof v!="function")throw Error(n(191,v));v.call(m)}}}var wc={},Kr=fi(wc),xc=fi(wc),bc=fi(wc);function mo(a){if(a===wc)throw Error(n(174));return a}function Rm(a,c){switch(vt(bc,c),vt(xc,a),vt(Kr,wc),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:tt(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=tt(c,a)}xt(Kr),vt(Kr,c)}function ka(){xt(Kr),xt(xc),xt(bc)}function Px(a){mo(bc.current);var c=mo(Kr.current),f=tt(c,a.type);c!==f&&(vt(xc,a),vt(Kr,f))}function km(a){xc.current===a&&(xt(Kr),xt(xc))}var Pt=fi(0);function Hd(a){for(var c=a;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Im=[];function Om(){for(var a=0;a<Im.length;a++)Im[a]._workInProgressVersionPrimary=null;Im.length=0}var qd=O.ReactCurrentDispatcher,Mm=O.ReactCurrentBatchConfig,go=0,Rt=null,qt=null,tn=null,Kd=!1,Ec=!1,Tc=0,PN=0;function vn(){throw Error(n(321))}function Lm(a,c){if(c===null)return!1;for(var f=0;f<c.length&&f<a.length;f++)if(!Cr(a[f],c[f]))return!1;return!0}function Nm(a,c,f,m,v,b){if(go=b,Rt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,qd.current=a===null||a.memoizedState===null?ON:MN,a=f(m,v),Ec){b=0;do{if(Ec=!1,Tc=0,25<=b)throw Error(n(301));b+=1,tn=qt=null,c.updateQueue=null,qd.current=LN,a=f(m,v)}while(Ec)}if(qd.current=Zd,c=qt!==null&&qt.next!==null,go=0,tn=qt=Rt=null,Kd=!1,c)throw Error(n(300));return a}function jm(){var a=Tc!==0;return Tc=0,a}function Yr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Rt.memoizedState=tn=a:tn=tn.next=a,tn}function mr(){if(qt===null){var a=Rt.alternate;a=a!==null?a.memoizedState:null}else a=qt.next;var c=tn===null?Rt.memoizedState:tn.next;if(c!==null)tn=c,qt=a;else{if(a===null)throw Error(n(310));qt=a,a={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},tn===null?Rt.memoizedState=tn=a:tn=tn.next=a}return tn}function Sc(a,c){return typeof c=="function"?c(a):c}function Dm(a){var c=mr(),f=c.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=a;var m=qt,v=m.baseQueue,b=f.pending;if(b!==null){if(v!==null){var P=v.next;v.next=b.next,b.next=P}m.baseQueue=v=b,f.pending=null}if(v!==null){b=v.next,m=m.baseState;var L=P=null,F=null,Y=b;do{var ae=Y.lane;if((go&ae)===ae)F!==null&&(F=F.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),m=Y.hasEagerState?Y.eagerState:a(m,Y.action);else{var ce={lane:ae,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};F===null?(L=F=ce,P=m):F=F.next=ce,Rt.lanes|=ae,vo|=ae}Y=Y.next}while(Y!==null&&Y!==b);F===null?P=m:F.next=L,Cr(m,c.memoizedState)||(Fn=!0),c.memoizedState=m,c.baseState=P,c.baseQueue=F,f.lastRenderedState=m}if(a=f.interleaved,a!==null){v=a;do b=v.lane,Rt.lanes|=b,vo|=b,v=v.next;while(v!==a)}else v===null&&(f.lanes=0);return[c.memoizedState,f.dispatch]}function Fm(a){var c=mr(),f=c.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=a;var m=f.dispatch,v=f.pending,b=c.memoizedState;if(v!==null){f.pending=null;var P=v=v.next;do b=a(b,P.action),P=P.next;while(P!==v);Cr(b,c.memoizedState)||(Fn=!0),c.memoizedState=b,c.baseQueue===null&&(c.baseState=b),f.lastRenderedState=b}return[b,m]}function Rx(){}function kx(a,c){var f=Rt,m=mr(),v=c(),b=!Cr(m.memoizedState,v);if(b&&(m.memoizedState=v,Fn=!0),m=m.queue,Vm(Mx.bind(null,f,m,a),[a]),m.getSnapshot!==c||b||tn!==null&&tn.memoizedState.tag&1){if(f.flags|=2048,Ac(9,Ox.bind(null,f,m,v,c),void 0,null),nn===null)throw Error(n(349));go&30||Ix(f,c,v)}return v}function Ix(a,c,f){a.flags|=16384,a={getSnapshot:c,value:f},c=Rt.updateQueue,c===null?(c={lastEffect:null,stores:null},Rt.updateQueue=c,c.stores=[a]):(f=c.stores,f===null?c.stores=[a]:f.push(a))}function Ox(a,c,f,m){c.value=f,c.getSnapshot=m,Lx(c)&&Nx(a)}function Mx(a,c,f){return f(function(){Lx(c)&&Nx(a)})}function Lx(a){var c=a.getSnapshot;a=a.value;try{var f=c();return!Cr(a,f)}catch{return!0}}function Nx(a){var c=Ss(a,1);c!==null&&Or(c,a,1,-1)}function jx(a){var c=Yr();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sc,lastRenderedState:a},c.queue=a,a=a.dispatch=IN.bind(null,Rt,a),[c.memoizedState,a]}function Ac(a,c,f,m){return a={tag:a,create:c,destroy:f,deps:m,next:null},c=Rt.updateQueue,c===null?(c={lastEffect:null,stores:null},Rt.updateQueue=c,c.lastEffect=a.next=a):(f=c.lastEffect,f===null?c.lastEffect=a.next=a:(m=f.next,f.next=a,a.next=m,c.lastEffect=a)),a}function Dx(){return mr().memoizedState}function Yd(a,c,f,m){var v=Yr();Rt.flags|=a,v.memoizedState=Ac(1|c,f,void 0,m===void 0?null:m)}function Xd(a,c,f,m){var v=mr();m=m===void 0?null:m;var b=void 0;if(qt!==null){var P=qt.memoizedState;if(b=P.destroy,m!==null&&Lm(m,P.deps)){v.memoizedState=Ac(c,f,b,m);return}}Rt.flags|=a,v.memoizedState=Ac(1|c,f,b,m)}function Fx(a,c){return Yd(8390656,8,a,c)}function Vm(a,c){return Xd(2048,8,a,c)}function Vx(a,c){return Xd(4,2,a,c)}function Ux(a,c){return Xd(4,4,a,c)}function Bx(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function zx(a,c,f){return f=f!=null?f.concat([a]):null,Xd(4,4,Bx.bind(null,c,a),f)}function Um(){}function $x(a,c){var f=mr();c=c===void 0?null:c;var m=f.memoizedState;return m!==null&&c!==null&&Lm(c,m[1])?m[0]:(f.memoizedState=[a,c],a)}function Gx(a,c){var f=mr();c=c===void 0?null:c;var m=f.memoizedState;return m!==null&&c!==null&&Lm(c,m[1])?m[0]:(a=a(),f.memoizedState=[a,c],a)}function Wx(a,c,f){return go&21?(Cr(f,c)||(f=fa(),Rt.lanes|=f,vo|=f,a.baseState=!0),c):(a.baseState&&(a.baseState=!1,Fn=!0),a.memoizedState=f)}function RN(a,c){var f=I;I=f!==0&&4>f?f:4,a(!0);var m=Mm.transition;Mm.transition={};try{a(!1),c()}finally{I=f,Mm.transition=m}}function Hx(){return mr().memoizedState}function kN(a,c,f){var m=wi(a);if(f={lane:m,action:f,hasEagerState:!1,eagerState:null,next:null},qx(a))Kx(c,f);else if(f=Tx(a,c,f,m),f!==null){var v=An();Or(f,a,m,v),Yx(f,c,m)}}function IN(a,c,f){var m=wi(a),v={lane:m,action:f,hasEagerState:!1,eagerState:null,next:null};if(qx(a))Kx(c,v);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=c.lastRenderedReducer,b!==null))try{var P=c.lastRenderedState,L=b(P,f);if(v.hasEagerState=!0,v.eagerState=L,Cr(L,P)){var F=c.interleaved;F===null?(v.next=v,Cm(c)):(v.next=F.next,F.next=v),c.interleaved=v;return}}catch{}finally{}f=Tx(a,c,v,m),f!==null&&(v=An(),Or(f,a,m,v),Yx(f,c,m))}}function qx(a){var c=a.alternate;return a===Rt||c!==null&&c===Rt}function Kx(a,c){Ec=Kd=!0;var f=a.pending;f===null?c.next=c:(c.next=f.next,f.next=c),a.pending=c}function Yx(a,c,f){if(f&4194240){var m=c.lanes;m&=a.pendingLanes,f|=m,c.lanes=f,k(a,f)}}var Zd={readContext:pr,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useInsertionEffect:vn,useLayoutEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useMutableSource:vn,useSyncExternalStore:vn,useId:vn,unstable_isNewReconciler:!1},ON={readContext:pr,useCallback:function(a,c){return Yr().memoizedState=[a,c===void 0?null:c],a},useContext:pr,useEffect:Fx,useImperativeHandle:function(a,c,f){return f=f!=null?f.concat([a]):null,Yd(4194308,4,Bx.bind(null,c,a),f)},useLayoutEffect:function(a,c){return Yd(4194308,4,a,c)},useInsertionEffect:function(a,c){return Yd(4,2,a,c)},useMemo:function(a,c){var f=Yr();return c=c===void 0?null:c,a=a(),f.memoizedState=[a,c],a},useReducer:function(a,c,f){var m=Yr();return c=f!==void 0?f(c):c,m.memoizedState=m.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},m.queue=a,a=a.dispatch=kN.bind(null,Rt,a),[m.memoizedState,a]},useRef:function(a){var c=Yr();return a={current:a},c.memoizedState=a},useState:jx,useDebugValue:Um,useDeferredValue:function(a){return Yr().memoizedState=a},useTransition:function(){var a=jx(!1),c=a[0];return a=RN.bind(null,a[1]),Yr().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,f){var m=Rt,v=Yr();if(St){if(f===void 0)throw Error(n(407));f=f()}else{if(f=c(),nn===null)throw Error(n(349));go&30||Ix(m,c,f)}v.memoizedState=f;var b={value:f,getSnapshot:c};return v.queue=b,Fx(Mx.bind(null,m,b,a),[a]),m.flags|=2048,Ac(9,Ox.bind(null,m,b,f,c),void 0,null),f},useId:function(){var a=Yr(),c=nn.identifierPrefix;if(St){var f=Ts,m=Es;f=(m&~(1<<32-mn(m)-1)).toString(32)+f,c=":"+c+"R"+f,f=Tc++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=PN++,c=":"+c+"r"+f.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},MN={readContext:pr,useCallback:$x,useContext:pr,useEffect:Vm,useImperativeHandle:zx,useInsertionEffect:Vx,useLayoutEffect:Ux,useMemo:Gx,useReducer:Dm,useRef:Dx,useState:function(){return Dm(Sc)},useDebugValue:Um,useDeferredValue:function(a){var c=mr();return Wx(c,qt.memoizedState,a)},useTransition:function(){var a=Dm(Sc)[0],c=mr().memoizedState;return[a,c]},useMutableSource:Rx,useSyncExternalStore:kx,useId:Hx,unstable_isNewReconciler:!1},LN={readContext:pr,useCallback:$x,useContext:pr,useEffect:Vm,useImperativeHandle:zx,useInsertionEffect:Vx,useLayoutEffect:Ux,useMemo:Gx,useReducer:Fm,useRef:Dx,useState:function(){return Fm(Sc)},useDebugValue:Um,useDeferredValue:function(a){var c=mr();return qt===null?c.memoizedState=a:Wx(c,qt.memoizedState,a)},useTransition:function(){var a=Fm(Sc)[0],c=mr().memoizedState;return[a,c]},useMutableSource:Rx,useSyncExternalStore:kx,useId:Hx,unstable_isNewReconciler:!1};function Rr(a,c){if(a&&a.defaultProps){c=ne({},c),a=a.defaultProps;for(var f in a)c[f]===void 0&&(c[f]=a[f]);return c}return c}function Bm(a,c,f,m){c=a.memoizedState,f=f(m,c),f=f==null?c:ne({},c,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var Qd={isMounted:function(a){return(a=a._reactInternals)?Gr(a)===a:!1},enqueueSetState:function(a,c,f){a=a._reactInternals;var m=An(),v=wi(a),b=As(m,v);b.payload=c,f!=null&&(b.callback=f),c=gi(a,b,v),c!==null&&(Or(c,a,v,m),Gd(c,a,v))},enqueueReplaceState:function(a,c,f){a=a._reactInternals;var m=An(),v=wi(a),b=As(m,v);b.tag=1,b.payload=c,f!=null&&(b.callback=f),c=gi(a,b,v),c!==null&&(Or(c,a,v,m),Gd(c,a,v))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var f=An(),m=wi(a),v=As(f,m);v.tag=2,c!=null&&(v.callback=c),c=gi(a,v,m),c!==null&&(Or(c,a,m,f),Gd(c,a,m))}};function Xx(a,c,f,m,v,b,P){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,b,P):c.prototype&&c.prototype.isPureReactComponent?!fc(f,m)||!fc(v,b):!0}function Zx(a,c,f){var m=!1,v=hi,b=c.contextType;return typeof b=="object"&&b!==null?b=pr(b):(v=Dn(c)?uo:gn.current,m=c.contextTypes,b=(m=m!=null)?Ea(a,v):hi),c=new c(f,b),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Qd,a.stateNode=c,c._reactInternals=a,m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=v,a.__reactInternalMemoizedMaskedChildContext=b),c}function Qx(a,c,f,m){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,m),c.state!==a&&Qd.enqueueReplaceState(c,c.state,null)}function zm(a,c,f,m){var v=a.stateNode;v.props=f,v.state=a.memoizedState,v.refs={},Pm(a);var b=c.contextType;typeof b=="object"&&b!==null?v.context=pr(b):(b=Dn(c)?uo:gn.current,v.context=Ea(a,b)),v.state=a.memoizedState,b=c.getDerivedStateFromProps,typeof b=="function"&&(Bm(a,c,b,f),v.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(c=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),c!==v.state&&Qd.enqueueReplaceState(v,v.state,null),Wd(a,f,v,m),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308)}function Ia(a,c){try{var f="",m=c;do f+=ze(m),m=m.return;while(m);var v=f}catch(b){v=`
Error generating stack: `+b.message+`
`+b.stack}return{value:a,source:c,stack:v,digest:null}}function $m(a,c,f){return{value:a,source:null,stack:f??null,digest:c??null}}function Gm(a,c){try{console.error(c.value)}catch(f){setTimeout(function(){throw f})}}var NN=typeof WeakMap=="function"?WeakMap:Map;function Jx(a,c,f){f=As(-1,f),f.tag=3,f.payload={element:null};var m=c.value;return f.callback=function(){of||(of=!0,ig=m),Gm(a,c)},f}function eb(a,c,f){f=As(-1,f),f.tag=3;var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var v=c.value;f.payload=function(){return m(v)},f.callback=function(){Gm(a,c)}}var b=a.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(f.callback=function(){Gm(a,c),typeof m!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var P=c.stack;this.componentDidCatch(c.value,{componentStack:P!==null?P:""})}),f}function tb(a,c,f){var m=a.pingCache;if(m===null){m=a.pingCache=new NN;var v=new Set;m.set(c,v)}else v=m.get(c),v===void 0&&(v=new Set,m.set(c,v));v.has(f)||(v.add(f),a=YN.bind(null,a,c,f),c.then(a,a))}function nb(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function rb(a,c,f,m,v){return a.mode&1?(a.flags|=65536,a.lanes=v,a):(a===c?a.flags|=65536:(a.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(c=As(-1,1),c.tag=2,gi(f,c,1))),f.lanes|=1),a)}var jN=O.ReactCurrentOwner,Fn=!1;function Sn(a,c,f,m){c.child=a===null?Ex(c,null,f,m):Ca(c,a.child,f,m)}function sb(a,c,f,m,v){f=f.render;var b=c.ref;return Ra(c,v),m=Nm(a,c,f,m,b,v),f=jm(),a!==null&&!Fn?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~v,Cs(a,c,v)):(St&&f&&ym(c),c.flags|=1,Sn(a,c,m,v),c.child)}function ib(a,c,f,m,v){if(a===null){var b=f.type;return typeof b=="function"&&!fg(b)&&b.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(c.tag=15,c.type=b,ob(a,c,b,m,v)):(a=ff(f.type,null,m,c,c.mode,v),a.ref=c.ref,a.return=c,c.child=a)}if(b=a.child,!(a.lanes&v)){var P=b.memoizedProps;if(f=f.compare,f=f!==null?f:fc,f(P,m)&&a.ref===c.ref)return Cs(a,c,v)}return c.flags|=1,a=bi(b,m),a.ref=c.ref,a.return=c,c.child=a}function ob(a,c,f,m,v){if(a!==null){var b=a.memoizedProps;if(fc(b,m)&&a.ref===c.ref)if(Fn=!1,c.pendingProps=m=b,(a.lanes&v)!==0)a.flags&131072&&(Fn=!0);else return c.lanes=a.lanes,Cs(a,c,v)}return Wm(a,c,f,m,v)}function ab(a,c,f){var m=c.pendingProps,v=m.children,b=a!==null?a.memoizedState:null;if(m.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(Ma,Xn),Xn|=f;else{if(!(f&1073741824))return a=b!==null?b.baseLanes|f:f,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,vt(Ma,Xn),Xn|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=b!==null?b.baseLanes:f,vt(Ma,Xn),Xn|=m}else b!==null?(m=b.baseLanes|f,c.memoizedState=null):m=f,vt(Ma,Xn),Xn|=m;return Sn(a,c,v,f),c.child}function lb(a,c){var f=c.ref;(a===null&&f!==null||a!==null&&a.ref!==f)&&(c.flags|=512,c.flags|=2097152)}function Wm(a,c,f,m,v){var b=Dn(f)?uo:gn.current;return b=Ea(c,b),Ra(c,v),f=Nm(a,c,f,m,b,v),m=jm(),a!==null&&!Fn?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~v,Cs(a,c,v)):(St&&m&&ym(c),c.flags|=1,Sn(a,c,f,v),c.child)}function cb(a,c,f,m,v){if(Dn(f)){var b=!0;jd(c)}else b=!1;if(Ra(c,v),c.stateNode===null)ef(a,c),Zx(c,f,m),zm(c,f,m,v),m=!0;else if(a===null){var P=c.stateNode,L=c.memoizedProps;P.props=L;var F=P.context,Y=f.contextType;typeof Y=="object"&&Y!==null?Y=pr(Y):(Y=Dn(f)?uo:gn.current,Y=Ea(c,Y));var ae=f.getDerivedStateFromProps,ce=typeof ae=="function"||typeof P.getSnapshotBeforeUpdate=="function";ce||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(L!==m||F!==Y)&&Qx(c,P,m,Y),mi=!1;var ie=c.memoizedState;P.state=ie,Wd(c,m,P,v),F=c.memoizedState,L!==m||ie!==F||jn.current||mi?(typeof ae=="function"&&(Bm(c,f,ae,m),F=c.memoizedState),(L=mi||Xx(c,f,L,m,ie,F,Y))?(ce||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(c.flags|=4194308)):(typeof P.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=F),P.props=m,P.state=F,P.context=Y,m=L):(typeof P.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{P=c.stateNode,Sx(a,c),L=c.memoizedProps,Y=c.type===c.elementType?L:Rr(c.type,L),P.props=Y,ce=c.pendingProps,ie=P.context,F=f.contextType,typeof F=="object"&&F!==null?F=pr(F):(F=Dn(f)?uo:gn.current,F=Ea(c,F));var be=f.getDerivedStateFromProps;(ae=typeof be=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(L!==ce||ie!==F)&&Qx(c,P,m,F),mi=!1,ie=c.memoizedState,P.state=ie,Wd(c,m,P,v);var Ae=c.memoizedState;L!==ce||ie!==Ae||jn.current||mi?(typeof be=="function"&&(Bm(c,f,be,m),Ae=c.memoizedState),(Y=mi||Xx(c,f,Y,m,ie,Ae,F)||!1)?(ae||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(m,Ae,F),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(m,Ae,F)),typeof P.componentDidUpdate=="function"&&(c.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof P.componentDidUpdate!="function"||L===a.memoizedProps&&ie===a.memoizedState||(c.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||L===a.memoizedProps&&ie===a.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=Ae),P.props=m,P.state=Ae,P.context=F,m=Y):(typeof P.componentDidUpdate!="function"||L===a.memoizedProps&&ie===a.memoizedState||(c.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||L===a.memoizedProps&&ie===a.memoizedState||(c.flags|=1024),m=!1)}return Hm(a,c,f,m,b,v)}function Hm(a,c,f,m,v,b){lb(a,c);var P=(c.flags&128)!==0;if(!m&&!P)return v&&px(c,f,!1),Cs(a,c,b);m=c.stateNode,jN.current=c;var L=P&&typeof f.getDerivedStateFromError!="function"?null:m.render();return c.flags|=1,a!==null&&P?(c.child=Ca(c,a.child,null,b),c.child=Ca(c,null,L,b)):Sn(a,c,L,b),c.memoizedState=m.state,v&&px(c,f,!0),c.child}function ub(a){var c=a.stateNode;c.pendingContext?fx(a,c.pendingContext,c.pendingContext!==c.context):c.context&&fx(a,c.context,!1),Rm(a,c.containerInfo)}function db(a,c,f,m,v){return Aa(),bm(v),c.flags|=256,Sn(a,c,f,m),c.child}var qm={dehydrated:null,treeContext:null,retryLane:0};function Km(a){return{baseLanes:a,cachePool:null,transitions:null}}function fb(a,c,f){var m=c.pendingProps,v=Pt.current,b=!1,P=(c.flags&128)!==0,L;if((L=P)||(L=a!==null&&a.memoizedState===null?!1:(v&2)!==0),L?(b=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(v|=1),vt(Pt,v&1),a===null)return xm(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(c.mode&1?a.data==="$!"?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(P=m.children,a=m.fallback,b?(m=c.mode,b=c.child,P={mode:"hidden",children:P},!(m&1)&&b!==null?(b.childLanes=0,b.pendingProps=P):b=hf(P,m,0,null),a=xo(a,m,f,null),b.return=c,a.return=c,b.sibling=a,c.child=b,c.child.memoizedState=Km(f),c.memoizedState=qm,a):Ym(c,P));if(v=a.memoizedState,v!==null&&(L=v.dehydrated,L!==null))return DN(a,c,P,m,L,v,f);if(b){b=m.fallback,P=c.mode,v=a.child,L=v.sibling;var F={mode:"hidden",children:m.children};return!(P&1)&&c.child!==v?(m=c.child,m.childLanes=0,m.pendingProps=F,c.deletions=null):(m=bi(v,F),m.subtreeFlags=v.subtreeFlags&14680064),L!==null?b=bi(L,b):(b=xo(b,P,f,null),b.flags|=2),b.return=c,m.return=c,m.sibling=b,c.child=m,m=b,b=c.child,P=a.child.memoizedState,P=P===null?Km(f):{baseLanes:P.baseLanes|f,cachePool:null,transitions:P.transitions},b.memoizedState=P,b.childLanes=a.childLanes&~f,c.memoizedState=qm,m}return b=a.child,a=b.sibling,m=bi(b,{mode:"visible",children:m.children}),!(c.mode&1)&&(m.lanes=f),m.return=c,m.sibling=null,a!==null&&(f=c.deletions,f===null?(c.deletions=[a],c.flags|=16):f.push(a)),c.child=m,c.memoizedState=null,m}function Ym(a,c){return c=hf({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function Jd(a,c,f,m){return m!==null&&bm(m),Ca(c,a.child,null,f),a=Ym(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function DN(a,c,f,m,v,b,P){if(f)return c.flags&256?(c.flags&=-257,m=$m(Error(n(422))),Jd(a,c,P,m)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(b=m.fallback,v=c.mode,m=hf({mode:"visible",children:m.children},v,0,null),b=xo(b,v,P,null),b.flags|=2,m.return=c,b.return=c,m.sibling=b,c.child=m,c.mode&1&&Ca(c,a.child,null,P),c.child.memoizedState=Km(P),c.memoizedState=qm,b);if(!(c.mode&1))return Jd(a,c,P,null);if(v.data==="$!"){if(m=v.nextSibling&&v.nextSibling.dataset,m)var L=m.dgst;return m=L,b=Error(n(419)),m=$m(b,m,void 0),Jd(a,c,P,m)}if(L=(P&a.childLanes)!==0,Fn||L){if(m=nn,m!==null){switch(P&-P){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=v&(m.suspendedLanes|P)?0:v,v!==0&&v!==b.retryLane&&(b.retryLane=v,Ss(a,v),Or(m,a,v,-1))}return dg(),m=$m(Error(n(421))),Jd(a,c,P,m)}return v.data==="$?"?(c.flags|=128,c.child=a.child,c=XN.bind(null,a),v._reactRetry=c,null):(a=b.treeContext,Yn=di(v.nextSibling),Kn=c,St=!0,Pr=null,a!==null&&(fr[hr++]=Es,fr[hr++]=Ts,fr[hr++]=fo,Es=a.id,Ts=a.overflow,fo=c),c=Ym(c,m.children),c.flags|=4096,c)}function hb(a,c,f){a.lanes|=c;var m=a.alternate;m!==null&&(m.lanes|=c),Am(a.return,c,f)}function Xm(a,c,f,m,v){var b=a.memoizedState;b===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:v}:(b.isBackwards=c,b.rendering=null,b.renderingStartTime=0,b.last=m,b.tail=f,b.tailMode=v)}function pb(a,c,f){var m=c.pendingProps,v=m.revealOrder,b=m.tail;if(Sn(a,c,m.children,f),m=Pt.current,m&2)m=m&1|2,c.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&hb(a,f,c);else if(a.tag===19)hb(a,f,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}if(vt(Pt,m),!(c.mode&1))c.memoizedState=null;else switch(v){case"forwards":for(f=c.child,v=null;f!==null;)a=f.alternate,a!==null&&Hd(a)===null&&(v=f),f=f.sibling;f=v,f===null?(v=c.child,c.child=null):(v=f.sibling,f.sibling=null),Xm(c,!1,v,f,b);break;case"backwards":for(f=null,v=c.child,c.child=null;v!==null;){if(a=v.alternate,a!==null&&Hd(a)===null){c.child=v;break}a=v.sibling,v.sibling=f,f=v,v=a}Xm(c,!0,f,null,b);break;case"together":Xm(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function ef(a,c){!(c.mode&1)&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function Cs(a,c,f){if(a!==null&&(c.dependencies=a.dependencies),vo|=c.lanes,!(f&c.childLanes))return null;if(a!==null&&c.child!==a.child)throw Error(n(153));if(c.child!==null){for(a=c.child,f=bi(a,a.pendingProps),c.child=f,f.return=c;a.sibling!==null;)a=a.sibling,f=f.sibling=bi(a,a.pendingProps),f.return=c;f.sibling=null}return c.child}function FN(a,c,f){switch(c.tag){case 3:ub(c),Aa();break;case 5:Px(c);break;case 1:Dn(c.type)&&jd(c);break;case 4:Rm(c,c.stateNode.containerInfo);break;case 10:var m=c.type._context,v=c.memoizedProps.value;vt(zd,m._currentValue),m._currentValue=v;break;case 13:if(m=c.memoizedState,m!==null)return m.dehydrated!==null?(vt(Pt,Pt.current&1),c.flags|=128,null):f&c.child.childLanes?fb(a,c,f):(vt(Pt,Pt.current&1),a=Cs(a,c,f),a!==null?a.sibling:null);vt(Pt,Pt.current&1);break;case 19:if(m=(f&c.childLanes)!==0,a.flags&128){if(m)return pb(a,c,f);c.flags|=128}if(v=c.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),vt(Pt,Pt.current),m)break;return null;case 22:case 23:return c.lanes=0,ab(a,c,f)}return Cs(a,c,f)}var mb,Zm,gb,vb;mb=function(a,c){for(var f=c.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Zm=function(){},gb=function(a,c,f,m){var v=a.memoizedProps;if(v!==m){a=c.stateNode,mo(Kr.current);var b=null;switch(f){case"input":v=Ct(a,v),m=Ct(a,m),b=[];break;case"select":v=ne({},v,{value:void 0}),m=ne({},m,{value:void 0}),b=[];break;case"textarea":v=ee(a,v),m=ee(a,m),b=[];break;default:typeof v.onClick!="function"&&typeof m.onClick=="function"&&(a.onclick=Md)}Qs(f,m);var P;f=null;for(Y in v)if(!m.hasOwnProperty(Y)&&v.hasOwnProperty(Y)&&v[Y]!=null)if(Y==="style"){var L=v[Y];for(P in L)L.hasOwnProperty(P)&&(f||(f={}),f[P]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?b||(b=[]):(b=b||[]).push(Y,null));for(Y in m){var F=m[Y];if(L=v!=null?v[Y]:void 0,m.hasOwnProperty(Y)&&F!==L&&(F!=null||L!=null))if(Y==="style")if(L){for(P in L)!L.hasOwnProperty(P)||F&&F.hasOwnProperty(P)||(f||(f={}),f[P]="");for(P in F)F.hasOwnProperty(P)&&L[P]!==F[P]&&(f||(f={}),f[P]=F[P])}else f||(b||(b=[]),b.push(Y,f)),f=F;else Y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,L=L?L.__html:void 0,F!=null&&L!==F&&(b=b||[]).push(Y,F)):Y==="children"?typeof F!="string"&&typeof F!="number"||(b=b||[]).push(Y,""+F):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(F!=null&&Y==="onScroll"&&wt("scroll",a),b||L===F||(b=[])):(b=b||[]).push(Y,F))}f&&(b=b||[]).push("style",f);var Y=b;(c.updateQueue=Y)&&(c.flags|=4)}},vb=function(a,c,f,m){f!==m&&(c.flags|=4)};function Cc(a,c){if(!St)switch(a.tailMode){case"hidden":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function yn(a){var c=a.alternate!==null&&a.alternate.child===a.child,f=0,m=0;if(c)for(var v=a.child;v!==null;)f|=v.lanes|v.childLanes,m|=v.subtreeFlags&14680064,m|=v.flags&14680064,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)f|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=m,a.childLanes=f,c}function VN(a,c,f){var m=c.pendingProps;switch(_m(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(c),null;case 1:return Dn(c.type)&&Nd(),yn(c),null;case 3:return m=c.stateNode,ka(),xt(jn),xt(gn),Om(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(a===null||a.child===null)&&(Ud(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,Pr!==null&&(lg(Pr),Pr=null))),Zm(a,c),yn(c),null;case 5:km(c);var v=mo(bc.current);if(f=c.type,a!==null&&c.stateNode!=null)gb(a,c,f,m,v),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!m){if(c.stateNode===null)throw Error(n(166));return yn(c),null}if(a=mo(Kr.current),Ud(c)){m=c.stateNode,f=c.type;var b=c.memoizedProps;switch(m[qr]=c,m[vc]=b,a=(c.mode&1)!==0,f){case"dialog":wt("cancel",m),wt("close",m);break;case"iframe":case"object":case"embed":wt("load",m);break;case"video":case"audio":for(v=0;v<pc.length;v++)wt(pc[v],m);break;case"source":wt("error",m);break;case"img":case"image":case"link":wt("error",m),wt("load",m);break;case"details":wt("toggle",m);break;case"input":an(m,b),wt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!b.multiple},wt("invalid",m);break;case"textarea":_e(m,b),wt("invalid",m)}Qs(f,b),v=null;for(var P in b)if(b.hasOwnProperty(P)){var L=b[P];P==="children"?typeof L=="string"?m.textContent!==L&&(b.suppressHydrationWarning!==!0&&Od(m.textContent,L,a),v=["children",L]):typeof L=="number"&&m.textContent!==""+L&&(b.suppressHydrationWarning!==!0&&Od(m.textContent,L,a),v=["children",""+L]):s.hasOwnProperty(P)&&L!=null&&P==="onScroll"&&wt("scroll",m)}switch(f){case"input":Ye(m),Ys(m,b,!0);break;case"textarea":Ye(m),fe(m);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(m.onclick=Md)}m=v,c.updateQueue=m,m!==null&&(c.flags|=4)}else{P=v.nodeType===9?v:v.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Me(f)),a==="http://www.w3.org/1999/xhtml"?f==="script"?(a=P.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof m.is=="string"?a=P.createElement(f,{is:m.is}):(a=P.createElement(f),f==="select"&&(P=a,m.multiple?P.multiple=!0:m.size&&(P.size=m.size))):a=P.createElementNS(a,f),a[qr]=c,a[vc]=m,mb(a,c,!1,!1),c.stateNode=a;e:{switch(P=ro(f,m),f){case"dialog":wt("cancel",a),wt("close",a),v=m;break;case"iframe":case"object":case"embed":wt("load",a),v=m;break;case"video":case"audio":for(v=0;v<pc.length;v++)wt(pc[v],a);v=m;break;case"source":wt("error",a),v=m;break;case"img":case"image":case"link":wt("error",a),wt("load",a),v=m;break;case"details":wt("toggle",a),v=m;break;case"input":an(a,m),v=Ct(a,m),wt("invalid",a);break;case"option":v=m;break;case"select":a._wrapperState={wasMultiple:!!m.multiple},v=ne({},m,{value:void 0}),wt("invalid",a);break;case"textarea":_e(a,m),v=ee(a,m),wt("invalid",a);break;default:v=m}Qs(f,v),L=v;for(b in L)if(L.hasOwnProperty(b)){var F=L[b];b==="style"?Zs(a,F):b==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&en(a,F)):b==="children"?typeof F=="string"?(f!=="textarea"||F!=="")&&$n(a,F):typeof F=="number"&&$n(a,""+F):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(s.hasOwnProperty(b)?F!=null&&b==="onScroll"&&wt("scroll",a):F!=null&&C(a,b,F,P))}switch(f){case"input":Ye(a),Ys(a,m,!1);break;case"textarea":Ye(a),fe(a);break;case"option":m.value!=null&&a.setAttribute("value",""+Te(m.value));break;case"select":a.multiple=!!m.multiple,b=m.value,b!=null?W(a,!!m.multiple,b,!1):m.defaultValue!=null&&W(a,!!m.multiple,m.defaultValue,!0);break;default:typeof v.onClick=="function"&&(a.onclick=Md)}switch(f){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return yn(c),null;case 6:if(a&&c.stateNode!=null)vb(a,c,a.memoizedProps,m);else{if(typeof m!="string"&&c.stateNode===null)throw Error(n(166));if(f=mo(bc.current),mo(Kr.current),Ud(c)){if(m=c.stateNode,f=c.memoizedProps,m[qr]=c,(b=m.nodeValue!==f)&&(a=Kn,a!==null))switch(a.tag){case 3:Od(m.nodeValue,f,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Od(m.nodeValue,f,(a.mode&1)!==0)}b&&(c.flags|=4)}else m=(f.nodeType===9?f:f.ownerDocument).createTextNode(m),m[qr]=c,c.stateNode=m}return yn(c),null;case 13:if(xt(Pt),m=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(St&&Yn!==null&&c.mode&1&&!(c.flags&128))wx(),Aa(),c.flags|=98560,b=!1;else if(b=Ud(c),m!==null&&m.dehydrated!==null){if(a===null){if(!b)throw Error(n(318));if(b=c.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[qr]=c}else Aa(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;yn(c),b=!1}else Pr!==null&&(lg(Pr),Pr=null),b=!0;if(!b)return c.flags&65536?c:null}return c.flags&128?(c.lanes=f,c):(m=m!==null,m!==(a!==null&&a.memoizedState!==null)&&m&&(c.child.flags|=8192,c.mode&1&&(a===null||Pt.current&1?Kt===0&&(Kt=3):dg())),c.updateQueue!==null&&(c.flags|=4),yn(c),null);case 4:return ka(),Zm(a,c),a===null&&mc(c.stateNode.containerInfo),yn(c),null;case 10:return Sm(c.type._context),yn(c),null;case 17:return Dn(c.type)&&Nd(),yn(c),null;case 19:if(xt(Pt),b=c.memoizedState,b===null)return yn(c),null;if(m=(c.flags&128)!==0,P=b.rendering,P===null)if(m)Cc(b,!1);else{if(Kt!==0||a!==null&&a.flags&128)for(a=c.child;a!==null;){if(P=Hd(a),P!==null){for(c.flags|=128,Cc(b,!1),m=P.updateQueue,m!==null&&(c.updateQueue=m,c.flags|=4),c.subtreeFlags=0,m=f,f=c.child;f!==null;)b=f,a=m,b.flags&=14680066,P=b.alternate,P===null?(b.childLanes=0,b.lanes=a,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=P.childLanes,b.lanes=P.lanes,b.child=P.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=P.memoizedProps,b.memoizedState=P.memoizedState,b.updateQueue=P.updateQueue,b.type=P.type,a=P.dependencies,b.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),f=f.sibling;return vt(Pt,Pt.current&1|2),c.child}a=a.sibling}b.tail!==null&&gt()>La&&(c.flags|=128,m=!0,Cc(b,!1),c.lanes=4194304)}else{if(!m)if(a=Hd(P),a!==null){if(c.flags|=128,m=!0,f=a.updateQueue,f!==null&&(c.updateQueue=f,c.flags|=4),Cc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!P.alternate&&!St)return yn(c),null}else 2*gt()-b.renderingStartTime>La&&f!==1073741824&&(c.flags|=128,m=!0,Cc(b,!1),c.lanes=4194304);b.isBackwards?(P.sibling=c.child,c.child=P):(f=b.last,f!==null?f.sibling=P:c.child=P,b.last=P)}return b.tail!==null?(c=b.tail,b.rendering=c,b.tail=c.sibling,b.renderingStartTime=gt(),c.sibling=null,f=Pt.current,vt(Pt,m?f&1|2:f&1),c):(yn(c),null);case 22:case 23:return ug(),m=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==m&&(c.flags|=8192),m&&c.mode&1?Xn&1073741824&&(yn(c),c.subtreeFlags&6&&(c.flags|=8192)):yn(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function UN(a,c){switch(_m(c),c.tag){case 1:return Dn(c.type)&&Nd(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return ka(),xt(jn),xt(gn),Om(),a=c.flags,a&65536&&!(a&128)?(c.flags=a&-65537|128,c):null;case 5:return km(c),null;case 13:if(xt(Pt),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Aa()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return xt(Pt),null;case 4:return ka(),null;case 10:return Sm(c.type._context),null;case 22:case 23:return ug(),null;case 24:return null;default:return null}}var tf=!1,_n=!1,BN=typeof WeakSet=="function"?WeakSet:Set,Se=null;function Oa(a,c){var f=a.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(m){It(a,c,m)}else f.current=null}function Qm(a,c,f){try{f()}catch(m){It(a,c,m)}}var yb=!1;function zN(a,c){if(um=xd,a=Xw(),nm(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var v=m.anchorOffset,b=m.focusNode;m=m.focusOffset;try{f.nodeType,b.nodeType}catch{f=null;break e}var P=0,L=-1,F=-1,Y=0,ae=0,ce=a,ie=null;t:for(;;){for(var be;ce!==f||v!==0&&ce.nodeType!==3||(L=P+v),ce!==b||m!==0&&ce.nodeType!==3||(F=P+m),ce.nodeType===3&&(P+=ce.nodeValue.length),(be=ce.firstChild)!==null;)ie=ce,ce=be;for(;;){if(ce===a)break t;if(ie===f&&++Y===v&&(L=P),ie===b&&++ae===m&&(F=P),(be=ce.nextSibling)!==null)break;ce=ie,ie=ce.parentNode}ce=be}f=L===-1||F===-1?null:{start:L,end:F}}else f=null}f=f||{start:0,end:0}}else f=null;for(dm={focusedElem:a,selectionRange:f},xd=!1,Se=c;Se!==null;)if(c=Se,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,Se=a;else for(;Se!==null;){c=Se;try{var Ae=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var Pe=Ae.memoizedProps,Dt=Ae.memoizedState,H=c.stateNode,U=H.getSnapshotBeforeUpdate(c.elementType===c.type?Pe:Rr(c.type,Pe),Dt);H.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var q=c.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(de){It(c,c.return,de)}if(a=c.sibling,a!==null){a.return=c.return,Se=a;break}Se=c.return}return Ae=yb,yb=!1,Ae}function Pc(a,c,f){var m=c.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var v=m=m.next;do{if((v.tag&a)===a){var b=v.destroy;v.destroy=void 0,b!==void 0&&Qm(c,f,b)}v=v.next}while(v!==m)}}function nf(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&a)===a){var m=f.create;f.destroy=m()}f=f.next}while(f!==c)}}function Jm(a){var c=a.ref;if(c!==null){var f=a.stateNode;switch(a.tag){case 5:a=f;break;default:a=f}typeof c=="function"?c(a):c.current=a}}function _b(a){var c=a.alternate;c!==null&&(a.alternate=null,_b(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[qr],delete c[vc],delete c[mm],delete c[TN],delete c[SN])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function wb(a){return a.tag===5||a.tag===3||a.tag===4}function xb(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||wb(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function eg(a,c,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,c?f.nodeType===8?f.parentNode.insertBefore(a,c):f.insertBefore(a,c):(f.nodeType===8?(c=f.parentNode,c.insertBefore(a,f)):(c=f,c.appendChild(a)),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=Md));else if(m!==4&&(a=a.child,a!==null))for(eg(a,c,f),a=a.sibling;a!==null;)eg(a,c,f),a=a.sibling}function tg(a,c,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,c?f.insertBefore(a,c):f.appendChild(a);else if(m!==4&&(a=a.child,a!==null))for(tg(a,c,f),a=a.sibling;a!==null;)tg(a,c,f),a=a.sibling}var ln=null,kr=!1;function vi(a,c,f){for(f=f.child;f!==null;)bb(a,c,f),f=f.sibling}function bb(a,c,f){if(Wn&&typeof Wn.onCommitFiberUnmount=="function")try{Wn.onCommitFiberUnmount(Nn,f)}catch{}switch(f.tag){case 5:_n||Oa(f,c);case 6:var m=ln,v=kr;ln=null,vi(a,c,f),ln=m,kr=v,ln!==null&&(kr?(a=ln,f=f.stateNode,a.nodeType===8?a.parentNode.removeChild(f):a.removeChild(f)):ln.removeChild(f.stateNode));break;case 18:ln!==null&&(kr?(a=ln,f=f.stateNode,a.nodeType===8?pm(a.parentNode,f):a.nodeType===1&&pm(a,f),oc(a)):pm(ln,f.stateNode));break;case 4:m=ln,v=kr,ln=f.stateNode.containerInfo,kr=!0,vi(a,c,f),ln=m,kr=v;break;case 0:case 11:case 14:case 15:if(!_n&&(m=f.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){v=m=m.next;do{var b=v,P=b.destroy;b=b.tag,P!==void 0&&(b&2||b&4)&&Qm(f,c,P),v=v.next}while(v!==m)}vi(a,c,f);break;case 1:if(!_n&&(Oa(f,c),m=f.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=f.memoizedProps,m.state=f.memoizedState,m.componentWillUnmount()}catch(L){It(f,c,L)}vi(a,c,f);break;case 21:vi(a,c,f);break;case 22:f.mode&1?(_n=(m=_n)||f.memoizedState!==null,vi(a,c,f),_n=m):vi(a,c,f);break;default:vi(a,c,f)}}function Eb(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var f=a.stateNode;f===null&&(f=a.stateNode=new BN),c.forEach(function(m){var v=ZN.bind(null,a,m);f.has(m)||(f.add(m),m.then(v,v))})}}function Ir(a,c){var f=c.deletions;if(f!==null)for(var m=0;m<f.length;m++){var v=f[m];try{var b=a,P=c,L=P;e:for(;L!==null;){switch(L.tag){case 5:ln=L.stateNode,kr=!1;break e;case 3:ln=L.stateNode.containerInfo,kr=!0;break e;case 4:ln=L.stateNode.containerInfo,kr=!0;break e}L=L.return}if(ln===null)throw Error(n(160));bb(b,P,v),ln=null,kr=!1;var F=v.alternate;F!==null&&(F.return=null),v.return=null}catch(Y){It(v,c,Y)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Tb(c,a),c=c.sibling}function Tb(a,c){var f=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Ir(c,a),Xr(a),m&4){try{Pc(3,a,a.return),nf(3,a)}catch(Pe){It(a,a.return,Pe)}try{Pc(5,a,a.return)}catch(Pe){It(a,a.return,Pe)}}break;case 1:Ir(c,a),Xr(a),m&512&&f!==null&&Oa(f,f.return);break;case 5:if(Ir(c,a),Xr(a),m&512&&f!==null&&Oa(f,f.return),a.flags&32){var v=a.stateNode;try{$n(v,"")}catch(Pe){It(a,a.return,Pe)}}if(m&4&&(v=a.stateNode,v!=null)){var b=a.memoizedProps,P=f!==null?f.memoizedProps:b,L=a.type,F=a.updateQueue;if(a.updateQueue=null,F!==null)try{L==="input"&&b.type==="radio"&&b.name!=null&&Lt(v,b),ro(L,P);var Y=ro(L,b);for(P=0;P<F.length;P+=2){var ae=F[P],ce=F[P+1];ae==="style"?Zs(v,ce):ae==="dangerouslySetInnerHTML"?en(v,ce):ae==="children"?$n(v,ce):C(v,ae,ce,Y)}switch(L){case"input":Gt(v,b);break;case"textarea":me(v,b);break;case"select":var ie=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!b.multiple;var be=b.value;be!=null?W(v,!!b.multiple,be,!1):ie!==!!b.multiple&&(b.defaultValue!=null?W(v,!!b.multiple,b.defaultValue,!0):W(v,!!b.multiple,b.multiple?[]:"",!1))}v[vc]=b}catch(Pe){It(a,a.return,Pe)}}break;case 6:if(Ir(c,a),Xr(a),m&4){if(a.stateNode===null)throw Error(n(162));v=a.stateNode,b=a.memoizedProps;try{v.nodeValue=b}catch(Pe){It(a,a.return,Pe)}}break;case 3:if(Ir(c,a),Xr(a),m&4&&f!==null&&f.memoizedState.isDehydrated)try{oc(c.containerInfo)}catch(Pe){It(a,a.return,Pe)}break;case 4:Ir(c,a),Xr(a);break;case 13:Ir(c,a),Xr(a),v=a.child,v.flags&8192&&(b=v.memoizedState!==null,v.stateNode.isHidden=b,!b||v.alternate!==null&&v.alternate.memoizedState!==null||(sg=gt())),m&4&&Eb(a);break;case 22:if(ae=f!==null&&f.memoizedState!==null,a.mode&1?(_n=(Y=_n)||ae,Ir(c,a),_n=Y):Ir(c,a),Xr(a),m&8192){if(Y=a.memoizedState!==null,(a.stateNode.isHidden=Y)&&!ae&&a.mode&1)for(Se=a,ae=a.child;ae!==null;){for(ce=Se=ae;Se!==null;){switch(ie=Se,be=ie.child,ie.tag){case 0:case 11:case 14:case 15:Pc(4,ie,ie.return);break;case 1:Oa(ie,ie.return);var Ae=ie.stateNode;if(typeof Ae.componentWillUnmount=="function"){m=ie,f=ie.return;try{c=m,Ae.props=c.memoizedProps,Ae.state=c.memoizedState,Ae.componentWillUnmount()}catch(Pe){It(m,f,Pe)}}break;case 5:Oa(ie,ie.return);break;case 22:if(ie.memoizedState!==null){Cb(ce);continue}}be!==null?(be.return=ie,Se=be):Cb(ce)}ae=ae.sibling}e:for(ae=null,ce=a;;){if(ce.tag===5){if(ae===null){ae=ce;try{v=ce.stateNode,Y?(b=v.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(L=ce.stateNode,F=ce.memoizedProps.style,P=F!=null&&F.hasOwnProperty("display")?F.display:null,L.style.display=Xs("display",P))}catch(Pe){It(a,a.return,Pe)}}}else if(ce.tag===6){if(ae===null)try{ce.stateNode.nodeValue=Y?"":ce.memoizedProps}catch(Pe){It(a,a.return,Pe)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===a)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===a)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===a)break e;ae===ce&&(ae=null),ce=ce.return}ae===ce&&(ae=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:Ir(c,a),Xr(a),m&4&&Eb(a);break;case 21:break;default:Ir(c,a),Xr(a)}}function Xr(a){var c=a.flags;if(c&2){try{e:{for(var f=a.return;f!==null;){if(wb(f)){var m=f;break e}f=f.return}throw Error(n(160))}switch(m.tag){case 5:var v=m.stateNode;m.flags&32&&($n(v,""),m.flags&=-33);var b=xb(a);tg(a,b,v);break;case 3:case 4:var P=m.stateNode.containerInfo,L=xb(a);eg(a,L,P);break;default:throw Error(n(161))}}catch(F){It(a,a.return,F)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function $N(a,c,f){Se=a,Sb(a)}function Sb(a,c,f){for(var m=(a.mode&1)!==0;Se!==null;){var v=Se,b=v.child;if(v.tag===22&&m){var P=v.memoizedState!==null||tf;if(!P){var L=v.alternate,F=L!==null&&L.memoizedState!==null||_n;L=tf;var Y=_n;if(tf=P,(_n=F)&&!Y)for(Se=v;Se!==null;)P=Se,F=P.child,P.tag===22&&P.memoizedState!==null?Pb(v):F!==null?(F.return=P,Se=F):Pb(v);for(;b!==null;)Se=b,Sb(b),b=b.sibling;Se=v,tf=L,_n=Y}Ab(a)}else v.subtreeFlags&8772&&b!==null?(b.return=v,Se=b):Ab(a)}}function Ab(a){for(;Se!==null;){var c=Se;if(c.flags&8772){var f=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:_n||nf(5,c);break;case 1:var m=c.stateNode;if(c.flags&4&&!_n)if(f===null)m.componentDidMount();else{var v=c.elementType===c.type?f.memoizedProps:Rr(c.type,f.memoizedProps);m.componentDidUpdate(v,f.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var b=c.updateQueue;b!==null&&Cx(c,b,m);break;case 3:var P=c.updateQueue;if(P!==null){if(f=null,c.child!==null)switch(c.child.tag){case 5:f=c.child.stateNode;break;case 1:f=c.child.stateNode}Cx(c,P,f)}break;case 5:var L=c.stateNode;if(f===null&&c.flags&4){f=L;var F=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&f.focus();break;case"img":F.src&&(f.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var Y=c.alternate;if(Y!==null){var ae=Y.memoizedState;if(ae!==null){var ce=ae.dehydrated;ce!==null&&oc(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}_n||c.flags&512&&Jm(c)}catch(ie){It(c,c.return,ie)}}if(c===a){Se=null;break}if(f=c.sibling,f!==null){f.return=c.return,Se=f;break}Se=c.return}}function Cb(a){for(;Se!==null;){var c=Se;if(c===a){Se=null;break}var f=c.sibling;if(f!==null){f.return=c.return,Se=f;break}Se=c.return}}function Pb(a){for(;Se!==null;){var c=Se;try{switch(c.tag){case 0:case 11:case 15:var f=c.return;try{nf(4,c)}catch(F){It(c,f,F)}break;case 1:var m=c.stateNode;if(typeof m.componentDidMount=="function"){var v=c.return;try{m.componentDidMount()}catch(F){It(c,v,F)}}var b=c.return;try{Jm(c)}catch(F){It(c,b,F)}break;case 5:var P=c.return;try{Jm(c)}catch(F){It(c,P,F)}}}catch(F){It(c,c.return,F)}if(c===a){Se=null;break}var L=c.sibling;if(L!==null){L.return=c.return,Se=L;break}Se=c.return}}var GN=Math.ceil,rf=O.ReactCurrentDispatcher,ng=O.ReactCurrentOwner,gr=O.ReactCurrentBatchConfig,it=0,nn=null,zt=null,cn=0,Xn=0,Ma=fi(0),Kt=0,Rc=null,vo=0,sf=0,rg=0,kc=null,Vn=null,sg=0,La=1/0,Ps=null,of=!1,ig=null,yi=null,af=!1,_i=null,lf=0,Ic=0,og=null,cf=-1,uf=0;function An(){return it&6?gt():cf!==-1?cf:cf=gt()}function wi(a){return a.mode&1?it&2&&cn!==0?cn&-cn:CN.transition!==null?(uf===0&&(uf=fa()),uf):(a=I,a!==0||(a=window.event,a=a===void 0?16:kw(a.type)),a):1}function Or(a,c,f,m){if(50<Ic)throw Ic=0,og=null,Error(n(185));lo(a,f,m),(!(it&2)||a!==nn)&&(a===nn&&(!(it&2)&&(sf|=f),Kt===4&&xi(a,cn)),Un(a,m),f===1&&it===0&&!(c.mode&1)&&(La=gt()+500,Dd&&pi()))}function Un(a,c){var f=a.callbackNode;$p(a,c);var m=ws(a,a===nn?cn:0);if(m===0)f!==null&&ca(f),a.callbackNode=null,a.callbackPriority=0;else if(c=m&-m,a.callbackPriority!==c){if(f!=null&&ca(f),c===1)a.tag===0?AN(kb.bind(null,a)):mx(kb.bind(null,a)),bN(function(){!(it&6)&&pi()}),f=null;else{switch(N(m)){case 1:f=Wr;break;case 4:f=Ar;break;case 16:f=Ln;break;case 536870912:f=Gn;break;default:f=Ln}f=Fb(f,Rb.bind(null,a))}a.callbackPriority=c,a.callbackNode=f}}function Rb(a,c){if(cf=-1,uf=0,it&6)throw Error(n(327));var f=a.callbackNode;if(Na()&&a.callbackNode!==f)return null;var m=ws(a,a===nn?cn:0);if(m===0)return null;if(m&30||m&a.expiredLanes||c)c=df(a,m);else{c=m;var v=it;it|=2;var b=Ob();(nn!==a||cn!==c)&&(Ps=null,La=gt()+500,_o(a,c));do try{qN();break}catch(L){Ib(a,L)}while(!0);Tm(),rf.current=b,it=v,zt!==null?c=0:(nn=null,cn=0,c=Kt)}if(c!==0){if(c===2&&(v=da(a),v!==0&&(m=v,c=ag(a,v))),c===1)throw f=Rc,_o(a,0),xi(a,m),Un(a,gt()),f;if(c===6)xi(a,m);else{if(v=a.current.alternate,!(m&30)&&!WN(v)&&(c=df(a,m),c===2&&(b=da(a),b!==0&&(m=b,c=ag(a,b))),c===1))throw f=Rc,_o(a,0),xi(a,m),Un(a,gt()),f;switch(a.finishedWork=v,a.finishedLanes=m,c){case 0:case 1:throw Error(n(345));case 2:wo(a,Vn,Ps);break;case 3:if(xi(a,m),(m&130023424)===m&&(c=sg+500-gt(),10<c)){if(ws(a,0)!==0)break;if(v=a.suspendedLanes,(v&m)!==m){An(),a.pingedLanes|=a.suspendedLanes&v;break}a.timeoutHandle=hm(wo.bind(null,a,Vn,Ps),c);break}wo(a,Vn,Ps);break;case 4:if(xi(a,m),(m&4194240)===m)break;for(c=a.eventTimes,v=-1;0<m;){var P=31-mn(m);b=1<<P,P=c[P],P>v&&(v=P),m&=~b}if(m=v,m=gt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*GN(m/1960))-m,10<m){a.timeoutHandle=hm(wo.bind(null,a,Vn,Ps),m);break}wo(a,Vn,Ps);break;case 5:wo(a,Vn,Ps);break;default:throw Error(n(329))}}}return Un(a,gt()),a.callbackNode===f?Rb.bind(null,a):null}function ag(a,c){var f=kc;return a.current.memoizedState.isDehydrated&&(_o(a,c).flags|=256),a=df(a,c),a!==2&&(c=Vn,Vn=f,c!==null&&lg(c)),a}function lg(a){Vn===null?Vn=a:Vn.push.apply(Vn,a)}function WN(a){for(var c=a;;){if(c.flags&16384){var f=c.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var m=0;m<f.length;m++){var v=f[m],b=v.getSnapshot;v=v.value;try{if(!Cr(b(),v))return!1}catch{return!1}}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function xi(a,c){for(c&=~rg,c&=~sf,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var f=31-mn(c),m=1<<f;a[f]=-1,c&=~m}}function kb(a){if(it&6)throw Error(n(327));Na();var c=ws(a,0);if(!(c&1))return Un(a,gt()),null;var f=df(a,c);if(a.tag!==0&&f===2){var m=da(a);m!==0&&(c=m,f=ag(a,m))}if(f===1)throw f=Rc,_o(a,0),xi(a,c),Un(a,gt()),f;if(f===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,wo(a,Vn,Ps),Un(a,gt()),null}function cg(a,c){var f=it;it|=1;try{return a(c)}finally{it=f,it===0&&(La=gt()+500,Dd&&pi())}}function yo(a){_i!==null&&_i.tag===0&&!(it&6)&&Na();var c=it;it|=1;var f=gr.transition,m=I;try{if(gr.transition=null,I=1,a)return a()}finally{I=m,gr.transition=f,it=c,!(it&6)&&pi()}}function ug(){Xn=Ma.current,xt(Ma)}function _o(a,c){a.finishedWork=null,a.finishedLanes=0;var f=a.timeoutHandle;if(f!==-1&&(a.timeoutHandle=-1,xN(f)),zt!==null)for(f=zt.return;f!==null;){var m=f;switch(_m(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Nd();break;case 3:ka(),xt(jn),xt(gn),Om();break;case 5:km(m);break;case 4:ka();break;case 13:xt(Pt);break;case 19:xt(Pt);break;case 10:Sm(m.type._context);break;case 22:case 23:ug()}f=f.return}if(nn=a,zt=a=bi(a.current,null),cn=Xn=c,Kt=0,Rc=null,rg=sf=vo=0,Vn=kc=null,po!==null){for(c=0;c<po.length;c++)if(f=po[c],m=f.interleaved,m!==null){f.interleaved=null;var v=m.next,b=f.pending;if(b!==null){var P=b.next;b.next=v,m.next=P}f.pending=m}po=null}return a}function Ib(a,c){do{var f=zt;try{if(Tm(),qd.current=Zd,Kd){for(var m=Rt.memoizedState;m!==null;){var v=m.queue;v!==null&&(v.pending=null),m=m.next}Kd=!1}if(go=0,tn=qt=Rt=null,Ec=!1,Tc=0,ng.current=null,f===null||f.return===null){Kt=1,Rc=c,zt=null;break}e:{var b=a,P=f.return,L=f,F=c;if(c=cn,L.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var Y=F,ae=L,ce=ae.tag;if(!(ae.mode&1)&&(ce===0||ce===11||ce===15)){var ie=ae.alternate;ie?(ae.updateQueue=ie.updateQueue,ae.memoizedState=ie.memoizedState,ae.lanes=ie.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var be=nb(P);if(be!==null){be.flags&=-257,rb(be,P,L,b,c),be.mode&1&&tb(b,Y,c),c=be,F=Y;var Ae=c.updateQueue;if(Ae===null){var Pe=new Set;Pe.add(F),c.updateQueue=Pe}else Ae.add(F);break e}else{if(!(c&1)){tb(b,Y,c),dg();break e}F=Error(n(426))}}else if(St&&L.mode&1){var Dt=nb(P);if(Dt!==null){!(Dt.flags&65536)&&(Dt.flags|=256),rb(Dt,P,L,b,c),bm(Ia(F,L));break e}}b=F=Ia(F,L),Kt!==4&&(Kt=2),kc===null?kc=[b]:kc.push(b),b=P;do{switch(b.tag){case 3:b.flags|=65536,c&=-c,b.lanes|=c;var H=Jx(b,F,c);Ax(b,H);break e;case 1:L=F;var U=b.type,q=b.stateNode;if(!(b.flags&128)&&(typeof U.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(yi===null||!yi.has(q)))){b.flags|=65536,c&=-c,b.lanes|=c;var de=eb(b,L,c);Ax(b,de);break e}}b=b.return}while(b!==null)}Lb(f)}catch(Ie){c=Ie,zt===f&&f!==null&&(zt=f=f.return);continue}break}while(!0)}function Ob(){var a=rf.current;return rf.current=Zd,a===null?Zd:a}function dg(){(Kt===0||Kt===3||Kt===2)&&(Kt=4),nn===null||!(vo&268435455)&&!(sf&268435455)||xi(nn,cn)}function df(a,c){var f=it;it|=2;var m=Ob();(nn!==a||cn!==c)&&(Ps=null,_o(a,c));do try{HN();break}catch(v){Ib(a,v)}while(!0);if(Tm(),it=f,rf.current=m,zt!==null)throw Error(n(261));return nn=null,cn=0,Kt}function HN(){for(;zt!==null;)Mb(zt)}function qN(){for(;zt!==null&&!Bp();)Mb(zt)}function Mb(a){var c=Db(a.alternate,a,Xn);a.memoizedProps=a.pendingProps,c===null?Lb(a):zt=c,ng.current=null}function Lb(a){var c=a;do{var f=c.alternate;if(a=c.return,c.flags&32768){if(f=UN(f,c),f!==null){f.flags&=32767,zt=f;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Kt=6,zt=null;return}}else if(f=VN(f,c,Xn),f!==null){zt=f;return}if(c=c.sibling,c!==null){zt=c;return}zt=c=a}while(c!==null);Kt===0&&(Kt=5)}function wo(a,c,f){var m=I,v=gr.transition;try{gr.transition=null,I=1,KN(a,c,f,m)}finally{gr.transition=v,I=m}return null}function KN(a,c,f,m){do Na();while(_i!==null);if(it&6)throw Error(n(327));f=a.finishedWork;var v=a.finishedLanes;if(f===null)return null;if(a.finishedWork=null,a.finishedLanes=0,f===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var b=f.lanes|f.childLanes;if(Gp(a,b),a===nn&&(zt=nn=null,cn=0),!(f.subtreeFlags&2064)&&!(f.flags&2064)||af||(af=!0,Fb(Ln,function(){return Na(),null})),b=(f.flags&15990)!==0,f.subtreeFlags&15990||b){b=gr.transition,gr.transition=null;var P=I;I=1;var L=it;it|=4,ng.current=null,zN(a,f),Tb(f,a),pN(dm),xd=!!um,dm=um=null,a.current=f,$N(f),zp(),it=L,I=P,gr.transition=b}else a.current=f;if(af&&(af=!1,_i=a,lf=v),b=a.pendingLanes,b===0&&(yi=null),_d(f.stateNode),Un(a,gt()),c!==null)for(m=a.onRecoverableError,f=0;f<c.length;f++)v=c[f],m(v.value,{componentStack:v.stack,digest:v.digest});if(of)throw of=!1,a=ig,ig=null,a;return lf&1&&a.tag!==0&&Na(),b=a.pendingLanes,b&1?a===og?Ic++:(Ic=0,og=a):Ic=0,pi(),null}function Na(){if(_i!==null){var a=N(lf),c=gr.transition,f=I;try{if(gr.transition=null,I=16>a?16:a,_i===null)var m=!1;else{if(a=_i,_i=null,lf=0,it&6)throw Error(n(331));var v=it;for(it|=4,Se=a.current;Se!==null;){var b=Se,P=b.child;if(Se.flags&16){var L=b.deletions;if(L!==null){for(var F=0;F<L.length;F++){var Y=L[F];for(Se=Y;Se!==null;){var ae=Se;switch(ae.tag){case 0:case 11:case 15:Pc(8,ae,b)}var ce=ae.child;if(ce!==null)ce.return=ae,Se=ce;else for(;Se!==null;){ae=Se;var ie=ae.sibling,be=ae.return;if(_b(ae),ae===Y){Se=null;break}if(ie!==null){ie.return=be,Se=ie;break}Se=be}}}var Ae=b.alternate;if(Ae!==null){var Pe=Ae.child;if(Pe!==null){Ae.child=null;do{var Dt=Pe.sibling;Pe.sibling=null,Pe=Dt}while(Pe!==null)}}Se=b}}if(b.subtreeFlags&2064&&P!==null)P.return=b,Se=P;else e:for(;Se!==null;){if(b=Se,b.flags&2048)switch(b.tag){case 0:case 11:case 15:Pc(9,b,b.return)}var H=b.sibling;if(H!==null){H.return=b.return,Se=H;break e}Se=b.return}}var U=a.current;for(Se=U;Se!==null;){P=Se;var q=P.child;if(P.subtreeFlags&2064&&q!==null)q.return=P,Se=q;else e:for(P=U;Se!==null;){if(L=Se,L.flags&2048)try{switch(L.tag){case 0:case 11:case 15:nf(9,L)}}catch(Ie){It(L,L.return,Ie)}if(L===P){Se=null;break e}var de=L.sibling;if(de!==null){de.return=L.return,Se=de;break e}Se=L.return}}if(it=v,pi(),Wn&&typeof Wn.onPostCommitFiberRoot=="function")try{Wn.onPostCommitFiberRoot(Nn,a)}catch{}m=!0}return m}finally{I=f,gr.transition=c}}return!1}function Nb(a,c,f){c=Ia(f,c),c=Jx(a,c,1),a=gi(a,c,1),c=An(),a!==null&&(lo(a,1,c),Un(a,c))}function It(a,c,f){if(a.tag===3)Nb(a,a,f);else for(;c!==null;){if(c.tag===3){Nb(c,a,f);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(yi===null||!yi.has(m))){a=Ia(f,a),a=eb(c,a,1),c=gi(c,a,1),a=An(),c!==null&&(lo(c,1,a),Un(c,a));break}}c=c.return}}function YN(a,c,f){var m=a.pingCache;m!==null&&m.delete(c),c=An(),a.pingedLanes|=a.suspendedLanes&f,nn===a&&(cn&f)===f&&(Kt===4||Kt===3&&(cn&130023424)===cn&&500>gt()-sg?_o(a,0):rg|=f),Un(a,c)}function jb(a,c){c===0&&(a.mode&1?(c=ii,ii<<=1,!(ii&130023424)&&(ii=4194304)):c=1);var f=An();a=Ss(a,c),a!==null&&(lo(a,c,f),Un(a,f))}function XN(a){var c=a.memoizedState,f=0;c!==null&&(f=c.retryLane),jb(a,f)}function ZN(a,c){var f=0;switch(a.tag){case 13:var m=a.stateNode,v=a.memoizedState;v!==null&&(f=v.retryLane);break;case 19:m=a.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(c),jb(a,f)}var Db;Db=function(a,c,f){if(a!==null)if(a.memoizedProps!==c.pendingProps||jn.current)Fn=!0;else{if(!(a.lanes&f)&&!(c.flags&128))return Fn=!1,FN(a,c,f);Fn=!!(a.flags&131072)}else Fn=!1,St&&c.flags&1048576&&gx(c,Vd,c.index);switch(c.lanes=0,c.tag){case 2:var m=c.type;ef(a,c),a=c.pendingProps;var v=Ea(c,gn.current);Ra(c,f),v=Nm(null,c,m,a,v,f);var b=jm();return c.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Dn(m)?(b=!0,jd(c)):b=!1,c.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Pm(c),v.updater=Qd,c.stateNode=v,v._reactInternals=c,zm(c,m,a,f),c=Hm(null,c,m,!0,b,f)):(c.tag=0,St&&b&&ym(c),Sn(null,c,v,f),c=c.child),c;case 16:m=c.elementType;e:{switch(ef(a,c),a=c.pendingProps,v=m._init,m=v(m._payload),c.type=m,v=c.tag=JN(m),a=Rr(m,a),v){case 0:c=Wm(null,c,m,a,f);break e;case 1:c=cb(null,c,m,a,f);break e;case 11:c=sb(null,c,m,a,f);break e;case 14:c=ib(null,c,m,Rr(m.type,a),f);break e}throw Error(n(306,m,""))}return c;case 0:return m=c.type,v=c.pendingProps,v=c.elementType===m?v:Rr(m,v),Wm(a,c,m,v,f);case 1:return m=c.type,v=c.pendingProps,v=c.elementType===m?v:Rr(m,v),cb(a,c,m,v,f);case 3:e:{if(ub(c),a===null)throw Error(n(387));m=c.pendingProps,b=c.memoizedState,v=b.element,Sx(a,c),Wd(c,m,null,f);var P=c.memoizedState;if(m=P.element,b.isDehydrated)if(b={element:m,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},c.updateQueue.baseState=b,c.memoizedState=b,c.flags&256){v=Ia(Error(n(423)),c),c=db(a,c,m,f,v);break e}else if(m!==v){v=Ia(Error(n(424)),c),c=db(a,c,m,f,v);break e}else for(Yn=di(c.stateNode.containerInfo.firstChild),Kn=c,St=!0,Pr=null,f=Ex(c,null,m,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Aa(),m===v){c=Cs(a,c,f);break e}Sn(a,c,m,f)}c=c.child}return c;case 5:return Px(c),a===null&&xm(c),m=c.type,v=c.pendingProps,b=a!==null?a.memoizedProps:null,P=v.children,fm(m,v)?P=null:b!==null&&fm(m,b)&&(c.flags|=32),lb(a,c),Sn(a,c,P,f),c.child;case 6:return a===null&&xm(c),null;case 13:return fb(a,c,f);case 4:return Rm(c,c.stateNode.containerInfo),m=c.pendingProps,a===null?c.child=Ca(c,null,m,f):Sn(a,c,m,f),c.child;case 11:return m=c.type,v=c.pendingProps,v=c.elementType===m?v:Rr(m,v),sb(a,c,m,v,f);case 7:return Sn(a,c,c.pendingProps,f),c.child;case 8:return Sn(a,c,c.pendingProps.children,f),c.child;case 12:return Sn(a,c,c.pendingProps.children,f),c.child;case 10:e:{if(m=c.type._context,v=c.pendingProps,b=c.memoizedProps,P=v.value,vt(zd,m._currentValue),m._currentValue=P,b!==null)if(Cr(b.value,P)){if(b.children===v.children&&!jn.current){c=Cs(a,c,f);break e}}else for(b=c.child,b!==null&&(b.return=c);b!==null;){var L=b.dependencies;if(L!==null){P=b.child;for(var F=L.firstContext;F!==null;){if(F.context===m){if(b.tag===1){F=As(-1,f&-f),F.tag=2;var Y=b.updateQueue;if(Y!==null){Y=Y.shared;var ae=Y.pending;ae===null?F.next=F:(F.next=ae.next,ae.next=F),Y.pending=F}}b.lanes|=f,F=b.alternate,F!==null&&(F.lanes|=f),Am(b.return,f,c),L.lanes|=f;break}F=F.next}}else if(b.tag===10)P=b.type===c.type?null:b.child;else if(b.tag===18){if(P=b.return,P===null)throw Error(n(341));P.lanes|=f,L=P.alternate,L!==null&&(L.lanes|=f),Am(P,f,c),P=b.sibling}else P=b.child;if(P!==null)P.return=b;else for(P=b;P!==null;){if(P===c){P=null;break}if(b=P.sibling,b!==null){b.return=P.return,P=b;break}P=P.return}b=P}Sn(a,c,v.children,f),c=c.child}return c;case 9:return v=c.type,m=c.pendingProps.children,Ra(c,f),v=pr(v),m=m(v),c.flags|=1,Sn(a,c,m,f),c.child;case 14:return m=c.type,v=Rr(m,c.pendingProps),v=Rr(m.type,v),ib(a,c,m,v,f);case 15:return ob(a,c,c.type,c.pendingProps,f);case 17:return m=c.type,v=c.pendingProps,v=c.elementType===m?v:Rr(m,v),ef(a,c),c.tag=1,Dn(m)?(a=!0,jd(c)):a=!1,Ra(c,f),Zx(c,m,v),zm(c,m,v,f),Hm(null,c,m,!0,a,f);case 19:return pb(a,c,f);case 22:return ab(a,c,f)}throw Error(n(156,c.tag))};function Fb(a,c){return oo(a,c)}function QN(a,c,f,m){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(a,c,f,m){return new QN(a,c,f,m)}function fg(a){return a=a.prototype,!(!a||!a.isReactComponent)}function JN(a){if(typeof a=="function")return fg(a)?1:0;if(a!=null){if(a=a.$$typeof,a===Q)return 11;if(a===ge)return 14}return 2}function bi(a,c){var f=a.alternate;return f===null?(f=vr(a.tag,c,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=c,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&14680064,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,c=a.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f}function ff(a,c,f,m,v,b){var P=2;if(m=a,typeof a=="function")fg(a)&&(P=1);else if(typeof a=="string")P=5;else e:switch(a){case z:return xo(f.children,v,b,c);case B:P=8,v|=8;break;case $:return a=vr(12,f,c,v|2),a.elementType=$,a.lanes=b,a;case se:return a=vr(13,f,c,v),a.elementType=se,a.lanes=b,a;case re:return a=vr(19,f,c,v),a.elementType=re,a.lanes=b,a;case pe:return hf(f,v,b,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case G:P=10;break e;case te:P=9;break e;case Q:P=11;break e;case ge:P=14;break e;case ue:P=16,m=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return c=vr(P,f,c,v),c.elementType=a,c.type=m,c.lanes=b,c}function xo(a,c,f,m){return a=vr(7,a,m,c),a.lanes=f,a}function hf(a,c,f,m){return a=vr(22,a,m,c),a.elementType=pe,a.lanes=f,a.stateNode={isHidden:!1},a}function hg(a,c,f){return a=vr(6,a,null,c),a.lanes=f,a}function pg(a,c,f){return c=vr(4,a.children!==null?a.children:[],a.key,c),c.lanes=f,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function ej(a,c,f,m,v){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ha(0),this.expirationTimes=ha(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ha(0),this.identifierPrefix=m,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function mg(a,c,f,m,v,b,P,L,F){return a=new ej(a,c,f,L,F),c===1?(c=1,b===!0&&(c|=8)):c=0,b=vr(3,null,null,c),a.current=b,b.stateNode=a,b.memoizedState={element:m,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pm(b),a}function tj(a,c,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:m==null?null:""+m,children:a,containerInfo:c,implementation:f}}function Vb(a){if(!a)return hi;a=a._reactInternals;e:{if(Gr(a)!==a||a.tag!==1)throw Error(n(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Dn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(a.tag===1){var f=a.type;if(Dn(f))return hx(a,f,c)}return c}function Ub(a,c,f,m,v,b,P,L,F){return a=mg(f,m,!0,a,v,b,P,L,F),a.context=Vb(null),f=a.current,m=An(),v=wi(f),b=As(m,v),b.callback=c??null,gi(f,b,v),a.current.lanes=v,lo(a,v,m),Un(a,m),a}function pf(a,c,f,m){var v=c.current,b=An(),P=wi(v);return f=Vb(f),c.context===null?c.context=f:c.pendingContext=f,c=As(b,P),c.payload={element:a},m=m===void 0?null:m,m!==null&&(c.callback=m),a=gi(v,c,P),a!==null&&(Or(a,v,P,b),Gd(a,v,P)),P}function mf(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Bb(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<c?f:c}}function gg(a,c){Bb(a,c),(a=a.alternate)&&Bb(a,c)}function nj(){return null}var zb=typeof reportError=="function"?reportError:function(a){console.error(a)};function vg(a){this._internalRoot=a}gf.prototype.render=vg.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(n(409));pf(a,c,null,null)},gf.prototype.unmount=vg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;yo(function(){pf(null,a,null,null)}),c[xs]=null}};function gf(a){this._internalRoot=a}gf.prototype.unstable_scheduleHydration=function(a){if(a){var c=Ze();a={blockedOn:null,target:a,priority:c};for(var f=0;f<li.length&&c!==0&&c<li[f].priority;f++);li.splice(f,0,a),f===0&&Pw(a)}};function yg(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function vf(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function $b(){}function rj(a,c,f,m,v){if(v){if(typeof m=="function"){var b=m;m=function(){var Y=mf(P);b.call(Y)}}var P=Ub(c,m,a,0,null,!1,!1,"",$b);return a._reactRootContainer=P,a[xs]=P.current,mc(a.nodeType===8?a.parentNode:a),yo(),P}for(;v=a.lastChild;)a.removeChild(v);if(typeof m=="function"){var L=m;m=function(){var Y=mf(F);L.call(Y)}}var F=mg(a,0,!1,null,null,!1,!1,"",$b);return a._reactRootContainer=F,a[xs]=F.current,mc(a.nodeType===8?a.parentNode:a),yo(function(){pf(c,F,f,m)}),F}function yf(a,c,f,m,v){var b=f._reactRootContainer;if(b){var P=b;if(typeof v=="function"){var L=v;v=function(){var F=mf(P);L.call(F)}}pf(c,P,a,v)}else P=rj(f,c,a,v,m);return mf(P)}K=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var f=_s(c.pendingLanes);f!==0&&(k(c,f|1),Un(c,gt()),!(it&6)&&(La=gt()+500,pi()))}break;case 13:yo(function(){var m=Ss(a,1);if(m!==null){var v=An();Or(m,a,1,v)}}),gg(a,1)}},oe=function(a){if(a.tag===13){var c=Ss(a,134217728);if(c!==null){var f=An();Or(c,a,134217728,f)}gg(a,134217728)}},xe=function(a){if(a.tag===13){var c=wi(a),f=Ss(a,c);if(f!==null){var m=An();Or(f,a,c,m)}gg(a,c)}},Ze=function(){return I},Nt=function(a,c){var f=I;try{return I=a,c()}finally{I=f}},Zl=function(a,c,f){switch(c){case"input":if(Gt(a,f),c=f.name,f.type==="radio"&&c!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<f.length;c++){var m=f[c];if(m!==a&&m.form===a.form){var v=Ld(m);if(!v)throw Error(n(90));Xe(m),Gt(m,v)}}}break;case"textarea":me(a,f);break;case"select":c=f.value,c!=null&&W(a,!!f.multiple,c,!1)}},md=cg,Ql=yo;var sj={usingClientEntryPoint:!1,Events:[yc,xa,Ld,hd,pd,cg]},Oc={findFiberByHostInstance:co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ij={bundleType:Oc.bundleType,version:Oc.version,rendererPackageName:Oc.rendererPackageName,rendererConfig:Oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=ni(a),a===null?null:a.stateNode},findFiberByHostInstance:Oc.findFiberByHostInstance||nj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_f.isDisabled&&_f.supportsFiber)try{Nn=_f.inject(ij),Wn=_f}catch{}}return Bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sj,Bn.createPortal=function(a,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yg(c))throw Error(n(200));return tj(a,c,null,f)},Bn.createRoot=function(a,c){if(!yg(a))throw Error(n(299));var f=!1,m="",v=zb;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onRecoverableError!==void 0&&(v=c.onRecoverableError)),c=mg(a,1,!1,null,null,f,!1,m,v),a[xs]=c.current,mc(a.nodeType===8?a.parentNode:a),new vg(c)},Bn.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=ni(c),a=a===null?null:a.stateNode,a},Bn.flushSync=function(a){return yo(a)},Bn.hydrate=function(a,c,f){if(!vf(c))throw Error(n(200));return yf(null,a,c,!0,f)},Bn.hydrateRoot=function(a,c,f){if(!yg(a))throw Error(n(405));var m=f!=null&&f.hydratedSources||null,v=!1,b="",P=zb;if(f!=null&&(f.unstable_strictMode===!0&&(v=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onRecoverableError!==void 0&&(P=f.onRecoverableError)),c=Ub(c,null,a,1,f??null,v,!1,b,P),a[xs]=c.current,mc(a),m)for(a=0;a<m.length;a++)f=m[a],v=f._getVersion,v=v(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,v]:c.mutableSourceEagerHydrationData.push(f,v);return new gf(c)},Bn.render=function(a,c,f){if(!vf(c))throw Error(n(200));return yf(null,a,c,!1,f)},Bn.unmountComponentAtNode=function(a){if(!vf(a))throw Error(n(40));return a._reactRootContainer?(yo(function(){yf(null,null,a,!1,function(){a._reactRootContainer=null,a[xs]=null})}),!0):!1},Bn.unstable_batchedUpdates=cg,Bn.unstable_renderSubtreeIntoContainer=function(a,c,f,m){if(!vf(f))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return yf(a,c,f,!1,m)},Bn.version="18.3.1-next-f1338f8080-20240426",Bn}var Zb;function aC(){if(Zb)return xg.exports;Zb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),xg.exports=hj(),xg.exports}var Qb;function pj(){if(Qb)return wf;Qb=1;var t=aC();return wf.createRoot=t.createRoot,wf.hydrateRoot=t.hydrateRoot,wf}var mj=pj(),Yo=aC();const gj=Xh(Yo);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wu(){return wu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wu.apply(this,arguments)}var Vi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Vi||(Vi={}));const Jb="popstate";function vj(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Dv("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:cC(s)}return _j(e,n,null,t)}function Zt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lC(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yj(){return Math.random().toString(36).substr(2,8)}function eE(t,e){return{usr:t.state,key:t.key,idx:e}}function Dv(t,e,n,r){return n===void 0&&(n=null),wu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Vl(e):e,{state:n,key:e&&e.key||r||yj()})}function cC(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Vl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function _j(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Vi.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(wu({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function p(){l=Vi.Pop;let E=h(),A=E==null?null:E-d;d=E,u&&u({action:l,location:x.location,delta:A})}function g(E,A){l=Vi.Push;let S=Dv(x.location,E,A);d=h()+1;let C=eE(S,d),O=x.createHref(S);try{o.pushState(C,"",O)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(O)}i&&u&&u({action:l,location:x.location,delta:1})}function y(E,A){l=Vi.Replace;let S=Dv(x.location,E,A);d=h();let C=eE(S,d),O=x.createHref(S);o.replaceState(C,"",O),i&&u&&u({action:l,location:x.location,delta:0})}function T(E){let A=s.location.origin!=="null"?s.location.origin:s.location.href,S=typeof E=="string"?E:cC(E);return S=S.replace(/ $/,"%20"),Zt(A,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,A)}let x={get action(){return l},get location(){return t(s,o)},listen(E){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Jb,p),u=E,()=>{s.removeEventListener(Jb,p),u=null}},createHref(E){return e(s,E)},createURL:T,encodeLocation(E){let A=T(E);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:g,replace:y,go(E){return o.go(E)}};return x}var tE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(tE||(tE={}));function wj(t,e,n){return n===void 0&&(n="/"),xj(t,e,n)}function xj(t,e,n,r){let s=typeof e=="string"?Vl(e):e,i=fC(s.pathname||"/",n);if(i==null)return null;let o=uC(t);bj(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=Lj(i);l=Ij(o[u],d)}return l}function uC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Zt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=jo([r,u.relativePath]),h=n.concat(u);i.children&&i.children.length>0&&(Zt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),uC(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:Rj(d,i.index),routesMeta:h})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of dC(i.path))s(i,o,u)}),e}function dC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=dC(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function bj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kj(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Ej=/^:[\w-]+$/,Tj=3,Sj=2,Aj=1,Cj=10,Pj=-2,nE=t=>t==="*";function Rj(t,e){let n=t.split("/"),r=n.length;return n.some(nE)&&(r+=Pj),e&&(r+=Sj),n.filter(s=>!nE(s)).reduce((s,i)=>s+(Ej.test(i)?Tj:i===""?Aj:Cj),r)}function kj(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Ij(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",p=Oj({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),g=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:jo([i,p.pathname]),pathnameBase:Uj(jo([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=jo([i,p.pathnameBase]))}return o}function Oj(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Mj(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,h,p)=>{let{paramName:g,isOptional:y}=h;if(g==="*"){let x=l[p]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const T=l[p];return y&&!T?d[g]=void 0:d[g]=(T||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function Mj(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),lC(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Lj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lC(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function fC(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Nj(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Vl(t):t;return{pathname:n?n.startsWith("/")?n:jj(n,e):e,search:Bj(r),hash:zj(s)}}function jj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Tg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Dj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Fj(t,e){let n=Dj(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Vj(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Vl(t):(s=wu({},t),Zt(!s.pathname||!s.pathname.includes("?"),Tg("?","pathname","search",s)),Zt(!s.pathname||!s.pathname.includes("#"),Tg("#","pathname","hash",s)),Zt(!s.search||!s.search.includes("#"),Tg("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}l=p>=0?e[p]:"/"}let u=Nj(s,l),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const jo=t=>t.join("/").replace(/\/\/+/g,"/"),Uj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Bj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $j(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const hC=["post","put","patch","delete"];new Set(hC);const Gj=["get",...hC];new Set(Gj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xu(){return xu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xu.apply(this,arguments)}const p0=_.createContext(null),Wj=_.createContext(null),Qh=_.createContext(null),Jh=_.createContext(null),Xo=_.createContext({outlet:null,matches:[],isDataRoute:!1}),pC=_.createContext(null);function ep(){return _.useContext(Jh)!=null}function m0(){return ep()||Zt(!1),_.useContext(Jh).location}function mC(t){_.useContext(Qh).static||_.useLayoutEffect(t)}function Gu(){let{isDataRoute:t}=_.useContext(Xo);return t?i3():Hj()}function Hj(){ep()||Zt(!1);let t=_.useContext(p0),{basename:e,future:n,navigator:r}=_.useContext(Qh),{matches:s}=_.useContext(Xo),{pathname:i}=m0(),o=JSON.stringify(Fj(s,n.v7_relativeSplatPath)),l=_.useRef(!1);return mC(()=>{l.current=!0}),_.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=Vj(d,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:jo([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,o,i,t])}function qj(){let{matches:t}=_.useContext(Xo),e=t[t.length-1];return e?e.params:{}}function Kj(t,e){return Yj(t,e)}function Yj(t,e,n,r){ep()||Zt(!1);let{navigator:s}=_.useContext(Qh),{matches:i}=_.useContext(Xo),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=m0(),h;if(e){var p;let E=typeof e=="string"?Vl(e):e;u==="/"||(p=E.pathname)!=null&&p.startsWith(u)||Zt(!1),h=E}else h=d;let g=h.pathname||"/",y=g;if(u!=="/"){let E=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(E.length).join("/")}let T=wj(t,{pathname:y}),x=e3(T&&T.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:jo([u,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?u:jo([u,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,n,r);return e&&x?_.createElement(Jh.Provider,{value:{location:xu({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Vi.Pop}},x):x}function Xj(){let t=s3(),e=$j(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:s},n):null,null)}const Zj=_.createElement(Xj,null);class Qj extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(Xo.Provider,{value:this.props.routeContext},_.createElement(pC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Jj(t){let{routeContext:e,match:n,children:r}=t,s=_.useContext(p0);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(Xo.Provider,{value:e},r)}function e3(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);h>=0||Zt(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:g,errors:y}=n,T=p.route.loader&&g[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||T){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,p,g)=>{let y,T=!1,x=null,E=null;n&&(y=l&&p.route.id?l[p.route.id]:void 0,x=p.route.errorElement||Zj,u&&(d<0&&g===0?(o3("route-fallback"),T=!0,E=null):d===g&&(T=!0,E=p.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,g+1)),S=()=>{let C;return y?C=x:T?C=E:p.route.Component?C=_.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=h,_.createElement(Jj,{match:p,routeContext:{outlet:h,matches:A,isDataRoute:n!=null},children:C})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?_.createElement(Qj,{location:n.location,revalidation:n.revalidation,component:x,error:y,children:S(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):S()},null)}var gC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(gC||{}),vC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(vC||{});function t3(t){let e=_.useContext(p0);return e||Zt(!1),e}function n3(t){let e=_.useContext(Wj);return e||Zt(!1),e}function r3(t){let e=_.useContext(Xo);return e||Zt(!1),e}function yC(t){let e=r3(),n=e.matches[e.matches.length-1];return n.route.id||Zt(!1),n.route.id}function s3(){var t;let e=_.useContext(pC),n=n3(),r=yC();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function i3(){let{router:t}=t3(gC.UseNavigateStable),e=yC(vC.UseNavigateStable),n=_.useRef(!1);return mC(()=>{n.current=!0}),_.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,xu({fromRouteId:e},i)))},[t,e])}const rE={};function o3(t,e,n){rE[t]||(rE[t]=!0)}function a3(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function qf(t){Zt(!1)}function l3(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Vi.Pop,navigator:i,static:o=!1,future:l}=t;ep()&&Zt(!1);let u=e.replace(/^\/*/,"/"),d=_.useMemo(()=>({basename:u,navigator:i,static:o,future:xu({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=Vl(r));let{pathname:h="/",search:p="",hash:g="",state:y=null,key:T="default"}=r,x=_.useMemo(()=>{let E=fC(h,u);return E==null?null:{location:{pathname:E,search:p,hash:g,state:y,key:T},navigationType:s}},[u,h,p,g,y,T,s]);return x==null?null:_.createElement(Qh.Provider,{value:d},_.createElement(Jh.Provider,{children:n,value:x}))}function c3(t){let{children:e,location:n}=t;return Kj(Fv(e),n)}new Promise(()=>{});function Fv(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,s)=>{if(!_.isValidElement(r))return;let i=[...e,s];if(r.type===_.Fragment){n.push.apply(n,Fv(r.props.children,i));return}r.type!==qf&&Zt(!1),!r.props.index||!r.props.children||Zt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Fv(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const u3="6";try{window.__reactRouterVersion=u3}catch{}const d3="startTransition",sE=h0[d3];function f3(t){let{basename:e,children:n,future:r,window:s}=t,i=_.useRef();i.current==null&&(i.current=vj({window:s,v5Compat:!0}));let o=i.current,[l,u]=_.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=_.useCallback(p=>{d&&sE?sE(()=>u(p)):u(p)},[u,d]);return _.useLayoutEffect(()=>o.listen(h),[o,h]),_.useEffect(()=>a3(r),[r]),_.createElement(l3,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var iE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(iE||(iE={}));var oE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(oE||(oE={}));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_C=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var p3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},u)=>_.createElement("svg",{ref:u,...p3,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:_C("lucide",s),...l},[...o.map(([d,h])=>_.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(t,e)=>{const n=_.forwardRef(({className:r,...s},i)=>_.createElement(m3,{ref:i,iconNode:e,className:_C(`lucide-${h3(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=ot("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=ot("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=ot("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=ot("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=ot("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=ot("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=ot("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=ot("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=ot("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=ot("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=ot("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=ot("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=ot("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=ot("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=ot("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=ot("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=ot("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=ot("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=ot("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=ot("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=ot("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=ot("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=ot("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=ot("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=ot("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=ot("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=ot("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=ot("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=ot("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=ot("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=ot("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=ot("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=ot("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),x0=_.createContext({});function b0(t){const e=_.useRef(null);return e.current===null&&(e.current=t()),e.current}const tp=_.createContext(null),E0=_.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class N3 extends _.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function j3({children:t,isPresent:e}){const n=_.useId(),r=_.useRef(null),s=_.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=_.useContext(E0);return _.useInsertionEffect(()=>{const{width:o,height:l,top:u,left:d}=s.current;if(e||!r.current||!o||!l)return;r.current.dataset.motionPopId=n;const h=document.createElement("style");return i&&(h.nonce=i),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${u}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),w.jsx(N3,{isPresent:e,childRef:r,sizeRef:s,children:_.cloneElement(t,{ref:r})})}const D3=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const l=b0(F3),u=_.useId(),d=_.useCallback(p=>{l.set(p,!0);for(const g of l.values())if(!g)return;r&&r()},[l,r]),h=_.useMemo(()=>({id:u,initial:e,isPresent:n,custom:s,onExitComplete:d,register:p=>(l.set(p,!1),()=>l.delete(p))}),i?[Math.random(),d]:[n,d]);return _.useMemo(()=>{l.forEach((p,g)=>l.set(g,!1))},[n]),_.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o==="popLayout"&&(t=w.jsx(j3,{isPresent:n,children:t})),w.jsx(tp.Provider,{value:h,children:t})};function F3(){return new Map}function CC(t=!0){const e=_.useContext(tp);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=_.useId();_.useEffect(()=>{t&&s(i)},[t]);const o=_.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const xf=t=>t.key||"";function aE(t){const e=[];return _.Children.forEach(t,n=>{_.isValidElement(n)&&e.push(n)}),e}const T0=typeof window<"u",PC=T0?_.useLayoutEffect:_.useEffect,V3=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1})=>{const[l,u]=CC(o),d=_.useMemo(()=>aE(t),[t]),h=o&&!l?[]:d.map(xf),p=_.useRef(!0),g=_.useRef(d),y=b0(()=>new Map),[T,x]=_.useState(d),[E,A]=_.useState(d);PC(()=>{p.current=!1,g.current=d;for(let O=0;O<E.length;O++){const M=xf(E[O]);h.includes(M)?y.delete(M):y.get(M)!==!0&&y.set(M,!1)}},[E,h.length,h.join("-")]);const S=[];if(d!==T){let O=[...d];for(let M=0;M<E.length;M++){const D=E[M],z=xf(D);h.includes(z)||(O.splice(M,0,D),S.push(D))}i==="wait"&&S.length&&(O=S),A(aE(O)),x(d);return}const{forceRender:C}=_.useContext(x0);return w.jsx(w.Fragment,{children:E.map(O=>{const M=xf(O),D=o&&!l?!1:d===E||h.includes(M),z=()=>{if(y.has(M))y.set(M,!0);else return;let B=!0;y.forEach($=>{$||(B=!1)}),B&&(C==null||C(),A(g.current),o&&(u==null||u()),r&&r())};return w.jsx(D3,{isPresent:D,initial:!p.current||n?void 0:!1,custom:D?void 0:e,presenceAffectsLayout:s,mode:i,onExitComplete:D?void 0:z,children:O},M)})})},or=t=>t;let RC=or;function S0(t){let e;return()=>(e===void 0&&(e=t()),e)}const yl=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Ns=t=>t*1e3,js=t=>t/1e3,U3={useManualTiming:!1};function B3(t){let e=new Set,n=new Set,r=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){i.has(d)&&(u.schedule(d),t()),d(o)}const u={schedule:(d,h=!1,p=!1)=>{const y=p&&r?e:n;return h&&i.add(d),y.has(d)||y.add(d),d},cancel:d=>{n.delete(d),i.delete(d)},process:d=>{if(o=d,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(l),e.clear(),r=!1,s&&(s=!1,u.process(d))}};return u}const bf=["read","resolveKeyframes","update","preRender","render","postRender"],z3=40;function kC(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=bf.reduce((A,S)=>(A[S]=B3(i),A),{}),{read:l,resolveKeyframes:u,update:d,preRender:h,render:p,postRender:g}=o,y=()=>{const A=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(A-s.timestamp,z3),1),s.timestamp=A,s.isProcessing=!0,l.process(s),u.process(s),d.process(s),h.process(s),p.process(s),g.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(y))},T=()=>{n=!0,r=!0,s.isProcessing||t(y)};return{schedule:bf.reduce((A,S)=>{const C=o[S];return A[S]=(O,M=!1,D=!1)=>(n||T(),C.schedule(O,M,D)),A},{}),cancel:A=>{for(let S=0;S<bf.length;S++)o[bf[S]].cancel(A)},state:s,steps:o}}const{schedule:Tt,cancel:Wi,state:fn,steps:Sg}=kC(typeof requestAnimationFrame<"u"?requestAnimationFrame:or,!0),IC=_.createContext({strict:!1}),lE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_l={};for(const t in lE)_l[t]={isEnabled:e=>lE[t].some(n=>!!e[n])};function $3(t){for(const e in t)_l[e]={..._l[e],...t[e]}}const G3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ch(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||G3.has(t)}let OC=t=>!ch(t);function W3(t){t&&(OC=e=>e.startsWith("on")?!ch(e):t(e))}try{W3(require("@emotion/is-prop-valid").default)}catch{}function H3(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(OC(s)||n===!0&&ch(s)||!e&&!ch(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function q3(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const np=_.createContext({});function bu(t){return typeof t=="string"||Array.isArray(t)}function rp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const A0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],C0=["initial",...A0];function sp(t){return rp(t.animate)||C0.some(e=>bu(t[e]))}function MC(t){return!!(sp(t)||t.variants)}function K3(t,e){if(sp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||bu(n)?n:void 0,animate:bu(r)?r:void 0}}return t.inherit!==!1?e:{}}function Y3(t){const{initial:e,animate:n}=K3(t,_.useContext(np));return _.useMemo(()=>({initial:e,animate:n}),[cE(e),cE(n)])}function cE(t){return Array.isArray(t)?t.join(" "):t}const X3=Symbol.for("motionComponentSymbol");function sl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Z3(t,e,n){return _.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):sl(n)&&(n.current=r))},[e])}const P0=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Q3="framerAppearId",LC="data-"+P0(Q3),{schedule:R0}=kC(queueMicrotask,!1),NC=_.createContext({});function J3(t,e,n,r,s){var i,o;const{visualElement:l}=_.useContext(np),u=_.useContext(IC),d=_.useContext(tp),h=_.useContext(E0).reducedMotion,p=_.useRef(null);r=r||u.renderer,!p.current&&r&&(p.current=r(t,{visualState:e,parent:l,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const g=p.current,y=_.useContext(NC);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&eD(p.current,n,s,y);const T=_.useRef(!1);_.useInsertionEffect(()=>{g&&T.current&&g.update(n,d)});const x=n[LC],E=_.useRef(!!x&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,x))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,x)));return PC(()=>{g&&(T.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),R0.render(g.render),E.current&&g.animationState&&g.animationState.animateChanges())}),_.useEffect(()=>{g&&(!E.current&&g.animationState&&g.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var A;(A=window.MotionHandoffMarkAsComplete)===null||A===void 0||A.call(window,x)}),E.current=!1))}),g}function eD(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:jC(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||l&&sl(l),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:d})}function jC(t){if(t)return t.options.allowProjection!==!1?t.projection:jC(t.parent)}function tD({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var i,o;t&&$3(t);function l(d,h){let p;const g={..._.useContext(E0),...d,layoutId:nD(d)},{isStatic:y}=g,T=Y3(d),x=r(d,y);if(!y&&T0){rD();const E=sD(g);p=E.MeasureLayout,T.visualElement=J3(s,x,g,e,E.ProjectionNode)}return w.jsxs(np.Provider,{value:T,children:[p&&T.visualElement?w.jsx(p,{visualElement:T.visualElement,...g}):null,n(s,d,Z3(x,T.visualElement,h),x,y,T.visualElement)]})}l.displayName=`motion.${typeof s=="string"?s:`create(${(o=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&o!==void 0?o:""})`}`;const u=_.forwardRef(l);return u[X3]=s,u}function nD({layoutId:t}){const e=_.useContext(x0).id;return e&&t!==void 0?e+"-"+t:t}function rD(t,e){_.useContext(IC).strict}function sD(t){const{drag:e,layout:n}=_l;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const iD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function k0(t){return typeof t!="string"||t.includes("-")?!1:!!(iD.indexOf(t)>-1||/[A-Z]/u.test(t))}function uE(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function I0(t,e,n,r){if(typeof e=="function"){const[s,i]=uE(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=uE(r);e=e(n!==void 0?n:t.custom,s,i)}return e}const Uv=t=>Array.isArray(t),oD=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),aD=t=>Uv(t)?t[t.length-1]||0:t,En=t=>!!(t&&t.getVelocity);function Yf(t){const e=En(t)?t.get():t;return oD(e)?e.toValue():e}function lD({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,i){const o={latestValues:cD(r,s,i,t),renderState:e()};return n&&(o.onMount=l=>n({props:r,current:l,...o}),o.onUpdate=l=>n(l)),o}const DC=t=>(e,n)=>{const r=_.useContext(np),s=_.useContext(tp),i=()=>lD(t,e,r,s);return n?i():b0(i)};function cD(t,e,n,r){const s={},i=r(t,{});for(const g in i)s[g]=Yf(i[g]);let{initial:o,animate:l}=t;const u=sp(t),d=MC(t);e&&d&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const p=h?l:o;if(p&&typeof p!="boolean"&&!rp(p)){const g=Array.isArray(p)?p:[p];for(let y=0;y<g.length;y++){const T=I0(t,g[y]);if(T){const{transitionEnd:x,transition:E,...A}=T;for(const S in A){let C=A[S];if(Array.isArray(C)){const O=h?C.length-1:0;C=C[O]}C!==null&&(s[S]=C)}for(const S in x)s[S]=x[S]}}}return s}const Ul=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zo=new Set(Ul),FC=t=>e=>typeof e=="string"&&e.startsWith(t),VC=FC("--"),uD=FC("var(--"),O0=t=>uD(t)?dD.test(t.split("/*")[0].trim()):!1,dD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,UC=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Fs=(t,e,n)=>n>e?e:n<t?t:n,Bl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Eu={...Bl,transform:t=>Fs(0,1,t)},Ef={...Bl,default:1},Wu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ii=Wu("deg"),os=Wu("%"),Be=Wu("px"),fD=Wu("vh"),hD=Wu("vw"),dE={...os,parse:t=>os.parse(t)/100,transform:t=>os.transform(t*100)},pD={borderWidth:Be,borderTopWidth:Be,borderRightWidth:Be,borderBottomWidth:Be,borderLeftWidth:Be,borderRadius:Be,radius:Be,borderTopLeftRadius:Be,borderTopRightRadius:Be,borderBottomRightRadius:Be,borderBottomLeftRadius:Be,width:Be,maxWidth:Be,height:Be,maxHeight:Be,top:Be,right:Be,bottom:Be,left:Be,padding:Be,paddingTop:Be,paddingRight:Be,paddingBottom:Be,paddingLeft:Be,margin:Be,marginTop:Be,marginRight:Be,marginBottom:Be,marginLeft:Be,backgroundPositionX:Be,backgroundPositionY:Be},mD={rotate:Ii,rotateX:Ii,rotateY:Ii,rotateZ:Ii,scale:Ef,scaleX:Ef,scaleY:Ef,scaleZ:Ef,skew:Ii,skewX:Ii,skewY:Ii,distance:Be,translateX:Be,translateY:Be,translateZ:Be,x:Be,y:Be,z:Be,perspective:Be,transformPerspective:Be,opacity:Eu,originX:dE,originY:dE,originZ:Be},fE={...Bl,transform:Math.round},M0={...pD,...mD,zIndex:fE,size:Be,fillOpacity:Eu,strokeOpacity:Eu,numOctaves:fE},gD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},vD=Ul.length;function yD(t,e,n){let r="",s=!0;for(let i=0;i<vD;i++){const o=Ul[i],l=t[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=UC(l,M0[o]);if(!u){s=!1;const h=gD[o]||o;r+=`${h}(${d}) `}n&&(e[o]=d)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function L0(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,l=!1;for(const u in e){const d=e[u];if(Zo.has(u)){o=!0;continue}else if(VC(u)){s[u]=d;continue}else{const h=UC(d,M0[u]);u.startsWith("origin")?(l=!0,i[u]=h):r[u]=h}}if(e.transform||(o||n?r.transform=yD(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:h=0}=i;r.transformOrigin=`${u} ${d} ${h}`}}const _D={offset:"stroke-dashoffset",array:"stroke-dasharray"},wD={offset:"strokeDashoffset",array:"strokeDasharray"};function xD(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?_D:wD;t[i.offset]=Be.transform(-r);const o=Be.transform(e),l=Be.transform(n);t[i.array]=`${o} ${l}`}function hE(t,e,n){return typeof t=="string"?t:Be.transform(e+n*t)}function bD(t,e,n){const r=hE(e,t.x,t.width),s=hE(n,t.y,t.height);return`${r} ${s}`}function N0(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:u=0,...d},h,p){if(L0(t,d,p),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:y,dimensions:T}=t;g.transform&&(T&&(y.transform=g.transform),delete g.transform),T&&(s!==void 0||i!==void 0||y.transform)&&(y.transformOrigin=bD(T,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&xD(g,o,l,u,!1)}const j0=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),BC=()=>({...j0(),attrs:{}}),D0=t=>typeof t=="string"&&t.toLowerCase()==="svg";function zC(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const $C=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function GC(t,e,n,r){zC(t,e,void 0,r);for(const s in e.attrs)t.setAttribute($C.has(s)?s:P0(s),e.attrs[s])}const uh={};function ED(t){Object.assign(uh,t)}function WC(t,{layout:e,layoutId:n}){return Zo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!uh[t]||t==="opacity")}function F0(t,e,n){var r;const{style:s}=t,i={};for(const o in s)(En(s[o])||e.style&&En(e.style[o])||WC(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function HC(t,e,n){const r=F0(t,e,n);for(const s in t)if(En(t[s])||En(e[s])){const i=Ul.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}function TD(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const pE=["x","y","width","height","cx","cy","r"],SD={useVisualState:DC({scrapeMotionValuesFromProps:HC,createRenderState:BC,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let i=!!t.drag;if(!i){for(const l in s)if(Zo.has(l)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let l=0;l<pE.length;l++){const u=pE[l];t[u]!==e[u]&&(o=!0)}o&&Tt.read(()=>{TD(n,r),Tt.render(()=>{N0(r,s,D0(n.tagName),t.transformTemplate),GC(n,r)})})}})},AD={useVisualState:DC({scrapeMotionValuesFromProps:F0,createRenderState:j0})};function qC(t,e,n){for(const r in e)!En(e[r])&&!WC(r,n)&&(t[r]=e[r])}function CD({transformTemplate:t},e){return _.useMemo(()=>{const n=j0();return L0(n,e,t),Object.assign({},n.vars,n.style)},[e])}function PD(t,e){const n=t.style||{},r={};return qC(r,n,t),Object.assign(r,CD(t,e)),r}function RD(t,e){const n={},r=PD(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function kD(t,e,n,r){const s=_.useMemo(()=>{const i=BC();return N0(i,e,D0(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};qC(i,t.style,t),s.style={...i,...s.style}}return s}function ID(t=!1){return(n,r,s,{latestValues:i},o)=>{const u=(k0(n)?kD:RD)(r,i,o,n),d=H3(r,typeof n=="string",t),h=n!==_.Fragment?{...d,...u,ref:s}:{},{children:p}=r,g=_.useMemo(()=>En(p)?p.get():p,[p]);return _.createElement(n,{...h,children:g})}}function OD(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...k0(r)?SD:AD,preloadedFeatures:t,useRender:ID(s),createVisualElement:e,Component:r};return tD(o)}}function KC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function ip(t,e,n){const r=t.getProps();return I0(r,e,n!==void 0?n:r.custom,t)}const MD=S0(()=>window.ScrollTimeline!==void 0);class LD{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(MD()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class ND extends LD{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function V0(t,e){return t?t[e]||t.default||t:void 0}const Bv=2e4;function YC(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Bv;)e+=n,r=t.next(e);return e>=Bv?1/0:e}function U0(t){return typeof t=="function"}function mE(t,e){t.timeline=e,t.onfinish=null}const B0=t=>Array.isArray(t)&&typeof t[0]=="number",jD={linearEasing:void 0};function DD(t,e){const n=S0(t);return()=>{var r;return(r=jD[e])!==null&&r!==void 0?r:n()}}const dh=DD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),XC=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=t(yl(0,s-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function ZC(t){return!!(typeof t=="function"&&dh()||!t||typeof t=="string"&&(t in zv||dh())||B0(t)||Array.isArray(t)&&t.every(ZC))}const Yc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,zv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yc([0,.65,.55,1]),circOut:Yc([.55,0,1,.45]),backIn:Yc([.31,.01,.66,-.59]),backOut:Yc([.33,1.53,.69,.99])};function QC(t,e){if(t)return typeof t=="function"&&dh()?XC(t,e):B0(t)?Yc(t):Array.isArray(t)?t.map(n=>QC(n,e)||zv.easeOut):zv[t]}const Mr={x:!1,y:!1};function JC(){return Mr.x||Mr.y}function FD(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const i=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function eP(t,e){const n=FD(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function gE(t){return e=>{e.pointerType==="touch"||JC()||t(e)}}function VD(t,e,n={}){const[r,s,i]=eP(t,n),o=gE(l=>{const{target:u}=l,d=e(l);if(typeof d!="function"||!u)return;const h=gE(p=>{d(p),u.removeEventListener("pointerleave",h)});u.addEventListener("pointerleave",h,s)});return r.forEach(l=>{l.addEventListener("pointerenter",o,s)}),i}const tP=(t,e)=>e?t===e?!0:tP(t,e.parentElement):!1,z0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,UD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function BD(t){return UD.has(t.tagName)||t.tabIndex!==-1}const Xc=new WeakSet;function vE(t){return e=>{e.key==="Enter"&&t(e)}}function Ag(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const zD=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=vE(()=>{if(Xc.has(n))return;Ag(n,"down");const s=vE(()=>{Ag(n,"up")}),i=()=>Ag(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function yE(t){return z0(t)&&!JC()}function $D(t,e,n={}){const[r,s,i]=eP(t,n),o=l=>{const u=l.currentTarget;if(!yE(l)||Xc.has(u))return;Xc.add(u);const d=e(l),h=(y,T)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),!(!yE(y)||!Xc.has(u))&&(Xc.delete(u),typeof d=="function"&&d(y,{success:T}))},p=y=>{h(y,n.useGlobalTarget||tP(u,y.target))},g=y=>{h(y,!1)};window.addEventListener("pointerup",p,s),window.addEventListener("pointercancel",g,s)};return r.forEach(l=>{!BD(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),l.addEventListener("focus",d=>zD(d,s),s)}),i}function GD(t){return t==="x"||t==="y"?Mr[t]?null:(Mr[t]=!0,()=>{Mr[t]=!1}):Mr.x||Mr.y?null:(Mr.x=Mr.y=!0,()=>{Mr.x=Mr.y=!1})}const nP=new Set(["width","height","top","left","right","bottom",...Ul]);let Xf;function WD(){Xf=void 0}const as={now:()=>(Xf===void 0&&as.set(fn.isProcessing||U3.useManualTiming?fn.timestamp:performance.now()),Xf),set:t=>{Xf=t,queueMicrotask(WD)}};function $0(t,e){t.indexOf(e)===-1&&t.push(e)}function G0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class W0{constructor(){this.subscriptions=[]}add(e){return $0(this.subscriptions,e),()=>G0(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function rP(t,e){return e?t*(1e3/e):0}const _E=30,HD=t=>!isNaN(parseFloat(t));class qD{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=as.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=as.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=HD(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new W0);const r=this.events[e].add(n);return e==="change"?()=>{r(),Tt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=as.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>_E)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,_E);return rP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Tu(t,e){return new qD(t,e)}function KD(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Tu(n))}function YD(t,e){const n=ip(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const l=aD(i[o]);KD(t,o,l)}}function XD(t){return!!(En(t)&&t.add)}function $v(t,e){const n=t.getValue("willChange");if(XD(n))return n.add(e)}function sP(t){return t.props[LC]}const iP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ZD=1e-7,QD=12;function JD(t,e,n,r,s){let i,o,l=0;do o=e+(n-e)/2,i=iP(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>ZD&&++l<QD);return o}function Hu(t,e,n,r){if(t===e&&n===r)return or;const s=i=>JD(i,0,1,t,n);return i=>i===0||i===1?i:iP(s(i),e,r)}const oP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,aP=t=>e=>1-t(1-e),lP=Hu(.33,1.53,.69,.99),H0=aP(lP),cP=oP(H0),uP=t=>(t*=2)<1?.5*H0(t):.5*(2-Math.pow(2,-10*(t-1))),q0=t=>1-Math.sin(Math.acos(t)),dP=aP(q0),fP=oP(q0),hP=t=>/^0[^.\s]+$/u.test(t);function eF(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||hP(t):!0}const ou=t=>Math.round(t*1e5)/1e5,K0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function tF(t){return t==null}const nF=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Y0=(t,e)=>n=>!!(typeof n=="string"&&nF.test(n)&&n.startsWith(t)||e&&!tF(n)&&Object.prototype.hasOwnProperty.call(n,e)),pP=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,l]=r.match(K0);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},rF=t=>Fs(0,255,t),Cg={...Bl,transform:t=>Math.round(rF(t))},Mo={test:Y0("rgb","red"),parse:pP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Cg.transform(t)+", "+Cg.transform(e)+", "+Cg.transform(n)+", "+ou(Eu.transform(r))+")"};function sF(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Gv={test:Y0("#"),parse:sF,transform:Mo.transform},il={test:Y0("hsl","hue"),parse:pP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+os.transform(ou(e))+", "+os.transform(ou(n))+", "+ou(Eu.transform(r))+")"},xn={test:t=>Mo.test(t)||Gv.test(t)||il.test(t),parse:t=>Mo.test(t)?Mo.parse(t):il.test(t)?il.parse(t):Gv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Mo.transform(t):il.transform(t)},iF=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function oF(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(K0))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(iF))===null||n===void 0?void 0:n.length)||0)>0}const mP="number",gP="color",aF="var",lF="var(",wE="${}",cF=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Su(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const l=e.replace(cF,u=>(xn.test(u)?(r.color.push(i),s.push(gP),n.push(xn.parse(u))):u.startsWith(lF)?(r.var.push(i),s.push(aF),n.push(u)):(r.number.push(i),s.push(mP),n.push(parseFloat(u))),++i,wE)).split(wE);return{values:n,split:l,indexes:r,types:s}}function vP(t){return Su(t).values}function yP(t){const{split:e,types:n}=Su(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const l=n[o];l===mP?i+=ou(s[o]):l===gP?i+=xn.transform(s[o]):i+=s[o]}return i}}const uF=t=>typeof t=="number"?0:t;function dF(t){const e=vP(t);return yP(t)(e.map(uF))}const Hi={test:oF,parse:vP,createTransformer:yP,getAnimatableNone:dF},fF=new Set(["brightness","contrast","saturate","opacity"]);function hF(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(K0)||[];if(!r)return t;const s=n.replace(r,"");let i=fF.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const pF=/\b([a-z-]*)\(.*?\)/gu,Wv={...Hi,getAnimatableNone:t=>{const e=t.match(pF);return e?e.map(hF).join(" "):t}},mF={...M0,color:xn,backgroundColor:xn,outlineColor:xn,fill:xn,stroke:xn,borderColor:xn,borderTopColor:xn,borderRightColor:xn,borderBottomColor:xn,borderLeftColor:xn,filter:Wv,WebkitFilter:Wv},X0=t=>mF[t];function _P(t,e){let n=X0(t);return n!==Wv&&(n=Hi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const gF=new Set(["auto","none","0"]);function vF(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!gF.has(i)&&Su(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=_P(n,s)}const xE=t=>t===Bl||t===Be,bE=(t,e)=>parseFloat(t.split(", ")[e]),EE=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return bE(s[1],e);{const i=r.match(/^matrix\((.+)\)$/u);return i?bE(i[1],t):0}},yF=new Set(["x","y","z"]),_F=Ul.filter(t=>!yF.has(t));function wF(t){const e=[];return _F.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const wl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:EE(4,13),y:EE(5,14)};wl.translateX=wl.x;wl.translateY=wl.y;const Do=new Set;let Hv=!1,qv=!1;function wP(){if(qv){const t=Array.from(Do).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=wF(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var l;(l=r.getValue(i))===null||l===void 0||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}qv=!1,Hv=!1,Do.forEach(t=>t.complete()),Do.clear()}function xP(){Do.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(qv=!0)})}function xF(){xP(),wP()}class Z0{constructor(e,n,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Do.add(this),Hv||(Hv=!0,Tt.read(xP),Tt.resolveKeyframes(wP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Do.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Do.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const bP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),bF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function EF(t){const e=bF.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function EP(t,e,n=1){const[r,s]=EF(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return bP(o)?parseFloat(o):o}return O0(s)?EP(s,e,n+1):s}const TP=t=>e=>e.test(t),TF={test:t=>t==="auto",parse:t=>t},SP=[Bl,Be,os,Ii,hD,fD,TF],TE=t=>SP.find(TP(t));class AP extends Z0{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),O0(d))){const h=EP(d,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!nP.has(r)||e.length!==2)return;const[s,i]=e,o=TE(s),l=TE(i);if(o!==l)if(xE(o)&&xE(l))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)eF(e[s])&&r.push(s);r.length&&vF(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,l=s[o];s[o]=wl[r](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,d])=>{n.getValue(u).set(d)}),this.resolveNoneKeyframes()}}const SE=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Hi.test(t)||t==="0")&&!t.startsWith("url("));function SF(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function AF(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=SE(s,e),l=SE(i,e);return!o||!l?!1:SF(t)||(n==="spring"||U0(n))&&r}const CF=t=>t!==null;function op(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(CF),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const PF=40;class CP{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=as.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>PF?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&xF(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=as.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:l,onUpdate:u,isGenerator:d}=this.options;if(!d&&!AF(e,r,s,i))if(o)this.options.duration=0;else{u&&u(op(e,this.options,n)),l&&l(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const kt=(t,e,n)=>t+(e-t)*n;function Pg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function RF({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,u=2*n-l;s=Pg(u,l,t+1/3),i=Pg(u,l,t),o=Pg(u,l,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function fh(t,e){return n=>n>0?e:t}const Rg=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},kF=[Gv,Mo,il],IF=t=>kF.find(e=>e.test(t));function AE(t){const e=IF(t);if(!e)return!1;let n=e.parse(t);return e===il&&(n=RF(n)),n}const CE=(t,e)=>{const n=AE(t),r=AE(e);if(!n||!r)return fh(t,e);const s={...n};return i=>(s.red=Rg(n.red,r.red,i),s.green=Rg(n.green,r.green,i),s.blue=Rg(n.blue,r.blue,i),s.alpha=kt(n.alpha,r.alpha,i),Mo.transform(s))},OF=(t,e)=>n=>e(t(n)),qu=(...t)=>t.reduce(OF),Kv=new Set(["none","hidden"]);function MF(t,e){return Kv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function LF(t,e){return n=>kt(t,e,n)}function Q0(t){return typeof t=="number"?LF:typeof t=="string"?O0(t)?fh:xn.test(t)?CE:DF:Array.isArray(t)?PP:typeof t=="object"?xn.test(t)?CE:NF:fh}function PP(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>Q0(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function NF(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Q0(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function jF(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],l=t.indexes[o][s[o]],u=(n=t.values[l])!==null&&n!==void 0?n:0;r[i]=u,s[o]++}return r}const DF=(t,e)=>{const n=Hi.createTransformer(e),r=Su(t),s=Su(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Kv.has(t)&&!s.values.length||Kv.has(e)&&!r.values.length?MF(t,e):qu(PP(jF(r,s),s.values),n):fh(t,e)};function RP(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?kt(t,e,n):Q0(t)(t,e)}const FF=5;function kP(t,e,n){const r=Math.max(e-FF,0);return rP(n-t(r),e-r)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},PE=.001;function VF({duration:t=Mt.duration,bounce:e=Mt.bounce,velocity:n=Mt.velocity,mass:r=Mt.mass}){let s,i,o=1-e;o=Fs(Mt.minDamping,Mt.maxDamping,o),t=Fs(Mt.minDuration,Mt.maxDuration,js(t)),o<1?(s=d=>{const h=d*o,p=h*t,g=h-n,y=Yv(d,o),T=Math.exp(-p);return PE-g/y*T},i=d=>{const p=d*o*t,g=p*n+n,y=Math.pow(o,2)*Math.pow(d,2)*t,T=Math.exp(-p),x=Yv(Math.pow(d,2),o);return(-s(d)+PE>0?-1:1)*((g-y)*T)/x}):(s=d=>{const h=Math.exp(-d*t),p=(d-n)*t+1;return-.001+h*p},i=d=>{const h=Math.exp(-d*t),p=(n-d)*(t*t);return h*p});const l=5/t,u=BF(s,i,l);if(t=Ns(t),isNaN(u))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:t};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const UF=12;function BF(t,e,n){let r=n;for(let s=1;s<UF;s++)r=r-t(r)/e(r);return r}function Yv(t,e){return t*Math.sqrt(1-e*e)}const zF=["duration","bounce"],$F=["stiffness","damping","mass"];function RE(t,e){return e.some(n=>t[n]!==void 0)}function GF(t){let e={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...t};if(!RE(t,$F)&&RE(t,zF))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*Fs(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Mt.mass,stiffness:s,damping:i}}else{const n=VF(t);e={...e,...n,mass:Mt.mass},e.isResolvedFromDuration=!0}return e}function IP(t=Mt.visualDuration,e=Mt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:i},{stiffness:u,damping:d,mass:h,duration:p,velocity:g,isResolvedFromDuration:y}=GF({...n,velocity:-js(n.velocity||0)}),T=g||0,x=d/(2*Math.sqrt(u*h)),E=o-i,A=js(Math.sqrt(u/h)),S=Math.abs(E)<5;r||(r=S?Mt.restSpeed.granular:Mt.restSpeed.default),s||(s=S?Mt.restDelta.granular:Mt.restDelta.default);let C;if(x<1){const M=Yv(A,x);C=D=>{const z=Math.exp(-x*A*D);return o-z*((T+x*A*E)/M*Math.sin(M*D)+E*Math.cos(M*D))}}else if(x===1)C=M=>o-Math.exp(-A*M)*(E+(T+A*E)*M);else{const M=A*Math.sqrt(x*x-1);C=D=>{const z=Math.exp(-x*A*D),B=Math.min(M*D,300);return o-z*((T+x*A*E)*Math.sinh(B)+M*E*Math.cosh(B))/M}}const O={calculatedDuration:y&&p||null,next:M=>{const D=C(M);if(y)l.done=M>=p;else{let z=0;x<1&&(z=M===0?Ns(T):kP(C,M,D));const B=Math.abs(z)<=r,$=Math.abs(o-D)<=s;l.done=B&&$}return l.value=l.done?o:D,l},toString:()=>{const M=Math.min(YC(O),Bv),D=XC(z=>O.next(M*z).value,M,30);return M+"ms "+D}};return O}function kE({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:h}){const p=t[0],g={done:!1,value:p},y=B=>l!==void 0&&B<l||u!==void 0&&B>u,T=B=>l===void 0?u:u===void 0||Math.abs(l-B)<Math.abs(u-B)?l:u;let x=n*e;const E=p+x,A=o===void 0?E:o(E);A!==E&&(x=A-p);const S=B=>-x*Math.exp(-B/r),C=B=>A+S(B),O=B=>{const $=S(B),G=C(B);g.done=Math.abs($)<=d,g.value=g.done?A:G};let M,D;const z=B=>{y(g.value)&&(M=B,D=IP({keyframes:[g.value,T(g.value)],velocity:kP(C,B,g.value),damping:s,stiffness:i,restDelta:d,restSpeed:h}))};return z(0),{calculatedDuration:null,next:B=>{let $=!1;return!D&&M===void 0&&($=!0,O(B),z(B)),M!==void 0&&B>=M?D.next(B-M):(!$&&O(B),g)}}}const WF=Hu(.42,0,1,1),HF=Hu(0,0,.58,1),OP=Hu(.42,0,.58,1),qF=t=>Array.isArray(t)&&typeof t[0]!="number",KF={linear:or,easeIn:WF,easeInOut:OP,easeOut:HF,circIn:q0,circInOut:fP,circOut:dP,backIn:H0,backInOut:cP,backOut:lP,anticipate:uP},IE=t=>{if(B0(t)){RC(t.length===4);const[e,n,r,s]=t;return Hu(e,n,r,s)}else if(typeof t=="string")return KF[t];return t};function YF(t,e,n){const r=[],s=n||RP,i=t.length-1;for(let o=0;o<i;o++){let l=s(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||or:e;l=qu(u,l)}r.push(l)}return r}function XF(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(RC(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=YF(e,r,s),u=l.length,d=h=>{if(o&&h<t[0])return e[0];let p=0;if(u>1)for(;p<t.length-2&&!(h<t[p+1]);p++);const g=yl(t[p],t[p+1],h);return l[p](g)};return n?h=>d(Fs(t[0],t[i-1],h)):d}function ZF(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=yl(0,e,r);t.push(kt(n,1,s))}}function QF(t){const e=[0];return ZF(e,t.length-1),e}function JF(t,e){return t.map(n=>n*e)}function eV(t,e){return t.map(()=>e||OP).splice(0,t.length-1)}function hh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=qF(r)?r.map(IE):IE(r),i={done:!1,value:e[0]},o=JF(n&&n.length===e.length?n:QF(e),t),l=XF(o,e,{ease:Array.isArray(s)?s:eV(e,s)});return{calculatedDuration:t,next:u=>(i.value=l(u),i.done=u>=t,i)}}const tV=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Tt.update(e,!0),stop:()=>Wi(e),now:()=>fn.isProcessing?fn.timestamp:as.now()}},nV={decay:kE,inertia:kE,tween:hh,keyframes:hh,spring:IP},rV=t=>t/100;class J0 extends CP{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||Z0,l=(u,d)=>this.onKeyframesResolved(u,d);this.resolver=new o(i,l,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,l=U0(n)?n:nV[n]||hh;let u,d;l!==hh&&typeof e[0]!="number"&&(u=qu(rV,RP(e[0],e[1])),e=[0,100]);const h=l({...this.options,keyframes:e});i==="mirror"&&(d=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=YC(h));const{calculatedDuration:p}=h,g=p+s,y=g*(r+1)-s;return{generator:h,mirroredGenerator:d,mapPercentToKeyframes:u,calculatedDuration:p,resolvedDuration:g,totalDuration:y}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:B}=this.options;return{done:!0,value:B[B.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:u,calculatedDuration:d,totalDuration:h,resolvedDuration:p}=r;if(this.startTime===null)return i.next(0);const{delay:g,repeat:y,repeatType:T,repeatDelay:x,onUpdate:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const A=this.currentTime-g*(this.speed>=0?1:-1),S=this.speed>=0?A<0:A>h;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let C=this.currentTime,O=i;if(y){const B=Math.min(this.currentTime,h)/p;let $=Math.floor(B),G=B%1;!G&&B>=1&&(G=1),G===1&&$--,$=Math.min($,y+1),!!($%2)&&(T==="reverse"?(G=1-G,x&&(G-=x/p)):T==="mirror"&&(O=o)),C=Fs(0,1,G)*p}const M=S?{done:!1,value:u[0]}:O.next(C);l&&(M.value=l(M.value));let{done:D}=M;!S&&d!==null&&(D=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return z&&s!==void 0&&(M.value=op(u,this.options,s)),E&&E(M.value),z&&this.finish(),M}get duration(){const{resolved:e}=this;return e?js(e.calculatedDuration):0}get time(){return js(this.currentTime)}set time(e){e=Ns(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=js(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=tV,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const sV=new Set(["opacity","clipPath","filter","transform"]);function iV(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:l="easeInOut",times:u}={}){const d={[e]:n};u&&(d.offset=u);const h=QC(l,s);return Array.isArray(h)&&(d.easing=h),t.animate(d,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const oV=S0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ph=10,aV=2e4;function lV(t){return U0(t.type)||t.type==="spring"||!ZC(t.ease)}function cV(t,e){const n=new J0({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let i=0;for(;!r.done&&i<aV;)r=n.sample(i),s.push(r.value),i+=ph;return{times:void 0,keyframes:s,duration:i-ph,ease:"linear"}}const MP={anticipate:uP,backInOut:cP,circInOut:fP};function uV(t){return t in MP}class OE extends CP{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new AP(i,(o,l)=>this.onKeyframesResolved(o,l),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:i,type:o,motionValue:l,name:u,startTime:d}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof i=="string"&&dh()&&uV(i)&&(i=MP[i]),lV(this.options)){const{onComplete:p,onUpdate:g,motionValue:y,element:T,...x}=this.options,E=cV(e,x);e=E.keyframes,e.length===1&&(e[1]=e[0]),r=E.duration,s=E.times,i=E.ease,o="keyframes"}const h=iV(l.owner.current,u,e,{...this.options,duration:r,times:s,ease:i});return h.startTime=d??this.calcStartTime(),this.pendingTimeline?(mE(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:p}=this.options;l.set(op(e,this.options,n)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return js(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return js(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Ns(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return or;const{animation:r}=n;mE(r,e)}return or}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:i,ease:o,times:l}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:h,onComplete:p,element:g,...y}=this.options,T=new J0({...y,keyframes:r,duration:s,type:i,ease:o,times:l,isGenerator:!0}),x=Ns(this.time);d.setWithVelocity(T.sample(x-ph).value,T.sample(x).value,ph)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:o,type:l}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=n.owner.getProps();return oV()&&r&&sV.has(r)&&!u&&!d&&!s&&i!=="mirror"&&o!==0&&l!=="inertia"}}const dV={type:"spring",stiffness:500,damping:25,restSpeed:10},fV=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),hV={type:"keyframes",duration:.8},pV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mV=(t,{keyframes:e})=>e.length>2?hV:Zo.has(t)?t.startsWith("scale")?fV(e[1]):dV:pV;function gV({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const e_=(t,e,n,r={},s,i)=>o=>{const l=V0(r,t)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Ns(u);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:g=>{e.set(g),l.onUpdate&&l.onUpdate(g)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:i?void 0:s};gV(l)||(h={...h,...mV(t,h)}),h.duration&&(h.duration=Ns(h.duration)),h.repeatDelay&&(h.repeatDelay=Ns(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(p=!0)),p&&!i&&e.get()!==void 0){const g=op(h.keyframes,l);if(g!==void 0)return Tt.update(()=>{h.onUpdate(g),h.onComplete()}),new ND([])}return!i&&OE.supports(h)?new OE(h):new J0(h)};function vV({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function LP(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:l,...u}=e;r&&(o=r);const d=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const p in u){const g=t.getValue(p,(i=t.latestValues[p])!==null&&i!==void 0?i:null),y=u[p];if(y===void 0||h&&vV(h,p))continue;const T={delay:n,...V0(o||{},p)};let x=!1;if(window.MotionHandoffAnimation){const A=sP(t);if(A){const S=window.MotionHandoffAnimation(A,p,Tt);S!==null&&(T.startTime=S,x=!0)}}$v(t,p),g.start(e_(p,g,y,t.shouldReduceMotion&&nP.has(p)?{type:!1}:T,t,x));const E=g.animation;E&&d.push(E)}return l&&Promise.all(d).then(()=>{Tt.update(()=>{l&&YD(t,l)})}),d}function Xv(t,e,n={}){var r;const s=ip(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all(LP(t,s,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:g}=i;return yV(t,e,h+d,p,g,n)}:()=>Promise.resolve(),{when:u}=i;if(u){const[d,h]=u==="beforeChildren"?[o,l]:[l,o];return d().then(()=>h())}else return Promise.all([o(),l(n.delay)])}function yV(t,e,n=0,r=0,s=1,i){const o=[],l=(t.variantChildren.size-1)*r,u=s===1?(d=0)=>d*r:(d=0)=>l-d*r;return Array.from(t.variantChildren).sort(_V).forEach((d,h)=>{d.notify("AnimationStart",e),o.push(Xv(d,e,{...i,delay:n+u(h)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function _V(t,e){return t.sortNodePosition(e)}function wV(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Xv(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Xv(t,e,n);else{const s=typeof e=="function"?ip(t,e,n.custom):e;r=Promise.all(LP(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const xV=C0.length;function NP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?NP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<xV;n++){const r=C0[n],s=t.props[r];(bu(s)||s===!1)&&(e[r]=s)}return e}const bV=[...A0].reverse(),EV=A0.length;function TV(t){return e=>Promise.all(e.map(({animation:n,options:r})=>wV(t,n,r)))}function SV(t){let e=TV(t),n=ME(),r=!0;const s=u=>(d,h)=>{var p;const g=ip(t,h,u==="exit"?(p=t.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(g){const{transition:y,transitionEnd:T,...x}=g;d={...d,...x,...T}}return d};function i(u){e=u(t)}function o(u){const{props:d}=t,h=NP(t.parent)||{},p=[],g=new Set;let y={},T=1/0;for(let E=0;E<EV;E++){const A=bV[E],S=n[A],C=d[A]!==void 0?d[A]:h[A],O=bu(C),M=A===u?S.isActive:null;M===!1&&(T=E);let D=C===h[A]&&C!==d[A]&&O;if(D&&r&&t.manuallyAnimateOnMount&&(D=!1),S.protectedKeys={...y},!S.isActive&&M===null||!C&&!S.prevProp||rp(C)||typeof C=="boolean")continue;const z=AV(S.prevProp,C);let B=z||A===u&&S.isActive&&!D&&O||E>T&&O,$=!1;const G=Array.isArray(C)?C:[C];let te=G.reduce(s(A),{});M===!1&&(te={});const{prevResolvedValues:Q={}}=S,se={...Q,...te},re=pe=>{B=!0,g.has(pe)&&($=!0,g.delete(pe)),S.needsAnimating[pe]=!0;const X=t.getValue(pe);X&&(X.liveStyle=!1)};for(const pe in se){const X=te[pe],Z=Q[pe];if(y.hasOwnProperty(pe))continue;let ne=!1;Uv(X)&&Uv(Z)?ne=!KC(X,Z):ne=X!==Z,ne?X!=null?re(pe):g.add(pe):X!==void 0&&g.has(pe)?re(pe):S.protectedKeys[pe]=!0}S.prevProp=C,S.prevResolvedValues=te,S.isActive&&(y={...y,...te}),r&&t.blockInitialAnimation&&(B=!1),B&&(!(D&&z)||$)&&p.push(...G.map(pe=>({animation:pe,options:{type:A}})))}if(g.size){const E={};g.forEach(A=>{const S=t.getBaseTarget(A),C=t.getValue(A);C&&(C.liveStyle=!0),E[A]=S??null}),p.push({animation:E})}let x=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(p):Promise.resolve()}function l(u,d){var h;if(n[u].isActive===d)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(g=>{var y;return(y=g.animationState)===null||y===void 0?void 0:y.setActive(u,d)}),n[u].isActive=d;const p=o(u);for(const g in n)n[g].protectedKeys={};return p}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>n,reset:()=>{n=ME(),r=!0}}}function AV(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!KC(e,t):!1}function bo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ME(){return{animate:bo(!0),whileInView:bo(),whileHover:bo(),whileTap:bo(),whileDrag:bo(),whileFocus:bo(),exit:bo()}}class Qi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class CV extends Qi{constructor(e){super(e),e.animationState||(e.animationState=SV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();rp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let PV=0;class RV extends Qi{constructor(){super(...arguments),this.id=PV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const kV={animation:{Feature:CV},exit:{Feature:RV}};function Au(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Ku(t){return{point:{x:t.pageX,y:t.pageY}}}const IV=t=>e=>z0(e)&&t(e,Ku(e));function au(t,e,n,r){return Au(t,e,IV(n),r)}const LE=(t,e)=>Math.abs(t-e);function OV(t,e){const n=LE(t.x,e.x),r=LE(t.y,e.y);return Math.sqrt(n**2+r**2)}class jP{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Ig(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,y=OV(p.offset,{x:0,y:0})>=3;if(!g&&!y)return;const{point:T}=p,{timestamp:x}=fn;this.history.push({...T,timestamp:x});const{onStart:E,onMove:A}=this.handlers;g||(E&&E(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=kg(g,this.transformPagePoint),Tt.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:y,onSessionEnd:T,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=Ig(p.type==="pointercancel"?this.lastMoveEventInfo:kg(g,this.transformPagePoint),this.history);this.startEvent&&y&&y(p,E),T&&T(p,E)},!z0(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Ku(e),l=kg(o,this.transformPagePoint),{point:u}=l,{timestamp:d}=fn;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,Ig(l,this.history)),this.removeListeners=qu(au(this.contextWindow,"pointermove",this.handlePointerMove),au(this.contextWindow,"pointerup",this.handlePointerUp),au(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Wi(this.updatePoint)}}function kg(t,e){return e?{point:e(t.point)}:t}function NE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ig({point:t},e){return{point:t,delta:NE(t,DP(e)),offset:NE(t,MV(e)),velocity:LV(e,.1)}}function MV(t){return t[0]}function DP(t){return t[t.length-1]}function LV(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=DP(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Ns(e)));)n--;if(!r)return{x:0,y:0};const i=js(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const FP=1e-4,NV=1-FP,jV=1+FP,VP=.01,DV=0-VP,FV=0+VP;function cr(t){return t.max-t.min}function VV(t,e,n){return Math.abs(t-e)<=n}function jE(t,e,n,r=.5){t.origin=r,t.originPoint=kt(e.min,e.max,t.origin),t.scale=cr(n)/cr(e),t.translate=kt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=NV&&t.scale<=jV||isNaN(t.scale))&&(t.scale=1),(t.translate>=DV&&t.translate<=FV||isNaN(t.translate))&&(t.translate=0)}function lu(t,e,n,r){jE(t.x,e.x,n.x,r?r.originX:void 0),jE(t.y,e.y,n.y,r?r.originY:void 0)}function DE(t,e,n){t.min=n.min+e.min,t.max=t.min+cr(e)}function UV(t,e,n){DE(t.x,e.x,n.x),DE(t.y,e.y,n.y)}function FE(t,e,n){t.min=e.min-n.min,t.max=t.min+cr(e)}function cu(t,e,n){FE(t.x,e.x,n.x),FE(t.y,e.y,n.y)}function BV(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?kt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?kt(n,t,r.max):Math.min(t,n)),t}function VE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function zV(t,{top:e,left:n,bottom:r,right:s}){return{x:VE(t.x,n,s),y:VE(t.y,e,r)}}function UE(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function $V(t,e){return{x:UE(t.x,e.x),y:UE(t.y,e.y)}}function GV(t,e){let n=.5;const r=cr(t),s=cr(e);return s>r?n=yl(e.min,e.max-r,t.min):r>s&&(n=yl(t.min,t.max-s,e.min)),Fs(0,1,n)}function WV(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Zv=.35;function HV(t=Zv){return t===!1?t=0:t===!0&&(t=Zv),{x:BE(t,"left","right"),y:BE(t,"top","bottom")}}function BE(t,e,n){return{min:zE(t,e),max:zE(t,n)}}function zE(t,e){return typeof t=="number"?t:t[e]||0}const $E=()=>({translate:0,scale:1,origin:0,originPoint:0}),ol=()=>({x:$E(),y:$E()}),GE=()=>({min:0,max:0}),Ft=()=>({x:GE(),y:GE()});function _r(t){return[t("x"),t("y")]}function UP({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function qV({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function KV(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Og(t){return t===void 0||t===1}function Qv({scale:t,scaleX:e,scaleY:n}){return!Og(t)||!Og(e)||!Og(n)}function Co(t){return Qv(t)||BP(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function BP(t){return WE(t.x)||WE(t.y)}function WE(t){return t&&t!=="0%"}function mh(t,e,n){const r=t-n,s=e*r;return n+s}function HE(t,e,n,r,s){return s!==void 0&&(t=mh(t,s,r)),mh(t,n,r)+e}function Jv(t,e=0,n=1,r,s){t.min=HE(t.min,e,n,r,s),t.max=HE(t.max,e,n,r,s)}function zP(t,{x:e,y:n}){Jv(t.x,e.translate,e.scale,e.originPoint),Jv(t.y,n.translate,n.scale,n.originPoint)}const qE=.999999999999,KE=1.0000000000001;function YV(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let l=0;l<s;l++){i=n[l],o=i.projectionDelta;const{visualElement:u}=i.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ll(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,zP(t,o)),r&&Co(i.latestValues)&&ll(t,i.latestValues))}e.x<KE&&e.x>qE&&(e.x=1),e.y<KE&&e.y>qE&&(e.y=1)}function al(t,e){t.min=t.min+e,t.max=t.max+e}function YE(t,e,n,r,s=.5){const i=kt(t.min,t.max,s);Jv(t,e,n,i,r)}function ll(t,e){YE(t.x,e.x,e.scaleX,e.scale,e.originX),YE(t.y,e.y,e.scaleY,e.scale,e.originY)}function $P(t,e){return UP(KV(t.getBoundingClientRect(),e))}function XV(t,e,n){const r=$P(t,n),{scroll:s}=e;return s&&(al(r.x,s.offset.x),al(r.y,s.offset.y)),r}const GP=({current:t})=>t?t.ownerDocument.defaultView:null,ZV=new WeakMap;class QV{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ft(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ku(h).point)},i=(h,p)=>{const{drag:g,dragPropagation:y,onDragStart:T}=this.getProps();if(g&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=GD(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_r(E=>{let A=this.getAxisMotionValue(E).get()||0;if(os.test(A)){const{projection:S}=this.visualElement;if(S&&S.layout){const C=S.layout.layoutBox[E];C&&(A=cr(C)*(parseFloat(A)/100))}}this.originPoint[E]=A}),T&&Tt.postRender(()=>T(h,p)),$v(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(h,p)=>{const{dragPropagation:g,dragDirectionLock:y,onDirectionLock:T,onDrag:x}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:E}=p;if(y&&this.currentDirection===null){this.currentDirection=JV(E),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",p.point,E),this.updateAxis("y",p.point,E),this.visualElement.render(),x&&x(h,p)},l=(h,p)=>this.stop(h,p),u=()=>_r(h=>{var p;return this.getAnimationState(h)==="paused"&&((p=this.getAxisMotionValue(h).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new jP(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:GP(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Tt.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Tf(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=BV(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&sl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=zV(s.layoutBox,n):this.constraints=!1,this.elastic=HV(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&_r(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=WV(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!sl(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=XV(r,s.root,this.visualElement.getTransformPagePoint());let o=$V(s.layout.layoutBox,i);if(n){const l=n(qV(o));this.hasMutatedConstraints=!!l,l&&(o=UP(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=_r(h=>{if(!Tf(h,n,this.currentDirection))return;let p=u&&u[h]||{};o&&(p={min:0,max:0});const g=s?200:1e6,y=s?40:1e7,T={type:"inertia",velocity:r?e[h]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...p};return this.startAxisValueAnimation(h,T)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return $v(this.visualElement,e),r.start(e_(e,r,0,n,this.visualElement,!1))}stopAnimation(){_r(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){_r(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){_r(n=>{const{drag:r}=this.getProps();if(!Tf(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[n];i.set(e[n]-kt(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!sl(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};_r(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();s[o]=GV({min:u,max:u},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),_r(o=>{if(!Tf(o,e,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(kt(u,d,s[o]))})}addListeners(){if(!this.visualElement.current)return;ZV.set(this.visualElement,this);const e=this.visualElement.current,n=au(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();sl(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Tt.read(r);const o=Au(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(_r(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=u[h].translate,p.set(p.get()+u[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Zv,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Tf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function JV(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class eU extends Qi{constructor(e){super(e),this.removeGroupControls=or,this.removeListeners=or,this.controls=new QV(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||or}unmount(){this.removeGroupControls(),this.removeListeners()}}const XE=t=>(e,n)=>{t&&Tt.postRender(()=>t(e,n))};class tU extends Qi{constructor(){super(...arguments),this.removePointerDownListener=or}onPointerDown(e){this.session=new jP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:GP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:XE(e),onStart:XE(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Tt.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=au(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Zf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ZE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Lc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Be.test(t))t=parseFloat(t);else return t;const n=ZE(t,e.target.x),r=ZE(t,e.target.y);return`${n}% ${r}%`}},nU={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Hi.parse(t);if(s.length>5)return r;const i=Hi.createTransformer(t),o=typeof s[0]!="number"?1:0,l=n.x.scale*e.x,u=n.y.scale*e.y;s[0+o]/=l,s[1+o]/=u;const d=kt(l,u,.5);return typeof s[2+o]=="number"&&(s[2+o]/=d),typeof s[3+o]=="number"&&(s[3+o]/=d),i(s)}};class rU extends _.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;ED(sU),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Zf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Tt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),R0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function WP(t){const[e,n]=CC(),r=_.useContext(x0);return w.jsx(rU,{...t,layoutGroup:r,switchLayoutGroup:_.useContext(NC),isPresent:e,safeToRemove:n})}const sU={borderRadius:{...Lc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Lc,borderTopRightRadius:Lc,borderBottomLeftRadius:Lc,borderBottomRightRadius:Lc,boxShadow:nU};function iU(t,e,n){const r=En(t)?t:Tu(t);return r.start(e_("",r,e,n)),r.animation}function oU(t){return t instanceof SVGElement&&t.tagName!=="svg"}const aU=(t,e)=>t.depth-e.depth;class lU{constructor(){this.children=[],this.isDirty=!1}add(e){$0(this.children,e),this.isDirty=!0}remove(e){G0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(aU),this.isDirty=!1,this.children.forEach(e)}}function cU(t,e){const n=as.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Wi(r),t(i-e))};return Tt.read(r,!0),()=>Wi(r)}const HP=["TopLeft","TopRight","BottomLeft","BottomRight"],uU=HP.length,QE=t=>typeof t=="string"?parseFloat(t):t,JE=t=>typeof t=="number"||Be.test(t);function dU(t,e,n,r,s,i){s?(t.opacity=kt(0,n.opacity!==void 0?n.opacity:1,fU(r)),t.opacityExit=kt(e.opacity!==void 0?e.opacity:1,0,hU(r))):i&&(t.opacity=kt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<uU;o++){const l=`border${HP[o]}Radius`;let u=e1(e,l),d=e1(n,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||JE(u)===JE(d)?(t[l]=Math.max(kt(QE(u),QE(d),r),0),(os.test(d)||os.test(u))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=kt(e.rotate||0,n.rotate||0,r))}function e1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const fU=qP(0,.5,dP),hU=qP(.5,.95,or);function qP(t,e,n){return r=>r<t?0:r>e?1:n(yl(t,e,r))}function t1(t,e){t.min=e.min,t.max=e.max}function yr(t,e){t1(t.x,e.x),t1(t.y,e.y)}function n1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function r1(t,e,n,r,s){return t-=e,t=mh(t,1/n,r),s!==void 0&&(t=mh(t,1/s,r)),t}function pU(t,e=0,n=1,r=.5,s,i=t,o=t){if(os.test(e)&&(e=parseFloat(e),e=kt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=kt(i.min,i.max,r);t===i&&(l-=e),t.min=r1(t.min,e,n,l,s),t.max=r1(t.max,e,n,l,s)}function s1(t,e,[n,r,s],i,o){pU(t,e[n],e[r],e[s],e.scale,i,o)}const mU=["x","scaleX","originX"],gU=["y","scaleY","originY"];function i1(t,e,n,r){s1(t.x,e,mU,n?n.x:void 0,r?r.x:void 0),s1(t.y,e,gU,n?n.y:void 0,r?r.y:void 0)}function o1(t){return t.translate===0&&t.scale===1}function KP(t){return o1(t.x)&&o1(t.y)}function a1(t,e){return t.min===e.min&&t.max===e.max}function vU(t,e){return a1(t.x,e.x)&&a1(t.y,e.y)}function l1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function YP(t,e){return l1(t.x,e.x)&&l1(t.y,e.y)}function c1(t){return cr(t.x)/cr(t.y)}function u1(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class yU{constructor(){this.members=[]}add(e){$0(this.members,e),e.scheduleRender()}remove(e){if(G0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _U(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:g,skewX:y,skewY:T}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),g&&(r+=`rotateY(${g}deg) `),y&&(r+=`skewX(${y}deg) `),T&&(r+=`skewY(${T}deg) `)}const l=t.x.scale*e.x,u=t.y.scale*e.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const Po={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Zc=typeof window<"u"&&window.MotionDebug!==void 0,Mg=["","X","Y","Z"],wU={visibility:"hidden"},d1=1e3;let xU=0;function Lg(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function XP(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=sP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Tt,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&XP(r)}function ZP({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},l=e==null?void 0:e()){this.id=xU++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Zc&&(Po.totalNodes=Po.resolvedTargetDeltas=Po.recalculatedProjection=0),this.nodes.forEach(TU),this.nodes.forEach(RU),this.nodes.forEach(kU),this.nodes.forEach(SU),Zc&&window.MotionDebug.record(Po)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new lU)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new W0),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=oU(o),this.instance=o;const{layoutId:u,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||u)&&(this.isLayoutDirty=!0),t){let p;const g=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=cU(g,250),Zf.hasAnimatedSinceResize&&(Zf.hasAnimatedSinceResize=!1,this.nodes.forEach(h1))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeTargetChanged:y,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||NU,{onLayoutAnimationStart:E,onLayoutAnimationComplete:A}=h.getProps(),S=!this.targetLayout||!YP(this.targetLayout,T)||y,C=!g&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||g&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,C);const O={...V0(x,"layout"),onPlay:E,onComplete:A};(h.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O)}else g||h1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Wi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(IU),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&XP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(f1);return}this.isUpdating||this.nodes.forEach(CU),this.isUpdating=!1,this.nodes.forEach(PU),this.nodes.forEach(bU),this.nodes.forEach(EU),this.clearAllSnapshots();const l=as.now();fn.delta=Fs(0,1e3/60,l-fn.timestamp),fn.timestamp=l,fn.isProcessing=!0,Sg.update.process(fn),Sg.preRender.process(fn),Sg.render.process(fn),fn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,R0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(AU),this.sharedNodes.forEach(OU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Tt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Tt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ft(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!KP(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&(l||Co(this.latestValues)||h)&&(s(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),jU(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return Ft();const u=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(DU))){const{scroll:h}=this.root;h&&(al(u.x,h.offset.x),al(u.y,h.offset.y))}return u}removeElementScroll(o){var l;const u=Ft();if(yr(u,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return u;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:p,options:g}=h;h!==this.root&&p&&g.layoutScroll&&(p.wasRoot&&yr(u,o),al(u.x,p.offset.x),al(u.y,p.offset.y))}return u}applyTransform(o,l=!1){const u=Ft();yr(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&ll(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Co(h.latestValues)&&ll(u,h.latestValues)}return Co(this.latestValues)&&ll(u,this.latestValues),u}removeTransform(o){const l=Ft();yr(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Co(d.latestValues))continue;Qv(d.latestValues)&&d.updateSnapshot();const h=Ft(),p=d.measurePageBox();yr(h,p),i1(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Co(this.latestValues)&&i1(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!(!this.layout||!(p||g))){if(this.resolvedRelativeTargetAt=fn.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ft(),this.relativeTargetOrigin=Ft(),cu(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ft(),this.targetWithTransforms=Ft()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),UV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):yr(this.target,this.layout.layoutBox),zP(this.target,this.targetDelta)):yr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ft(),this.relativeTargetOrigin=Ft(),cu(this.relativeTargetOrigin,this.target,y.target),yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Zc&&Po.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Qv(this.parent.latestValues)||BP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===fn.timestamp&&(d=!1),d)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;yr(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;YV(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Ft());const{target:T}=l;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(n1(this.prevProjectionDelta.x,this.projectionDelta.x),n1(this.prevProjectionDelta.y,this.projectionDelta.y)),lu(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==y||!u1(this.projectionDelta.x,this.prevProjectionDelta.x)||!u1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T)),Zc&&Po.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ol(),this.projectionDelta=ol(),this.projectionDeltaWithTransform=ol()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},p=ol();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=Ft(),y=u?u.source:void 0,T=this.layout?this.layout.source:void 0,x=y!==T,E=this.getStack(),A=!E||E.members.length<=1,S=!!(x&&!A&&this.options.crossfade===!0&&!this.path.some(LU));this.animationProgress=0;let C;this.mixTargetDelta=O=>{const M=O/1e3;p1(p.x,o.x,M),p1(p.y,o.y,M),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(cu(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),MU(this.relativeTarget,this.relativeTargetOrigin,g,M),C&&vU(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=Ft()),yr(C,this.relativeTarget)),x&&(this.animationValues=h,dU(h,d,this.latestValues,M,S,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Wi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Tt.update(()=>{Zf.hasAnimatedSinceResize=!0,this.currentAnimation=iU(0,d1,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(d1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:h}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&QP(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||Ft();const p=cr(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const g=cr(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+g}yr(l,u),ll(l,h),lu(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new yU),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&Lg("z",o,d,this.animationValues);for(let h=0;h<Mg.length;h++)Lg(`rotate${Mg[h]}`,o,d,this.animationValues),Lg(`skew${Mg[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}getProjectionStyles(o){var l,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return wU;const d={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Yf(o==null?void 0:o.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none",d;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Yf(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Co(this.latestValues)&&(x.transform=h?h({},""):"none",this.hasProjected=!1),x}const g=p.animationValues||p.latestValues;this.applyTransformsToTarget(),d.transform=_U(this.projectionDeltaWithTransform,this.treeScale,g),h&&(d.transform=h(g,d.transform));const{x:y,y:T}=this.projectionDelta;d.transformOrigin=`${y.origin*100}% ${T.origin*100}% 0`,p.animationValues?d.opacity=p===this?(u=(l=g.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:d.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const x in uh){if(g[x]===void 0)continue;const{correct:E,applyTo:A}=uh[x],S=d.transform==="none"?g[x]:E(g[x],p);if(A){const C=A.length;for(let O=0;O<C;O++)d[A[O]]=S}else d[x]=S}return this.options.layoutId&&(d.pointerEvents=p===this?Yf(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(f1),this.root.sharedNodes.clear()}}}function bU(t){t.updateLayout()}function EU(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?_r(p=>{const g=o?n.measuredBox[p]:n.layoutBox[p],y=cr(g);g.min=r[p].min,g.max=g.min+y}):QP(i,n.layoutBox,r)&&_r(p=>{const g=o?n.measuredBox[p]:n.layoutBox[p],y=cr(r[p]);g.max=g.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+y)});const l=ol();lu(l,r,n.layoutBox);const u=ol();o?lu(u,t.applyTransform(s,!0),n.measuredBox):lu(u,r,n.layoutBox);const d=!KP(l);let h=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:g,layout:y}=p;if(g&&y){const T=Ft();cu(T,n.layoutBox,g.layoutBox);const x=Ft();cu(x,r,y.layoutBox),YP(T,x)||(h=!0),p.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=T,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function TU(t){Zc&&Po.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function SU(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function AU(t){t.clearSnapshot()}function f1(t){t.clearMeasurements()}function CU(t){t.isLayoutDirty=!1}function PU(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function h1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function RU(t){t.resolveTargetDelta()}function kU(t){t.calcProjection()}function IU(t){t.resetSkewAndRotation()}function OU(t){t.removeLeadSnapshot()}function p1(t,e,n){t.translate=kt(e.translate,0,n),t.scale=kt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function m1(t,e,n,r){t.min=kt(e.min,n.min,r),t.max=kt(e.max,n.max,r)}function MU(t,e,n,r){m1(t.x,e.x,n.x,r),m1(t.y,e.y,n.y,r)}function LU(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const NU={duration:.45,ease:[.4,0,.1,1]},g1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),v1=g1("applewebkit/")&&!g1("chrome/")?Math.round:or;function y1(t){t.min=v1(t.min),t.max=v1(t.max)}function jU(t){y1(t.x),y1(t.y)}function QP(t,e,n){return t==="position"||t==="preserve-aspect"&&!VV(c1(e),c1(n),.2)}function DU(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const FU=ZP({attachResizeListener:(t,e)=>Au(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ng={current:void 0},JP=ZP({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ng.current){const t=new FU({});t.mount(window),t.setOptions({layoutScroll:!0}),Ng.current=t}return Ng.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),VU={pan:{Feature:tU},drag:{Feature:eU,ProjectionNode:JP,MeasureLayout:WP}};function _1(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Tt.postRender(()=>i(e,Ku(e)))}class UU extends Qi{mount(){const{current:e}=this.node;e&&(this.unmount=VD(e,n=>(_1(this.node,n,"Start"),r=>_1(this.node,r,"End"))))}unmount(){}}class BU extends Qi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=qu(Au(this.node.current,"focus",()=>this.onFocus()),Au(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function w1(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Tt.postRender(()=>i(e,Ku(e)))}class zU extends Qi{mount(){const{current:e}=this.node;e&&(this.unmount=$D(e,n=>(w1(this.node,n,"Start"),(r,{success:s})=>w1(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ey=new WeakMap,jg=new WeakMap,$U=t=>{const e=ey.get(t.target);e&&e(t)},GU=t=>{t.forEach($U)};function WU({root:t,...e}){const n=t||document;jg.has(n)||jg.set(n,{});const r=jg.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(GU,{root:t,...e})),r[s]}function HU(t,e,n){const r=WU(e);return ey.set(t,n),r.observe(t),()=>{ey.delete(t),r.unobserve(t)}}const qU={some:0,all:1};class KU extends Qi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:qU[s]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),g=d?h:p;g&&g(u)};return HU(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(YU(e,n))&&this.startObserver()}unmount(){}}function YU({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const XU={inView:{Feature:KU},tap:{Feature:zU},focus:{Feature:BU},hover:{Feature:UU}},ZU={layout:{ProjectionNode:JP,MeasureLayout:WP}},ty={current:null},eR={current:!1};function QU(){if(eR.current=!0,!!T0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ty.current=t.matches;t.addListener(e),e()}else ty.current=!1}const JU=[...SP,xn,Hi],eB=t=>JU.find(TP(t)),x1=new WeakMap;function tB(t,e,n){for(const r in e){const s=e[r],i=n[r];if(En(s))t.addValue(r,s);else if(En(i))t.addValue(r,Tu(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,Tu(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const b1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class nB{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Z0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=as.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Tt.render(this.render,!1,!0))};const{latestValues:u,renderState:d,onUpdate:h}=o;this.onUpdate=h,this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=sp(n),this.isVariantNode=MC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in g){const T=g[y];u[y]!==void 0&&En(T)&&T.set(u[y],!1)}}mount(e){this.current=e,x1.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),eR.current||QU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ty.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){x1.delete(this.current),this.projection&&this.projection.unmount(),Wi(this.notifyUpdate),Wi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Zo.has(e),s=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Tt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in _l){const n=_l[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ft()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<b1.length;r++){const s=b1[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=tB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Tu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(bP(s)||hP(s))?s=parseFloat(s):!eB(s)&&Hi.test(n)&&(s=_P(e,n)),this.setBaseTarget(e,En(s)?s.get():s)),En(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const o=I0(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(s=o[e])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!En(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new W0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class tR extends nB{constructor(){super(...arguments),this.KeyframeResolver=AP}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;En(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function rB(t){return window.getComputedStyle(t)}class sB extends tR{constructor(){super(...arguments),this.type="html",this.renderInstance=zC}readValueFromInstance(e,n){if(Zo.has(n)){const r=X0(n);return r&&r.default||0}else{const r=rB(e),s=(VC(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return $P(e,n)}build(e,n,r){L0(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return F0(e,n,r)}}class iB extends tR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ft}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Zo.has(n)){const r=X0(n);return r&&r.default||0}return n=$C.has(n)?n:P0(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return HC(e,n,r)}build(e,n,r){N0(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){GC(e,n,r,s)}mount(e){this.isSVGTag=D0(e.tagName),super.mount(e)}}const oB=(t,e)=>k0(t)?new iB(e):new sB(e,{allowProjection:t!==_.Fragment}),aB=OD({...kV,...XU,...VU,...ZU},oB),tr=q3(aB);function lB(t,e){const n=_.createContext(e),r=i=>{const{children:o,...l}=i,u=_.useMemo(()=>l,Object.values(l));return w.jsx(n.Provider,{value:u,children:o})};r.displayName=t+"Provider";function s(i){const o=_.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function ps(t,e=[]){let n=[];function r(i,o){const l=_.createContext(o),u=n.length;n=[...n,o];const d=p=>{var A;const{scope:g,children:y,...T}=p,x=((A=g==null?void 0:g[t])==null?void 0:A[u])||l,E=_.useMemo(()=>T,Object.values(T));return w.jsx(x.Provider,{value:E,children:y})};d.displayName=i+"Provider";function h(p,g){var x;const y=((x=g==null?void 0:g[t])==null?void 0:x[u])||l,T=_.useContext(y);if(T)return T;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(o=>_.createContext(o));return function(l){const u=(l==null?void 0:l[t])||i;return _.useMemo(()=>({[`__scope${t}`]:{...l,[t]:u}}),[l,u])}};return s.scopeName=t,[r,cB(s,...e)]}function cB(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:u,scopeName:d})=>{const p=u(i)[`__scope${d}`];return{...l,...p}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Ur(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var Jt=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{};function E1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ap(...t){return e=>{let n=!1;const r=t.map(s=>{const i=E1(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():E1(t[s],null)}}}}function ut(...t){return _.useCallback(ap(...t),t)}function Uo(t){const e=uB(t),n=_.forwardRef((r,s)=>{const{children:i,...o}=r,l=_.Children.toArray(i),u=l.find(dB);if(u){const d=u.props.children,h=l.map(p=>p===u?_.Children.count(d)>1?_.Children.only(null):_.isValidElement(d)?d.props.children:null:p);return w.jsx(e,{...o,ref:s,children:_.isValidElement(d)?_.cloneElement(d,void 0,h):null})}return w.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var nR=Uo("Slot");function uB(t){const e=_.forwardRef((n,r)=>{const{children:s,...i}=n;if(_.isValidElement(s)){const o=hB(s),l=fB(i,s.props);return s.type!==_.Fragment&&(l.ref=r?ap(r,o):o),_.cloneElement(s,l)}return _.Children.count(s)>1?_.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var rR=Symbol("radix.slottable");function sR(t){const e=({children:n})=>w.jsx(w.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=rR,e}function dB(t){return _.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===rR}function fB(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const u=i(...l);return s(...l),u}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function hB(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var pB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Qe=pB.reduce((t,e)=>{const n=Uo(`Primitive.${e}`),r=_.forwardRef((s,i)=>{const{asChild:o,...l}=s,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),w.jsx(u,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function iR(t,e){t&&Yo.flushSync(()=>t.dispatchEvent(e))}var Dg={exports:{}},Fg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1;function mB(){if(T1)return Fg;T1=1;var t=Zh();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function l(p,g){var y=g(),T=r({inst:{value:y,getSnapshot:g}}),x=T[0].inst,E=T[1];return i(function(){x.value=y,x.getSnapshot=g,u(x)&&E({inst:x})},[p,y,g]),s(function(){return u(x)&&E({inst:x}),p(function(){u(x)&&E({inst:x})})},[p]),o(y),y}function u(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!n(p,y)}catch{return!0}}function d(p,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return Fg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,Fg}var S1;function gB(){return S1||(S1=1,Dg.exports=mB()),Dg.exports}var vB=gB();function yB(){return vB.useSyncExternalStore(_B,()=>!0,()=>!1)}function _B(){return()=>{}}var t_="Avatar",[wB,Cre]=ps(t_),[xB,oR]=wB(t_),aR=_.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=_.useState("idle");return w.jsx(xB,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:w.jsx(Qe.span,{...r,ref:e})})});aR.displayName=t_;var lR="AvatarImage",cR=_.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=oR(lR,n),l=bB(r,i),u=Ur(d=>{s(d),o.onImageLoadingStatusChange(d)});return Jt(()=>{l!=="idle"&&u(l)},[l,u]),l==="loaded"?w.jsx(Qe.img,{...i,ref:e,src:r}):null});cR.displayName=lR;var uR="AvatarFallback",dR=_.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=oR(uR,n),[o,l]=_.useState(r===void 0);return _.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(u)}},[r]),o&&i.imageLoadingStatus!=="loaded"?w.jsx(Qe.span,{...s,ref:e}):null});dR.displayName=uR;function A1(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function bB(t,{referrerPolicy:e,crossOrigin:n}){const r=yB(),s=_.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=_.useState(()=>A1(i,t));return Jt(()=>{l(A1(i,t))},[i,t]),Jt(()=>{const u=p=>()=>{l(p)};if(!i)return;const d=u("loaded"),h=u("error");return i.addEventListener("load",d),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",d),i.removeEventListener("error",h)}},[i,n,e]),o}var fR=aR,hR=cR,pR=dR;function mR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=mR(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function gR(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=mR(t))&&(r&&(r+=" "),r+=e);return r}const n_="-",EB=t=>{const e=SB(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(n_);return l[0]===""&&l.length!==1&&l.shift(),vR(l,e)||TB(o)},getConflictingClassGroupIds:(o,l)=>{const u=n[o]||[];return l&&r[o]?[...u,...r[o]]:u}}},vR=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?vR(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(n_);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},C1=/^\[(.+)\]$/,TB=t=>{if(C1.test(t)){const e=C1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},SB=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return CB(Object.entries(t.classGroups),n).forEach(([i,o])=>{ny(o,r,i,e)}),r},ny=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:P1(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(AB(s)){ny(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{ny(o,P1(e,i),n,r)})})},P1=(t,e)=>{let n=t;return e.split(n_).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},AB=t=>t.isThemeGetter,CB=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,PB=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},yR="!",RB=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const u=[];let d=0,h=0,p;for(let E=0;E<l.length;E++){let A=l[E];if(d===0){if(A===s&&(r||l.slice(E,E+i)===e)){u.push(l.slice(h,E)),h=E+i;continue}if(A==="/"){p=E;continue}}A==="["?d++:A==="]"&&d--}const g=u.length===0?l:l.substring(h),y=g.startsWith(yR),T=y?g.substring(1):g,x=p&&p>h?p-h:void 0;return{modifiers:u,hasImportantModifier:y,baseClassName:T,maybePostfixModifierPosition:x}};return n?l=>n({className:l,parseClassName:o}):o},kB=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},IB=t=>({cache:PB(t.cacheSize),parseClassName:RB(t),...EB(t)}),OB=/\s+/,MB=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(OB);let l="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{modifiers:h,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:y}=n(d);let T=!!y,x=r(T?g.substring(0,y):g);if(!x){if(!T){l=d+(l.length>0?" "+l:l);continue}if(x=r(g),!x){l=d+(l.length>0?" "+l:l);continue}T=!1}const E=kB(h).join(":"),A=p?E+yR:E,S=A+x;if(i.includes(S))continue;i.push(S);const C=s(x,T);for(let O=0;O<C.length;++O){const M=C[O];i.push(A+M)}l=d+(l.length>0?" "+l:l)}return l};function LB(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=_R(e))&&(r&&(r+=" "),r+=n);return r}const _R=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=_R(t[r]))&&(n&&(n+=" "),n+=e);return n};function NB(t,...e){let n,r,s,i=o;function o(u){const d=e.reduce((h,p)=>p(h),t());return n=IB(d),r=n.cache.get,s=n.cache.set,i=l,l(u)}function l(u){const d=r(u);if(d)return d;const h=MB(u,n);return s(u,h),h}return function(){return i(LB.apply(null,arguments))}}const bt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},wR=/^\[(?:([a-z-]+):)?(.+)\]$/i,jB=/^\d+\/\d+$/,DB=new Set(["px","full","screen"]),FB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,VB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,UB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,BB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,zB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Rs=t=>dl(t)||DB.has(t)||jB.test(t),Ti=t=>zl(t,"length",XB),dl=t=>!!t&&!Number.isNaN(Number(t)),Vg=t=>zl(t,"number",dl),Nc=t=>!!t&&Number.isInteger(Number(t)),$B=t=>t.endsWith("%")&&dl(t.slice(0,-1)),qe=t=>wR.test(t),Si=t=>FB.test(t),GB=new Set(["length","size","percentage"]),WB=t=>zl(t,GB,xR),HB=t=>zl(t,"position",xR),qB=new Set(["image","url"]),KB=t=>zl(t,qB,QB),YB=t=>zl(t,"",ZB),jc=()=>!0,zl=(t,e,n)=>{const r=wR.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},XB=t=>VB.test(t)&&!UB.test(t),xR=()=>!1,ZB=t=>BB.test(t),QB=t=>zB.test(t),JB=()=>{const t=bt("colors"),e=bt("spacing"),n=bt("blur"),r=bt("brightness"),s=bt("borderColor"),i=bt("borderRadius"),o=bt("borderSpacing"),l=bt("borderWidth"),u=bt("contrast"),d=bt("grayscale"),h=bt("hueRotate"),p=bt("invert"),g=bt("gap"),y=bt("gradientColorStops"),T=bt("gradientColorStopPositions"),x=bt("inset"),E=bt("margin"),A=bt("opacity"),S=bt("padding"),C=bt("saturate"),O=bt("scale"),M=bt("sepia"),D=bt("skew"),z=bt("space"),B=bt("translate"),$=()=>["auto","contain","none"],G=()=>["auto","hidden","clip","visible","scroll"],te=()=>["auto",qe,e],Q=()=>[qe,e],se=()=>["",Rs,Ti],re=()=>["auto",dl,qe],ge=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ue=()=>["solid","dashed","dotted","double","none"],pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],X=()=>["start","end","center","between","around","evenly","stretch"],Z=()=>["","0",qe],ne=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>[dl,qe];return{cacheSize:500,separator:":",theme:{colors:[jc],spacing:[Rs,Ti],blur:["none","",Si,qe],brightness:V(),borderColor:[t],borderRadius:["none","","full",Si,qe],borderSpacing:Q(),borderWidth:se(),contrast:V(),grayscale:Z(),hueRotate:V(),invert:Z(),gap:Q(),gradientColorStops:[t],gradientColorStopPositions:[$B,Ti],inset:te(),margin:te(),opacity:V(),padding:Q(),saturate:V(),scale:V(),sepia:Z(),skew:V(),space:Q(),translate:Q()},classGroups:{aspect:[{aspect:["auto","square","video",qe]}],container:["container"],columns:[{columns:[Si]}],"break-after":[{"break-after":ne()}],"break-before":[{"break-before":ne()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ge(),qe]}],overflow:[{overflow:G()}],"overflow-x":[{"overflow-x":G()}],"overflow-y":[{"overflow-y":G()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Nc,qe]}],basis:[{basis:te()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",qe]}],grow:[{grow:Z()}],shrink:[{shrink:Z()}],order:[{order:["first","last","none",Nc,qe]}],"grid-cols":[{"grid-cols":[jc]}],"col-start-end":[{col:["auto",{span:["full",Nc,qe]},qe]}],"col-start":[{"col-start":re()}],"col-end":[{"col-end":re()}],"grid-rows":[{"grid-rows":[jc]}],"row-start-end":[{row:["auto",{span:[Nc,qe]},qe]}],"row-start":[{"row-start":re()}],"row-end":[{"row-end":re()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",qe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",qe]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...X()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...X(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...X(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[z]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[z]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",qe,e]}],"min-w":[{"min-w":[qe,e,"min","max","fit"]}],"max-w":[{"max-w":[qe,e,"none","full","min","max","fit","prose",{screen:[Si]},Si]}],h:[{h:[qe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[qe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[qe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[qe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Si,Ti]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Vg]}],"font-family":[{font:[jc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",qe]}],"line-clamp":[{"line-clamp":["none",dl,Vg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Rs,qe]}],"list-image":[{"list-image":["none",qe]}],"list-style-type":[{list:["none","disc","decimal",qe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ue(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Rs,Ti]}],"underline-offset":[{"underline-offset":["auto",Rs,qe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",qe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",qe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ge(),HB]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",WB]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},KB]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[T]}],"gradient-via-pos":[{via:[T]}],"gradient-to-pos":[{to:[T]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[...ue(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:ue()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ue()]}],"outline-offset":[{"outline-offset":[Rs,qe]}],"outline-w":[{outline:[Rs,Ti]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[Rs,Ti]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Si,YB]}],"shadow-color":[{shadow:[jc]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":[...pe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":pe()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Si,qe]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[p]}],saturate:[{saturate:[C]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",qe]}],duration:[{duration:V()}],ease:[{ease:["linear","in","out","in-out",qe]}],delay:[{delay:V()}],animate:[{animate:["none","spin","ping","pulse","bounce",qe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[O]}],"scale-x":[{"scale-x":[O]}],"scale-y":[{"scale-y":[O]}],rotate:[{rotate:[Nc,qe]}],"translate-x":[{"translate-x":[B]}],"translate-y":[{"translate-y":[B]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",qe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",qe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Q()}],"scroll-mx":[{"scroll-mx":Q()}],"scroll-my":[{"scroll-my":Q()}],"scroll-ms":[{"scroll-ms":Q()}],"scroll-me":[{"scroll-me":Q()}],"scroll-mt":[{"scroll-mt":Q()}],"scroll-mr":[{"scroll-mr":Q()}],"scroll-mb":[{"scroll-mb":Q()}],"scroll-ml":[{"scroll-ml":Q()}],"scroll-p":[{"scroll-p":Q()}],"scroll-px":[{"scroll-px":Q()}],"scroll-py":[{"scroll-py":Q()}],"scroll-ps":[{"scroll-ps":Q()}],"scroll-pe":[{"scroll-pe":Q()}],"scroll-pt":[{"scroll-pt":Q()}],"scroll-pr":[{"scroll-pr":Q()}],"scroll-pb":[{"scroll-pb":Q()}],"scroll-pl":[{"scroll-pl":Q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",qe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Rs,Ti,Vg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},e4=NB(JB);function Ge(...t){return e4(gR(t))}const bR=_.forwardRef(({className:t,...e},n)=>w.jsx(fR,{ref:n,className:Ge("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));bR.displayName=fR.displayName;const t4=_.forwardRef(({className:t,...e},n)=>w.jsx(hR,{ref:n,className:Ge("aspect-square h-full w-full",t),...e}));t4.displayName=hR.displayName;const ER=_.forwardRef(({className:t,...e},n)=>w.jsx(pR,{ref:n,className:Ge("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));ER.displayName=pR.displayName;const R1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,k1=gR,r_=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return k1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],p=i==null?void 0:i[d];if(h===null)return null;const g=R1(h)||R1(p);return s[d][g]}),l=n&&Object.entries(n).reduce((d,h)=>{let[p,g]=h;return g===void 0||(d[p]=g),d},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:p,className:g,...y}=h;return Object.entries(y).every(T=>{let[x,E]=T;return Array.isArray(E)?E.includes({...i,...l}[x]):{...i,...l}[x]===E})?[...d,p,g]:d},[]);return k1(t,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},n4=r_("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function I1({className:t,variant:e,...n}){return w.jsx("div",{className:Ge(n4({variant:e}),t),...n})}const r4=({label:t,isExpanded:e,onToggle:n,level:r=0,children:s,isDarkMode:i,parentKey:o=""})=>{const l=()=>e?o.includes("emTransito")||o.includes("naBase")?i?"bg-gray-100 bg-opacity-10":"bg-blue-600 bg-opacity-10":i?"bg-gray-100 bg-opacity-15":"bg-blue-600 bg-opacity-15":"";return w.jsxs("div",{className:`${r>0?"ml-4 border-l-2 border-dashed border-gray-500 pl-4":""} mb-1`,children:[w.jsxs("div",{className:`flex items-center justify-between cursor-pointer h-10 px-3 rounded ${l()} ${!e&&(i?"hover:bg-zinc-800":"hover:bg-gray-50")}`,onClick:n,children:[w.jsx("span",{className:`text-xs ${i?"text-gray-300":"text-gray-700"}`,children:t}),s&&w.jsx(tr.div,{initial:!1,animate:{rotate:e?180:0},transition:{duration:.2},children:w.jsx(v0,{size:16})})]}),w.jsx(V3,{children:e&&w.jsx(tr.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},style:{overflow:"hidden"},className:"mt-2",children:s})})]})},s4=({items:t,level:e,isDarkMode:n})=>{const[r,s]=_.useState(null),i=o=>r===o?n?"bg-gray-100/5":"bg-blue-600/5":"";return w.jsx("div",{className:`space-y-1 ${e>0?"ml-2 border-l-2 border-dashed border-gray-500 pl-2":""}`,children:t.map(o=>w.jsx("button",{className:`flex w-full px-3 py-2 rounded-lg transition-colors ${i(o.id)} ${n?"hover:bg-zinc-800":"hover:bg-gray-50"}`,onClick:()=>s(o.id),children:w.jsxs("div",{className:"flex items-center justify-between w-full",children:[w.jsxs("div",{className:"flex flex-col",children:[w.jsx("span",{className:`text-xs text-start ${n?"text-gray-300":"text-gray-600"}`,children:o.label}),o.status==="offline"&&o.lastSeen&&w.jsxs("div",{className:"flex flex-col items-start mt-1",children:[w.jsx("span",{className:"text-[10px] text-gray-400",children:"ltima localizao:"}),w.jsx("span",{className:"text-[10px] text-gray-400",children:o.lastSeen})]})]}),w.jsx("div",{className:"flex items-center",children:o.status==="online"?w.jsx(L3,{size:18,className:"text-green-500"}):w.jsx(M3,{size:18,className:"text-red-500"})})]})},o.id))})},i4=({data:t,expandedItems:e,onToggleItem:n,isDarkMode:r})=>{const s=(i,o="",l=0)=>Array.isArray(i)?w.jsx(s4,{items:i,level:l,isDarkMode:r}):typeof i=="object"?Object.entries(i).map(([u,d])=>{if(u==="label")return null;const h=o?`${o}_${u}`:u;return u==="items"?s(d,o,l+1):w.jsx(r4,{label:d.label,isExpanded:!!e[h],onToggle:()=>n(h),level:l,isDarkMode:r,parentKey:h,children:s(d.items,h,l+1)},h)}):null;return w.jsxs("div",{className:"p-2 mt-1",children:[w.jsxs("div",{className:"gap-3 mb-2",children:[w.jsxs("div",{className:"flex items-center mb-2",children:[w.jsx("div",{className:"rounded-lg mr-2",children:w.jsx(y0,{size:18,strokeWidth:1.5,className:r?"text-gray-300":"text-gray-900"})}),w.jsx("p",{className:`text-xs ${r?"text-gray-300":"text-gray-900"}`,children:"Monitoramento"})]}),w.jsx("p",{className:`text-xs ${r?"text-gray-400":"text-gray-600"} mt-1`,children:"Acesse a cmera desejada atravs das abas abaixo:"})]}),w.jsx("div",{className:`h-[1px] ${r?"bg-gray-700":"bg-[#00000029]"}`}),w.jsx("div",{className:"space-y-1 mt-4",children:s(t)})]})};function Ce(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}var o4=h0[" useInsertionEffect ".trim().toString()]||Jt;function xl({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=a4({defaultProp:e,onChange:n}),l=t!==void 0,u=l?t:s;{const h=_.useRef(t!==void 0);_.useEffect(()=>{const p=h.current;p!==l&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const d=_.useCallback(h=>{var p;if(l){const g=l4(h)?h(t):h;g!==t&&((p=o.current)==null||p.call(o,g))}else i(h)},[l,t,i,o]);return[u,d]}function a4({defaultProp:t,onChange:e}){const[n,r]=_.useState(t),s=_.useRef(n),i=_.useRef(e);return o4(()=>{i.current=e},[e]),_.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function l4(t){return typeof t=="function"}function s_(t){const e=t+"CollectionProvider",[n,r]=ps(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:E,children:A}=x,S=je.useRef(null),C=je.useRef(new Map).current;return w.jsx(s,{scope:E,itemMap:C,collectionRef:S,children:A})};o.displayName=e;const l=t+"CollectionSlot",u=Uo(l),d=je.forwardRef((x,E)=>{const{scope:A,children:S}=x,C=i(l,A),O=ut(E,C.collectionRef);return w.jsx(u,{ref:O,children:S})});d.displayName=l;const h=t+"CollectionItemSlot",p="data-radix-collection-item",g=Uo(h),y=je.forwardRef((x,E)=>{const{scope:A,children:S,...C}=x,O=je.useRef(null),M=ut(E,O),D=i(h,A);return je.useEffect(()=>(D.itemMap.set(O,{ref:O,...C}),()=>void D.itemMap.delete(O))),w.jsx(g,{[p]:"",ref:M,children:S})});y.displayName=h;function T(x){const E=i(t+"CollectionConsumer",x);return je.useCallback(()=>{const S=E.collectionRef.current;if(!S)return[];const C=Array.from(S.querySelectorAll(`[${p}]`));return Array.from(E.itemMap.values()).sort((D,z)=>C.indexOf(D.ref.current)-C.indexOf(z.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:o,Slot:d,ItemSlot:y},T,r]}var c4=_.createContext(void 0);function i_(t){const e=_.useContext(c4);return t||e||"ltr"}function u4(t,e=globalThis==null?void 0:globalThis.document){const n=Ur(t);_.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var d4="DismissableLayer",ry="dismissableLayer.update",f4="dismissableLayer.pointerDownOutside",h4="dismissableLayer.focusOutside",O1,TR=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Yu=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...u}=t,d=_.useContext(TR),[h,p]=_.useState(null),g=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=_.useState({}),T=ut(e,z=>p(z)),x=Array.from(d.layers),[E]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),A=x.indexOf(E),S=h?x.indexOf(h):-1,C=d.layersWithOutsidePointerEventsDisabled.size>0,O=S>=A,M=g4(z=>{const B=z.target,$=[...d.branches].some(G=>G.contains(B));!O||$||(s==null||s(z),o==null||o(z),z.defaultPrevented||l==null||l())},g),D=v4(z=>{const B=z.target;[...d.branches].some(G=>G.contains(B))||(i==null||i(z),o==null||o(z),z.defaultPrevented||l==null||l())},g);return u4(z=>{S===d.layers.size-1&&(r==null||r(z),!z.defaultPrevented&&l&&(z.preventDefault(),l()))},g),_.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(O1=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),M1(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=O1)}},[h,g,n,d]),_.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),M1())},[h,d]),_.useEffect(()=>{const z=()=>y({});return document.addEventListener(ry,z),()=>document.removeEventListener(ry,z)},[]),w.jsx(Qe.div,{...u,ref:T,style:{pointerEvents:C?O?"auto":"none":void 0,...t.style},onFocusCapture:Ce(t.onFocusCapture,D.onFocusCapture),onBlurCapture:Ce(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:Ce(t.onPointerDownCapture,M.onPointerDownCapture)})});Yu.displayName=d4;var p4="DismissableLayerBranch",m4=_.forwardRef((t,e)=>{const n=_.useContext(TR),r=_.useRef(null),s=ut(e,r);return _.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),w.jsx(Qe.div,{...t,ref:s})});m4.displayName=p4;function g4(t,e=globalThis==null?void 0:globalThis.document){const n=Ur(t),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let u=function(){SR(f4,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=u,e.addEventListener("click",s.current,{once:!0})):u()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function v4(t,e=globalThis==null?void 0:globalThis.document){const n=Ur(t),r=_.useRef(!1);return _.useEffect(()=>{const s=i=>{i.target&&!r.current&&SR(h4,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function M1(){const t=new CustomEvent(ry);document.dispatchEvent(t)}function SR(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?iR(s,i):s.dispatchEvent(i)}var Ug=0;function o_(){_.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??L1()),document.body.insertAdjacentElement("beforeend",t[1]??L1()),Ug++,()=>{Ug===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ug--}},[])}function L1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Bg="focusScope.autoFocusOnMount",zg="focusScope.autoFocusOnUnmount",N1={bubbles:!1,cancelable:!0},y4="FocusScope",lp=_.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,u]=_.useState(null),d=Ur(s),h=Ur(i),p=_.useRef(null),g=ut(e,x=>u(x)),y=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let x=function(C){if(y.paused||!l)return;const O=C.target;l.contains(O)?p.current=O:Oi(p.current,{select:!0})},E=function(C){if(y.paused||!l)return;const O=C.relatedTarget;O!==null&&(l.contains(O)||Oi(p.current,{select:!0}))},A=function(C){if(document.activeElement===document.body)for(const M of C)M.removedNodes.length>0&&Oi(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",E);const S=new MutationObserver(A);return l&&S.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",E),S.disconnect()}}},[r,l,y.paused]),_.useEffect(()=>{if(l){D1.add(y);const x=document.activeElement;if(!l.contains(x)){const A=new CustomEvent(Bg,N1);l.addEventListener(Bg,d),l.dispatchEvent(A),A.defaultPrevented||(_4(T4(AR(l)),{select:!0}),document.activeElement===x&&Oi(l))}return()=>{l.removeEventListener(Bg,d),setTimeout(()=>{const A=new CustomEvent(zg,N1);l.addEventListener(zg,h),l.dispatchEvent(A),A.defaultPrevented||Oi(x??document.body,{select:!0}),l.removeEventListener(zg,h),D1.remove(y)},0)}}},[l,d,h,y]);const T=_.useCallback(x=>{if(!n&&!r||y.paused)return;const E=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,A=document.activeElement;if(E&&A){const S=x.currentTarget,[C,O]=w4(S);C&&O?!x.shiftKey&&A===O?(x.preventDefault(),n&&Oi(C,{select:!0})):x.shiftKey&&A===C&&(x.preventDefault(),n&&Oi(O,{select:!0})):A===S&&x.preventDefault()}},[n,r,y.paused]);return w.jsx(Qe.div,{tabIndex:-1,...o,ref:g,onKeyDown:T})});lp.displayName=y4;function _4(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Oi(r,{select:e}),document.activeElement!==n)return}function w4(t){const e=AR(t),n=j1(e,t),r=j1(e.reverse(),t);return[n,r]}function AR(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function j1(t,e){for(const n of t)if(!x4(n,{upTo:e}))return n}function x4(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function b4(t){return t instanceof HTMLInputElement&&"select"in t}function Oi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&b4(t)&&e&&t.select()}}var D1=E4();function E4(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=F1(t,e),t.unshift(e)},remove(e){var n;t=F1(t,e),(n=t[0])==null||n.resume()}}}function F1(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function T4(t){return t.filter(e=>e.tagName!=="A")}var S4=h0[" useId ".trim().toString()]||(()=>{}),A4=0;function ls(t){const[e,n]=_.useState(S4());return Jt(()=>{n(r=>r??String(A4++))},[t]),e?`radix-${e}`:""}const C4=["top","right","bottom","left"],qi=Math.min,sr=Math.max,gh=Math.round,Sf=Math.floor,cs=t=>({x:t,y:t}),P4={left:"right",right:"left",bottom:"top",top:"bottom"},R4={start:"end",end:"start"};function sy(t,e,n){return sr(t,qi(e,n))}function Vs(t,e){return typeof t=="function"?t(e):t}function Us(t){return t.split("-")[0]}function $l(t){return t.split("-")[1]}function a_(t){return t==="x"?"y":"x"}function l_(t){return t==="y"?"height":"width"}function Ds(t){return["top","bottom"].includes(Us(t))?"y":"x"}function c_(t){return a_(Ds(t))}function k4(t,e,n){n===void 0&&(n=!1);const r=$l(t),s=c_(t),i=l_(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=vh(o)),[o,vh(o)]}function I4(t){const e=vh(t);return[iy(t),e,iy(e)]}function iy(t){return t.replace(/start|end/g,e=>R4[e])}function O4(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function M4(t,e,n,r){const s=$l(t);let i=O4(Us(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(iy)))),i}function vh(t){return t.replace(/left|right|bottom|top/g,e=>P4[e])}function L4(t){return{top:0,right:0,bottom:0,left:0,...t}}function CR(t){return typeof t!="number"?L4(t):{top:t,right:t,bottom:t,left:t}}function yh(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function V1(t,e,n){let{reference:r,floating:s}=t;const i=Ds(e),o=c_(e),l=l_(o),u=Us(e),d=i==="y",h=r.x+r.width/2-s.width/2,p=r.y+r.height/2-s.height/2,g=r[l]/2-s[l]/2;let y;switch(u){case"top":y={x:h,y:r.y-s.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:p};break;case"left":y={x:r.x-s.width,y:p};break;default:y={x:r.x,y:r.y}}switch($l(e)){case"start":y[o]-=g*(n&&d?-1:1);break;case"end":y[o]+=g*(n&&d?-1:1);break}return y}const N4=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:p}=V1(d,r,u),g=r,y={},T=0;for(let x=0;x<l.length;x++){const{name:E,fn:A}=l[x],{x:S,y:C,data:O,reset:M}=await A({x:h,y:p,initialPlacement:r,placement:g,strategy:s,middlewareData:y,rects:d,platform:o,elements:{reference:t,floating:e}});h=S??h,p=C??p,y={...y,[E]:{...y[E],...O}},M&&T<=50&&(T++,typeof M=="object"&&(M.placement&&(g=M.placement),M.rects&&(d=M.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):M.rects),{x:h,y:p}=V1(d,g,u)),x=-1)}return{x:h,y:p,placement:g,strategy:s,middlewareData:y}};async function Cu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:g=!1,padding:y=0}=Vs(e,t),T=CR(y),E=l[g?p==="floating"?"reference":"floating":p],A=yh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(E)))==null||n?E:E.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:u})),S=p==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),O=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},M=yh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:S,offsetParent:C,strategy:u}):S);return{top:(A.top-M.top+T.top)/O.y,bottom:(M.bottom-A.bottom+T.bottom)/O.y,left:(A.left-M.left+T.left)/O.x,right:(M.right-A.right+T.right)/O.x}}const j4=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:u}=e,{element:d,padding:h=0}=Vs(t,e)||{};if(d==null)return{};const p=CR(h),g={x:n,y:r},y=c_(s),T=l_(y),x=await o.getDimensions(d),E=y==="y",A=E?"top":"left",S=E?"bottom":"right",C=E?"clientHeight":"clientWidth",O=i.reference[T]+i.reference[y]-g[y]-i.floating[T],M=g[y]-i.reference[y],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let z=D?D[C]:0;(!z||!await(o.isElement==null?void 0:o.isElement(D)))&&(z=l.floating[C]||i.floating[T]);const B=O/2-M/2,$=z/2-x[T]/2-1,G=qi(p[A],$),te=qi(p[S],$),Q=G,se=z-x[T]-te,re=z/2-x[T]/2+B,ge=sy(Q,re,se),ue=!u.arrow&&$l(s)!=null&&re!==ge&&i.reference[T]/2-(re<Q?G:te)-x[T]/2<0,pe=ue?re<Q?re-Q:re-se:0;return{[y]:g[y]+pe,data:{[y]:ge,centerOffset:re-ge-pe,...ue&&{alignmentOffset:pe}},reset:ue}}}),D4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:u,elements:d}=e,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:x=!0,...E}=Vs(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const A=Us(s),S=Ds(l),C=Us(l)===l,O=await(u.isRTL==null?void 0:u.isRTL(d.floating)),M=g||(C||!x?[vh(l)]:I4(l)),D=T!=="none";!g&&D&&M.push(...M4(l,x,T,O));const z=[l,...M],B=await Cu(e,E),$=[];let G=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&$.push(B[A]),p){const ge=k4(s,o,O);$.push(B[ge[0]],B[ge[1]])}if(G=[...G,{placement:s,overflows:$}],!$.every(ge=>ge<=0)){var te,Q;const ge=(((te=i.flip)==null?void 0:te.index)||0)+1,ue=z[ge];if(ue){var se;const X=p==="alignment"?S!==Ds(ue):!1,Z=((se=G[0])==null?void 0:se.overflows[0])>0;if(!X||Z)return{data:{index:ge,overflows:G},reset:{placement:ue}}}let pe=(Q=G.filter(X=>X.overflows[0]<=0).sort((X,Z)=>X.overflows[1]-Z.overflows[1])[0])==null?void 0:Q.placement;if(!pe)switch(y){case"bestFit":{var re;const X=(re=G.filter(Z=>{if(D){const ne=Ds(Z.placement);return ne===S||ne==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(ne=>ne>0).reduce((ne,V)=>ne+V,0)]).sort((Z,ne)=>Z[1]-ne[1])[0])==null?void 0:re[0];X&&(pe=X);break}case"initialPlacement":pe=l;break}if(s!==pe)return{reset:{placement:pe}}}return{}}}};function U1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function B1(t){return C4.some(e=>t[e]>=0)}const F4=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Vs(t,e);switch(r){case"referenceHidden":{const i=await Cu(e,{...s,elementContext:"reference"}),o=U1(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:B1(o)}}}case"escaped":{const i=await Cu(e,{...s,altBoundary:!0}),o=U1(i,n.floating);return{data:{escapedOffsets:o,escaped:B1(o)}}}default:return{}}}}};async function V4(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Us(n),l=$l(n),u=Ds(n)==="y",d=["left","top"].includes(o)?-1:1,h=i&&u?-1:1,p=Vs(e,t);let{mainAxis:g,crossAxis:y,alignmentAxis:T}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof T=="number"&&(y=l==="end"?T*-1:T),u?{x:y*h,y:g*d}:{x:g*d,y:y*h}}const U4=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=e,u=await V4(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:i+u.y,data:{...u,placement:o}}}}},B4=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:E=>{let{x:A,y:S}=E;return{x:A,y:S}}},...u}=Vs(t,e),d={x:n,y:r},h=await Cu(e,u),p=Ds(Us(s)),g=a_(p);let y=d[g],T=d[p];if(i){const E=g==="y"?"top":"left",A=g==="y"?"bottom":"right",S=y+h[E],C=y-h[A];y=sy(S,y,C)}if(o){const E=p==="y"?"top":"left",A=p==="y"?"bottom":"right",S=T+h[E],C=T-h[A];T=sy(S,T,C)}const x=l.fn({...e,[g]:y,[p]:T});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[g]:i,[p]:o}}}}}},z4=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:u=!0,crossAxis:d=!0}=Vs(t,e),h={x:n,y:r},p=Ds(s),g=a_(p);let y=h[g],T=h[p];const x=Vs(l,e),E=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(u){const C=g==="y"?"height":"width",O=i.reference[g]-i.floating[C]+E.mainAxis,M=i.reference[g]+i.reference[C]-E.mainAxis;y<O?y=O:y>M&&(y=M)}if(d){var A,S;const C=g==="y"?"width":"height",O=["top","left"].includes(Us(s)),M=i.reference[p]-i.floating[C]+(O&&((A=o.offset)==null?void 0:A[p])||0)+(O?0:E.crossAxis),D=i.reference[p]+i.reference[C]+(O?0:((S=o.offset)==null?void 0:S[p])||0)-(O?E.crossAxis:0);T<M?T=M:T>D&&(T=D)}return{[g]:y,[p]:T}}}},$4=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:u=()=>{},...d}=Vs(t,e),h=await Cu(e,d),p=Us(s),g=$l(s),y=Ds(s)==="y",{width:T,height:x}=i.floating;let E,A;p==="top"||p==="bottom"?(E=p,A=g===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(A=p,E=g==="end"?"top":"bottom");const S=x-h.top-h.bottom,C=T-h.left-h.right,O=qi(x-h[E],S),M=qi(T-h[A],C),D=!e.middlewareData.shift;let z=O,B=M;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(B=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(z=S),D&&!g){const G=sr(h.left,0),te=sr(h.right,0),Q=sr(h.top,0),se=sr(h.bottom,0);y?B=T-2*(G!==0||te!==0?G+te:sr(h.left,h.right)):z=x-2*(Q!==0||se!==0?Q+se:sr(h.top,h.bottom))}await u({...e,availableWidth:B,availableHeight:z});const $=await o.getDimensions(l.floating);return T!==$.width||x!==$.height?{reset:{rects:!0}}:{}}}};function cp(){return typeof window<"u"}function Gl(t){return PR(t)?(t.nodeName||"").toLowerCase():"#document"}function ar(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ms(t){var e;return(e=(PR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function PR(t){return cp()?t instanceof Node||t instanceof ar(t).Node:!1}function Br(t){return cp()?t instanceof Element||t instanceof ar(t).Element:!1}function ds(t){return cp()?t instanceof HTMLElement||t instanceof ar(t).HTMLElement:!1}function z1(t){return!cp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ar(t).ShadowRoot}function Xu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=zr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function G4(t){return["table","td","th"].includes(Gl(t))}function up(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function u_(t){const e=d_(),n=Br(t)?zr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function W4(t){let e=Ki(t);for(;ds(e)&&!bl(e);){if(u_(e))return e;if(up(e))return null;e=Ki(e)}return null}function d_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function bl(t){return["html","body","#document"].includes(Gl(t))}function zr(t){return ar(t).getComputedStyle(t)}function dp(t){return Br(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ki(t){if(Gl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||z1(t)&&t.host||ms(t);return z1(e)?e.host:e}function RR(t){const e=Ki(t);return bl(e)?t.ownerDocument?t.ownerDocument.body:t.body:ds(e)&&Xu(e)?e:RR(e)}function Pu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=RR(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=ar(s);if(i){const l=oy(o);return e.concat(o,o.visualViewport||[],Xu(s)?s:[],l&&n?Pu(l):[])}return e.concat(s,Pu(s,[],n))}function oy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function kR(t){const e=zr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ds(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=gh(n)!==i||gh(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function f_(t){return Br(t)?t:t.contextElement}function fl(t){const e=f_(t);if(!ds(e))return cs(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=kR(e);let o=(i?gh(n.width):n.width)/r,l=(i?gh(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const H4=cs(0);function IR(t){const e=ar(t);return!d_()||!e.visualViewport?H4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function q4(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ar(t)?!1:e}function Bo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=f_(t);let o=cs(1);e&&(r?Br(r)&&(o=fl(r)):o=fl(t));const l=q4(i,n,r)?IR(i):cs(0);let u=(s.left+l.x)/o.x,d=(s.top+l.y)/o.y,h=s.width/o.x,p=s.height/o.y;if(i){const g=ar(i),y=r&&Br(r)?ar(r):r;let T=g,x=oy(T);for(;x&&r&&y!==T;){const E=fl(x),A=x.getBoundingClientRect(),S=zr(x),C=A.left+(x.clientLeft+parseFloat(S.paddingLeft))*E.x,O=A.top+(x.clientTop+parseFloat(S.paddingTop))*E.y;u*=E.x,d*=E.y,h*=E.x,p*=E.y,u+=C,d+=O,T=ar(x),x=oy(T)}}return yh({width:h,height:p,x:u,y:d})}function h_(t,e){const n=dp(t).scrollLeft;return e?e.left+n:Bo(ms(t)).left+n}function OR(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:h_(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function K4(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=ms(r),l=e?up(e.floating):!1;if(r===o||l&&i)return n;let u={scrollLeft:0,scrollTop:0},d=cs(1);const h=cs(0),p=ds(r);if((p||!p&&!i)&&((Gl(r)!=="body"||Xu(o))&&(u=dp(r)),ds(r))){const y=Bo(r);d=fl(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const g=o&&!p&&!i?OR(o,u,!0):cs(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+h.x+g.x,y:n.y*d.y-u.scrollTop*d.y+h.y+g.y}}function Y4(t){return Array.from(t.getClientRects())}function X4(t){const e=ms(t),n=dp(t),r=t.ownerDocument.body,s=sr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=sr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+h_(t);const l=-n.scrollTop;return zr(r).direction==="rtl"&&(o+=sr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function Z4(t,e){const n=ar(t),r=ms(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,u=0;if(s){i=s.width,o=s.height;const d=d_();(!d||d&&e==="fixed")&&(l=s.offsetLeft,u=s.offsetTop)}return{width:i,height:o,x:l,y:u}}function Q4(t,e){const n=Bo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=ds(t)?fl(t):cs(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,u=s*i.x,d=r*i.y;return{width:o,height:l,x:u,y:d}}function $1(t,e,n){let r;if(e==="viewport")r=Z4(t,n);else if(e==="document")r=X4(ms(t));else if(Br(e))r=Q4(e,n);else{const s=IR(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return yh(r)}function MR(t,e){const n=Ki(t);return n===e||!Br(n)||bl(n)?!1:zr(n).position==="fixed"||MR(n,e)}function J4(t,e){const n=e.get(t);if(n)return n;let r=Pu(t,[],!1).filter(l=>Br(l)&&Gl(l)!=="body"),s=null;const i=zr(t).position==="fixed";let o=i?Ki(t):t;for(;Br(o)&&!bl(o);){const l=zr(o),u=u_(o);!u&&l.position==="fixed"&&(s=null),(i?!u&&!s:!u&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Xu(o)&&!u&&MR(t,o))?r=r.filter(h=>h!==o):s=l,o=Ki(o)}return e.set(t,r),r}function ez(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?up(e)?[]:J4(e,this._c):[].concat(n),r],l=o[0],u=o.reduce((d,h)=>{const p=$1(e,h,s);return d.top=sr(p.top,d.top),d.right=qi(p.right,d.right),d.bottom=qi(p.bottom,d.bottom),d.left=sr(p.left,d.left),d},$1(e,l,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function tz(t){const{width:e,height:n}=kR(t);return{width:e,height:n}}function nz(t,e,n){const r=ds(e),s=ms(e),i=n==="fixed",o=Bo(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const u=cs(0);function d(){u.x=h_(s)}if(r||!r&&!i)if((Gl(e)!=="body"||Xu(s))&&(l=dp(e)),r){const y=Bo(e,!0,i,e);u.x=y.x+e.clientLeft,u.y=y.y+e.clientTop}else s&&d();i&&!r&&s&&d();const h=s&&!r&&!i?OR(s,l):cs(0),p=o.left+l.scrollLeft-u.x-h.x,g=o.top+l.scrollTop-u.y-h.y;return{x:p,y:g,width:o.width,height:o.height}}function $g(t){return zr(t).position==="static"}function G1(t,e){if(!ds(t)||zr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ms(t)===n&&(n=n.ownerDocument.body),n}function LR(t,e){const n=ar(t);if(up(t))return n;if(!ds(t)){let s=Ki(t);for(;s&&!bl(s);){if(Br(s)&&!$g(s))return s;s=Ki(s)}return n}let r=G1(t,e);for(;r&&G4(r)&&$g(r);)r=G1(r,e);return r&&bl(r)&&$g(r)&&!u_(r)?n:r||W4(t)||n}const rz=async function(t){const e=this.getOffsetParent||LR,n=this.getDimensions,r=await n(t.floating);return{reference:nz(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function sz(t){return zr(t).direction==="rtl"}const iz={convertOffsetParentRelativeRectToViewportRelativeRect:K4,getDocumentElement:ms,getClippingRect:ez,getOffsetParent:LR,getElementRects:rz,getClientRects:Y4,getDimensions:tz,getScale:fl,isElement:Br,isRTL:sz};function NR(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function oz(t,e){let n=null,r;const s=ms(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),i();const d=t.getBoundingClientRect(),{left:h,top:p,width:g,height:y}=d;if(l||e(),!g||!y)return;const T=Sf(p),x=Sf(s.clientWidth-(h+g)),E=Sf(s.clientHeight-(p+y)),A=Sf(h),C={rootMargin:-T+"px "+-x+"px "+-E+"px "+-A+"px",threshold:sr(0,qi(1,u))||1};let O=!0;function M(D){const z=D[0].intersectionRatio;if(z!==u){if(!O)return o();z?o(!1,z):r=setTimeout(()=>{o(!1,1e-7)},1e3)}z===1&&!NR(d,t.getBoundingClientRect())&&o(),O=!1}try{n=new IntersectionObserver(M,{...C,root:s.ownerDocument})}catch{n=new IntersectionObserver(M,C)}n.observe(t)}return o(!0),i}function az(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=f_(t),h=s||i?[...d?Pu(d):[],...Pu(e)]:[];h.forEach(A=>{s&&A.addEventListener("scroll",n,{passive:!0}),i&&A.addEventListener("resize",n)});const p=d&&l?oz(d,n):null;let g=-1,y=null;o&&(y=new ResizeObserver(A=>{let[S]=A;S&&S.target===d&&y&&(y.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var C;(C=y)==null||C.observe(e)})),n()}),d&&!u&&y.observe(d),y.observe(e));let T,x=u?Bo(t):null;u&&E();function E(){const A=Bo(t);x&&!NR(x,A)&&n(),x=A,T=requestAnimationFrame(E)}return n(),()=>{var A;h.forEach(S=>{s&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),p==null||p(),(A=y)==null||A.disconnect(),y=null,u&&cancelAnimationFrame(T)}}const lz=U4,cz=B4,uz=D4,dz=$4,fz=F4,W1=j4,hz=z4,pz=(t,e,n)=>{const r=new Map,s={platform:iz,...n},i={...s.platform,_c:r};return N4(t,e,{...s,platform:i})};var Qf=typeof document<"u"?_.useLayoutEffect:_.useEffect;function _h(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!_h(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!_h(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function jR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function H1(t,e){const n=jR(t);return Math.round(e*n)/n}function Gg(t){const e=_.useRef(t);return Qf(()=>{e.current=t}),e}function mz(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:u,open:d}=t,[h,p]=_.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[g,y]=_.useState(r);_h(g,r)||y(r);const[T,x]=_.useState(null),[E,A]=_.useState(null),S=_.useCallback(X=>{X!==D.current&&(D.current=X,x(X))},[]),C=_.useCallback(X=>{X!==z.current&&(z.current=X,A(X))},[]),O=i||T,M=o||E,D=_.useRef(null),z=_.useRef(null),B=_.useRef(h),$=u!=null,G=Gg(u),te=Gg(s),Q=Gg(d),se=_.useCallback(()=>{if(!D.current||!z.current)return;const X={placement:e,strategy:n,middleware:g};te.current&&(X.platform=te.current),pz(D.current,z.current,X).then(Z=>{const ne={...Z,isPositioned:Q.current!==!1};re.current&&!_h(B.current,ne)&&(B.current=ne,Yo.flushSync(()=>{p(ne)}))})},[g,e,n,te,Q]);Qf(()=>{d===!1&&B.current.isPositioned&&(B.current.isPositioned=!1,p(X=>({...X,isPositioned:!1})))},[d]);const re=_.useRef(!1);Qf(()=>(re.current=!0,()=>{re.current=!1}),[]),Qf(()=>{if(O&&(D.current=O),M&&(z.current=M),O&&M){if(G.current)return G.current(O,M,se);se()}},[O,M,se,G,$]);const ge=_.useMemo(()=>({reference:D,floating:z,setReference:S,setFloating:C}),[S,C]),ue=_.useMemo(()=>({reference:O,floating:M}),[O,M]),pe=_.useMemo(()=>{const X={position:n,left:0,top:0};if(!ue.floating)return X;const Z=H1(ue.floating,h.x),ne=H1(ue.floating,h.y);return l?{...X,transform:"translate("+Z+"px, "+ne+"px)",...jR(ue.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Z,top:ne}},[n,l,ue.floating,h.x,h.y]);return _.useMemo(()=>({...h,update:se,refs:ge,elements:ue,floatingStyles:pe}),[h,se,ge,ue,pe])}const gz=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?W1({element:r.current,padding:s}).fn(n):{}:r?W1({element:r,padding:s}).fn(n):{}}}},vz=(t,e)=>({...lz(t),options:[t,e]}),yz=(t,e)=>({...cz(t),options:[t,e]}),_z=(t,e)=>({...hz(t),options:[t,e]}),wz=(t,e)=>({...uz(t),options:[t,e]}),xz=(t,e)=>({...dz(t),options:[t,e]}),bz=(t,e)=>({...fz(t),options:[t,e]}),Ez=(t,e)=>({...gz(t),options:[t,e]});var Tz="Arrow",DR=_.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return w.jsx(Qe.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:w.jsx("polygon",{points:"0,0 30,0 15,10"})})});DR.displayName=Tz;var Sz=DR;function Az(t){const[e,n]=_.useState(void 0);return Jt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const u=i.borderBoxSize,d=Array.isArray(u)?u[0]:u;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var p_="Popper",[FR,Wl]=ps(p_),[Cz,VR]=FR(p_),UR=t=>{const{__scopePopper:e,children:n}=t,[r,s]=_.useState(null);return w.jsx(Cz,{scope:e,anchor:r,onAnchorChange:s,children:n})};UR.displayName=p_;var BR="PopperAnchor",zR=_.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=VR(BR,n),o=_.useRef(null),l=ut(e,o);return _.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:w.jsx(Qe.div,{...s,ref:l})});zR.displayName=BR;var m_="PopperContent",[Pz,Rz]=FR(m_),$R=_.forwardRef((t,e)=>{var le,Te,ve,ke,Ye,Xe;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:p="partial",hideWhenDetached:g=!1,updatePositionStrategy:y="optimized",onPlaced:T,...x}=t,E=VR(m_,n),[A,S]=_.useState(null),C=ut(e,mt=>S(mt)),[O,M]=_.useState(null),D=Az(O),z=(D==null?void 0:D.width)??0,B=(D==null?void 0:D.height)??0,$=r+(i!=="center"?"-"+i:""),G=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},te=Array.isArray(d)?d:[d],Q=te.length>0,se={padding:G,boundary:te.filter(Iz),altBoundary:Q},{refs:re,floatingStyles:ge,placement:ue,isPositioned:pe,middlewareData:X}=mz({strategy:"fixed",placement:$,whileElementsMounted:(...mt)=>az(...mt,{animationFrame:y==="always"}),elements:{reference:E.anchor},middleware:[vz({mainAxis:s+B,alignmentAxis:o}),u&&yz({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?_z():void 0,...se}),u&&wz({...se}),xz({...se,apply:({elements:mt,rects:Ct,availableWidth:an,availableHeight:Lt})=>{const{width:Gt,height:Ys}=Ct.reference,On=mt.floating.style;On.setProperty("--radix-popper-available-width",`${an}px`),On.setProperty("--radix-popper-available-height",`${Lt}px`),On.setProperty("--radix-popper-anchor-width",`${Gt}px`),On.setProperty("--radix-popper-anchor-height",`${Ys}px`)}}),O&&Ez({element:O,padding:l}),Oz({arrowWidth:z,arrowHeight:B}),g&&bz({strategy:"referenceHidden",...se})]}),[Z,ne]=HR(ue),V=Ur(T);Jt(()=>{pe&&(V==null||V())},[pe,V]);const J=(le=X.arrow)==null?void 0:le.x,De=(Te=X.arrow)==null?void 0:Te.y,Ne=((ve=X.arrow)==null?void 0:ve.centerOffset)!==0,[ze,Ue]=_.useState();return Jt(()=>{A&&Ue(window.getComputedStyle(A).zIndex)},[A]),w.jsx("div",{ref:re.setFloating,"data-radix-popper-content-wrapper":"",style:{...ge,transform:pe?ge.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ze,"--radix-popper-transform-origin":[(ke=X.transformOrigin)==null?void 0:ke.x,(Ye=X.transformOrigin)==null?void 0:Ye.y].join(" "),...((Xe=X.hide)==null?void 0:Xe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:w.jsx(Pz,{scope:n,placedSide:Z,onArrowChange:M,arrowX:J,arrowY:De,shouldHideArrow:Ne,children:w.jsx(Qe.div,{"data-side":Z,"data-align":ne,...x,ref:C,style:{...x.style,animation:pe?void 0:"none"}})})})});$R.displayName=m_;var GR="PopperArrow",kz={top:"bottom",right:"left",bottom:"top",left:"right"},WR=_.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=Rz(GR,r),o=kz[i.placedSide];return w.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:w.jsx(Sz,{...s,ref:n,style:{...s.style,display:"block"}})})});WR.displayName=GR;function Iz(t){return t!==null}var Oz=t=>({name:"transformOrigin",options:t,fn(e){var E,A,S;const{placement:n,rects:r,middlewareData:s}=e,o=((E=s.arrow)==null?void 0:E.centerOffset)!==0,l=o?0:t.arrowWidth,u=o?0:t.arrowHeight,[d,h]=HR(n),p={start:"0%",center:"50%",end:"100%"}[h],g=(((A=s.arrow)==null?void 0:A.x)??0)+l/2,y=(((S=s.arrow)==null?void 0:S.y)??0)+u/2;let T="",x="";return d==="bottom"?(T=o?p:`${g}px`,x=`${-u}px`):d==="top"?(T=o?p:`${g}px`,x=`${r.floating.height+u}px`):d==="right"?(T=`${-u}px`,x=o?p:`${y}px`):d==="left"&&(T=`${r.floating.width+u}px`,x=o?p:`${y}px`),{data:{x:T,y:x}}}});function HR(t){const[e,n="center"]=t.split("-");return[e,n]}var g_=UR,v_=zR,y_=$R,__=WR,Mz="Portal",fp=_.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=_.useState(!1);Jt(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?gj.createPortal(w.jsx(Qe.div,{...r,ref:e}),o):null});fp.displayName=Mz;function Lz(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var Ws=t=>{const{present:e,children:n}=t,r=Nz(e),s=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),i=ut(r.ref,jz(s));return typeof n=="function"||r.isPresent?_.cloneElement(s,{ref:i}):null};Ws.displayName="Presence";function Nz(t){const[e,n]=_.useState(),r=_.useRef(null),s=_.useRef(t),i=_.useRef("none"),o=t?"mounted":"unmounted",[l,u]=Lz(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const d=Af(r.current);i.current=l==="mounted"?d:"none"},[l]),Jt(()=>{const d=r.current,h=s.current;if(h!==t){const g=i.current,y=Af(d);t?u("MOUNT"):y==="none"||(d==null?void 0:d.display)==="none"?u("UNMOUNT"):u(h&&g!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,u]),Jt(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,p=y=>{const x=Af(r.current).includes(y.animationName);if(y.target===e&&x&&(u("ANIMATION_END"),!s.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},g=y=>{y.target===e&&(i.current=Af(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:_.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function Af(t){return(t==null?void 0:t.animationName)||"none"}function jz(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Wg="rovingFocusGroup.onEntryFocus",Dz={bubbles:!1,cancelable:!0},Zu="RovingFocusGroup",[ay,qR,Fz]=s_(Zu),[Vz,KR]=ps(Zu,[Fz]),[Uz,Bz]=Vz(Zu),YR=_.forwardRef((t,e)=>w.jsx(ay.Provider,{scope:t.__scopeRovingFocusGroup,children:w.jsx(ay.Slot,{scope:t.__scopeRovingFocusGroup,children:w.jsx(zz,{...t,ref:e})})}));YR.displayName=Zu;var zz=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...p}=t,g=_.useRef(null),y=ut(e,g),T=i_(i),[x,E]=xl({prop:o,defaultProp:l??null,onChange:u,caller:Zu}),[A,S]=_.useState(!1),C=Ur(d),O=qR(n),M=_.useRef(!1),[D,z]=_.useState(0);return _.useEffect(()=>{const B=g.current;if(B)return B.addEventListener(Wg,C),()=>B.removeEventListener(Wg,C)},[C]),w.jsx(Uz,{scope:n,orientation:r,dir:T,loop:s,currentTabStopId:x,onItemFocus:_.useCallback(B=>E(B),[E]),onItemShiftTab:_.useCallback(()=>S(!0),[]),onFocusableItemAdd:_.useCallback(()=>z(B=>B+1),[]),onFocusableItemRemove:_.useCallback(()=>z(B=>B-1),[]),children:w.jsx(Qe.div,{tabIndex:A||D===0?-1:0,"data-orientation":r,...p,ref:y,style:{outline:"none",...t.style},onMouseDown:Ce(t.onMouseDown,()=>{M.current=!0}),onFocus:Ce(t.onFocus,B=>{const $=!M.current;if(B.target===B.currentTarget&&$&&!A){const G=new CustomEvent(Wg,Dz);if(B.currentTarget.dispatchEvent(G),!G.defaultPrevented){const te=O().filter(ue=>ue.focusable),Q=te.find(ue=>ue.active),se=te.find(ue=>ue.id===x),ge=[Q,se,...te].filter(Boolean).map(ue=>ue.ref.current);QR(ge,h)}}M.current=!1}),onBlur:Ce(t.onBlur,()=>S(!1))})})}),XR="RovingFocusGroupItem",ZR=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...l}=t,u=ls(),d=i||u,h=Bz(XR,n),p=h.currentTabStopId===d,g=qR(n),{onFocusableItemAdd:y,onFocusableItemRemove:T,currentTabStopId:x}=h;return _.useEffect(()=>{if(r)return y(),()=>T()},[r,y,T]),w.jsx(ay.ItemSlot,{scope:n,id:d,focusable:r,active:s,children:w.jsx(Qe.span,{tabIndex:p?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:Ce(t.onMouseDown,E=>{r?h.onItemFocus(d):E.preventDefault()}),onFocus:Ce(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:Ce(t.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){h.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const A=Wz(E,h.orientation,h.dir);if(A!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let C=g().filter(O=>O.focusable).map(O=>O.ref.current);if(A==="last")C.reverse();else if(A==="prev"||A==="next"){A==="prev"&&C.reverse();const O=C.indexOf(E.currentTarget);C=h.loop?Hz(C,O+1):C.slice(O+1)}setTimeout(()=>QR(C))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:x!=null}):o})})});ZR.displayName=XR;var $z={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Gz(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Wz(t,e,n){const r=Gz(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return $z[r]}function QR(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Hz(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var qz=YR,Kz=ZR,Yz=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ja=new WeakMap,Cf=new WeakMap,Pf={},Hg=0,JR=function(t){return t&&(t.host||JR(t.parentNode))},Xz=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=JR(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Zz=function(t,e,n,r){var s=Xz(e,Array.isArray(t)?t:[t]);Pf[n]||(Pf[n]=new WeakMap);var i=Pf[n],o=[],l=new Set,u=new Set(s),d=function(p){!p||l.has(p)||(l.add(p),d(p.parentNode))};s.forEach(d);var h=function(p){!p||u.has(p)||Array.prototype.forEach.call(p.children,function(g){if(l.has(g))h(g);else try{var y=g.getAttribute(r),T=y!==null&&y!=="false",x=(ja.get(g)||0)+1,E=(i.get(g)||0)+1;ja.set(g,x),i.set(g,E),o.push(g),x===1&&T&&Cf.set(g,!0),E===1&&g.setAttribute(n,"true"),T||g.setAttribute(r,"true")}catch(A){console.error("aria-hidden: cannot operate on ",g,A)}})};return h(e),l.clear(),Hg++,function(){o.forEach(function(p){var g=ja.get(p)-1,y=i.get(p)-1;ja.set(p,g),i.set(p,y),g||(Cf.has(p)||p.removeAttribute(r),Cf.delete(p)),y||p.removeAttribute(n)}),Hg--,Hg||(ja=new WeakMap,ja=new WeakMap,Cf=new WeakMap,Pf={})}},w_=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=Yz(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),Zz(r,s,n,"aria-hidden")):function(){return null}},ts=function(){return ts=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ts.apply(this,arguments)};function ek(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Qz(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Jf="right-scroll-bar-position",eh="width-before-scroll-bar",Jz="with-scroll-bars-hidden",e5="--removed-body-scroll-bar-size";function qg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function t5(t,e){var n=_.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var n5=typeof window<"u"?_.useLayoutEffect:_.useEffect,q1=new WeakMap;function r5(t,e){var n=t5(null,function(r){return t.forEach(function(s){return qg(s,r)})});return n5(function(){var r=q1.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(l){i.has(l)||qg(l,null)}),i.forEach(function(l){s.has(l)||qg(l,o)})}q1.set(n,t)},[t]),n}function s5(t){return t}function i5(t,e){e===void 0&&(e=s5);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var u=function(){var h=o;o=[],h.forEach(i)},d=function(){return Promise.resolve().then(u)};d(),n={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),n}}}};return s}function o5(t){t===void 0&&(t={});var e=i5(null);return e.options=ts({async:!0,ssr:!1},t),e}var tk=function(t){var e=t.sideCar,n=ek(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,ts({},n))};tk.isSideCarExport=!0;function a5(t,e){return t.useMedium(e),tk}var nk=o5(),Kg=function(){},hp=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:Kg,onWheelCapture:Kg,onTouchMoveCapture:Kg}),s=r[0],i=r[1],o=t.forwardProps,l=t.children,u=t.className,d=t.removeScrollBar,h=t.enabled,p=t.shards,g=t.sideCar,y=t.noRelative,T=t.noIsolation,x=t.inert,E=t.allowPinchZoom,A=t.as,S=A===void 0?"div":A,C=t.gapMode,O=ek(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=g,D=r5([n,e]),z=ts(ts({},O),s);return _.createElement(_.Fragment,null,h&&_.createElement(M,{sideCar:nk,removeScrollBar:d,shards:p,noRelative:y,noIsolation:T,inert:x,setCallbacks:i,allowPinchZoom:!!E,lockRef:n,gapMode:C}),o?_.cloneElement(_.Children.only(l),ts(ts({},z),{ref:D})):_.createElement(S,ts({},z,{className:u,ref:D}),l))});hp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};hp.classNames={fullWidth:eh,zeroRight:Jf};var l5=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function c5(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=l5();return e&&t.setAttribute("nonce",e),t}function u5(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function d5(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var f5=function(){var t=0,e=null;return{add:function(n){t==0&&(e=c5())&&(u5(e,n),d5(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},h5=function(){var t=f5();return function(e,n){_.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},rk=function(){var t=h5(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},p5={left:0,top:0,right:0,gap:0},Yg=function(t){return parseInt(t||"",10)||0},m5=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Yg(n),Yg(r),Yg(s)]},g5=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return p5;var e=m5(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},v5=rk(),hl="data-scroll-locked",y5=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Jz,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(hl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Jf,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(eh,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Jf," .").concat(Jf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(eh," .").concat(eh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(hl,`] {
    `).concat(e5,": ").concat(l,`px;
  }
`)},K1=function(){var t=parseInt(document.body.getAttribute(hl)||"0",10);return isFinite(t)?t:0},_5=function(){_.useEffect(function(){return document.body.setAttribute(hl,(K1()+1).toString()),function(){var t=K1()-1;t<=0?document.body.removeAttribute(hl):document.body.setAttribute(hl,t.toString())}},[])},w5=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;_5();var i=_.useMemo(function(){return g5(s)},[s]);return _.createElement(v5,{styles:y5(i,!e,s,n?"":"!important")})},ly=!1;if(typeof window<"u")try{var Rf=Object.defineProperty({},"passive",{get:function(){return ly=!0,!0}});window.addEventListener("test",Rf,Rf),window.removeEventListener("test",Rf,Rf)}catch{ly=!1}var Da=ly?{passive:!1}:!1,x5=function(t){return t.tagName==="TEXTAREA"},sk=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!x5(t)&&n[e]==="visible")},b5=function(t){return sk(t,"overflowY")},E5=function(t){return sk(t,"overflowX")},Y1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=ik(t,r);if(s){var i=ok(t,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},T5=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},S5=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},ik=function(t,e){return t==="v"?b5(e):E5(e)},ok=function(t,e){return t==="v"?T5(e):S5(e)},A5=function(t,e){return t==="h"&&e==="rtl"?-1:1},C5=function(t,e,n,r,s){var i=A5(t,window.getComputedStyle(e).direction),o=i*r,l=n.target,u=e.contains(l),d=!1,h=o>0,p=0,g=0;do{var y=ok(t,l),T=y[0],x=y[1],E=y[2],A=x-E-i*T;(T||A)&&ik(t,l)&&(p+=A,g+=T),l=l.parentNode.host||l.parentNode}while(!u&&l!==document.body||u&&(e.contains(l)||e===l));return(h&&Math.abs(p)<1||!h&&Math.abs(g)<1)&&(d=!0),d},kf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},X1=function(t){return[t.deltaX,t.deltaY]},Z1=function(t){return t&&"current"in t?t.current:t},P5=function(t,e){return t[0]===e[0]&&t[1]===e[1]},R5=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},k5=0,Fa=[];function I5(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),s=_.useState(k5++)[0],i=_.useState(rk)[0],o=_.useRef(t);_.useEffect(function(){o.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var x=Qz([t.lockRef.current],(t.shards||[]).map(Z1),!0).filter(Boolean);return x.forEach(function(E){return E.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=_.useCallback(function(x,E){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var A=kf(x),S=n.current,C="deltaX"in x?x.deltaX:S[0]-A[0],O="deltaY"in x?x.deltaY:S[1]-A[1],M,D=x.target,z=Math.abs(C)>Math.abs(O)?"h":"v";if("touches"in x&&z==="h"&&D.type==="range")return!1;var B=Y1(z,D);if(!B)return!0;if(B?M=z:(M=z==="v"?"h":"v",B=Y1(z,D)),!B)return!1;if(!r.current&&"changedTouches"in x&&(C||O)&&(r.current=M),!M)return!0;var $=r.current||M;return C5($,E,x,$==="h"?C:O)},[]),u=_.useCallback(function(x){var E=x;if(!(!Fa.length||Fa[Fa.length-1]!==i)){var A="deltaY"in E?X1(E):kf(E),S=e.current.filter(function(M){return M.name===E.type&&(M.target===E.target||E.target===M.shadowParent)&&P5(M.delta,A)})[0];if(S&&S.should){E.cancelable&&E.preventDefault();return}if(!S){var C=(o.current.shards||[]).map(Z1).filter(Boolean).filter(function(M){return M.contains(E.target)}),O=C.length>0?l(E,C[0]):!o.current.noIsolation;O&&E.cancelable&&E.preventDefault()}}},[]),d=_.useCallback(function(x,E,A,S){var C={name:x,delta:E,target:A,should:S,shadowParent:O5(A)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(O){return O!==C})},1)},[]),h=_.useCallback(function(x){n.current=kf(x),r.current=void 0},[]),p=_.useCallback(function(x){d(x.type,X1(x),x.target,l(x,t.lockRef.current))},[]),g=_.useCallback(function(x){d(x.type,kf(x),x.target,l(x,t.lockRef.current))},[]);_.useEffect(function(){return Fa.push(i),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:g}),document.addEventListener("wheel",u,Da),document.addEventListener("touchmove",u,Da),document.addEventListener("touchstart",h,Da),function(){Fa=Fa.filter(function(x){return x!==i}),document.removeEventListener("wheel",u,Da),document.removeEventListener("touchmove",u,Da),document.removeEventListener("touchstart",h,Da)}},[]);var y=t.removeScrollBar,T=t.inert;return _.createElement(_.Fragment,null,T?_.createElement(i,{styles:R5(s)}):null,y?_.createElement(w5,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function O5(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const M5=a5(nk,I5);var pp=_.forwardRef(function(t,e){return _.createElement(hp,ts({},t,{ref:e,sideCar:M5}))});pp.classNames=hp.classNames;var cy=["Enter"," "],L5=["ArrowDown","PageUp","Home"],ak=["ArrowUp","PageDown","End"],N5=[...L5,...ak],j5={ltr:[...cy,"ArrowRight"],rtl:[...cy,"ArrowLeft"]},D5={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Qu="Menu",[Ru,F5,V5]=s_(Qu),[Qo,lk]=ps(Qu,[V5,Wl,KR]),mp=Wl(),ck=KR(),[U5,Jo]=Qo(Qu),[B5,Ju]=Qo(Qu),uk=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=t,l=mp(e),[u,d]=_.useState(null),h=_.useRef(!1),p=Ur(i),g=i_(s);return _.useEffect(()=>{const y=()=>{h.current=!0,document.addEventListener("pointerdown",T,{capture:!0,once:!0}),document.addEventListener("pointermove",T,{capture:!0,once:!0})},T=()=>h.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",T,{capture:!0}),document.removeEventListener("pointermove",T,{capture:!0})}},[]),w.jsx(g_,{...l,children:w.jsx(U5,{scope:e,open:n,onOpenChange:p,content:u,onContentChange:d,children:w.jsx(B5,{scope:e,onClose:_.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:h,dir:g,modal:o,children:r})})})};uk.displayName=Qu;var z5="MenuAnchor",x_=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=mp(n);return w.jsx(v_,{...s,...r,ref:e})});x_.displayName=z5;var b_="MenuPortal",[$5,dk]=Qo(b_,{forceMount:void 0}),fk=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=Jo(b_,e);return w.jsx($5,{scope:e,forceMount:n,children:w.jsx(Ws,{present:n||i.open,children:w.jsx(fp,{asChild:!0,container:s,children:r})})})};fk.displayName=b_;var xr="MenuContent",[G5,E_]=Qo(xr),hk=_.forwardRef((t,e)=>{const n=dk(xr,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Jo(xr,t.__scopeMenu),o=Ju(xr,t.__scopeMenu);return w.jsx(Ru.Provider,{scope:t.__scopeMenu,children:w.jsx(Ws,{present:r||i.open,children:w.jsx(Ru.Slot,{scope:t.__scopeMenu,children:o.modal?w.jsx(W5,{...s,ref:e}):w.jsx(H5,{...s,ref:e})})})})}),W5=_.forwardRef((t,e)=>{const n=Jo(xr,t.__scopeMenu),r=_.useRef(null),s=ut(e,r);return _.useEffect(()=>{const i=r.current;if(i)return w_(i)},[]),w.jsx(T_,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ce(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),H5=_.forwardRef((t,e)=>{const n=Jo(xr,t.__scopeMenu);return w.jsx(T_,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),q5=Uo("MenuContent.ScrollLock"),T_=_.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:u,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:g,onDismiss:y,disableOutsideScroll:T,...x}=t,E=Jo(xr,n),A=Ju(xr,n),S=mp(n),C=ck(n),O=F5(n),[M,D]=_.useState(null),z=_.useRef(null),B=ut(e,z,E.onContentChange),$=_.useRef(0),G=_.useRef(""),te=_.useRef(0),Q=_.useRef(null),se=_.useRef("right"),re=_.useRef(0),ge=T?pp:_.Fragment,ue=T?{as:q5,allowPinchZoom:!0}:void 0,pe=Z=>{var le,Te;const ne=G.current+Z,V=O().filter(ve=>!ve.disabled),J=document.activeElement,De=(le=V.find(ve=>ve.ref.current===J))==null?void 0:le.textValue,Ne=V.map(ve=>ve.textValue),ze=i6(Ne,ne,De),Ue=(Te=V.find(ve=>ve.textValue===ze))==null?void 0:Te.ref.current;(function ve(ke){G.current=ke,window.clearTimeout($.current),ke!==""&&($.current=window.setTimeout(()=>ve(""),1e3))})(ne),Ue&&setTimeout(()=>Ue.focus())};_.useEffect(()=>()=>window.clearTimeout($.current),[]),o_();const X=_.useCallback(Z=>{var V,J;return se.current===((V=Q.current)==null?void 0:V.side)&&a6(Z,(J=Q.current)==null?void 0:J.area)},[]);return w.jsx(G5,{scope:n,searchRef:G,onItemEnter:_.useCallback(Z=>{X(Z)&&Z.preventDefault()},[X]),onItemLeave:_.useCallback(Z=>{var ne;X(Z)||((ne=z.current)==null||ne.focus(),D(null))},[X]),onTriggerLeave:_.useCallback(Z=>{X(Z)&&Z.preventDefault()},[X]),pointerGraceTimerRef:te,onPointerGraceIntentChange:_.useCallback(Z=>{Q.current=Z},[]),children:w.jsx(ge,{...ue,children:w.jsx(lp,{asChild:!0,trapped:s,onMountAutoFocus:Ce(i,Z=>{var ne;Z.preventDefault(),(ne=z.current)==null||ne.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:w.jsx(Yu,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:g,onDismiss:y,children:w.jsx(qz,{asChild:!0,...C,dir:A.dir,orientation:"vertical",loop:r,currentTabStopId:M,onCurrentTabStopIdChange:D,onEntryFocus:Ce(u,Z=>{A.isUsingKeyboardRef.current||Z.preventDefault()}),preventScrollOnEntryFocus:!0,children:w.jsx(y_,{role:"menu","aria-orientation":"vertical","data-state":Rk(E.open),"data-radix-menu-content":"",dir:A.dir,...S,...x,ref:B,style:{outline:"none",...x.style},onKeyDown:Ce(x.onKeyDown,Z=>{const V=Z.target.closest("[data-radix-menu-content]")===Z.currentTarget,J=Z.ctrlKey||Z.altKey||Z.metaKey,De=Z.key.length===1;V&&(Z.key==="Tab"&&Z.preventDefault(),!J&&De&&pe(Z.key));const Ne=z.current;if(Z.target!==Ne||!N5.includes(Z.key))return;Z.preventDefault();const Ue=O().filter(le=>!le.disabled).map(le=>le.ref.current);ak.includes(Z.key)&&Ue.reverse(),r6(Ue)}),onBlur:Ce(t.onBlur,Z=>{Z.currentTarget.contains(Z.target)||(window.clearTimeout($.current),G.current="")}),onPointerMove:Ce(t.onPointerMove,ku(Z=>{const ne=Z.target,V=re.current!==Z.clientX;if(Z.currentTarget.contains(ne)&&V){const J=Z.clientX>re.current?"right":"left";se.current=J,re.current=Z.clientX}}))})})})})})})});hk.displayName=xr;var K5="MenuGroup",S_=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return w.jsx(Qe.div,{role:"group",...r,ref:e})});S_.displayName=K5;var Y5="MenuLabel",pk=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return w.jsx(Qe.div,{...r,ref:e})});pk.displayName=Y5;var wh="MenuItem",Q1="menu.itemSelect",gp=_.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=_.useRef(null),o=Ju(wh,t.__scopeMenu),l=E_(wh,t.__scopeMenu),u=ut(e,i),d=_.useRef(!1),h=()=>{const p=i.current;if(!n&&p){const g=new CustomEvent(Q1,{bubbles:!0,cancelable:!0});p.addEventListener(Q1,y=>r==null?void 0:r(y),{once:!0}),iR(p,g),g.defaultPrevented?d.current=!1:o.onClose()}};return w.jsx(mk,{...s,ref:u,disabled:n,onClick:Ce(t.onClick,h),onPointerDown:p=>{var g;(g=t.onPointerDown)==null||g.call(t,p),d.current=!0},onPointerUp:Ce(t.onPointerUp,p=>{var g;d.current||(g=p.currentTarget)==null||g.click()}),onKeyDown:Ce(t.onKeyDown,p=>{const g=l.searchRef.current!=="";n||g&&p.key===" "||cy.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});gp.displayName=wh;var mk=_.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,o=E_(wh,n),l=ck(n),u=_.useRef(null),d=ut(e,u),[h,p]=_.useState(!1),[g,y]=_.useState("");return _.useEffect(()=>{const T=u.current;T&&y((T.textContent??"").trim())},[i.children]),w.jsx(Ru.ItemSlot,{scope:n,disabled:r,textValue:s??g,children:w.jsx(Kz,{asChild:!0,...l,focusable:!r,children:w.jsx(Qe.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:d,onPointerMove:Ce(t.onPointerMove,ku(T=>{r?o.onItemLeave(T):(o.onItemEnter(T),T.defaultPrevented||T.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ce(t.onPointerLeave,ku(T=>o.onItemLeave(T))),onFocus:Ce(t.onFocus,()=>p(!0)),onBlur:Ce(t.onBlur,()=>p(!1))})})})}),X5="MenuCheckboxItem",gk=_.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return w.jsx(xk,{scope:t.__scopeMenu,checked:n,children:w.jsx(gp,{role:"menuitemcheckbox","aria-checked":xh(n)?"mixed":n,...s,ref:e,"data-state":C_(n),onSelect:Ce(s.onSelect,()=>r==null?void 0:r(xh(n)?!0:!n),{checkForDefaultPrevented:!1})})})});gk.displayName=X5;var vk="MenuRadioGroup",[Z5,Q5]=Qo(vk,{value:void 0,onValueChange:()=>{}}),yk=_.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=Ur(r);return w.jsx(Z5,{scope:t.__scopeMenu,value:n,onValueChange:i,children:w.jsx(S_,{...s,ref:e})})});yk.displayName=vk;var _k="MenuRadioItem",wk=_.forwardRef((t,e)=>{const{value:n,...r}=t,s=Q5(_k,t.__scopeMenu),i=n===s.value;return w.jsx(xk,{scope:t.__scopeMenu,checked:i,children:w.jsx(gp,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":C_(i),onSelect:Ce(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});wk.displayName=_k;var A_="MenuItemIndicator",[xk,J5]=Qo(A_,{checked:!1}),bk=_.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=J5(A_,n);return w.jsx(Ws,{present:r||xh(i.checked)||i.checked===!0,children:w.jsx(Qe.span,{...s,ref:e,"data-state":C_(i.checked)})})});bk.displayName=A_;var e6="MenuSeparator",Ek=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return w.jsx(Qe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Ek.displayName=e6;var t6="MenuArrow",Tk=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=mp(n);return w.jsx(__,{...s,...r,ref:e})});Tk.displayName=t6;var n6="MenuSub",[Pre,Sk]=Qo(n6),Qc="MenuSubTrigger",Ak=_.forwardRef((t,e)=>{const n=Jo(Qc,t.__scopeMenu),r=Ju(Qc,t.__scopeMenu),s=Sk(Qc,t.__scopeMenu),i=E_(Qc,t.__scopeMenu),o=_.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:u}=i,d={__scopeMenu:t.__scopeMenu},h=_.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return _.useEffect(()=>h,[h]),_.useEffect(()=>{const p=l.current;return()=>{window.clearTimeout(p),u(null)}},[l,u]),w.jsx(x_,{asChild:!0,...d,children:w.jsx(mk,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":Rk(n.open),...t,ref:ap(e,s.onTriggerChange),onClick:p=>{var g;(g=t.onClick)==null||g.call(t,p),!(t.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ce(t.onPointerMove,ku(p=>{i.onItemEnter(p),!p.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:Ce(t.onPointerLeave,ku(p=>{var y,T;h();const g=(y=n.content)==null?void 0:y.getBoundingClientRect();if(g){const x=(T=n.content)==null?void 0:T.dataset.side,E=x==="right",A=E?-5:5,S=g[E?"left":"right"],C=g[E?"right":"left"];i.onPointerGraceIntentChange({area:[{x:p.clientX+A,y:p.clientY},{x:S,y:g.top},{x:C,y:g.top},{x:C,y:g.bottom},{x:S,y:g.bottom}],side:x}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(p),p.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ce(t.onKeyDown,p=>{var y;const g=i.searchRef.current!=="";t.disabled||g&&p.key===" "||j5[r.dir].includes(p.key)&&(n.onOpenChange(!0),(y=n.content)==null||y.focus(),p.preventDefault())})})})});Ak.displayName=Qc;var Ck="MenuSubContent",Pk=_.forwardRef((t,e)=>{const n=dk(xr,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Jo(xr,t.__scopeMenu),o=Ju(xr,t.__scopeMenu),l=Sk(Ck,t.__scopeMenu),u=_.useRef(null),d=ut(e,u);return w.jsx(Ru.Provider,{scope:t.__scopeMenu,children:w.jsx(Ws,{present:r||i.open,children:w.jsx(Ru.Slot,{scope:t.__scopeMenu,children:w.jsx(T_,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var p;o.isUsingKeyboardRef.current&&((p=u.current)==null||p.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:Ce(t.onFocusOutside,h=>{h.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ce(t.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:Ce(t.onKeyDown,h=>{var y;const p=h.currentTarget.contains(h.target),g=D5[o.dir].includes(h.key);p&&g&&(i.onOpenChange(!1),(y=l.trigger)==null||y.focus(),h.preventDefault())})})})})})});Pk.displayName=Ck;function Rk(t){return t?"open":"closed"}function xh(t){return t==="indeterminate"}function C_(t){return xh(t)?"indeterminate":t?"checked":"unchecked"}function r6(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function s6(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function i6(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=s6(t,Math.max(i,0));s.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function o6(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],u=e[o],d=l.x,h=l.y,p=u.x,g=u.y;h>r!=g>r&&n<(p-d)*(r-h)/(g-h)+d&&(s=!s)}return s}function a6(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return o6(n,e)}function ku(t){return e=>e.pointerType==="mouse"?t(e):void 0}var l6=uk,c6=x_,u6=fk,d6=hk,f6=S_,h6=pk,p6=gp,m6=gk,g6=yk,v6=wk,y6=bk,_6=Ek,w6=Tk,x6=Ak,b6=Pk,vp="DropdownMenu",[E6,Rre]=ps(vp,[lk]),In=lk(),[T6,kk]=E6(vp),Ik=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:l=!0}=t,u=In(e),d=_.useRef(null),[h,p]=xl({prop:s,defaultProp:i??!1,onChange:o,caller:vp});return w.jsx(T6,{scope:e,triggerId:ls(),triggerRef:d,contentId:ls(),open:h,onOpenChange:p,onOpenToggle:_.useCallback(()=>p(g=>!g),[p]),modal:l,children:w.jsx(l6,{...u,open:h,onOpenChange:p,dir:r,modal:l,children:n})})};Ik.displayName=vp;var Ok="DropdownMenuTrigger",Mk=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=kk(Ok,n),o=In(n);return w.jsx(c6,{asChild:!0,...o,children:w.jsx(Qe.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:ap(e,i.triggerRef),onPointerDown:Ce(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Ce(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Mk.displayName=Ok;var S6="DropdownMenuPortal",Lk=t=>{const{__scopeDropdownMenu:e,...n}=t,r=In(e);return w.jsx(u6,{...r,...n})};Lk.displayName=S6;var Nk="DropdownMenuContent",jk=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=kk(Nk,n),i=In(n),o=_.useRef(!1);return w.jsx(d6,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:Ce(t.onCloseAutoFocus,l=>{var u;o.current||(u=s.triggerRef.current)==null||u.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ce(t.onInteractOutside,l=>{const u=l.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0,h=u.button===2||d;(!s.modal||h)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jk.displayName=Nk;var A6="DropdownMenuGroup",C6=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return w.jsx(f6,{...s,...r,ref:e})});C6.displayName=A6;var P6="DropdownMenuLabel",Dk=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return w.jsx(h6,{...s,...r,ref:e})});Dk.displayName=P6;var R6="DropdownMenuItem",Fk=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return w.jsx(p6,{...s,...r,ref:e})});Fk.displayName=R6;var k6="DropdownMenuCheckboxItem",Vk=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return w.jsx(m6,{...s,...r,ref:e})});Vk.displayName=k6;var I6="DropdownMenuRadioGroup",O6=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return w.jsx(g6,{...s,...r,ref:e})});O6.displayName=I6;var M6="DropdownMenuRadioItem",Uk=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return w.jsx(v6,{...s,...r,ref:e})});Uk.displayName=M6;var L6="DropdownMenuItemIndicator",Bk=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return w.jsx(y6,{...s,...r,ref:e})});Bk.displayName=L6;var N6="DropdownMenuSeparator",zk=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return w.jsx(_6,{...s,...r,ref:e})});zk.displayName=N6;var j6="DropdownMenuArrow",D6=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return w.jsx(w6,{...s,...r,ref:e})});D6.displayName=j6;var F6="DropdownMenuSubTrigger",$k=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return w.jsx(x6,{...s,...r,ref:e})});$k.displayName=F6;var V6="DropdownMenuSubContent",Gk=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return w.jsx(b6,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Gk.displayName=V6;var U6=Ik,B6=Mk,z6=Lk,Wk=jk,Hk=Dk,qk=Fk,Kk=Vk,Yk=Uk,Xk=Bk,Zk=zk,Qk=$k,Jk=Gk;const e2=U6,t2=B6,$6=_.forwardRef(({className:t,inset:e,children:n,...r},s)=>w.jsxs(Qk,{ref:s,className:Ge("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,w.jsx(_3,{className:"ml-auto h-4 w-4"})]}));$6.displayName=Qk.displayName;const G6=_.forwardRef(({className:t,...e},n)=>w.jsx(Jk,{ref:n,className:Ge("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));G6.displayName=Jk.displayName;const P_=_.forwardRef(({className:t,sideOffset:e=4,...n},r)=>w.jsx(z6,{children:w.jsx(Wk,{ref:r,sideOffset:e,className:Ge("z-50 min-w-[8rem] cursor-pointer overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));P_.displayName=Wk.displayName;const uu=_.forwardRef(({className:t,inset:e,...n},r)=>w.jsx(qk,{ref:r,className:Ge("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));uu.displayName=qk.displayName;const W6=_.forwardRef(({className:t,children:e,checked:n,...r},s)=>w.jsxs(Kk,{ref:s,className:Ge("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[w.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:w.jsx(Xk,{children:w.jsx(g0,{className:"h-4 w-4"})})}),e]}));W6.displayName=Kk.displayName;const H6=_.forwardRef(({className:t,children:e,...n},r)=>w.jsxs(Yk,{ref:r,className:Ge("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[w.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:w.jsx(Xk,{children:w.jsx(x3,{className:"h-2 w-2 fill-current"})})}),e]}));H6.displayName=Yk.displayName;const q6=_.forwardRef(({className:t,inset:e,...n},r)=>w.jsx(Hk,{ref:r,className:Ge("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));q6.displayName=Hk.displayName;const K6=_.forwardRef(({className:t,...e},n)=>w.jsx(Zk,{ref:n,className:Ge("-mx-1 my-1 h-px bg-muted",t),...e}));K6.displayName=Zk.displayName;const Y6={fixos:{label:"Fixos",items:[{id:"fix1",label:"Camera Fixa 1",status:"online"},{id:"fix2",label:"Camera Fixa 2",status:"offline",lastSeen:"01/11/24 15:10"}]},veiculos:{label:"Veculos",items:{emTransito:{label:"Em Trnsito",items:[{id:"ssbpa",label:"SSBPA-P02",status:"offline",lastSeen:"01/11/24 15:10"},{id:"t01",label:"T01 - BANCADA",status:"online"}]},naBase:{label:"Na Base",items:[{id:"cam1",label:"Camera 1",status:"online"},{id:"cam2",label:"Camera 2",status:"online"}]}}},offline:{label:"Offline",items:[{id:"cam3",label:"Camera 3",status:"offline",lastSeen:"01/11/24 15:10"},{id:"cam4",label:"Camera 4",status:"offline",lastSeen:"01/11/24 15:10"}]}},X6=[{id:"usuarios",label:"Usurios",icon:"user",options:["cadastro","consultar"]},{id:"grupos",label:"Grupos",icon:"users",options:["cadastro","consultar"]},{id:"procurados",label:"Procurados",icon:"search",options:["faces","placas"]},{id:"dispositivos",label:"Dispositivos",icon:"smartphone",options:["cadastro","consultar"]},{id:"itens-monitorados",label:"Itens Monitorados",icon:"monitor",options:["cadastro","consultar"]},{id:"clientes",label:"Clientes",icon:"building",options:["cadastro","consultar"]},{id:"emails",label:"e-Mails Relatrio",icon:"mail",options:["cadastro","consultar"]},{id:"relatorios",label:"Relatrios",icon:"file-text",options:["cadastro","consultar"]},{id:"notificacoes",label:"Tipo Notificaes",icon:"bell",options:["cadastro","consultar"]}],Z6={cadastro:"Cadastro",consultar:"Consultar",faces:"Faces",placas:"Placas"},Q6=[{id:"monitoramento",label:"Monitoramento",badge:15},{id:"controle",label:"Controle"},{id:"historico",label:"Histrico de Vdeos"},{id:"estatisticas",label:"Estatsticas"}],J6=[{id:"notifications",label:"Notificaes"},{id:"location",label:"Localizao"},{id:"darkMode",label:"Modo Escuro"},{id:"logout",label:"Sair"}],e$={user:w.jsx(k3,{size:16,strokeWidth:1.5}),users:w.jsx(I3,{size:16,strokeWidth:1.5}),search:w.jsx(_0,{size:16,strokeWidth:1.5}),smartphone:w.jsx(C3,{size:16,strokeWidth:1.5}),monitor:w.jsx(y0,{size:16,strokeWidth:1.5}),building:w.jsx(g3,{size:16,strokeWidth:1.5}),mail:w.jsx(S3,{size:16,strokeWidth:1.5}),"file-text":w.jsx(E3,{size:16,strokeWidth:1.5}),bell:w.jsx(wC,{size:16,strokeWidth:1.5})},t$=({data:t,isDarkMode:e,onConsultarClick:n})=>{const r=_.useRef(null),s=Gu(),i=(o,l)=>{l==="consultar"&&n?n(o):l==="cadastro"&&s(`/register/${o}`)};return w.jsxs("div",{className:"p-2 mt-1",ref:r,children:[w.jsxs("div",{className:"gap-3 mb-2",children:[w.jsxs("div",{className:"flex items-center mb-2",children:[w.jsx("div",{className:"rounded-lg mr-2",children:w.jsx(TC,{size:18,strokeWidth:1.5,className:e?"text-gray-300":"text-gray-900"})}),w.jsx("p",{className:`text-xs ${e?"text-gray-300":"text-gray-900"}`,children:"Controle"})]}),w.jsx("p",{className:`text-xs ${e?"text-gray-400":"text-gray-600"} mt-1`,children:"Escolha uma das opes abaixo para realizar o cadastro ou consultar os dados que precisa."})]}),w.jsx("div",{className:`h-[1px] ${e?"bg-gray-700":"bg-[#00000029]"}`}),w.jsx("div",{className:"space-y-1 mt-4 relative",children:t.map(o=>w.jsx("div",{className:"relative",children:w.jsxs(e2,{children:[w.jsx(t2,{asChild:!0,children:w.jsxs("button",{className:`flex items-center w-full px-3 py-2 rounded-lg transition-colors ${e?"hover:bg-zinc-800":"hover:bg-gray-50"}`,children:[w.jsx("div",{className:`${e?"text-gray-300":"text-gray-600"}`,children:e$[o.icon]}),w.jsx("span",{className:`text-xs ml-3 ${e?"text-gray-300":"text-gray-600"}`,children:o.label})]})}),w.jsx(P_,{className:`w-[var(--radix-dropdown-menu-trigger-width)] text-xs ${e?"bg-zinc-800 border-zinc-700":"bg-white"}`,align:"start",children:o.options.map(l=>w.jsx(uu,{className:`text-xs cursor-pointer ${e?"text-gray-300 focus:bg-zinc-700":"text-gray-600 focus:bg-gray-100"}`,onClick:()=>i(o.label,l),children:Z6[l]},l))})]})},o.id))})]})};var yp="Dialog",[n2,r2]=ps(yp),[n$,$r]=n2(yp),s2=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,l=_.useRef(null),u=_.useRef(null),[d,h]=xl({prop:r,defaultProp:s??!1,onChange:i,caller:yp});return w.jsx(n$,{scope:e,triggerRef:l,contentRef:u,contentId:ls(),titleId:ls(),descriptionId:ls(),open:d,onOpenChange:h,onOpenToggle:_.useCallback(()=>h(p=>!p),[h]),modal:o,children:n})};s2.displayName=yp;var i2="DialogTrigger",o2=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=$r(i2,n),i=ut(e,s.triggerRef);return w.jsx(Qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":I_(s.open),...r,ref:i,onClick:Ce(t.onClick,s.onOpenToggle)})});o2.displayName=i2;var R_="DialogPortal",[r$,a2]=n2(R_,{forceMount:void 0}),l2=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=$r(R_,e);return w.jsx(r$,{scope:e,forceMount:n,children:_.Children.map(r,o=>w.jsx(Ws,{present:n||i.open,children:w.jsx(fp,{asChild:!0,container:s,children:o})}))})};l2.displayName=R_;var bh="DialogOverlay",c2=_.forwardRef((t,e)=>{const n=a2(bh,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=$r(bh,t.__scopeDialog);return i.modal?w.jsx(Ws,{present:r||i.open,children:w.jsx(i$,{...s,ref:e})}):null});c2.displayName=bh;var s$=Uo("DialogOverlay.RemoveScroll"),i$=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=$r(bh,n);return w.jsx(pp,{as:s$,allowPinchZoom:!0,shards:[s.contentRef],children:w.jsx(Qe.div,{"data-state":I_(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),zo="DialogContent",u2=_.forwardRef((t,e)=>{const n=a2(zo,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=$r(zo,t.__scopeDialog);return w.jsx(Ws,{present:r||i.open,children:i.modal?w.jsx(o$,{...s,ref:e}):w.jsx(a$,{...s,ref:e})})});u2.displayName=zo;var o$=_.forwardRef((t,e)=>{const n=$r(zo,t.__scopeDialog),r=_.useRef(null),s=ut(e,n.contentRef,r);return _.useEffect(()=>{const i=r.current;if(i)return w_(i)},[]),w.jsx(d2,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ce(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ce(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Ce(t.onFocusOutside,i=>i.preventDefault())})}),a$=_.forwardRef((t,e)=>{const n=$r(zo,t.__scopeDialog),r=_.useRef(!1),s=_.useRef(!1);return w.jsx(d2,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var u,d;(u=t.onInteractOutside)==null||u.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),d2=_.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,l=$r(zo,n),u=_.useRef(null),d=ut(e,u);return o_(),w.jsxs(w.Fragment,{children:[w.jsx(lp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:w.jsx(Yu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":I_(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),w.jsxs(w.Fragment,{children:[w.jsx(c$,{titleId:l.titleId}),w.jsx(d$,{contentRef:u,descriptionId:l.descriptionId})]})]})}),k_="DialogTitle",f2=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=$r(k_,n);return w.jsx(Qe.h2,{id:s.titleId,...r,ref:e})});f2.displayName=k_;var h2="DialogDescription",p2=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=$r(h2,n);return w.jsx(Qe.p,{id:s.descriptionId,...r,ref:e})});p2.displayName=h2;var m2="DialogClose",g2=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=$r(m2,n);return w.jsx(Qe.button,{type:"button",...r,ref:e,onClick:Ce(t.onClick,()=>s.onOpenChange(!1))})});g2.displayName=m2;function I_(t){return t?"open":"closed"}var v2="DialogTitleWarning",[l$,y2]=lB(v2,{contentName:zo,titleName:k_,docsSlug:"dialog"}),c$=({titleId:t})=>{const e=y2(v2),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},u$="DialogDescriptionWarning",d$=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${y2(u$).contentName}}.`;return _.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},_2=s2,f$=o2,w2=l2,O_=c2,M_=u2,L_=f2,N_=p2,j_=g2;const h$=_2,p$=w2,x2=_.forwardRef(({className:t,...e},n)=>w.jsx(O_,{ref:n,className:Ge("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));x2.displayName=O_.displayName;const b2=_.forwardRef(({className:t,children:e,...n},r)=>w.jsxs(p$,{children:[w.jsx(x2,{}),w.jsxs(M_,{ref:r,className:Ge("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,w.jsxs(j_,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[w.jsx(w0,{className:"h-4 w-4"}),w.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));b2.displayName=M_.displayName;const E2=({className:t,...e})=>w.jsx("div",{className:Ge("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});E2.displayName="DialogHeader";const uy=({className:t,...e})=>w.jsx("div",{className:Ge("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});uy.displayName="DialogFooter";const T2=_.forwardRef(({className:t,...e},n)=>w.jsx(L_,{ref:n,className:Ge("text-lg font-semibold leading-none tracking-tight",t),...e}));T2.displayName=L_.displayName;const m$=_.forwardRef(({className:t,...e},n)=>w.jsx(N_,{ref:n,className:Ge("text-sm text-muted-foreground",t),...e}));m$.displayName=N_.displayName;var g$="Label",S2=_.forwardRef((t,e)=>w.jsx(Qe.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));S2.displayName=g$;var A2=S2;const v$=r_("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Io=_.forwardRef(({className:t,...e},n)=>w.jsx(A2,{ref:n,className:Ge(v$(),t),...e}));Io.displayName=A2.displayName;function J1(t,[e,n]){return Math.min(n,Math.max(e,t))}function y$(t){const e=_.useRef({value:t,previous:t});return _.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var C2=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),_$="VisuallyHidden",P2=_.forwardRef((t,e)=>w.jsx(Qe.span,{...t,ref:e,style:{...C2,...t.style}}));P2.displayName=_$;var w$=P2,x$=[" ","Enter","ArrowUp","ArrowDown"],b$=[" ","Enter"],$o="Select",[_p,wp,E$]=s_($o),[Hl,kre]=ps($o,[E$,Wl]),xp=Wl(),[T$,Ji]=Hl($o),[S$,A$]=Hl($o),R2=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:u,dir:d,name:h,autoComplete:p,disabled:g,required:y,form:T}=t,x=xp(e),[E,A]=_.useState(null),[S,C]=_.useState(null),[O,M]=_.useState(!1),D=i_(d),[z,B]=xl({prop:r,defaultProp:s??!1,onChange:i,caller:$o}),[$,G]=xl({prop:o,defaultProp:l,onChange:u,caller:$o}),te=_.useRef(null),Q=E?T||!!E.closest("form"):!0,[se,re]=_.useState(new Set),ge=Array.from(se).map(ue=>ue.props.value).join(";");return w.jsx(g_,{...x,children:w.jsxs(T$,{required:y,scope:e,trigger:E,onTriggerChange:A,valueNode:S,onValueNodeChange:C,valueNodeHasChildren:O,onValueNodeHasChildrenChange:M,contentId:ls(),value:$,onValueChange:G,open:z,onOpenChange:B,dir:D,triggerPointerDownPosRef:te,disabled:g,children:[w.jsx(_p.Provider,{scope:e,children:w.jsx(S$,{scope:t.__scopeSelect,onNativeOptionAdd:_.useCallback(ue=>{re(pe=>new Set(pe).add(ue))},[]),onNativeOptionRemove:_.useCallback(ue=>{re(pe=>{const X=new Set(pe);return X.delete(ue),X})},[]),children:n})}),Q?w.jsxs(J2,{"aria-hidden":!0,required:y,tabIndex:-1,name:h,autoComplete:p,value:$,onChange:ue=>G(ue.target.value),disabled:g,form:T,children:[$===void 0?w.jsx("option",{value:""}):null,Array.from(se)]},ge):null]})})};R2.displayName=$o;var k2="SelectTrigger",I2=_.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=xp(n),o=Ji(k2,n),l=o.disabled||r,u=ut(e,o.onTriggerChange),d=wp(n),h=_.useRef("touch"),[p,g,y]=tI(x=>{const E=d().filter(C=>!C.disabled),A=E.find(C=>C.value===o.value),S=nI(E,x,A);S!==void 0&&o.onValueChange(S.value)}),T=x=>{l||(o.onOpenChange(!0),y()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return w.jsx(v_,{asChild:!0,...i,children:w.jsx(Qe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":eI(o.value)?"":void 0,...s,ref:u,onClick:Ce(s.onClick,x=>{x.currentTarget.focus(),h.current!=="mouse"&&T(x)}),onPointerDown:Ce(s.onPointerDown,x=>{h.current=x.pointerType;const E=x.target;E.hasPointerCapture(x.pointerId)&&E.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(T(x),x.preventDefault())}),onKeyDown:Ce(s.onKeyDown,x=>{const E=p.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&g(x.key),!(E&&x.key===" ")&&x$.includes(x.key)&&(T(),x.preventDefault())})})})});I2.displayName=k2;var O2="SelectValue",M2=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=t,u=Ji(O2,n),{onValueNodeHasChildrenChange:d}=u,h=i!==void 0,p=ut(e,u.onValueNodeChange);return Jt(()=>{d(h)},[d,h]),w.jsx(Qe.span,{...l,ref:p,style:{pointerEvents:"none"},children:eI(u.value)?w.jsx(w.Fragment,{children:o}):i})});M2.displayName=O2;var C$="SelectIcon",L2=_.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return w.jsx(Qe.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});L2.displayName=C$;var P$="SelectPortal",N2=t=>w.jsx(fp,{asChild:!0,...t});N2.displayName=P$;var Go="SelectContent",j2=_.forwardRef((t,e)=>{const n=Ji(Go,t.__scopeSelect),[r,s]=_.useState();if(Jt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Yo.createPortal(w.jsx(D2,{scope:t.__scopeSelect,children:w.jsx(_p.Slot,{scope:t.__scopeSelect,children:w.jsx("div",{children:t.children})})}),i):null}return w.jsx(F2,{...t,ref:e})});j2.displayName=Go;var Lr=10,[D2,eo]=Hl(Go),R$="SelectContentImpl",k$=Uo("SelectContent.RemoveScroll"),F2=_.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:u,align:d,alignOffset:h,arrowPadding:p,collisionBoundary:g,collisionPadding:y,sticky:T,hideWhenDetached:x,avoidCollisions:E,...A}=t,S=Ji(Go,n),[C,O]=_.useState(null),[M,D]=_.useState(null),z=ut(e,le=>O(le)),[B,$]=_.useState(null),[G,te]=_.useState(null),Q=wp(n),[se,re]=_.useState(!1),ge=_.useRef(!1);_.useEffect(()=>{if(C)return w_(C)},[C]),o_();const ue=_.useCallback(le=>{const[Te,...ve]=Q().map(Xe=>Xe.ref.current),[ke]=ve.slice(-1),Ye=document.activeElement;for(const Xe of le)if(Xe===Ye||(Xe==null||Xe.scrollIntoView({block:"nearest"}),Xe===Te&&M&&(M.scrollTop=0),Xe===ke&&M&&(M.scrollTop=M.scrollHeight),Xe==null||Xe.focus(),document.activeElement!==Ye))return},[Q,M]),pe=_.useCallback(()=>ue([B,C]),[ue,B,C]);_.useEffect(()=>{se&&pe()},[se,pe]);const{onOpenChange:X,triggerPointerDownPosRef:Z}=S;_.useEffect(()=>{if(C){let le={x:0,y:0};const Te=ke=>{var Ye,Xe;le={x:Math.abs(Math.round(ke.pageX)-(((Ye=Z.current)==null?void 0:Ye.x)??0)),y:Math.abs(Math.round(ke.pageY)-(((Xe=Z.current)==null?void 0:Xe.y)??0))}},ve=ke=>{le.x<=10&&le.y<=10?ke.preventDefault():C.contains(ke.target)||X(!1),document.removeEventListener("pointermove",Te),Z.current=null};return Z.current!==null&&(document.addEventListener("pointermove",Te),document.addEventListener("pointerup",ve,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Te),document.removeEventListener("pointerup",ve,{capture:!0})}}},[C,X,Z]),_.useEffect(()=>{const le=()=>X(!1);return window.addEventListener("blur",le),window.addEventListener("resize",le),()=>{window.removeEventListener("blur",le),window.removeEventListener("resize",le)}},[X]);const[ne,V]=tI(le=>{const Te=Q().filter(Ye=>!Ye.disabled),ve=Te.find(Ye=>Ye.ref.current===document.activeElement),ke=nI(Te,le,ve);ke&&setTimeout(()=>ke.ref.current.focus())}),J=_.useCallback((le,Te,ve)=>{const ke=!ge.current&&!ve;(S.value!==void 0&&S.value===Te||ke)&&($(le),ke&&(ge.current=!0))},[S.value]),De=_.useCallback(()=>C==null?void 0:C.focus(),[C]),Ne=_.useCallback((le,Te,ve)=>{const ke=!ge.current&&!ve;(S.value!==void 0&&S.value===Te||ke)&&te(le)},[S.value]),ze=r==="popper"?dy:V2,Ue=ze===dy?{side:l,sideOffset:u,align:d,alignOffset:h,arrowPadding:p,collisionBoundary:g,collisionPadding:y,sticky:T,hideWhenDetached:x,avoidCollisions:E}:{};return w.jsx(D2,{scope:n,content:C,viewport:M,onViewportChange:D,itemRefCallback:J,selectedItem:B,onItemLeave:De,itemTextRefCallback:Ne,focusSelectedItem:pe,selectedItemText:G,position:r,isPositioned:se,searchRef:ne,children:w.jsx(pp,{as:k$,allowPinchZoom:!0,children:w.jsx(lp,{asChild:!0,trapped:S.open,onMountAutoFocus:le=>{le.preventDefault()},onUnmountAutoFocus:Ce(s,le=>{var Te;(Te=S.trigger)==null||Te.focus({preventScroll:!0}),le.preventDefault()}),children:w.jsx(Yu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:le=>le.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:w.jsx(ze,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:le=>le.preventDefault(),...A,...Ue,onPlaced:()=>re(!0),ref:z,style:{display:"flex",flexDirection:"column",outline:"none",...A.style},onKeyDown:Ce(A.onKeyDown,le=>{const Te=le.ctrlKey||le.altKey||le.metaKey;if(le.key==="Tab"&&le.preventDefault(),!Te&&le.key.length===1&&V(le.key),["ArrowUp","ArrowDown","Home","End"].includes(le.key)){let ke=Q().filter(Ye=>!Ye.disabled).map(Ye=>Ye.ref.current);if(["ArrowUp","End"].includes(le.key)&&(ke=ke.slice().reverse()),["ArrowUp","ArrowDown"].includes(le.key)){const Ye=le.target,Xe=ke.indexOf(Ye);ke=ke.slice(Xe+1)}setTimeout(()=>ue(ke)),le.preventDefault()}})})})})})})});F2.displayName=R$;var I$="SelectItemAlignedPosition",V2=_.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Ji(Go,n),o=eo(Go,n),[l,u]=_.useState(null),[d,h]=_.useState(null),p=ut(e,z=>h(z)),g=wp(n),y=_.useRef(!1),T=_.useRef(!0),{viewport:x,selectedItem:E,selectedItemText:A,focusSelectedItem:S}=o,C=_.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&x&&E&&A){const z=i.trigger.getBoundingClientRect(),B=d.getBoundingClientRect(),$=i.valueNode.getBoundingClientRect(),G=A.getBoundingClientRect();if(i.dir!=="rtl"){const Ye=G.left-B.left,Xe=$.left-Ye,mt=z.left-Xe,Ct=z.width+mt,an=Math.max(Ct,B.width),Lt=window.innerWidth-Lr,Gt=J1(Xe,[Lr,Math.max(Lr,Lt-an)]);l.style.minWidth=Ct+"px",l.style.left=Gt+"px"}else{const Ye=B.right-G.right,Xe=window.innerWidth-$.right-Ye,mt=window.innerWidth-z.right-Xe,Ct=z.width+mt,an=Math.max(Ct,B.width),Lt=window.innerWidth-Lr,Gt=J1(Xe,[Lr,Math.max(Lr,Lt-an)]);l.style.minWidth=Ct+"px",l.style.right=Gt+"px"}const te=g(),Q=window.innerHeight-Lr*2,se=x.scrollHeight,re=window.getComputedStyle(d),ge=parseInt(re.borderTopWidth,10),ue=parseInt(re.paddingTop,10),pe=parseInt(re.borderBottomWidth,10),X=parseInt(re.paddingBottom,10),Z=ge+ue+se+X+pe,ne=Math.min(E.offsetHeight*5,Z),V=window.getComputedStyle(x),J=parseInt(V.paddingTop,10),De=parseInt(V.paddingBottom,10),Ne=z.top+z.height/2-Lr,ze=Q-Ne,Ue=E.offsetHeight/2,le=E.offsetTop+Ue,Te=ge+ue+le,ve=Z-Te;if(Te<=Ne){const Ye=te.length>0&&E===te[te.length-1].ref.current;l.style.bottom="0px";const Xe=d.clientHeight-x.offsetTop-x.offsetHeight,mt=Math.max(ze,Ue+(Ye?De:0)+Xe+pe),Ct=Te+mt;l.style.height=Ct+"px"}else{const Ye=te.length>0&&E===te[0].ref.current;l.style.top="0px";const mt=Math.max(Ne,ge+x.offsetTop+(Ye?J:0)+Ue)+ve;l.style.height=mt+"px",x.scrollTop=Te-Ne+x.offsetTop}l.style.margin=`${Lr}px 0`,l.style.minHeight=ne+"px",l.style.maxHeight=Q+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[g,i.trigger,i.valueNode,l,d,x,E,A,i.dir,r]);Jt(()=>C(),[C]);const[O,M]=_.useState();Jt(()=>{d&&M(window.getComputedStyle(d).zIndex)},[d]);const D=_.useCallback(z=>{z&&T.current===!0&&(C(),S==null||S(),T.current=!1)},[C,S]);return w.jsx(M$,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:D,children:w.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:O},children:w.jsx(Qe.div,{...s,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});V2.displayName=I$;var O$="SelectPopperPosition",dy=_.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Lr,...i}=t,o=xp(n);return w.jsx(y_,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});dy.displayName=O$;var[M$,D_]=Hl(Go,{}),fy="SelectViewport",U2=_.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=eo(fy,n),o=D_(fy,n),l=ut(e,i.onViewportChange),u=_.useRef(0);return w.jsxs(w.Fragment,{children:[w.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),w.jsx(_p.Slot,{scope:n,children:w.jsx(Qe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ce(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:g}=o;if(g!=null&&g.current&&p){const y=Math.abs(u.current-h.scrollTop);if(y>0){const T=window.innerHeight-Lr*2,x=parseFloat(p.style.minHeight),E=parseFloat(p.style.height),A=Math.max(x,E);if(A<T){const S=A+y,C=Math.min(T,S),O=S-C;p.style.height=C+"px",p.style.bottom==="0px"&&(h.scrollTop=O>0?O:0,p.style.justifyContent="flex-end")}}}u.current=h.scrollTop})})})]})});U2.displayName=fy;var B2="SelectGroup",[L$,N$]=Hl(B2),j$=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ls();return w.jsx(L$,{scope:n,id:s,children:w.jsx(Qe.div,{role:"group","aria-labelledby":s,...r,ref:e})})});j$.displayName=B2;var z2="SelectLabel",$2=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=N$(z2,n);return w.jsx(Qe.div,{id:s.id,...r,ref:e})});$2.displayName=z2;var Eh="SelectItem",[D$,G2]=Hl(Eh),W2=_.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,l=Ji(Eh,n),u=eo(Eh,n),d=l.value===r,[h,p]=_.useState(i??""),[g,y]=_.useState(!1),T=ut(e,S=>{var C;return(C=u.itemRefCallback)==null?void 0:C.call(u,S,r,s)}),x=ls(),E=_.useRef("touch"),A=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return w.jsx(D$,{scope:n,value:r,disabled:s,textId:x,isSelected:d,onItemTextChange:_.useCallback(S=>{p(C=>C||((S==null?void 0:S.textContent)??"").trim())},[]),children:w.jsx(_p.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:w.jsx(Qe.div,{role:"option","aria-labelledby":x,"data-highlighted":g?"":void 0,"aria-selected":d&&g,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:T,onFocus:Ce(o.onFocus,()=>y(!0)),onBlur:Ce(o.onBlur,()=>y(!1)),onClick:Ce(o.onClick,()=>{E.current!=="mouse"&&A()}),onPointerUp:Ce(o.onPointerUp,()=>{E.current==="mouse"&&A()}),onPointerDown:Ce(o.onPointerDown,S=>{E.current=S.pointerType}),onPointerMove:Ce(o.onPointerMove,S=>{var C;E.current=S.pointerType,s?(C=u.onItemLeave)==null||C.call(u):E.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ce(o.onPointerLeave,S=>{var C;S.currentTarget===document.activeElement&&((C=u.onItemLeave)==null||C.call(u))}),onKeyDown:Ce(o.onKeyDown,S=>{var O;((O=u.searchRef)==null?void 0:O.current)!==""&&S.key===" "||(b$.includes(S.key)&&A(),S.key===" "&&S.preventDefault())})})})})});W2.displayName=Eh;var Jc="SelectItemText",H2=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Ji(Jc,n),l=eo(Jc,n),u=G2(Jc,n),d=A$(Jc,n),[h,p]=_.useState(null),g=ut(e,A=>p(A),u.onItemTextChange,A=>{var S;return(S=l.itemTextRefCallback)==null?void 0:S.call(l,A,u.value,u.disabled)}),y=h==null?void 0:h.textContent,T=_.useMemo(()=>w.jsx("option",{value:u.value,disabled:u.disabled,children:y},u.value),[u.disabled,u.value,y]),{onNativeOptionAdd:x,onNativeOptionRemove:E}=d;return Jt(()=>(x(T),()=>E(T)),[x,E,T]),w.jsxs(w.Fragment,{children:[w.jsx(Qe.span,{id:u.textId,...i,ref:g}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Yo.createPortal(i.children,o.valueNode):null]})});H2.displayName=Jc;var q2="SelectItemIndicator",K2=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return G2(q2,n).isSelected?w.jsx(Qe.span,{"aria-hidden":!0,...r,ref:e}):null});K2.displayName=q2;var hy="SelectScrollUpButton",Y2=_.forwardRef((t,e)=>{const n=eo(hy,t.__scopeSelect),r=D_(hy,t.__scopeSelect),[s,i]=_.useState(!1),o=ut(e,r.onScrollButtonChange);return Jt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=u.scrollTop>0;i(d)};const u=n.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?w.jsx(Z2,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=n;l&&u&&(l.scrollTop=l.scrollTop-u.offsetHeight)}}):null});Y2.displayName=hy;var py="SelectScrollDownButton",X2=_.forwardRef((t,e)=>{const n=eo(py,t.__scopeSelect),r=D_(py,t.__scopeSelect),[s,i]=_.useState(!1),o=ut(e,r.onScrollButtonChange);return Jt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=u.scrollHeight-u.clientHeight,h=Math.ceil(u.scrollTop)<d;i(h)};const u=n.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?w.jsx(Z2,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=n;l&&u&&(l.scrollTop=l.scrollTop+u.offsetHeight)}}):null});X2.displayName=py;var Z2=_.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=eo("SelectScrollButton",n),o=_.useRef(null),l=wp(n),u=_.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return _.useEffect(()=>()=>u(),[u]),Jt(()=>{var h;const d=l().find(p=>p.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),w.jsx(Qe.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ce(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ce(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ce(s.onPointerLeave,()=>{u()})})}),F$="SelectSeparator",Q2=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return w.jsx(Qe.div,{"aria-hidden":!0,...r,ref:e})});Q2.displayName=F$;var my="SelectArrow",V$=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=xp(n),i=Ji(my,n),o=eo(my,n);return i.open&&o.position==="popper"?w.jsx(__,{...s,...r,ref:e}):null});V$.displayName=my;var U$="SelectBubbleInput",J2=_.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=_.useRef(null),i=ut(r,s),o=y$(e);return _.useEffect(()=>{const l=s.current;if(!l)return;const u=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==e&&h){const p=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(p)}},[o,e]),w.jsx(Qe.select,{...n,style:{...C2,...n.style},ref:i,defaultValue:e})});J2.displayName=U$;function eI(t){return t===""||t===void 0}function tI(t){const e=Ur(t),n=_.useRef(""),r=_.useRef(0),s=_.useCallback(o=>{const l=n.current+o;e(l),function u(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(l)},[e]),i=_.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function nI(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=B$(t,Math.max(i,0));s.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function B$(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var z$=R2,rI=I2,$$=M2,G$=L2,W$=N2,sI=j2,H$=U2,iI=$2,oI=W2,q$=H2,K$=K2,aI=Y2,lI=X2,cI=Q2;const Y$=z$,X$=$$,uI=_.forwardRef(({className:t,children:e,...n},r)=>w.jsxs(rI,{ref:r,className:Ge("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,w.jsx(G$,{asChild:!0,children:w.jsx(v0,{className:"h-4 w-4 opacity-50"})})]}));uI.displayName=rI.displayName;const dI=_.forwardRef(({className:t,...e},n)=>w.jsx(aI,{ref:n,className:Ge("flex cursor-default items-center justify-center py-1",t),...e,children:w.jsx(w3,{className:"h-4 w-4"})}));dI.displayName=aI.displayName;const fI=_.forwardRef(({className:t,...e},n)=>w.jsx(lI,{ref:n,className:Ge("flex cursor-default items-center justify-center py-1",t),...e,children:w.jsx(v0,{className:"h-4 w-4"})}));fI.displayName=lI.displayName;const hI=_.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>w.jsx(W$,{children:w.jsxs(sI,{ref:s,className:Ge("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[w.jsx(dI,{}),w.jsx(H$,{className:Ge("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),w.jsx(fI,{})]})}));hI.displayName=sI.displayName;const Z$=_.forwardRef(({className:t,...e},n)=>w.jsx(iI,{ref:n,className:Ge("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));Z$.displayName=iI.displayName;const pI=_.forwardRef(({className:t,children:e,...n},r)=>w.jsxs(oI,{ref:r,className:Ge("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[w.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:w.jsx(K$,{children:w.jsx(g0,{className:"h-4 w-4"})})}),w.jsx(q$,{children:e})]}));pI.displayName=oI.displayName;const Q$=_.forwardRef(({className:t,...e},n)=>w.jsx(cI,{ref:n,className:Ge("-mx-1 my-1 h-px bg-muted",t),...e}));Q$.displayName=cI.displayName;function bp(){return(bp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function mI(t,e){if(t==null)return{};var n,r,s={},i=Object.keys(t);for(r=0;r<i.length;r++)e.indexOf(n=i[r])>=0||(s[n]=t[n]);return s}function gy(t){var e=_.useRef(t),n=_.useRef(function(r){e.current&&e.current(r)});return e.current=t,n.current}var Iu=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t<e?e:t},du=function(t){return"touches"in t},vy=function(t){return t&&t.ownerDocument.defaultView||self},eT=function(t,e,n){var r=t.getBoundingClientRect(),s=du(e)?function(i,o){for(var l=0;l<i.length;l++)if(i[l].identifier===o)return i[l];return i[0]}(e.touches,n):e;return{left:Iu((s.pageX-(r.left+vy(t).pageXOffset))/r.width),top:Iu((s.pageY-(r.top+vy(t).pageYOffset))/r.height)}},tT=function(t){!du(t)&&t.preventDefault()},gI=je.memo(function(t){var e=t.onMove,n=t.onKey,r=mI(t,["onMove","onKey"]),s=_.useRef(null),i=gy(e),o=gy(n),l=_.useRef(null),u=_.useRef(!1),d=_.useMemo(function(){var y=function(E){tT(E),(du(E)?E.touches.length>0:E.buttons>0)&&s.current?i(eT(s.current,E,l.current)):x(!1)},T=function(){return x(!1)};function x(E){var A=u.current,S=vy(s.current),C=E?S.addEventListener:S.removeEventListener;C(A?"touchmove":"mousemove",y),C(A?"touchend":"mouseup",T)}return[function(E){var A=E.nativeEvent,S=s.current;if(S&&(tT(A),!function(O,M){return M&&!du(O)}(A,u.current)&&S)){if(du(A)){u.current=!0;var C=A.changedTouches||[];C.length&&(l.current=C[0].identifier)}S.focus(),i(eT(S,A,l.current)),x(!0)}},function(E){var A=E.which||E.keyCode;A<37||A>40||(E.preventDefault(),o({left:A===39?.05:A===37?-.05:0,top:A===40?.05:A===38?-.05:0}))},x]},[o,i]),h=d[0],p=d[1],g=d[2];return _.useEffect(function(){return g},[g]),je.createElement("div",bp({},r,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:s,onKeyDown:p,tabIndex:0,role:"slider"}))}),F_=function(t){return t.filter(Boolean).join(" ")},vI=function(t){var e=t.color,n=t.left,r=t.top,s=r===void 0?.5:r,i=F_(["react-colorful__pointer",t.className]);return je.createElement("div",{className:i,style:{top:100*s+"%",left:100*n+"%"}},je.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},pn=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n},J$=function(t){return s8(yy(t))},yy=function(t){return t[0]==="#"&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?pn(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:t.length===8?pn(parseInt(t.substring(6,8),16)/255,2):1}},e8=function(t){return r8(n8(t))},t8=function(t){var e=t.s,n=t.v,r=t.a,s=(200-e)*n/100;return{h:pn(t.h),s:pn(s>0&&s<200?e*n/100/(s<=100?s:200-s)*100:0),l:pn(s/2),a:pn(r,2)}},_y=function(t){var e=t8(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},n8=function(t){var e=t.h,n=t.s,r=t.v,s=t.a;e=e/360*6,n/=100,r/=100;var i=Math.floor(e),o=r*(1-n),l=r*(1-(e-i)*n),u=r*(1-(1-e+i)*n),d=i%6;return{r:pn(255*[r,l,o,o,u,r][d]),g:pn(255*[u,r,r,l,o,o][d]),b:pn(255*[o,o,u,r,r,l][d]),a:pn(s,2)}},If=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},r8=function(t){var e=t.r,n=t.g,r=t.b,s=t.a,i=s<1?If(pn(255*s)):"";return"#"+If(e)+If(n)+If(r)+i},s8=function(t){var e=t.r,n=t.g,r=t.b,s=t.a,i=Math.max(e,n,r),o=i-Math.min(e,n,r),l=o?i===e?(n-r)/o:i===n?2+(r-e)/o:4+(e-n)/o:0;return{h:pn(60*(l<0?l+6:l)),s:pn(i?o/i*100:0),v:pn(i/255*100),a:s}},i8=je.memo(function(t){var e=t.hue,n=t.onChange,r=F_(["react-colorful__hue",t.className]);return je.createElement("div",{className:r},je.createElement(gI,{onMove:function(s){n({h:360*s.left})},onKey:function(s){n({h:Iu(e+360*s.left,0,360)})},"aria-label":"Hue","aria-valuenow":pn(e),"aria-valuemax":"360","aria-valuemin":"0"},je.createElement(vI,{className:"react-colorful__hue-pointer",left:e/360,color:_y({h:e,s:100,v:100,a:1})})))}),o8=je.memo(function(t){var e=t.hsva,n=t.onChange,r={backgroundColor:_y({h:e.h,s:100,v:100,a:1})};return je.createElement("div",{className:"react-colorful__saturation",style:r},je.createElement(gI,{onMove:function(s){n({s:100*s.left,v:100-100*s.top})},onKey:function(s){n({s:Iu(e.s+100*s.left,0,100),v:Iu(e.v-100*s.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+pn(e.s)+"%, Brightness "+pn(e.v)+"%"},je.createElement(vI,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:_y(e)})))}),yI=function(t,e){if(t===e)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0},a8=function(t,e){return t.toLowerCase()===e.toLowerCase()||yI(yy(t),yy(e))};function l8(t,e,n){var r=gy(n),s=_.useState(function(){return t.toHsva(e)}),i=s[0],o=s[1],l=_.useRef({color:e,hsva:i});_.useEffect(function(){if(!t.equal(e,l.current.color)){var d=t.toHsva(e);l.current={hsva:d,color:e},o(d)}},[e,t]),_.useEffect(function(){var d;yI(i,l.current.hsva)||t.equal(d=t.fromHsva(i),l.current.color)||(l.current={hsva:i,color:d},r(d))},[i,t,r]);var u=_.useCallback(function(d){o(function(h){return Object.assign({},h,d)})},[]);return[i,u]}var c8=typeof window<"u"?_.useLayoutEffect:_.useEffect,u8=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},nT=new Map,d8=function(t){c8(function(){var e=t.current?t.current.ownerDocument:document;if(e!==void 0&&!nT.has(e)){var n=e.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,nT.set(e,n);var r=u8();r&&n.setAttribute("nonce",r),e.head.appendChild(n)}},[])},f8=function(t){var e=t.className,n=t.colorModel,r=t.color,s=r===void 0?n.defaultColor:r,i=t.onChange,o=mI(t,["className","colorModel","color","onChange"]),l=_.useRef(null);d8(l);var u=l8(n,s,i),d=u[0],h=u[1],p=F_(["react-colorful",e]);return je.createElement("div",bp({},o,{ref:l,className:p}),je.createElement(o8,{hsva:d,onChange:h}),je.createElement(i8,{hue:d.h,onChange:h,className:"react-colorful__last-control"}))},h8={defaultColor:"000",toHsva:J$,fromHsva:function(t){return e8({h:t.h,s:t.s,v:t.v,a:1})},equal:a8},p8=function(t){return je.createElement(f8,bp({},t,{colorModel:h8}))};const m8="modulepreload",g8=function(t,e){return new URL(t,e).href},rT={},Wo=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(n.map(d=>{if(d=g8(d,r),d in rT)return;rT[d]=!0;const h=d.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(!!r)for(let T=o.length-1;T>=0;T--){const x=o[T];if(x.href===d&&(!h||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${p}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":m8,h||(y.as="script"),y.crossOrigin="",y.href=d,u&&y.setAttribute("nonce",u),document.head.appendChild(y),h)return new Promise((T,x)=>{y.addEventListener("load",T),y.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},v8=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Wo(async()=>{const{default:r}=await Promise.resolve().then(()=>ql);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class V_ extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class y8 extends V_{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class _8 extends V_{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class w8 extends V_{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var wy;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(wy||(wy={}));var x8=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(l,u)}d((r=r.apply(t,e||[])).next())})};class b8{constructor(e,{headers:n={},customFetch:r,region:s=wy.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=v8(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return x8(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let l={},{region:u}=n;u||(u=this.region),u&&u!=="any"&&(l["x-region"]=u);let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(T=>{throw new y8(T)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new _8(h);if(!h.ok)throw new w8(h);let g=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return g==="application/json"?y=yield h.json():g==="application/octet-stream"?y=yield h.blob():g==="text/event-stream"?y=h:g==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null}}catch(s){return{data:null,error:s}}})}}var sn={},Va={},Ua={},Ba={},za={},$a={},E8=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},El=E8();const T8=El.fetch,_I=El.fetch.bind(El),wI=El.Headers,S8=El.Request,A8=El.Response,ql=Object.freeze(Object.defineProperty({__proto__:null,Headers:wI,Request:S8,Response:A8,default:_I,fetch:T8},Symbol.toStringTag,{value:"Module"})),C8=aj(ql);var Of={},sT;function xI(){if(sT)return Of;sT=1,Object.defineProperty(Of,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Of.default=t,Of}var iT;function bI(){if(iT)return $a;iT=1;var t=$a&&$a.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty($a,"__esModule",{value:!0});const e=t(C8),n=t(xI());class r{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=Object.assign({},this.headers),this.headers[i]=o,this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const l=this.fetch;let u=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var h,p,g;let y=null,T=null,x=null,E=d.status,A=d.statusText;if(d.ok){if(this.method!=="HEAD"){const M=await d.text();M===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?T=M:T=JSON.parse(M))}const C=(h=this.headers.Prefer)===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),O=(p=d.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");C&&O&&O.length>1&&(x=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(T)&&(T.length>1?(y={code:"PGRST116",details:`Results contain ${T.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},T=null,x=null,E=406,A="Not Acceptable"):T.length===1?T=T[0]:T=null)}else{const C=await d.text();try{y=JSON.parse(C),Array.isArray(y)&&d.status===404&&(T=[],y=null,E=200,A="OK")}catch{d.status===404&&C===""?(E=204,A="No Content"):y={message:C}}if(y&&this.isMaybeSingle&&(!((g=y==null?void 0:y.details)===null||g===void 0)&&g.includes("0 rows"))&&(y=null,E=200,A="OK"),y&&this.shouldThrowOnError)throw new n.default(y)}return{error:y,data:T,count:x,status:E,statusText:A}});return this.shouldThrowOnError||(u=u.catch(d=>{var h,p,g;return{error:{message:`${(h=d==null?void 0:d.name)!==null&&h!==void 0?h:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(p=d==null?void 0:d.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(g=d==null?void 0:d.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),u.then(i,o)}returns(){return this}overrideTypes(){return this}}return $a.default=r,$a}var oT;function EI(){if(oT)return za;oT=1;var t=za&&za.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(za,"__esModule",{value:!0});const e=t(bI());class n extends e.default{select(s){let i=!1;const o=(s??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:u=l}={}){const d=u?`${u}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this.url.searchParams.set(d,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:u=!1,format:d="text"}={}){var h;const p=[s?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,u?"wal":null].filter(Boolean).join("|"),g=(h=this.headers.Accept)!==null&&h!==void 0?h:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${g}"; options=${p};`,d==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return za.default=n,za}var aT;function U_(){if(aT)return Ba;aT=1;var t=Ba&&Ba.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ba,"__esModule",{value:!0});const e=t(EI());class n extends e.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const o=Array.from(new Set(i)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:o,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${u}fts${d}.${i}`),this}match(s){return Object.entries(s).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(s,i,o){return this.url.searchParams.append(s,`not.${i}.${o}`),this}or(s,{foreignTable:i,referencedTable:o=i}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,i,o){return this.url.searchParams.append(s,`${i}.${o}`),this}}return Ba.default=n,Ba}var lT;function TI(){if(lT)return Ua;lT=1;var t=Ua&&Ua.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ua,"__esModule",{value:!0});const e=t(U_());class n{constructor(s,{headers:i={},schema:o,fetch:l}){this.url=s,this.headers=i,this.schema=o,this.fetch=l}select(s,{head:i=!1,count:o}={}){const l=i?"HEAD":"GET";let u=!1;const d=(s??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",d),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:i,defaultToNull:o=!0}={}){const l="POST",u=[];if(this.headers.Prefer&&u.push(this.headers.Prefer),i&&u.push(`count=${i}`),o||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(s)){const d=s.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(d.length>0){const h=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:u=!0}={}){const d="POST",h=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&h.push(this.headers.Prefer),l&&h.push(`count=${l}`),u||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(s)){const p=s.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(p.length>0){const g=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:i}={}){const o="PATCH",l=[];return this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),this.headers.Prefer=l.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const i="DELETE",o=[];return s&&o.push(`count=${s}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Ua.default=n,Ua}var Dc={},Fc={},cT;function P8(){return cT||(cT=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.version=void 0,Fc.version="0.0.0-automated"),Fc}var uT;function R8(){if(uT)return Dc;uT=1,Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.DEFAULT_HEADERS=void 0;const t=P8();return Dc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},Dc}var dT;function k8(){if(dT)return Va;dT=1;var t=Va&&Va.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Va,"__esModule",{value:!0});const e=t(TI()),n=t(U_()),r=R8();class s{constructor(o,{headers:l={},schema:u,fetch:d}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),l),this.schemaName=u,this.fetch=d}from(o){const l=new URL(`${this.url}/${o}`);return new e.default(l,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new s(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,l={},{head:u=!1,get:d=!1,count:h}={}){let p;const g=new URL(`${this.url}/rpc/${o}`);let y;u||d?(p=u?"HEAD":"GET",Object.entries(l).filter(([x,E])=>E!==void 0).map(([x,E])=>[x,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([x,E])=>{g.searchParams.append(x,E)})):(p="POST",y=l);const T=Object.assign({},this.headers);return h&&(T.Prefer=`count=${h}`),new n.default({method:p,url:g,headers:T,schema:this.schemaName,body:y,fetch:this.fetch,allowEmpty:!1})}}return Va.default=s,Va}var fT;function I8(){if(fT)return sn;fT=1;var t=sn&&sn.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(sn,"__esModule",{value:!0}),sn.PostgrestError=sn.PostgrestBuilder=sn.PostgrestTransformBuilder=sn.PostgrestFilterBuilder=sn.PostgrestQueryBuilder=sn.PostgrestClient=void 0;const e=t(k8());sn.PostgrestClient=e.default;const n=t(TI());sn.PostgrestQueryBuilder=n.default;const r=t(U_());sn.PostgrestFilterBuilder=r.default;const s=t(EI());sn.PostgrestTransformBuilder=s.default;const i=t(bI());sn.PostgrestBuilder=i.default;const o=t(xI());return sn.PostgrestError=o.default,sn.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:o.default},sn}var O8=I8();const M8=Xh(O8),{PostgrestClient:L8,PostgrestQueryBuilder:Ire,PostgrestFilterBuilder:Ore,PostgrestTransformBuilder:Mre,PostgrestBuilder:Lre,PostgrestError:Nre}=M8,N8="2.11.2",j8={"X-Client-Info":`realtime-js/${N8}`},D8="1.0.0",SI=1e4,F8=1e3;var pl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(pl||(pl={}));var Jn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Jn||(Jn={}));var Nr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Nr||(Nr={}));var xy;(function(t){t.websocket="websocket"})(xy||(xy={}));var Oo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Oo||(Oo={}));class V8{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+s));o=o+s;const u=r.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:u,payload:d}}}class AI{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _t;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(_t||(_t={}));const hT=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=U8(o,t,e,s),i),{})},U8=(t,e,n,r)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?CI(i,o):by(o)},CI=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return G8(e,n)}switch(t){case _t.bool:return B8(e);case _t.float4:case _t.float8:case _t.int2:case _t.int4:case _t.int8:case _t.numeric:case _t.oid:return z8(e);case _t.json:case _t.jsonb:return $8(e);case _t.timestamp:return W8(e);case _t.abstime:case _t.date:case _t.daterange:case _t.int4range:case _t.int8range:case _t.money:case _t.reltime:case _t.text:case _t.time:case _t.timestamptz:case _t.timetz:case _t.tsrange:case _t.tstzrange:return by(e);default:return by(e)}},by=t=>t,B8=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},z8=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},$8=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},G8=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>CI(e,l))}return t},W8=t=>typeof t=="string"?t.replace(" ","T"):t,PI=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Xg{constructor(e,n,r={},s=SI){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var pT;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(pT||(pT={}));class fu{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fu.syncState(this.state,s,i,o),this.pendingDiffs.forEach(u=>{this.state=fu.syncDiff(this.state,u,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=fu.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),l={},u={};return this.map(i,(d,h)=>{o[d]||(u[d]=h)}),this.map(o,(d,h)=>{const p=i[d];if(p){const g=h.map(E=>E.presence_ref),y=p.map(E=>E.presence_ref),T=h.filter(E=>y.indexOf(E.presence_ref)<0),x=p.filter(E=>g.indexOf(E.presence_ref)<0);T.length>0&&(l[d]=T),x.length>0&&(u[d]=x)}else l[d]=h}),this.syncDiff(i,{joins:l,leaves:u},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,u)=>{var d;const h=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(u),h.length>0){const p=e[l].map(y=>y.presence_ref),g=h.filter(y=>p.indexOf(y.presence_ref)<0);e[l].unshift(...g)}r(l,h,u)}),this.map(o,(l,u)=>{let d=e[l];if(!d)return;const h=u.map(p=>p.presence_ref);d=d.filter(p=>h.indexOf(p.presence_ref)<0),e[l]=d,s(l,d,u),d.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mT;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(mT||(mT={}));var gT;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(gT||(gT={}));var Os;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Os||(Os={}));class B_{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Jn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Xg(this,Nr.join,this.params,this.timeout),this.rejoinTimer=new AI(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Jn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Jn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Jn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Jn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Nr.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new fu(this),this.broadcastEndpointURL=PI(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(h=>e==null?void 0:e(Os.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(Os.CLOSED));const u={},d={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var p;if(this.socket.setAuth(),h===void 0){e==null||e(Os.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,y=(p=g==null?void 0:g.length)!==null&&p!==void 0?p:0,T=[];for(let x=0;x<y;x++){const E=g[x],{filter:{event:A,schema:S,table:C,filter:O}}=E,M=h&&h[x];if(M&&M.event===A&&M.schema===S&&M.table===C&&M.filter===O)T.push(Object.assign(Object.assign({},E),{id:M.id}));else{this.unsubscribe(),e==null||e(Os.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(Os.SUBSCRIBED);return}}).receive("error",h=>{e==null||e(Os.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Os.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,u;const d=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Jn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Nr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new Xg(this,Nr.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Xg(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:u,leave:d,join:h}=Nr;if(r&&[l,u,d,h].indexOf(o)>=0&&r!==this._joinRef())return;let g=this._onMessage(o,n,r);if(n&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var T,x,E;return((T=y.filter)===null||T===void 0?void 0:T.event)==="*"||((E=(x=y.filter)===null||x===void 0?void 0:x.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===o}).map(y=>y.callback(g,r)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var T,x,E,A,S,C;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const O=y.id,M=(T=y.filter)===null||T===void 0?void 0:T.event;return O&&((x=n.ids)===null||x===void 0?void 0:x.includes(O))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const O=(S=(A=y==null?void 0:y.filter)===null||A===void 0?void 0:A.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return O==="*"||O===((C=n==null?void 0:n.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof g=="object"&&"ids"in g){const T=g.data,{schema:x,table:E,commit_timestamp:A,type:S,errors:C}=T;g=Object.assign(Object.assign({},{schema:x,table:E,commit_timestamp:A,eventType:S,new:{},old:{},errors:C}),this._getPayloadRecords(T))}y.callback(g,r)})}_isClosed(){return this.state===Jn.closed}_isJoined(){return this.state===Jn.joined}_isJoining(){return this.state===Jn.joining}_isLeaving(){return this.state===Jn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&B_.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Nr.close,{},e)}_onError(e){this._on(Nr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Jn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=hT(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=hT(e.columns,e.old_record)),n}}const H8=()=>{},q8=typeof WebSocket<"u",K8=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Y8{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=j8,this.params={},this.timeout=SI,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=H8,this.conn=null,this.sendBuffer=[],this.serializer=new V8,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Wo(async()=>{const{default:u}=await Promise.resolve().then(()=>ql);return{default:u}},void 0,import.meta.url).then(({default:u})=>u(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${xy.websocket}`,this.httpEndpoint=PI(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new AI(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(q8){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new X8(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Wo(async()=>{const{default:e}=await import("./browser-Dzrh2smO.js").then(n=>n.b);return{default:e}},[],import.meta.url).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:D8}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case pl.connecting:return Oo.Connecting;case pl.open:return Oo.Open;case pl.closing:return Oo.Closing;default:return Oo.Closed}}isConnected(){return this.connectionState()===Oo.Open}channel(e,n={config:{}}){const r=new B_(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(Nr.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(F8,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Nr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([K8],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class X8{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=pl.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class z_ extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function on(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Z8 extends z_{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ey extends z_{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Q8=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(l,u)}d((r=r.apply(t,e||[])).next())})};const RI=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Wo(async()=>{const{default:r}=await Promise.resolve().then(()=>ql);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},J8=()=>Q8(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Wo(()=>Promise.resolve().then(()=>ql),void 0,import.meta.url)).Response:Response}),Ty=t=>{if(Array.isArray(t))return t.map(n=>Ty(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Ty(r)}),e};var ea=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(l,u)}d((r=r.apply(t,e||[])).next())})};const Zg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),e9=(t,e,n)=>ea(void 0,void 0,void 0,function*(){const r=yield J8();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new Z8(Zg(s),t.status||500))}).catch(s=>{e(new Ey(Zg(s),s))}):e(new Ey(Zg(t),t))}),t9=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function ed(t,e,n,r,s,i){return ea(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(n,t9(e,r,s,i)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>e9(u,l,r))})})}function Th(t,e,n,r){return ea(this,void 0,void 0,function*(){return ed(t,"GET",e,n,r)})}function Ni(t,e,n,r,s){return ea(this,void 0,void 0,function*(){return ed(t,"POST",e,r,s,n)})}function n9(t,e,n,r,s){return ea(this,void 0,void 0,function*(){return ed(t,"PUT",e,r,s,n)})}function r9(t,e,n,r){return ea(this,void 0,void 0,function*(){return ed(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function kI(t,e,n,r,s){return ea(this,void 0,void 0,function*(){return ed(t,"DELETE",e,r,s,n)})}var zn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(l,u)}d((r=r.apply(t,e||[])).next())})};const s9={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vT={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class i9{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=RI(s)}uploadOrUpdate(e,n,r,s){return zn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},vT),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const d=this._removeEmptyFolders(n),h=this._getFinalPath(d),p=yield this.fetch(`${this.url}/object/${h}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),g=yield p.json();return p.ok?{data:{path:d,id:g.Id,fullPath:g.Key},error:null}:{data:null,error:g}}catch(i){if(on(i))return{data:null,error:i};throw i}})}upload(e,n,r){return zn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return zn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let u;const d=Object.assign({upsert:vT.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",d.cacheControl)):(u=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const p=yield this.fetch(l.toString(),{method:"PUT",body:u,headers:h}),g=yield p.json();return p.ok?{data:{path:i,fullPath:g.Key},error:null}:{data:null,error:g}}catch(u){if(on(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,n){return zn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Ni(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new z_("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(on(r))return{data:null,error:r};throw r}})}update(e,n,r){return zn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return zn(this,void 0,void 0,function*(){try{return{data:yield Ni(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(on(s))return{data:null,error:s};throw s}})}copy(e,n,r){return zn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ni(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(on(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return zn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Ni(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(on(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return zn(this,void 0,void 0,function*(){try{const s=yield Ni(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(on(s))return{data:null,error:s};throw s}})}download(e,n){return zn(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Th(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(on(l))return{data:null,error:l};throw l}})}info(e){return zn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Th(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ty(r),error:null}}catch(r){if(on(r))return{data:null,error:r};throw r}})}exists(e){return zn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield r9(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(on(r)&&r instanceof Ey){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&s.push(u);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(e){return zn(this,void 0,void 0,function*(){try{return{data:yield kI(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(on(n))return{data:null,error:n};throw n}})}list(e,n,r){return zn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},s9),n),{prefix:e||""});return{data:yield Ni(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(on(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const o9="2.7.1",a9={"X-Client-Info":`storage-js/${o9}`};var Ga=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(l,u)}d((r=r.apply(t,e||[])).next())})};class l9{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},a9),n),this.fetch=RI(r)}listBuckets(){return Ga(this,void 0,void 0,function*(){try{return{data:yield Th(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(on(e))return{data:null,error:e};throw e}})}getBucket(e){return Ga(this,void 0,void 0,function*(){try{return{data:yield Th(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(on(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Ga(this,void 0,void 0,function*(){try{return{data:yield Ni(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(on(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Ga(this,void 0,void 0,function*(){try{return{data:yield n9(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(on(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ga(this,void 0,void 0,function*(){try{return{data:yield Ni(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(on(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ga(this,void 0,void 0,function*(){try{return{data:yield kI(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(on(n))return{data:null,error:n};throw n}})}}class c9 extends l9{constructor(e,n={},r){super(e,n,r)}from(e){return new i9(this.url,this.headers,e,this.fetch)}}const u9="2.49.8";let eu="";typeof Deno<"u"?eu="deno":typeof document<"u"?eu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?eu="react-native":eu="node";const d9={"X-Client-Info":`supabase-js-${eu}/${u9}`},f9={headers:d9},h9={schema:"public"},p9={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},m9={};var g9=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(l,u)}d((r=r.apply(t,e||[])).next())})};const v9=t=>{let e;return t?e=t:typeof fetch>"u"?e=_I:e=fetch,(...n)=>e(...n)},y9=()=>typeof Headers>"u"?wI:Headers,_9=(t,e,n)=>{const r=v9(n),s=y9();return(i,o)=>g9(void 0,void 0,void 0,function*(){var l;const u=(l=yield e())!==null&&l!==void 0?l:t;let d=new s(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${u}`),r(i,Object.assign(Object.assign({},o),{headers:d}))})};var w9=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(l,u)}d((r=r.apply(t,e||[])).next())})};function x9(t){return t.endsWith("/")?t:t+"/"}function b9(t,e){var n,r;const{db:s,auth:i,realtime:o,global:l}=t,{db:u,auth:d,realtime:h,global:p}=e,g={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},h),o),global:Object.assign(Object.assign(Object.assign({},p),l),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>w9(this,void 0,void 0,function*(){return""})};return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}const II="2.69.1",el=30*1e3,Sy=3,Qg=Sy*el,E9="http://localhost:9999",T9="supabase.auth.token",S9={"X-Client-Info":`gotrue-js/${II}`},Ay="X-Supabase-Api-Version",OI={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},A9=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,C9=6e5;class $_ extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ke(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class P9 extends $_{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function R9(t){return Ke(t)&&t.name==="AuthApiError"}class MI extends $_{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class to extends $_{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Mi extends to{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function k9(t){return Ke(t)&&t.name==="AuthSessionMissingError"}class Jg extends to{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mf extends to{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Lf extends to{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function I9(t){return Ke(t)&&t.name==="AuthImplicitGrantRedirectError"}class yT extends to{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Cy extends to{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ev(t){return Ke(t)&&t.name==="AuthRetryableFetchError"}class _T extends to{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class hu extends to{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const wT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),xT=` 	
\r=`.split(""),O9=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<xT.length;e+=1)t[xT[e].charCodeAt(0)]=-2;for(let e=0;e<wT.length;e+=1)t[wT[e].charCodeAt(0)]=e;return t})();function LI(t,e,n){const r=O9[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function bT(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{N9(o,r,n)};for(let o=0;o<t.length;o+=1)LI(t.charCodeAt(o),s,i);return e.join("")}function M9(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function L9(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}M9(r,e)}}function N9(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function j9(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)LI(t.charCodeAt(s),n,r);return new Uint8Array(e)}function D9(t){const e=[];return L9(t,n=>e.push(n)),new Uint8Array(e)}function F9(t){return Math.round(Date.now()/1e3)+t}function V9(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const es=()=>typeof window<"u"&&typeof document<"u",Eo={tested:!1,writable:!1},pu=()=>{if(!es())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Eo.tested)return Eo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Eo.tested=!0,Eo.writable=!0}catch{Eo.tested=!0,Eo.writable=!1}return Eo.writable};function U9(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const NI=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Wo(async()=>{const{default:r}=await Promise.resolve().then(()=>ql);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},B9=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",jI=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Nf=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},jf=async(t,e)=>{await t.removeItem(e)};class Ep{constructor(){this.promise=new Ep.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Ep.promiseConstructor=Promise;function tv(t){const e=t.split(".");if(e.length!==3)throw new hu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!A9.test(e[r]))throw new hu("JWT not in base64url format");return{header:JSON.parse(bT(e[0])),payload:JSON.parse(bT(e[1])),signature:j9(e[2]),raw:{header:e[0],payload:e[1]}}}async function z9(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function $9(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function G9(t){return("0"+t.toString(16)).substr(-2)}function W9(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,G9).join("")}async function H9(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function q9(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await H9(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wa(t,e,n=!1){const r=W9();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await jI(t,`${e}-code-verifier`,s);const i=await q9(r);return[i,r===i?"plain":"s256"]}const K9=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Y9(t){const e=t.headers.get(Ay);if(!e||!e.match(K9))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function X9(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Z9(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Q9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Ro=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),J9=[502,503,504];async function ET(t){var e;if(!B9(t))throw new Cy(Ro(t),0);if(J9.includes(t.status))throw new Cy(Ro(t),t.status);let n;try{n=await t.json()}catch(i){throw new MI(Ro(i),i)}let r;const s=Y9(t);if(s&&s.getTime()>=OI["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new _T(Ro(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Mi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new _T(Ro(n),t.status,n.weak_password.reasons);throw new P9(Ro(n),t.status||500,r)}const eG=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function nt(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Ay]||(i[Ay]=OI["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await tG(t,e,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function tG(t,e,n,r,s,i){const o=eG(e,r,s,i);let l;try{l=await t(n,Object.assign({},o))}catch(u){throw console.error(u),new Cy(Ro(u),0)}if(l.ok||await ET(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(u){await ET(u)}}function Li(t){var e;let n=null;iG(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=F9(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function TT(t){const e=Li(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Di(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function nG(t){return{data:t,error:null}}function rG(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=Q9(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},u=Object.assign({},o);return{data:{properties:l,user:u},error:null}}function sG(t){return t}function iG(t){return t.access_token&&t.refresh_token&&t.expires_in}var oG=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class aG{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=NI(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await nt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await nt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Di})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=oG(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await nt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:rG,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ke(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await nt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Di})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,l,u;try{const d={nextPage:null,lastPage:0,total:0},h=await nt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:sG});if(h.error)throw h.error;const p=await h.json(),g=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(u=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(T=>{const x=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(T.split(";")[1].split("=")[1]);d[`${E}Page`]=x}),d.total=parseInt(g)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(Ke(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await nt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Di})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await nt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Di})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await nt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Di})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await nt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await nt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}}const lG={getItem:t=>pu()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{pu()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{pu()&&globalThis.localStorage.removeItem(t)}};function ST(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function cG(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ha={debug:!!(globalThis&&pu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class DI extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class uG extends DI{}async function dG(t,e,n){Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new uG(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ha.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}cG();const fG={url:E9,storageKey:T9,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:S9,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function AT(t,e,n){return await n()}class Ou{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ou.nextInstanceID,Ou.nextInstanceID+=1,this.instanceID>0&&es()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},fG),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new aG({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=NI(s.fetch),this.lock=s.lock||AT,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:es()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=dG:this.lock=AT,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:pu()?this.storage=lG:(this.memoryStorage={},this.storage=ST(this.memoryStorage)):(this.memoryStorage={},this.storage=ST(this.memoryStorage)),es()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${II}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=U9(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),es()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),I9(i)){const u=(e=i.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ke(n)?{error:n}:{error:new MI("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Li}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:h,password:p,options:g}=e;let y=null,T=null;this.flowType==="pkce"&&([y,T]=await Wa(this.storage,this.storageKey)),i=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:h,password:p,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:y,code_challenge_method:T},xform:Li})}else if("phone"in e){const{phone:h,password:p,options:g}=e;i=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(s=g==null?void 0:g.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Li})}else throw new Mf("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:l}=e;n=await nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:TT})}else if("phone"in e){const{phone:i,password:o,options:l}=e;n=await nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:TT})}else throw new Mf("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Jg}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Nf(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Li});if(await jf(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Jg}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Ke(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,l=await nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Li}),{data:u,error:d}=l;return d?{data:{user:null,session:null},error:d}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new Jg}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:d})}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:l,options:u}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Wa(this.storage,this.storageKey));const{error:p}=await nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:l,options:u}=e,{data:d,error:h}=await nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(o=u==null?void 0:u.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new Mf("You must provide either an email or phone number.")}catch(l){if(Ke(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await nt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Li});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,d=o.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(s){if(Ke(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Wa(this.storage,this.storageKey)),await nt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:nG})}catch(i){if(Ke(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Mi;const{error:s}=await nt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Ke(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await nt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:l}=await nt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Mf("You must provide either an email or phone number and a type")}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Nf(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Qg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(u,d,h)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,d,h))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Di}):await this._useSession(async n=>{var r,s,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Mi}:await nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Di})})}catch(n){if(Ke(n))return k9(n)&&(await this._removeSession(),await jf(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Mi;const o=s.session;let l=null,u=null;this.flowType==="pkce"&&e.email!=null&&([l,u]=await Wa(this.storage,this.storageKey));const{data:d,error:h}=await nt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:Di});if(h)throw h;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Mi;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=tv(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:u}=await this._getUser(e.access_token);if(u)throw u;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Ke(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:l}=n;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Mi;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!es())throw new Lf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Lf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new yT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Lf("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new yT("No code detected.");const{data:S,error:C}=await this._exchangeCodeForSession(e.code);if(C)throw C;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:u,token_type:d}=e;if(!i||!l||!o||!d)throw new Lf("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(l);let g=h+p;u&&(g=parseInt(u));const y=g-h;y*1e3<=el&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);const T=g-p;h-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,g,h):h-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,g,h);const{data:x,error:E}=await this._getUser(i);if(E)throw E;const A={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:g,refresh_token:o,token_type:d,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:A,redirectType:e.type},error:null}}catch(r){if(Ke(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Nf(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(R9(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await jf(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=V9(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Wa(this.storage,this.storageKey,!0));try{return await nt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Ke(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,u,d,h;const{data:p,error:g}=i;if(g)throw g;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await nt(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return es()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ke(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await nt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await $9(async s=>(s>0&&await z9(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await nt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Li})),(s,i)=>{const o=200*Math.pow(2,s);return i&&ev(i)&&Date.now()+o-r<el})}catch(r){if(this._debug(n,"error",r),Ke(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),es()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Nf(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Qg;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Qg}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),ev(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Mi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ep;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Mi;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),Ke(i)){const o={session:null,error:i};return ev(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(u){i.push(u)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await jI(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await jf(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&es()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),el);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/el);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${el}ms, refresh threshold is ${Sy} ticks`),s<=Sy&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof DI)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!es()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Wa(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await nt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:u,error:d}=await nt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await nt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await nt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=tv(s.access_token);let l=null;o.aal&&(l=o.aal);let u=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const h=o.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+C9>Date.now()))return r;const{data:s,error:i}=await nt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new hu("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new hu("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:y,error:T}=await this.getSession();if(T||!y.session)return{data:null,error:T};r=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:u}}=tv(r);if(X9(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const d=Z9(s.alg),h=await this.fetchJwk(s.kid,n),p=await crypto.subtle.importKey("jwk",h,d,!0,["verify"]);if(!await crypto.subtle.verify(d,p,o,D9(`${l}.${u}`)))throw new hu("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}}Ou.nextInstanceID=0;const hG=Ou;class pG extends hG{constructor(e){super(e)}}var mG=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(l,u)}d((r=r.apply(t,e||[])).next())})};class gG{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=x9(e),u=new URL(l);this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,h={db:h9,realtime:m9,auth:Object.assign(Object.assign({},p9),{storageKey:d}),global:f9},p=b9(r??{},h);this.storageKey=(s=p.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=p.global.headers)!==null&&i!==void 0?i:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=p.auth)!==null&&o!==void 0?o:{},this.headers,p.global.fetch),this.fetch=_9(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new L8(new URL("rest/v1",u).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new b8(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new c9(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return mG(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:l,debug:u},d,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pG({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:l,debug:u,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Y8(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const vG=(t,e,n)=>new gG(t,e,n),yG="https://oeszfegjwaauflelgxse.supabase.co",_G="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9lc3pmZWdqd2FhdWZsZWxneHNlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg0NzcwNjIsImV4cCI6MjA2NDA1MzA2Mn0.8QCsKap4r7jQ6bWt1b8hhTyjt3qn4bdyO5rxli_iiXE",Tn=vG(yG,_G),wG=({open:t,onOpenChange:e,isDarkMode:n})=>{const[r,s]=_.useState(!1),[i,o]=_.useState(""),[l,u]=_.useState("#000000"),[d,h]=_.useState(""),[p,g]=_.useState(""),[y,T]=_.useState(""),[x,E]=_.useState(""),[A,S]=_.useState(null),[C,O]=_.useState([]),M=async()=>{try{const{data:$,error:G}=await Tn.from("poi_types").select("*").order("name");if(G)throw G;O($||[])}catch($){console.error("Error fetching POI types:",$)}};_.useEffect(()=>{t&&M()},[t]);const D=async()=>{try{S(null);const{data:$,error:G}=await Tn.from("poi_types").insert([{name:i,color:l}]).select();if(G)throw S(G.message),G;await M(),s(!1),o(""),u("#000000"),$&&$[0]&&h($[0].id)}catch($){console.error("Error creating POI type:",$)}},z=()=>{const $=parseFloat(y),G=parseFloat(x);return isNaN($)||isNaN(G)?(S("Latitude e longitude devem ser nmeros vlidos"),!1):$<-90||$>90?(S("Latitude deve estar entre -90 e 90 graus"),!1):G<-180||G>180?(S("Longitude deve estar entre -180 e 180 graus"),!1):!0},B=async()=>{try{if(S(null),!z())return;const{data:$,error:G}=await Tn.from("pois").insert([{name:p,type_id:d,latitude:parseFloat(y),longitude:parseFloat(x)}]).select();if(G)throw S(G.message),G;e(!1),g(""),h(""),T(""),E("")}catch($){console.error("Error creating POI:",$)}};return w.jsx(h$,{open:t,onOpenChange:e,children:w.jsxs(b2,{className:`border-none rounded-2xl w-[400px] backdrop-blur-[2px] px-6 pt-5 shadow-md cursor-default z-50 ${n?"bg-zinc-900/60":"bg-[#EFF4FA]/70"}`,children:[w.jsx(E2,{children:w.jsx(T2,{className:`py-4 text-center ${n?"text-gray-200":""}`,children:r?"Criar Novo Tipo":"Criar Ponto de Interesse"})}),A&&w.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative text-sm text-center",role:"alert",children:w.jsx("span",{className:"block sm:inline",children:A})}),r?w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"block mb-5",children:[w.jsx(Io,{className:`${n?"text-gray-300":""} text-sm`,children:"Nome do Tipo"}),w.jsx("input",{type:"text",value:i,onChange:$=>o($.target.value),className:`w-full mt-1.5 p-2 rounded-full text-sm ${n?"bg-zinc-700 text-gray-200 border-zinc-600":"border-gray-300"}`})]}),w.jsx("div",{className:"w-full flex flex-col justify-center items-center",children:w.jsx(p8,{color:l,onChange:u})}),w.jsxs(uy,{className:"flex justify-between mt-4",children:[w.jsxs("button",{onClick:()=>s(!1),className:`px-3 py-2 text-destructive text-sm flex items-center justify-center gap-2 rounded-full ${n?"bg-zinc-700 text-gray-200 hover:bg-zinc-600":"bg-gray-200 hover:bg-gray-300"}`,children:[w.jsx(w0,{size:15})," Cancelar"]}),w.jsxs("button",{onClick:D,className:"px-3 py-2 flex items-center justify-center text-sm gap-2 rounded-full bg-blue-500 text-white hover:bg-blue-600",children:[w.jsx(Kf,{size:15})," Criar"]})]})]}):w.jsxs("div",{className:"space-y-2 text-sm",children:[w.jsxs("div",{children:[w.jsx(Io,{className:n?"text-gray-300 text-sm":"text-sm",children:"Nome"}),w.jsx("input",{type:"text",value:p,onChange:$=>g($.target.value),className:`w-full mt-1.5 p-2 rounded-full text-sm ${n?"bg-zinc-700 text-gray-200 border-zinc-600":"border-gray-300"}`})]}),w.jsxs("div",{children:[w.jsx(Io,{className:n?"text-gray-300 text-sm":"text-sm",children:"Tipo"}),w.jsxs("div",{className:"flex gap-2 mt-1.5",children:[w.jsxs(Y$,{value:d,onValueChange:h,children:[w.jsx(uI,{className:`text-sm rounded-full ${n?"bg-zinc-700 border-zinc-600 text-gray-200":""}`,children:w.jsx(X$,{placeholder:"Selecione um Tipo"})}),w.jsx(hI,{className:n?"bg-zinc-700 border-zinc-600 text-sm":"text-sm",children:C.map($=>w.jsx(pI,{value:$.id,className:n?"text-gray-200 focus:bg-zinc-600 text-sm":"text-sm",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:$.color}}),$.name]})},$.id))})]}),w.jsx("button",{onClick:()=>s(!0),className:`p-2 rounded-full flex items-center justify-center ${n?"bg-zinc-700 text-gray-200 hover:bg-zinc-600":"bg-gray-100 hover:bg-gray-200"}`,children:w.jsx(Kf,{size:20})})]})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{children:[w.jsx(Io,{className:n?"text-gray-300 text-sm":"text-sm",children:"Latitude"}),w.jsx("input",{type:"number",value:y,onChange:$=>T($.target.value),className:`w-full mt-1.5 p-2 rounded-full text-sm ${n?"bg-zinc-700 text-gray-200 border-zinc-600":"border-gray-300"}`,step:"any",min:"-90",max:"90"})]}),w.jsxs("div",{children:[w.jsx(Io,{className:n?"text-gray-300 text-sm":"text-sm",children:"Longitude"}),w.jsx("input",{type:"number",value:x,onChange:$=>E($.target.value),className:`w-full mt-1.5 p-2 rounded-full text-sm ${n?"bg-zinc-700 text-gray-200 border-zinc-600":"border-gray-300"}`,step:"any",min:"-180",max:"180"})]})]}),w.jsx(uy,{className:"flex justify-end",children:w.jsxs("button",{onClick:B,className:"mt-3 px-3 py-2 flex items-center justify-center text-sm gap-2 rounded-full bg-blue-500 text-white hover:bg-blue-600",children:[w.jsx(Kf,{size:15})," Criar"]})})]})]})})},Py=(t,e)=>{},FI=_.createContext({zoomToLocation:Py,setZoomToLocation:()=>Py,hiddenPOITypes:new Set,togglePOIType:()=>{}}),VI=({children:t})=>{const[e,n]=_.useState(()=>Py),[r,s]=_.useState(new Set),i=_.useCallback(o=>{s(l=>{const u=new Set(l);return u.has(o)?u.delete(o):u.add(o),u})},[]);return w.jsx(FI.Provider,{value:{zoomToLocation:e,setZoomToLocation:n,hiddenPOITypes:r,togglePOIType:i},children:t})},G_=()=>_.useContext(FI),xG=({isDarkMode:t,onPOITypeCreated:e})=>{const[n,r]=_.useState(!1),[s,i]=_.useState([]),{zoomToLocation:o}=G_(),l=async()=>{try{const{data:d,error:h}=await Tn.from("poi_types").select("*").order("name");if(h)throw h;const{data:p,error:g}=await Tn.from("pois").select("*").order("name");if(g)throw g;const y=d.map(T=>{const x=p.filter(E=>E.type_id===T.id);return{id:T.id,name:T.name,color:T.color,count:x.length,items:x.map(E=>({id:E.id,name:E.name,latitude:E.latitude,longitude:E.longitude}))}});i(y)}catch(d){console.error("Error fetching POI data:",d)}};_.useEffect(()=>{l()},[]);const u=(d,h)=>{o(d,h)};return w.jsxs("div",{className:"p-2 mt-1 h-[500px] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent hover:scrollbar-thumb-gray-400 dark:scrollbar-thumb-gray-600 dark:hover:scrollbar-thumb-gray-500",children:[w.jsxs("div",{className:"gap-3 mb-2",children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsxs("div",{className:"flex items-center",children:[w.jsx("div",{className:"rounded-lg mr-2",children:w.jsx(bC,{size:18,strokeWidth:1.5,className:t?"text-gray-300":"text-gray-900"})}),w.jsx("p",{className:`text-xs ${t?"text-gray-300":"text-gray-900"}`,children:"Pontos de Interesse"})]}),w.jsxs(e2,{children:[w.jsx(t2,{asChild:!0,children:w.jsx("button",{className:`p-1.5 rounded-lg transition-colors ${t?"hover:bg-zinc-700":"hover:bg-gray-100"}`,children:w.jsx(xC,{size:16,className:t?"text-gray-300":"text-gray-600"})})}),w.jsxs(P_,{className:t?"bg-zinc-800 border-zinc-700 text-xs":"bg-white",align:"end",children:[w.jsx(uu,{className:`cursor-pointer ${t?"text-gray-300 focus:bg-zinc-700":"text-gray-600 focus:bg-gray-100"} text-xs`,onClick:()=>r(!0),children:"Criar"}),w.jsx(uu,{className:`cursor-pointer ${t?"text-gray-300 focus:bg-zinc-700":"text-gray-600 focus:bg-gray-100"} text-xs`,children:"Editar"}),w.jsx(uu,{className:`cursor-pointer ${t?"text-gray-300 focus:bg-zinc-700":"text-gray-600 focus:bg-gray-100"} text-xs`,children:"Excluir"})]})]})]}),w.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"} mt-1`,children:"Confira abaixo os pontos de interesse que foram cadastrados para acompanhamento e monitoramento."})]}),w.jsx("div",{className:`h-[1px] ${t?"bg-gray-700":"bg-[#00000029]"}`}),w.jsx("div",{className:"space-y-1 mt-4",children:s.map(d=>w.jsxs("div",{className:"mb-0 last:mb-0",children:[w.jsxs("div",{className:`flex items-center gap-2 mb-3 sticky top-[-8px] rounded-lg p-1 z-10 ${t?"bg-[#383838]":"bg-[#E9F0FA]"}`,children:[w.jsx(Vv,{size:16,strokeWidth:1.5,style:{fill:d.color,color:d.color}}),w.jsxs("span",{className:`text-xs ${t?"text-gray-300":"text-gray-900"}`,children:[d.name," (",d.count,")"]})]}),w.jsx("div",{className:"space-y-0",children:d.items.map(h=>w.jsxs("div",{className:`flex flex-col px-3 py-2 rounded-lg transition-colors cursor-pointer ${t?"hover:bg-zinc-800":"hover:bg-gray-50"}`,onClick:()=>u(h.latitude,h.longitude),children:[w.jsx("span",{className:`text-xs ${t?"text-gray-300":"text-gray-600"}`,children:h.name}),w.jsxs("span",{className:"text-[10px] text-gray-400 mt-1",children:[h.latitude,", ",h.longitude]})]},h.id))})]},d.id))}),w.jsx(wG,{open:n,onOpenChange:d=>{r(d),d||(l(),e==null||e())},isDarkMode:t})]})};var[Tp,jre]=ps("Tooltip",[Wl]),Sp=Wl(),UI="TooltipProvider",bG=700,Ry="tooltip.open",[EG,W_]=Tp(UI),BI=t=>{const{__scopeTooltip:e,delayDuration:n=bG,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=_.useRef(!0),l=_.useRef(!1),u=_.useRef(0);return _.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),w.jsx(EG,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:_.useCallback(()=>{window.clearTimeout(u.current),o.current=!1},[]),onClose:_.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:_.useCallback(d=>{l.current=d},[]),disableHoverableContent:s,children:i})};BI.displayName=UI;var Mu="Tooltip",[TG,Ap]=Tp(Mu),zI=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=t,u=W_(Mu,t.__scopeTooltip),d=Sp(e),[h,p]=_.useState(null),g=ls(),y=_.useRef(0),T=o??u.disableHoverableContent,x=l??u.delayDuration,E=_.useRef(!1),[A,S]=xl({prop:r,defaultProp:s??!1,onChange:z=>{z?(u.onOpen(),document.dispatchEvent(new CustomEvent(Ry))):u.onClose(),i==null||i(z)},caller:Mu}),C=_.useMemo(()=>A?E.current?"delayed-open":"instant-open":"closed",[A]),O=_.useCallback(()=>{window.clearTimeout(y.current),y.current=0,E.current=!1,S(!0)},[S]),M=_.useCallback(()=>{window.clearTimeout(y.current),y.current=0,S(!1)},[S]),D=_.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{E.current=!0,S(!0),y.current=0},x)},[x,S]);return _.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),w.jsx(g_,{...d,children:w.jsx(TG,{scope:e,contentId:g,open:A,stateAttribute:C,trigger:h,onTriggerChange:p,onTriggerEnter:_.useCallback(()=>{u.isOpenDelayedRef.current?D():O()},[u.isOpenDelayedRef,D,O]),onTriggerLeave:_.useCallback(()=>{T?M():(window.clearTimeout(y.current),y.current=0)},[M,T]),onOpen:O,onClose:M,disableHoverableContent:T,children:n})})};zI.displayName=Mu;var ky="TooltipTrigger",$I=_.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Ap(ky,n),i=W_(ky,n),o=Sp(n),l=_.useRef(null),u=ut(e,l,s.onTriggerChange),d=_.useRef(!1),h=_.useRef(!1),p=_.useCallback(()=>d.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),w.jsx(v_,{asChild:!0,...o,children:w.jsx(Qe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:u,onPointerMove:Ce(t.onPointerMove,g=>{g.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:Ce(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:Ce(t.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:Ce(t.onFocus,()=>{d.current||s.onOpen()}),onBlur:Ce(t.onBlur,s.onClose),onClick:Ce(t.onClick,s.onClose)})})});$I.displayName=ky;var SG="TooltipPortal",[Dre,AG]=Tp(SG,{forceMount:void 0}),Tl="TooltipContent",GI=_.forwardRef((t,e)=>{const n=AG(Tl,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Ap(Tl,t.__scopeTooltip);return w.jsx(Ws,{present:r||o.open,children:o.disableHoverableContent?w.jsx(WI,{side:s,...i,ref:e}):w.jsx(CG,{side:s,...i,ref:e})})}),CG=_.forwardRef((t,e)=>{const n=Ap(Tl,t.__scopeTooltip),r=W_(Tl,t.__scopeTooltip),s=_.useRef(null),i=ut(e,s),[o,l]=_.useState(null),{trigger:u,onClose:d}=n,h=s.current,{onPointerInTransitChange:p}=r,g=_.useCallback(()=>{l(null),p(!1)},[p]),y=_.useCallback((T,x)=>{const E=T.currentTarget,A={x:T.clientX,y:T.clientY},S=OG(A,E.getBoundingClientRect()),C=MG(A,S),O=LG(x.getBoundingClientRect()),M=jG([...C,...O]);l(M),p(!0)},[p]);return _.useEffect(()=>()=>g(),[g]),_.useEffect(()=>{if(u&&h){const T=E=>y(E,h),x=E=>y(E,u);return u.addEventListener("pointerleave",T),h.addEventListener("pointerleave",x),()=>{u.removeEventListener("pointerleave",T),h.removeEventListener("pointerleave",x)}}},[u,h,y,g]),_.useEffect(()=>{if(o){const T=x=>{const E=x.target,A={x:x.clientX,y:x.clientY},S=(u==null?void 0:u.contains(E))||(h==null?void 0:h.contains(E)),C=!NG(A,o);S?g():C&&(g(),d())};return document.addEventListener("pointermove",T),()=>document.removeEventListener("pointermove",T)}},[u,h,o,d,g]),w.jsx(WI,{...t,ref:i})}),[PG,RG]=Tp(Mu,{isInside:!1}),kG=sR("TooltipContent"),WI=_.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,u=Ap(Tl,n),d=Sp(n),{onClose:h}=u;return _.useEffect(()=>(document.addEventListener(Ry,h),()=>document.removeEventListener(Ry,h)),[h]),_.useEffect(()=>{if(u.trigger){const p=g=>{const y=g.target;y!=null&&y.contains(u.trigger)&&h()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[u.trigger,h]),w.jsx(Yu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:p=>p.preventDefault(),onDismiss:h,children:w.jsxs(y_,{"data-state":u.stateAttribute,...d,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[w.jsx(kG,{children:r}),w.jsx(PG,{scope:n,isInside:!0,children:w.jsx(w$,{id:u.contentId,role:"tooltip",children:s||r})})]})})});GI.displayName=Tl;var HI="TooltipArrow",IG=_.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Sp(n);return RG(HI,n).isInside?null:w.jsx(__,{...s,...r,ref:e})});IG.displayName=HI;function OG(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function MG(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function LG(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function NG(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],u=e[o],d=l.x,h=l.y,p=u.x,g=u.y;h>r!=g>r&&n<(p-d)*(r-h)/(g-h)+d&&(s=!s)}return s}function jG(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),DG(e)}function DG(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var FG=BI,VG=zI,UG=$I,qI=GI;const BG=FG,Vc=VG,Uc=UG,tl=_.forwardRef(({className:t,sideOffset:e=4,...n},r)=>w.jsx(qI,{ref:r,sideOffset:e,className:Ge("z-50 overflow-hidden rounded-md px-3 py-1.5 text-xs animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","theme-aware-tooltip",t),...n}));tl.displayName=qI.displayName;const zG=({onDarkModeChange:t,onHistoryClick:e,onControlConsultarClick:n})=>{const[r,s]=_.useState("closed"),[i,o]=_.useState(null),[l,u]=_.useState({}),[d,h]=_.useState(!1),[p,g]=_.useState([]),{hiddenPOITypes:y,togglePOIType:T}=G_(),x=async()=>{try{const{data:G,error:te}=await Tn.from("poi_types").select("*").order("name");if(te)throw te;const{data:Q,error:se}=await Tn.from("pois").select("*");if(se)throw se;const re=G.map(ge=>({...ge,count:Q.filter(ue=>ue.type_id===ge.id).length}));g(re)}catch(G){console.error("Error fetching POI data:",G)}};_.useEffect(()=>{x()},[]);const E=G=>{const te=G.split("_"),Q=te.includes("veiculos"),se=te.includes("emTransito")||te.includes("naBase");u(re=>{const ge={...re};return te.length===1?Object.keys(re).forEach(ue=>{ue.split("_")[0]!==G&&delete ge[ue]}):Q&&se&&Object.keys(re).forEach(ue=>{ue.includes("veiculos")&&ue!=="veiculos"&&ue!==G&&delete ge[ue]}),ge[G]=!re[G],ge})},A=()=>{s("closed"),o(null),u({})},S=["monitoramento","controle","pontosInteresse"],C=G=>{if(G==="darkMode"){const te=!d;h(te),t==null||t(te);return}if(G==="historico"){e==null||e();return}S.includes(G)?(s("full"),o(G)):(s("half"),o(G))},O={monitoramento:w.jsx(i4,{data:Y6,expandedItems:l,onToggleItem:E,isDarkMode:d}),controle:w.jsx(t$,{data:X6,isDarkMode:d,onConsultarClick:n}),pontosInteresse:w.jsx(xG,{isDarkMode:d,onPOITypeCreated:x})},M=()=>O[i||""]||null,D={monitoramento:w.jsx(y0,{size:20,strokeWidth:1.5}),controle:w.jsx(TC,{size:20,strokeWidth:1.5}),historico:w.jsx(O3,{size:20,strokeWidth:1.5}),estatisticas:w.jsx(v3,{size:20,strokeWidth:1.5})},z=G=>D[G]||null,B={notifications:w.jsx(wC,{size:16,strokeWidth:1.5}),location:w.jsx(Vv,{size:16,strokeWidth:1.5}),darkMode:d?w.jsx(P3,{size:16}):w.jsx(A3,{size:16,strokeWidth:1.5}),logout:w.jsx(T3,{size:16,strokeWidth:1.5})},$=G=>B[G]||null;return w.jsx(BG,{children:w.jsxs(tr.div,{className:Ge("theme-aware-sidebar rounded-[20px] shadow-[2px_2px_7px_#00000040] backdrop-blur-[2px] backdrop-brightness-[100%] [-webkit-backdrop-filter:blur(2px)_brightness(100%)] relative flex flex-col select-none",d?"text-white":""),animate:{width:r==="closed"?66:r==="half"?220:450},transition:{duration:.3},children:[w.jsxs("div",{className:`p-2 flex ${r==="closed"?"justify-center":"justify-between items-center"}`,children:[w.jsxs("div",{className:`flex items-center ${r==="closed"?"":"gap-3"}`,children:[w.jsx(bR,{className:`w-[45px] h-[45px] border-2 ${d?"border-[#272727]":"border-white"}`,children:w.jsx(ER,{className:"bg-[#95C0FF] text-white text-lg",children:"BL"})}),r!=="closed"&&w.jsxs("div",{className:"flex flex-col",children:[w.jsx("span",{className:"theme-aware-text-secondary text-xs",children:"Bem-vindo"}),w.jsx("span",{className:`text-sm font-medium ${d?"text-gray-300":"text-gray-700"}`,children:"Bruno Leonardi"})]})]}),r!=="closed"&&w.jsxs(Vc,{children:[w.jsx(Uc,{asChild:!0,children:w.jsx("button",{onClick:A,className:"theme-aware-hover p-1 rounded-full transition-colors",children:w.jsx(y3,{size:20})})}),w.jsx(tl,{side:"right",className:"theme-aware-tooltip",children:"Fechar Menu"})]})]}),w.jsxs("div",{className:`w-full flex ${r==="closed"?"flex-col items-center gap-2":""}`,children:[w.jsxs("div",{className:`flex-1 ${r==="closed"?"flex flex-col items-center":""}`,children:[w.jsx("div",{className:`px-4 py-2 ${r==="closed"?"text-center":"flex items-center justify-between"}`,children:w.jsx("span",{className:"theme-aware-text-secondary text-xs",children:"Menu"})}),Q6.map(G=>w.jsxs(Vc,{children:[w.jsx(Uc,{asChild:!0,children:w.jsxs("div",{className:Ge("flex items-center h-10 px-4 cursor-pointer rounded-lg mx-2",r==="closed"?"justify-center":"",i===G.id?"theme-aware-active":"theme-aware-hover"),onClick:()=>C(G.id),children:[w.jsxs("div",{className:"relative theme-aware-text",children:[z(G.id),G.badge&&w.jsx(I1,{className:`absolute -top-2 -right-3 w-[18px] h-[16px] rounded-full flex items-center justify-center border ${d?"bg-zinc-700 border-white text-white hover:bg-zinc-700":"bg-white border-black text-black hover:bg-white"}`,children:w.jsx("span",{className:"text-[10px] font-semibold",children:G.badge})})]}),r!=="closed"&&w.jsx("span",{className:"theme-aware-text ml-3 text-sm",children:G.label})]})}),r==="closed"&&w.jsx(tl,{side:"right",className:"theme-aware-tooltip",children:G.label})]},G.id)),w.jsx("div",{className:"my-2 px-3 w-full",children:w.jsx("div",{className:"theme-aware-divider h-[1px] w-full"})}),w.jsx("div",{className:`px-4 py-2 ${r==="closed"?"text-center":"flex items-center justify-between"}`,children:w.jsxs("span",{className:"theme-aware-text-secondary text-xs",children:[r==="closed"?"PIs: ":"Pontos de Interesse: ",w.jsx("span",{className:"font-bold",children:p.reduce((G,te)=>G+te.count,0)})]})}),w.jsxs(Vc,{children:[w.jsx(Uc,{asChild:!0,children:w.jsxs("div",{className:Ge("flex items-center h-10 px-4 cursor-pointer rounded-lg mx-2",r==="closed"?"justify-center":"",i==="pontosInteresse"?"theme-aware-active":"theme-aware-hover"),onClick:()=>C("pontosInteresse"),children:[w.jsx(bC,{size:20,strokeWidth:1.5,className:"theme-aware-text"}),r!=="closed"&&w.jsx("span",{className:"theme-aware-text ml-3 text-sm",children:"Pontos de Interesse"})]})}),r==="closed"&&w.jsx(tl,{side:"right",className:"theme-aware-tooltip",children:"Pontos de Interesse"})]}),w.jsx("div",{className:"theme-aware-card mx-2 my-2 rounded-xl",children:w.jsx("div",{className:"p-4",children:p.map(G=>w.jsxs("div",{className:`flex items-center ${r==="closed"?"justify-center":""} gap-3 mb-5 last:mb-0 cursor-pointer`,onClick:()=>T(G.id),style:{opacity:y.has(G.id)?.5:1},children:[w.jsxs("div",{className:"relative",children:[w.jsx(Vv,{size:20,style:{fill:G.color,color:G.color}}),w.jsx(I1,{className:"absolute -top-2 -right-3 w-[18px] h-[16px] rounded-full border border-white flex items-center justify-center",style:{backgroundColor:G.color},children:w.jsx("span",{className:"text-[10px] text-white font-semibold",children:G.count})})]}),r!=="closed"&&w.jsx("span",{className:"theme-aware-text text-sm pl-3",children:G.name})]},G.id))})}),r!=="closed"?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"px-4 py-2",children:w.jsx("span",{className:"theme-aware-text-secondary text-xs",children:"Atalhos e Notificaes"})}),w.jsx("div",{className:"mx-2 mb-4",children:w.jsx("div",{className:"theme-aware-card flex items-center justify-between px-3 py-1.5 rounded-lg",children:J6.map(G=>w.jsxs(Vc,{children:[w.jsx(Uc,{asChild:!0,children:w.jsx("div",{className:Ge("p-1.5 rounded-lg cursor-pointer transition-colors",i===G.id?"theme-aware-active":"theme-aware-hover theme-aware-text"),onClick:()=>C(G.id),children:$(G.id)})}),w.jsx(tl,{side:"top",className:"theme-aware-tooltip",children:G.label})]},G.id))})})]}):w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"px-4 py-2 text-center",children:w.jsx("span",{className:"theme-aware-text-secondary text-xs",children:"Mais"})}),w.jsxs(Vc,{children:[w.jsx(Uc,{asChild:!0,children:w.jsx("div",{className:"theme-aware-hover flex justify-center p-2 mb-2 cursor-pointer rounded-lg mx-2",onClick:()=>s("half"),children:w.jsx(xC,{size:20,className:"theme-aware-text"})})}),w.jsx(tl,{side:"right",className:"theme-aware-tooltip",children:"Expandir Menu"})]})]})]}),r==="full"&&w.jsx("div",{className:"theme-aware-divider w-[1px] mx-2"}),r==="full"&&w.jsx(tr.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"flex-1",children:M()})]})]})})},CT=[{id:1,status:"Processando",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:2,status:"Processando",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:3,status:"Processando",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:4,status:"Concludo",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:5,status:"Processando",veiculo:"GRVT-P01",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:6,status:"Concludo",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:7,status:"Concludo",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:8,status:"Concludo",veiculo:"GRVT-P01",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:9,status:"Concludo",veiculo:"GRVT-P01",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:10,status:"Processando",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:11,status:"Processando",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:12,status:"Processando",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:13,status:"Processando",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:14,status:"Concludo",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:15,status:"Processando",veiculo:"GRVT-P01",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:16,status:"Concludo",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:17,status:"Concludo",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:18,status:"Concludo",veiculo:"GRVT-P01",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:19,status:"Concludo",veiculo:"GRVT-P01",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"},{id:20,status:"Processando",veiculo:"GRVT-P05",inicio:"07/05/2025 08:04",fim:"08/05/2025 14:35"}],nv=10,$G=({isDarkMode:t,onClose:e})=>{const[n,r]=_.useState([]),[s,i]=_.useState(""),[o,l]=_.useState(!1),[u,d]=_.useState(1),h=_.useMemo(()=>{if(!s)return CT;const S=s.toLowerCase();return CT.filter(C=>Object.values(C).some(O=>O.toString().toLowerCase().includes(S)))},[s]),p=Math.ceil(h.length/nv),g=_.useMemo(()=>{const S=(u-1)*nv;return h.slice(S,S+nv)},[h,u]),y=()=>{n.length===g.length?r([]):r(g.map(S=>S.id))},T=S=>{r(C=>C.includes(S)?C.filter(O=>O!==S):[...C,S])},x=()=>{l(!0),setTimeout(e,50)},E=S=>{d(S),r([])},A=()=>{const S=[];let O=1,M=p;if(p>7){const D=Math.floor(3.5),z=7-D-1;u<=D?M=7:u>p-z?O=p-7+1:(O=u-D,M=u+z)}for(let D=O;D<=M;D++)S.push(w.jsx("button",{onClick:()=>E(D),className:`px-3 py-1 rounded-md ${u===D?"bg-blue-400 text-white":t?"text-gray-300 hover:bg-zinc-700":"text-gray-600 hover:bg-gray-100"}`,children:D},D));return O>1&&(S.unshift(w.jsx("span",{className:`px-3 py-1 ${t?"text-gray-300":"text-gray-600"}`,children:"..."},"start-ellipsis")),S.unshift(w.jsx("button",{onClick:()=>E(1),className:`px-3 py-1 rounded-md ${t?"text-gray-300 hover:bg-zinc-700":"text-gray-600 hover:bg-gray-100"}`,children:"1"},1))),M<p&&(S.push(w.jsx("span",{className:`px-3 py-1 ${t?"text-gray-300":"text-gray-600"}`,children:"..."},"end-ellipsis\\")),S.push(w.jsx("button",{onClick:()=>E(p),className:`px-3 py-1 rounded-md ${t?"text-gray-300 hover:bg-zinc-700":"text-gray-600 hover:bg-gray-100"}`,children:p},p))),S};return w.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[w.jsx(tr.div,{className:"fixed inset-0 bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},onClick:x}),w.jsxs(tr.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.3,bounce:.2},className:`w-[90%] max-w-6xl max-h-[90dvh] rounded-2xl ${t?"bg-zinc-900/60":"bg-[#EFF4FA] bg-opacity-60"} backdrop-blur-[2px] px-6 pt-5 shadow-md flex flex-col relative cursor-default z-50`,onClick:S=>S.stopPropagation(),children:[w.jsxs(tr.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:.1},className:"flex flex-col items-center mb-3",children:[w.jsx("h2",{className:`text-lg font-semibold absolute self-start mt-4 ${t?"text-gray-300":"text-gray-600"}`,children:"Histrico de Vdeos"}),w.jsx("div",{className:"w-full max-w-md",children:w.jsxs("div",{className:"relative",children:[w.jsx("input",{name:"search",type:"text",placeholder:"Busca por ID, status, data...",value:s,onChange:S=>i(S.target.value),className:`w-full h-8 pl-4 pr-8 text-sm rounded-full ${t?"bg-zinc-800 text-gray-200 placeholder-gray-400":"bg-white text-gray-900 placeholder-gray-500"}`}),w.jsx(_0,{className:`absolute right-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 ${t?"text-gray-400":"text-gray-500"}`})]})}),w.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[w.jsxs(tr.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:y,className:`px-4 py-1.5 text-xs rounded-full transition-colors flex items-center gap-2 ${t?"bg-zinc-800 text-gray-300 hover:bg-zinc-700":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[w.jsx(SC,{size:14}),"Marcar Tudo"]}),w.jsxs(tr.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>r([]),className:`px-4 py-1.5 text-xs rounded-full transition-colors flex items-center gap-2 ${t?"bg-zinc-800 text-gray-300 hover:bg-zinc-700":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[w.jsx(AC,{size:14}),"Desmarcar Tudo"]})]})]}),w.jsxs(tr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:.2},className:"rounded-lg flex-1 overflow-hidden flex flex-col",children:[w.jsx("div",{className:"overflow-auto flex-1 shadow-md",children:w.jsxs("table",{className:`w-full ${t?"bg-zinc-800":"bg-white"} rounded-lg`,children:[w.jsx("thead",{className:"sticky top-0",children:w.jsxs("tr",{className:`${t?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"} border-b`,children:[w.jsx("th",{className:"px-3 py-2 text-left w-8"}),w.jsx("th",{className:`px-3 py-2 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"ID"}),w.jsx("th",{className:`px-3 py-2 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Status"}),w.jsx("th",{className:`px-3 py-2 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Veculo"}),w.jsx("th",{className:`px-3 py-2 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Incio"}),w.jsx("th",{className:`px-3 py-2 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Fim"}),w.jsx("th",{className:`px-3 py-2 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Aes"})]})}),w.jsxs("tbody",{children:[g.map((S,C)=>w.jsxs(tr.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{delay:C*.03,duration:.2},className:`border-t ${t?"border-zinc-700":"border-gray-200"} ${n.includes(S.id)?t?"bg-[#333333]":"bg-[#f9f9f9]":""}`,children:[w.jsx("td",{className:"px-3 py-3",children:w.jsx("input",{type:"checkbox",checked:n.includes(S.id),onChange:()=>T(S.id),className:`h-3 w-3 rounded ${t?"text-blue-500 bg-zinc-700 border-zinc-600":"text-blue-600 bg-white border-gray-300"}`})}),w.jsx("td",{className:`px-3 py-3 text-sm ${t?"text-gray-300":"text-gray-900"}`,children:S.id}),w.jsx("td",{className:`px-3 py-3 text-sm ${t?"text-gray-300":"text-gray-900"}`,children:S.status}),w.jsx("td",{className:`px-3 py-3 text-sm ${t?"text-gray-300":"text-gray-900"}`,children:S.veiculo}),w.jsx("td",{className:`px-3 py-3 text-sm ${t?"text-gray-300":"text-gray-900"}`,children:S.inicio}),w.jsx("td",{className:`px-3 py-3 text-sm ${t?"text-gray-300":"text-gray-900"}`,children:S.fim}),w.jsx("td",{className:"px-3 py-3",children:w.jsx(tr.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-1.5 rounded-lg transition-colors ${t?"hover:bg-zinc-600":"hover:bg-gray-100"}`,children:w.jsx(b3,{className:`w-4 h-4 ${t?"text-gray-400":"text-gray-600"}`})})})]},S.id)),g.length===0&&w.jsx("tr",{children:w.jsx("td",{colSpan:7,className:`text-center py-4 ${t?"text-gray-400":"text-gray-500"}`,children:"Nenhum resultado encontrado"})})]})]})}),w.jsx("div",{className:"p-4 flex items-center justify-center",children:w.jsx("div",{className:`flex gap-1 rounded-lg p-0.5 shadow-md ${t?"bg-zinc-800":"bg-white"}`,children:A()})})]})]})]})};function Sh(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const H_=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),PT=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);PT&&parseFloat(PT[1]);const GG="3.4.15";function Bs(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const th=typeof process!="object"||String(process)!=="[object process]"||process.browser,WG=typeof window<"u"&&typeof window.orientation<"u",RT=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);RT&&parseFloat(RT[1]);function Lu(t){"@babel/helpers - typeof";return Lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lu(t)}function HG(t,e){if(Lu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qG(t){var e=HG(t,"string");return Lu(e)=="symbol"?e:e+""}function R(t,e,n){return(e=qG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class KG{constructor(e,n){R(this,"name",void 0),R(this,"workerThread",void 0),R(this,"isRunning",!0),R(this,"result",void 0),R(this,"_resolve",()=>{}),R(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((r,s)=>{this._resolve=r,this._reject=s})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){Bs(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Bs(this.isRunning),this.isRunning=!1,this._reject(e)}}let rv=class{terminate(){}};const sv=new Map;function YG(t){Bs(t.source&&!t.url||!t.source&&t.url);let e=sv.get(t.source||t.url);return e||(t.url&&(e=XG(t.url),sv.set(t.url,e)),t.source&&(e=KI(t.source),sv.set(t.source,e))),Bs(e),e}function XG(t){if(!t.startsWith("http"))return t;const e=ZG(t);return KI(e)}function KI(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function ZG(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function YI(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(t){if(kT(t))r.add(t);else if(kT(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const s in t)YI(t[s],e,r)}}return n===void 0?Array.from(r):[]}function kT(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const iv=()=>{};class Iy{static isSupported(){return typeof Worker<"u"&&th||typeof rv<"u"&&!th}constructor(e){R(this,"name",void 0),R(this,"source",void 0),R(this,"url",void 0),R(this,"terminated",!1),R(this,"worker",void 0),R(this,"onMessage",void 0),R(this,"onError",void 0),R(this,"_loadableURL","");const{name:n,source:r,url:s}=e;Bs(r||s),this.name=n,this.source=r,this.url=s,this.onMessage=iv,this.onError=i=>console.log(i),this.worker=th?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=iv,this.onError=iv,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||YI(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=YG({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new rv(r,{eval:!1})}else if(this.source)e=new rv(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class QG{static isSupported(){return Iy.isSupported()}constructor(e){R(this,"name","unnamed"),R(this,"source",void 0),R(this,"url",void 0),R(this,"maxConcurrency",1),R(this,"maxMobileConcurrency",1),R(this,"onDebug",()=>{}),R(this,"reuseWorkers",!0),R(this,"props",{}),R(this,"jobQueue",[]),R(this,"idleQueue",[]),R(this,"count",0),R(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(i,o,l)=>i.done(l),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(i,o)=>i.error(o);const s=new Promise(i=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:i}),this));return this._startQueuedJob(),await s}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new KG(n.name,e);e.onMessage=s=>n.onMessage(r,s.type,s.payload),e.onError=s=>n.onError(r,s),n.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Iy({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return WG?this.maxMobileConcurrency:this.maxConcurrency}}const JG={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Ms{static isSupported(){return Iy.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ms._workerFarm=Ms._workerFarm||new Ms({}),Ms._workerFarm.setProps(e),Ms._workerFarm}constructor(e){R(this,"props",void 0),R(this,"workerPools",new Map),this.props={...JG},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:s}=e;let i=this.workerPools.get(n);return i||(i=new QG({name:n,source:r,url:s}),i.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,i)),i}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}R(Ms,"_workerFarm",void 0);const eW="latest";function tW(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let s=n.workerUrl;if(!s&&t.id==="compression"&&(s=e.workerUrl),e._workerType==="test"&&(s="modules/".concat(t.module,"/dist/").concat(r)),!s){let i=t.version;i==="latest"&&(i=eW);const o=i?"@".concat(i):"";s="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(r)}return Bs(s),s}function nW(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:GG;Bs(t,"no worker provided");const n=t.version;return!(!e||!n)}function rW(t,e){return!Ms.isSupported()||!th&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function sW(t,e,n,r,s){const i=t.id,o=tW(t,n),u=Ms.getWorkerFarm(n).getWorkerPool({name:i,url:o});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const d=await u.startJob("process-on-worker",iW.bind(null,s));return d.postMessage("process",{input:e,options:n,context:r}),await(await d.result).result}async function iW(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:s,input:i,options:o}=r;try{const l=await t(i,o);e.postMessage("done",{id:s,result:l})}catch(l){const u=l instanceof Error?l.message:"unknown error";e.postMessage("error",{id:s,error:u})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function oW(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),s=new Uint8Array(e);for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}function aW(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map(l=>l instanceof ArrayBuffer?new Uint8Array(l):l),s=r.reduce((l,u)=>l+u.byteLength,0),i=new Uint8Array(s);let o=0;for(const l of r)i.set(l,o),o+=l.byteLength;return i.buffer}async function lW(t){const e=[];for await(const n of t)e.push(n);return aW(...e)}function IT(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class OT{constructor(e,n){R(this,"name",void 0),R(this,"type",void 0),R(this,"sampleSize",1),R(this,"time",void 0),R(this,"count",void 0),R(this,"samples",void 0),R(this,"lastTiming",void 0),R(this,"lastSampleTime",void 0),R(this,"lastSampleCount",void 0),R(this,"_count",0),R(this,"_time",0),R(this,"_samples",0),R(this,"_startTime",0),R(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=IT(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(IT()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class q_{constructor(e){R(this,"id",void 0),R(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof OT?this.stats[n]=e:this.stats[n]=new OT(n,r)),this.stats[n]}}let cW="";const MT={};function uW(t){for(const e in MT)if(t.startsWith(e)){const n=MT[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(cW).concat(t)),t}function dW(t){return t&&typeof t=="object"&&t.isBuffer}function XI(t){if(dW(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function ZI(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function fW(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const hW=t=>typeof t=="boolean",mu=t=>typeof t=="function",td=t=>t!==null&&typeof t=="object",LT=t=>td(t)&&t.constructor==={}.constructor,pW=t=>t&&typeof t[Symbol.iterator]=="function",mW=t=>t&&typeof t[Symbol.asyncIterator]=="function",ta=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,na=t=>typeof Blob<"u"&&t instanceof Blob,gW=t=>t&&typeof t=="object"&&t.isBuffer,vW=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||td(t)&&mu(t.tee)&&mu(t.cancel)&&mu(t.getReader),yW=t=>td(t)&&mu(t.read)&&mu(t.pipe)&&hW(t.readable),QI=t=>vW(t)||yW(t),_W=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,wW=/^([-\w.]+\/[-\w.+]+)/;function xW(t){const e=wW.exec(t);return e?e[1]:t}function NT(t){const e=_W.exec(t);return e?e[1]:""}const JI=/\?.*/;function bW(t){const e=t.match(JI);return e&&e[0]}function K_(t){return t.replace(JI,"")}function Cp(t){return ta(t)?t.url:na(t)?t.name||"":typeof t=="string"?t:""}function Y_(t){if(ta(t)){const e=t,n=e.headers.get("content-type")||"",r=K_(e.url);return xW(n)||NT(r)}return na(t)?t.type||"":typeof t=="string"?NT(t):""}function EW(t){return ta(t)?t.headers["content-length"]||-1:na(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function eO(t){if(ta(t))return t;const e={},n=EW(t);n>=0&&(e["content-length"]=String(n));const r=Cp(t),s=Y_(t);s&&(e["content-type"]=s);const i=await AW(t);i&&(e["x-first-bytes"]=i),typeof t=="string"&&(t=new TextEncoder().encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:r}),o}async function TW(t){if(!t.ok){const e=await SW(t);throw new Error(e)}}async function SW(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}async function AW(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const s=new FileReader;s.onload=i=>{var o;return r(i==null||(o=i.target)===null||o===void 0?void 0:o.result)},s.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5),r=CW(n);return"data:base64,".concat(r)}return null}function CW(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}async function jT(t,e){if(typeof t=="string"){t=uW(t);let n=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(n=e.fetch),await fetch(t,n)}return await eO(t)}function tO(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const n=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent;return!!(n&&n.indexOf("Electron")>=0)}function Hs(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||tO()}const nh={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,process:typeof process=="object"&&process},Df=nh.window||nh.self||nh.global,Bc=nh.process||{},nO=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Hs();const ov=globalThis;function rO(t){if(!Hs())return"Node";if(tO())return"Electron";const n=(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,s=n.indexOf("Trident/")!==-1;return r||s?"IE":ov.chrome?"Chrome":ov.safari?"Safari":ov.mozInnerScreenX?"Firefox":"Unknown"}function PW(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class RW{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";R(this,"storage",void 0),R(this,"id",void 0),R(this,"config",void 0),this.storage=PW(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function kW(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function IW(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function av(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const s=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const i=t.width*n,o=t.height*n,l=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(i/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(s,");"),"background-size:".concat(i,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),l]}let Ah;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Ah||(Ah={}));function DT(t){return typeof t=="string"?Ah[t.toUpperCase()]||Ah.WHITE:t}function OW(t,e,n){return!Hs&&typeof t=="string"&&(e&&(e=DT(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=DT(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function MW(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const s of r)typeof t[s]=="function"&&(e.find(i=>s===i)||(t[s]=t[s].bind(t)))}function Ch(t,e){if(!t)throw new Error(e||"Assertion failed")}function qa(){let t;if(Hs&&"performance"in Df){var e,n;t=Df==null||(e=Df.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in Bc){var r;const s=Bc==null||(r=Bc.hrtime)===null||r===void 0?void 0:r.call(Bc);t=s[0]*1e3+s[1]/1e6}else t=Date.now();return t}const Ka={debug:Hs&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},LW={enabled:!0,level:0};function wr(){}const FT={},VT={once:!0};class nd{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};R(this,"id",void 0),R(this,"VERSION",nO),R(this,"_startTs",qa()),R(this,"_deltaTs",qa()),R(this,"_storage",void 0),R(this,"userData",{}),R(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new RW("__probe-".concat(this.id,"__"),LW),this.timeStamp("".concat(this.id," started")),MW(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((qa()-this._startTs).toPrecision(10))}getDelta(){return Number((qa()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){Ch(e,n)}warn(e){return this._getLogFunction(0,e,Ka.warn,arguments,VT)}error(e){return this._getLogFunction(0,e,Ka.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Ka.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Ka.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];return this._getLogFunction(e,n,Ka.debug||Ka.info,arguments,VT)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||wr,r&&[r],{tag:FW(n)}):wr}image(e){let{logLevel:n,priority:r,image:s,message:i="",scale:o=1}=e;return this._shouldLog(n||r)?Hs?DW({image:s,message:i,scale:o}):jW():wr}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||wr)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const s=UT({logLevel:e,message:n,opts:r}),{collapsed:i}=r;return s.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(s)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||wr)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=sO(e)}_getLogFunction(e,n,r,s,i){if(this._shouldLog(e)){i=UT({logLevel:e,message:n,args:s,opts:i}),r=r||i.method,Ch(r),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=qa();const o=i.tag||i.message;if(i.once)if(!FT[o])FT[o]=qa();else return wr;return n=NW(this.id,i.message,i),r.bind(console,n,...i.args)}return wr}}R(nd,"VERSION",nO);function sO(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Ch(Number.isFinite(e)&&e>=0),e}function UT(t){const{logLevel:e,message:n}=t;t.logLevel=sO(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const s=typeof t.message;return Ch(s==="string"||s==="object"),Object.assign(t,{args:r},t.opts)}function NW(t,e,n){if(typeof e=="string"){const r=n.time?IW(kW(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=OW(e,n.color,n.background)}return e}function jW(t){return console.warn("removed"),wr}function DW(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const i=new Image;return i.onload=()=>{const o=av(i,n,r);console.log(...o)},i.src=e,wr}const s=e.nodeName||"";if(s.toLowerCase()==="img")return console.log(...av(e,n,r)),wr;if(s.toLowerCase()==="canvas"){const i=new Image;return i.onload=()=>console.log(...av(i,n,r)),i.src=e.toDataURL(),wr}return wr}function FW(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const BT=new nd({id:"loaders.gl"});class VW{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class UW{constructor(){R(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.log.bind(this.console,...n)}info(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.info.bind(this.console,...n)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.warn.bind(this.console,...n)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.error.bind(this.console,...n)}}const iO={fetch:null,mimeType:void 0,nothrow:!1,log:new UW,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:H_,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},BW={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function oO(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const aO=()=>{const t=oO();return t.globalOptions=t.globalOptions||{...iO},t.globalOptions};function zW(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],$W(t,n),WW(e,t,r)}function $W(t,e){zT(t,null,iO,BW,e);for(const n of e){const r=t&&t[n.id]||{},s=n.options&&n.options[n.id]||{},i=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};zT(r,n.id,s,i,e)}}function zT(t,e,n,r,s){const i=e||"Top level",o=e?"".concat(e,"."):"";for(const l in t){const u=!e&&td(t[l]),d=l==="baseUri"&&!e,h=l==="workerUrl"&&e;if(!(l in n)&&!d&&!h){if(l in r)BT.warn("".concat(i," loader option '").concat(o).concat(l,"' no longer supported, use '").concat(r[l],"'"))();else if(!u){const p=GW(l,s);BT.warn("".concat(i," loader option '").concat(o).concat(l,"' not recognized. ").concat(p))()}}}}function GW(t,e){const n=t.toLowerCase();let r="";for(const s of e)for(const i in s.options){if(t===i)return"Did you mean '".concat(s.id,".").concat(i,"'?");const o=i.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(s.id,".").concat(i,"'?"))}return r}function WW(t,e,n){const s={...t.options||{}};return HW(s,n),s.log===null&&(s.log=new VW),$T(s,aO()),$T(s,e),s}function $T(t,e){for(const n in e)if(n in e){const r=e[n];LT(r)&&LT(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function HW(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function X_(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function Z_(t){var e,n;Sh(t,"null loader"),Sh(X_(t),"invalid loader");let r;return Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const lO=()=>{const t=oO();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function qW(t){const e=lO();t=Array.isArray(t)?t:[t];for(const n of t){const r=Z_(n);e.find(s=>r===s)||e.unshift(r)}}function KW(){return lO()}const YW=new nd({id:"loaders.gl"}),XW=/\.([^.]+)$/;async function ZW(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!cO(t))return null;let s=GT(t,e,{...n,nothrow:!0},r);if(s)return s;if(na(t)&&(t=await t.slice(0,10).arrayBuffer(),s=GT(t,e,n,r)),!s&&!(n!=null&&n.nothrow))throw new Error(uO(t));return s}function GT(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!cO(t))return null;if(e&&!Array.isArray(e))return Z_(e);let s=[];e&&(s=s.concat(e)),n!=null&&n.ignoreRegisteredLoaders||s.push(...KW()),JW(s);const i=QW(t,s,n,r);if(!i&&!(n!=null&&n.nothrow))throw new Error(uO(t));return i}function QW(t,e,n,r){const s=Cp(t),i=Y_(t),o=K_(s)||(r==null?void 0:r.url);let l=null,u="";if(n!=null&&n.mimeType&&(l=lv(e,n==null?void 0:n.mimeType),u="match forced by supplied MIME type ".concat(n==null?void 0:n.mimeType)),l=l||eH(e,o),u=u||(l?"matched url ".concat(o):""),l=l||lv(e,i),u=u||(l?"matched MIME type ".concat(i):""),l=l||nH(e,t),u=u||(l?"matched initial data ".concat(dO(t)):""),l=l||lv(e,n==null?void 0:n.fallbackMimeType),u=u||(l?"matched fallback MIME type ".concat(i):""),u){var d;YW.log(1,"selectLoader selected ".concat((d=l)===null||d===void 0?void 0:d.name,": ").concat(u,"."))}return l}function cO(t){return!(t instanceof Response&&t.status===204)}function uO(t){const e=Cp(t),n=Y_(t);let r="No valid loader found (";r+=e?"".concat(ZI(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const s=t?dO(t):"";return r+=s?' first bytes: "'.concat(s,'"'):"first bytes: not available",r+=")",r}function JW(t){for(const e of t)Z_(e)}function eH(t,e){const n=e&&XW.exec(e),r=n&&n[1];return r?tH(t,r):null}function tH(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function lv(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function nH(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(rH(e,n))return n}else if(ArrayBuffer.isView(e)){if(WT(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&WT(e,0,n))return n;return null}function rH(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function WT(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(s=>sH(t,e,n,s))}function sH(t,e,n,r){if(r instanceof ArrayBuffer)return oW(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":const s=Oy(t,e,r.length);return r===s;default:return!1}}function dO(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?Oy(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?Oy(t,0,e):""}function Oy(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let s="";for(let i=0;i<n;i++)s+=String.fromCharCode(r.getUint8(e+i));return s}const iH=256*1024;function*oH(t,e){const n=(e==null?void 0:e.chunkSize)||iH;let r=0;const s=new TextEncoder;for(;r<t.length;){const i=Math.min(t.length-r,n),o=t.slice(r,r+i);r+=i,yield s.encode(o)}}const aH=256*1024;function lH(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{chunkSize:n=aH}=e;let r=0;for(;r<t.byteLength;){const s=Math.min(t.byteLength-r,n),i=new ArrayBuffer(s),o=new Uint8Array(t,r,s);new Uint8Array(i).set(o),r+=s,yield i}}()}const cH=1024*1024;async function*uH(t,e){const n=(e==null?void 0:e.chunkSize)||cH;let r=0;for(;r<t.size;){const s=r+n,i=await t.slice(r,s).arrayBuffer();r=s,yield i}}function HT(t,e){return H_?dH(t,e):fH(t)}async function*dH(t,e){const n=t.getReader();let r;try{for(;;){const s=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:i,value:o}=await s;if(i)return;yield XI(o)}}catch{n.releaseLock()}}async function*fH(t,e){for await(const n of t)yield XI(n)}function hH(t,e){if(typeof t=="string")return oH(t,e);if(t instanceof ArrayBuffer)return lH(t,e);if(na(t))return uH(t,e);if(QI(t))return HT(t,e);if(ta(t))return HT(t.body,e);throw new Error("makeIterator")}const fO="Cannot convert supplied data type";function pH(t,e,n){if(e.text&&typeof t=="string")return t;if(gW(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const s=t.byteLength||t.length;return(t.byteOffset!==0||s!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+s)),r}throw new Error(fO)}async function mH(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return pH(t,e);if(na(t)&&(t=await eO(t)),ta(t)){const s=t;return await TW(s),e.binary?await s.arrayBuffer():await s.text()}if(QI(t)&&(t=hH(t,n)),pW(t)||mW(t))return lW(t);throw new Error(fO)}function hO(t,e){const n=aO(),r=t||n;return typeof r.fetch=="function"?r.fetch:td(r.fetch)?s=>jT(s,r):e!=null&&e.fetch?e==null?void 0:e.fetch:jT}function gH(t,e,n){if(n)return n;const r={fetch:hO(e,t),...t};if(r.url){const s=K_(r.url);r.baseUrl=s,r.queryString=bW(r.url),r.filename=ZI(s),r.baseUrl=fW(s)}return Array.isArray(r.loaders)||(r.loaders=null),r}function vH(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:null}async function Q_(t,e,n,r){Bs(!r||typeof r=="object"),e&&!Array.isArray(e)&&!X_(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const s=Cp(t),o=vH(e,r),l=await ZW(t,o,n);return l?(n=zW(n,l,o,s),r=gH({url:s,parse:Q_,loaders:o},n,r||null),await yH(l,t,n,r)):null}async function yH(t,e,n,r){if(nW(t),ta(e)){const s=e,{ok:i,redirected:o,status:l,statusText:u,type:d,url:h}=s,p=Object.fromEntries(s.headers.entries());r.response={headers:p,ok:i,redirected:o,status:l,statusText:u,type:d,url:h}}if(e=await mH(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,r,t);if(rW(t,n))return await sW(t,e,n,r,Q_);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw Bs(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function Ph(t,e,n,r){!Array.isArray(e)&&!X_(e)&&(n=e,e=void 0);const s=hO(n);let i=t;return typeof t=="string"&&(i=await s(t)),na(t)&&(i=await s(t)),await Q_(i,e,n)}const _H="3.4.15",{_parseImageNode:wH}=globalThis,My=typeof Image<"u",Ly=typeof ImageBitmap<"u",xH=!!wH,Ny=H_?!0:xH;function bH(t){switch(t){case"auto":return Ly||My||Ny;case"imagebitmap":return Ly;case"image":return My;case"data":return Ny;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function EH(){if(Ly)return"imagebitmap";if(My)return"image";if(Ny)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function TH(t){const e=AH(t);if(!e)throw new Error("Not an image");return e}function SH(t){switch(TH(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function AH(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const CH=/^data:image\/svg\+xml/,PH=/\.svg((\?|#).*)?$/;function J_(t){return t&&(CH.test(t)||PH.test(t))}function RH(t,e){if(J_(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(i){throw new Error(i.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return pO(t,e)}function pO(t,e){if(J_(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function mO(t,e,n){const r=RH(t,n),s=self.URL||self.webkitURL,i=typeof r!="string"&&s.createObjectURL(r);try{return await kH(i||r,e)}finally{i&&s.revokeObjectURL(i)}}async function kH(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,s)=>{try{n.onload=()=>r(n),n.onerror=i=>s(new Error("Could not load image ".concat(t,": ").concat(i)))}catch(i){s(i)}})}const IH={};let qT=!0;async function OH(t,e,n){let r;J_(n)?r=await mO(t,e,n):r=pO(t,n);const s=e&&e.imagebitmap;return await MH(r,s)}async function MH(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((LH(e)||!qT)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),qT=!1}return await createImageBitmap(t)}function LH(t){for(const e in t||IH)return!1;return!0}function NH(t){return!VH(t,"ftyp",4)||!(t[8]&96)?null:jH(t)}function jH(t){switch(DH(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function DH(t,e,n){return String.fromCharCode(...t.slice(e,n))}function FH(t){return[...t].map(e=>e.charCodeAt(0))}function VH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=FH(e);for(let s=0;s<r.length;++s)if(r[s]!==t[s+n])return!1;return!0}const ns=!1,gu=!0;function gO(t){const e=rd(t);return BH(e)||GH(e)||zH(e)||$H(e)||UH(e)}function UH(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=NH(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function BH(t){const e=rd(t);return e.byteLength>=24&&e.getUint32(0,ns)===2303741511?{mimeType:"image/png",width:e.getUint32(16,ns),height:e.getUint32(20,ns)}:null}function zH(t){const e=rd(t);return e.byteLength>=10&&e.getUint32(0,ns)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,gu),height:e.getUint16(8,gu)}:null}function $H(t){const e=rd(t);return e.byteLength>=14&&e.getUint16(0,ns)===16973&&e.getUint32(2,gu)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,gu),height:e.getUint32(22,gu)}:null}function GH(t){const e=rd(t);if(!(e.byteLength>=3&&e.getUint16(0,ns)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:s}=WH();let i=2;for(;i+9<e.byteLength;){const o=e.getUint16(i,ns);if(s.has(o))return{mimeType:"image/jpeg",height:e.getUint16(i+5,ns),width:e.getUint16(i+7,ns)};if(!r.has(o))return null;i+=2,i+=e.getUint16(i,ns)}return null}function WH(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function rd(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function HH(t,e){const{mimeType:n}=gO(t)||{},r=globalThis._parseImageNode;return Sh(r),await r(t,n)}async function qH(t,e,n){e=e||{};const s=(e.image||{}).type||"auto",{url:i}=n||{},o=KH(s);let l;switch(o){case"imagebitmap":l=await OH(t,e,i);break;case"image":l=await mO(t,e,i);break;case"data":l=await HH(t);break;default:Sh(!1)}return s==="data"&&(l=SH(l)),l}function KH(t){switch(t){case"auto":case"data":return EH();default:return bH(t),t}}const YH=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],XH=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],ZH={image:{type:"auto",decode:!0}},QH={id:"image",module:"images",name:"Images",version:_H,mimeTypes:XH,extensions:YH,parse:qH,tests:[t=>!!gO(new DataView(t))],options:ZH},ht=new nd({id:"deck"});let jy={};function JH(t){jy=t}function Rn(t,e,n,r){ht.level>0&&jy[t]&&jy[t].call(null,e,n,r)}function e7(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const t7={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:e7,parseTextSync:JSON.parse};function n7(){const t="8.9.36",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(ht.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:ht,_registerLoggers:JH},qW([t7,[QH,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const r7=n7(),ft={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(ft,"IDENTITY",{get:()=>(ht.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const rs={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Dy={common:0,meters:1,pixels:2},KT={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},Le=new nd({id:"luma.gl"});function kn(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const s7="Invalid WebGLRenderingContext",i7="Requires WebGL2";function Pp(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}function rt(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function o7(t){return rt(t)?t:null}function Rp(t){return kn(Pp(t),s7),t}function bn(t){return kn(rt(t),i7),t}const tu={};function a7(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function l7(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function c7(t,e){tu[t]=!0,a7(e)}function u7(t){const e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(tu[r]=!0);while(r!==0);for(r in tu)if(tu[r])return delete tu[r],parseInt(r,10);return 0}}const sd=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const s=new t.VertexAttrib(n);this.attribs[r]=s}this.maxAttrib=0};sd.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};sd.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const ra=function(e){const n=this;this.gl=e,u7(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(i){return i===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(i){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,i);const l=o.attribs[i];return l.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(i){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,i);const l=o.attribs[i];return l.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(i,o){switch(i){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o;break}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(i,o){const u=n.currentVertexArrayObject.attribs[i];switch(o){case 34975:return u.buffer;case 34338:return u.enabled;case 34339:return u.size;case 34340:return u.stride;case 34341:return u.type;case 34922:return u.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(i,o,l,u,d,h){const p=n.currentVertexArrayObject;p.maxAttrib=Math.max(p.maxAttrib,i);const g=p.attribs[i];return g.buffer=n.currentArrayBuffer,g.size=o,g.type=l,g.normalized=u,g.stride=d,g.offset=h,g.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{l7("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};ra.prototype.VERTEX_ARRAY_BINDING_OES=34229;ra.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;const n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new sd(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};ra.prototype.createVertexArrayOES=function(){const e=new sd(this);return this.vertexArrayObjects.push(e),e};ra.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};ra.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof sd&&e.hasBeenBound&&e.ext===this)};ra.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive){c7(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const r=this.original,s=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const i=this.currentVertexArrayObject;if(s===i)return;(!s||i.elementArrayBuffer!==s.elementArrayBuffer)&&r.bindBuffer.call(n,34963,i.elementArrayBuffer);let o=this.currentArrayBuffer;const l=Math.max(s?s.maxAttrib:0,i.maxAttrib);for(let u=0;u<=l;u++){const d=i.attribs[u],h=s?s.attribs[u]:null;if((!s||d.enabled!==h.enabled)&&(d.enabled?r.enableVertexAttribArray.call(n,u):r.disableVertexAttribArray.call(n,u)),d.enabled){let p=!1;(!s||d.buffer!==h.buffer)&&(o!==d.buffer&&(r.bindBuffer.call(n,34962,d.buffer),o=d.buffer),p=!0),(p||d.cached!==h.cached)&&r.vertexAttribPointer.call(n,u,d.size,d.type,d.normalized,d.stride,d.offset)}}this.currentArrayBuffer!==o&&r.bindBuffer.call(n,34962,this.currentArrayBuffer)};function d7(t){if(typeof t.createVertexArray=="function")return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const s=e.call(this)||[];return s.indexOf("OES_vertex_array_object")<0&&s.push("OES_vertex_array_object"),s};const n=t.getExtension;t.getExtension=function(s){const i=n.call(this,s);return i||(s!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new ra(this)),this.__OESVertexArrayObject))}}const YT="OES_element_index",XT="WEBGL_draw_buffers",f7="EXT_disjoint_timer_query",h7="EXT_disjoint_timer_query_webgl2",p7="EXT_texture_filter_anisotropic",ZT="WEBGL_debug_renderer_info",m7=35723,g7=4352,v7=36795,y7=34047,_7=37445,w7=37446,yt=t=>rt(t)?void 0:0,x7={3074:t=>rt(t)?void 0:36064,[m7]:t=>rt(t)?void 0:g7,35977:yt,32937:yt,[v7]:(t,e)=>{const n=rt(t)?t.getExtension(h7):t.getExtension(f7);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[_7]:(t,e)=>{const n=t.getExtension(ZT);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[w7]:(t,e)=>{const n=t.getExtension(ZT);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[y7]:(t,e)=>{const n=t.luma.extensions[p7];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:yt,35071:yt,37447:yt,36063:(t,e)=>{if(!rt(t)){const n=t.getExtension(XT);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:yt,35374:yt,35377:yt,34852:t=>{if(!rt(t)){const e=t.getExtension(XT);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(YT)?2147483647:65535,33001:t=>t.getExtension(YT)?16777216:65535,33e3:t=>16777216,37157:yt,35373:yt,35657:yt,36183:yt,37137:yt,34045:yt,35978:yt,35979:yt,35968:yt,35376:yt,35375:yt,35659:yt,37154:yt,35371:yt,35658:yt,35076:yt,35077:yt,35380:yt};function b7(t,e,n){const r=x7[n],s=typeof r=="function"?r(t,e,n):r;return s!==void 0?s:e(n)}const E7="OES_vertex_array_object",vO="ANGLE_instanced_arrays",T7="WEBGL_draw_buffers",S7="EXT_disjoint_timer_query",A7="EXT_texture_filter_anisotropic",C7="VertexArray requires WebGL2 or OES_vertex_array_object extension";function P7(t,e){return{webgl2:rt(t),ext:t.getExtension(e)}}const yO={[E7]:{meta:{suffix:"OES"},createVertexArray:()=>{kn(!1,C7)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[vO]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){kn(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[T7]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{kn(!1)}},[S7]:{meta:{suffix:"EXT"},createQuery:()=>{kn(!1)},deleteQuery:()=>{kn(!1)},beginQuery:()=>{kn(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},cv={readBuffer:(t,e,n)=>{rt(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:s,ext:i}=P7(t,vO);let o;switch(r){case 35069:o=s?void 0:!1;break;case 35070:o=!s&&!i?0:void 0;break}return o!==void 0?o:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!rt(t))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,s)=>{if(!rt(t))switch(s){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,s)},getTexParameter(t,e,n,r){switch(r){case 34046:const{extensions:s}=t.luma,i=s[A7];r=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(n,r)},getParameter:b7,hint(t,e,n,r){return e(n,r)}};function R7(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(d7(t),k7(t),O7(t,yO),I7(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=R7;function k7(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}function I7(t,e){let{target:n,target2:r}=e;Object.keys(cv).forEach(s=>{if(typeof cv[s]=="function"){const i=t[s]?t[s].bind(t):()=>{},o=cv[s].bind(null,t,i);n[s]=o,r[s]=o}})}function O7(t,e){for(const n of Object.getOwnPropertyNames(e))n!=="overrides"&&M7(t,{extension:n,target:t.luma,target2:t})}function M7(t,e){let{extension:n,target:r,target2:s}=e;const i=yO[n];kn(i);const{meta:o={}}=i,{suffix:l=""}=o,u=t.getExtension(n);for(const d of Object.keys(i)){const h="".concat(d).concat(l);let p=null;d==="meta"||typeof t[d]=="function"||(u&&typeof u[h]=="function"?p=function(){return u[h](...arguments)}:typeof i[d]=="function"&&(p=i[d].bind(r))),p&&(r[d]=p,s[d]=p)}}const ew={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Ai=(t,e,n)=>e?t.enable(n):t.disable(n),QT=(t,e,n)=>t.hint(n,e),Zn=(t,e,n)=>t.pixelStorei(n,e),L7=(t,e)=>{const n=rt(t)?36009:36160;return t.bindFramebuffer(n,e)},N7=(t,e)=>t.bindFramebuffer(36008,e);function zc(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const j7={3042:Ai,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Ai,2885:(t,e)=>t.cullFace(e),2929:Ai,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Ai,35723:QT,36006:L7,2886:(t,e)=>t.frontFace(e),33170:QT,2849:(t,e)=>t.lineWidth(e),32823:Ai,32824:"polygonOffset",10752:"polygonOffset",35977:Ai,32938:"sampleCoverage",32939:"sampleCoverage",3089:Ai,3088:(t,e)=>t.scissor(...e),2960:Ai,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:Zn,3317:Zn,37440:Zn,37441:Zn,37443:Zn,3330:Zn,3332:Zn,3331:Zn,36010:N7,3314:Zn,32878:Zn,3316:Zn,3315:Zn,32877:Zn,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=zc(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=zc(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=zc(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=zc(e)&&e.length===3?[...e,...e]:e;const[n,r,s,i,o,l]=e;t.stencilFuncSeparate(1028,n,r,s),t.stencilFuncSeparate(1029,i,o,l)},stencilOp:(t,e)=>{e=zc(e)&&e.length===3?[...e,...e]:e;const[n,r,s,i,o,l]=e;t.stencilOpSeparate(1028,n,r,s),t.stencilOpSeparate(1029,i,o,l)},viewport:(t,e)=>t.viewport(...e)};function Ot(t,e,n){return e[t]!==void 0?e[t]:n[t]}const D7={blendEquation:(t,e,n)=>t.blendEquationSeparate(Ot(32777,e,n),Ot(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Ot(32969,e,n),Ot(32968,e,n),Ot(32971,e,n),Ot(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Ot(32824,e,n),Ot(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Ot(32938,e,n),Ot(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Ot(2962,e,n),Ot(2967,e,n),Ot(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Ot(34816,e,n),Ot(36003,e,n),Ot(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Ot(2964,e,n),Ot(2965,e,n),Ot(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Ot(34817,e,n),Ot(34818,e,n),Ot(34819,e,n))},JT={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,s)=>t({32773:new Float32Array([e,n,r,s])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,s)=>t({32969:e,32968:n,32971:r,32970:s}),clearColor:(t,e,n,r,s)=>t({3106:new Float32Array([e,n,r,s])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,s)=>t({3107:[e,n,r,s]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,s)=>t({3088:new Int32Array([e,n,r,s])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,s)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:s}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,s)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:s}),viewport:(t,e,n,r,s)=>t({2978:[e,n,r,s]})},Zr=(t,e)=>t.isEnabled(e),eS={3042:Zr,2884:Zr,2929:Zr,3024:Zr,32823:Zr,32926:Zr,32928:Zr,3089:Zr,2960:Zr,35977:Zr};function _O(t){for(const e in t)return!1;return!0}function F7(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let s=0;s<t.length;++s)if(t[s]!==e[s])return!1;return!0}return!1}function tS(t,e){const n=t[e].bind(t);t[e]=function(){const s=arguments.length<=0?void 0:arguments[0];return s in t.state.cache?t.state.enable?t.state.cache[s]:n(...arguments):n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function V7(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];const{valueChanged:u,oldValue:d}=n(t.state._updateCache,...o);return u&&r(...o),d},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function U7(t){const e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}class B7{constructor(e){let{copyState:n=!1,log:r=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?$7(e):Object.assign({},ew),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){kn(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];zs(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r;const s=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const i in e){kn(i!==void 0);const o=e[i],l=this.cache[i];F7(o,l)||(n=!0,r=l,s&&!(i in s)&&(s[i]=l),this.cache[i]=o)}return{valueChanged:n,oldValue:r}}}function wO(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(kn(r!==void 0),!t.state){const{polyfillContext:s}=globalThis;s&&s(t),t.state=new B7(t,{copyState:r}),U7(t);for(const i in JT){const o=JT[i];V7(t,i,o)}tS(t,"getParameter"),tS(t,"isEnabled")}return t.state.enable=n,t}function z7(t){t.state||wO(t,{copyState:!1}),t.state.push()}function nS(t){kn(t.state),t.state.pop()}function zs(t,e){if(kn(Pp(t),"setParameters requires a WebGL context"),_O(e))return;const n={};for(const s in e){const i=Number(s),o=j7[s];o&&(typeof o=="string"?n[o]=!0:o(t,e[s],i))}const r=t.state&&t.state.cache;if(r)for(const s in n){const i=D7[s];i(t,e,r)}}function $7(t,e){if(e=e||ew,typeof e=="number"){const s=e,i=eS[s];return i?i(t,s):t.getParameter(s)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const s of n){const i=eS[s];r[s]=i?i(t,Number(s)):t.getParameter(Number(s))}return r}function G7(t){zs(t,ew)}function Vr(t,e,n){if(_O(e))return n(t);const{nocatch:r=!0}=e;z7(t),zs(t,e);let s;if(r)s=n(t),nS(t);else try{s=n(t)}finally{nS(t)}return s}function Sl(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return r?t.drawingBufferWidth/r:1}return 1}function uv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=Sl(t),s=t.drawingBufferWidth,i=t.drawingBufferHeight;return H7(e,r,s,i,n)}function W7(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function H7(t,e,n,r,s){const i=rS(t[0],e,n);let o=sS(t[1],e,r,s),l=rS(t[0]+1,e,n);const u=l===n-1?l:l-1;l=sS(t[1]+1,e,r,s);let d;return s?(l=l===0?l:l+1,d=o,o=l):d=l===r-1?l:l-1,{x:i,y:o,width:Math.max(u-i+1,1),height:Math.max(d-o+1,1)}}function rS(t,e,n){return Math.min(Math.round(t*e),n-1)}function sS(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const tw=Hs(),q7=tw&&typeof document<"u",xO={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function bO(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};kn(tw,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},xO,t);const{width:e,height:n}=t;function r(l){if(t.throwOnError)throw new Error(l);return console.error(l),null}t.onError=r;let s;const{canvas:i}=t,o=Z7({canvas:i,width:e,height:n,onError:r});return s=X7(o,t),s?(s=nw(s,t),Q7(s),s):null}function nw(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||J7(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},xO,e);const{manageState:n,debug:r}=e;return n&&wO(t,{copyState:!1,log:function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return Le.log(1,...i)()}}),tw&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),Le.level=Math.max(Le.level,1)):Le.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function K7(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),s=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),i=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:s||e,renderer:i||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function Y7(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){const r=W7(e.useDevicePixels);eq(t,r,e);return}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function X7(t,e){const{onError:n}=e;let r=null;const s=u=>r=u.statusMessage||r;t.addEventListener("webglcontextcreationerror",s,!1);const{webgl1:i=!0,webgl2:o=!0}=e;let l=null;return o&&(l=l||t.getContext("webgl2",e),l=l||t.getContext("experimental-webgl2",e)),i&&(l=l||t.getContext("webgl",e),l=l||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",s,!1),l?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),l):n("Failed to create ".concat(o&&!i?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function Z7(t){let{canvas:e,width:n=800,height:r=600,onError:s}=t,i;return typeof e=="string"?(q7&&document.readyState==="complete"||s("createGLContext called on canvas '".concat(e,"' before page was loaded")),i=document.getElementById(e)):e?i=e:(i=document.createElement("canvas"),i.id="lumagl-canvas",i.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",i.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(i,document.body.firstChild)),i}function Q7(t){const e=rt(t)?"WebGL2":"WebGL1",n=K7(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",s=t.debug?" debug":"";Le.info(1,"".concat(e).concat(s," context ").concat(r))()}function J7(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function eq(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,s="height"in n?n.height:t.canvas.clientHeight;(!r||!s)&&(Le.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,s=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const i=t.luma.canvasSizeInfo;if(i.clientWidth!==r||i.clientHeight!==s||i.devicePixelRatio!==e){let o=e;const l=Math.floor(r*o),u=Math.floor(s*o);t.canvas.width=l,t.canvas.height=u,(t.drawingBufferWidth!==l||t.drawingBufferHeight!==u)&&(Le.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/s),t.canvas.width=Math.floor(r*o),t.canvas.height=Math.floor(s*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:s,devicePixelRatio:e})}}const vu="8.5.21",tq="set luma.log.level=1 (or higher) to trace rendering";class nq{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new q_({id:e})),this.stats.get(e)}}const Lo=new nq;if(globalThis.luma&&globalThis.luma.VERSION!==vu)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(vu));globalThis.luma||(Hs()&&Le.log(1,"luma.gl ".concat(vu," - ").concat(tq))(),globalThis.luma=globalThis.luma||{VERSION:vu,version:vu,log:Le,stats:Lo,globals:{modules:{},nodeIO:{}}});function rq(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function sq(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function we(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function dv(t,e){if(typeof e!="string")return e;const n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");const r=t[e];return we(r!==void 0,"Accessing undefined constant GL.".concat(e)),r}function $i(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const fv={};function Yi(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";fv[t]=fv[t]||1;const e=fv[t]++;return"".concat(t,"-").concat(e)}function iS(t){return we(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function Al(t){let e=!0;for(const n in t){e=!1;break}return e}function EO(t,e,n,r){const s="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),i=Object.getPrototypeOf(t);r.forEach(o=>{i.methodName||(i[o]=()=>{throw Le.removed("Calling removed method ".concat(e,".").concat(o,": "),s)(),new Error(o)})})}const Ya="Resource subclass must define virtual methods";let qs=class{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Rp(e);const{id:r,userData:s={}}=n;this.gl=e,this.gl2=e,this.id=r||Yi(this[Symbol.toStringTag]),this.userData=s,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(r=>r.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=dv(this.gl,e),we(e);const s=(this.constructor.PARAMETERS||{})[e];if(s){const i=rt(this.gl);if(!((!("webgl2"in s)||i)&&(!("extension"in s)||this.gl.getExtension(s.extension)))){const l=s.webgl1,u="webgl2"in s?s.webgl2:s.webgl1;return i?u:l}}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:n,keys:r}=e,s=this.constructor.PARAMETERS||{},i=rt(this.gl),o={},l=n||Object.keys(s);for(const u of l){const d=s[u];if(d&&(!("webgl2"in d)||i)&&(!("extension"in d)||this.gl.getExtension(d.extension))){const p=r?$i(this.gl,u):u;o[p]=this.getParameter(u,e),r&&d.type==="GLenum"&&(o[p]=$i(this.gl,o[p]))}}return o}setParameter(e,n){e=dv(this.gl,e),we(e);const s=(this.constructor.PARAMETERS||{})[e];if(s){const i=rt(this.gl);if(!((!("webgl2"in s)||i)&&(!("extension"in s)||this.gl.getExtension(s.extension))))throw new Error("Parameter not available on this platform");s.type==="GLenum"&&(n=dv(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,r){return EO(this,e,n,r)}initialize(e){}_createHandle(){throw new Error(Ya)}_deleteHandle(){throw new Error(Ya)}_bindHandle(e){throw new Error(Ya)}_getOptsFromHandle(){throw new Error(Ya)}_getParameter(e,n){throw new Error(Ya)}_setParameter(e,n){throw new Error(Ya)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=Lo.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];Lo.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const s=Lo.get("Memory Usage".concat(r));s.get("GPU Memory").addCount(e),s.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=Lo.get("Memory Usage".concat(n));r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(e," Memory")).subtractCount(this.byteLength)}};const iq="Failed to deduce GL constant from typed array";function Fy(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(iq)}}function Nu(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function oq(t){let{data:e,width:n,height:r,bytesPerPixel:s=4,temp:i}=t;const o=n*s;i=i||new Uint8Array(o);for(let l=0;l<r/2;++l){const u=l*o,d=(r-l-1)*o;i.set(e.subarray(u,u+o)),e.copyWithin(u,d,d+o),e.set(i,d)}}function aq(t){let{data:e,width:n,height:r}=t;const s=Math.round(n/2),i=Math.round(r/2),o=new Uint8Array(s*i*4);for(let l=0;l<i;l++)for(let u=0;u<s;u++)for(let d=0;d<4;d++)o[(l*s+u)*4+d]=e[(l*2*n+u*2)*4+d];return{data:o,width:s,height:i}}function Vy(t,e,n){const{removedProps:r={},deprecatedProps:s={},replacedProps:i={}}=n;for(const l in r)if(l in e){const d=r[l]?"".concat(t,".").concat(r[l]):"N/A";Le.removed("".concat(t,".").concat(l),d)()}for(const l in s)if(l in e){const u=s[l];Le.deprecated("".concat(t,".").concat(l),"".concat(t,".").concat(u))()}let o=null;for(const l in i)if(l in e){const u=i[l];Le.deprecated("".concat(t,".").concat(l),"".concat(t,".").concat(u))(),o=o||Object.assign({},e),o[u]=e[l],delete o[l]}return o||e}const lq={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},cq={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class ir{static getBytesPerElement(e){return Nu(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return we(e.size),Nu(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new ir(lq,...n)}constructor(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(s=>this._assign(s)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return ir.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return ir.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=Vy("Accessor",e,cq),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const oS=10,TO={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},uq={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:TO},dq={removedProps:TO};let pt=class extends qs{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/ir.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/ir.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=Vy("Buffer",e,uq),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=Vy("Buffer",e,dq),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new ir(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:r=0,srcOffset:s=0}=e,i=e.byteLength||e.length;we(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),s!==0||i!==void 0?(bn(this.gl),this.gl.bufferSubData(this.target,r,n,s,i)):this.gl.bufferSubData(o,r,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:r=0,writeOffset:s=0,size:i}=e;const{gl:o}=this;return bn(o),o.bindBuffer(36662,n.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,r,s,i),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:r=0,length:s=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};bn(this.gl);const i=Nu(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),l=r;let u,d;e?(d=e.length,u=d-l):(u=Math.min(o,s||o),d=l+u);const h=Math.min(o,u);return s=s||h,we(s<=h),e=e||new i(d),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,r,s),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:r=0,size:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?s!==void 0?this.gl.bindBufferRange(e,n,this.handle,r,s):(we(r===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(oS,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+n;we(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const s=this._getTarget();this.gl.bindBuffer(s,this.handle),this.gl.bufferData(s,r,this.usage),this.gl.bufferSubData(s,n,e),this.gl.bindBuffer(s,null),this.debugData=e.slice(0,oS),this.bytesUsed=r,this._trackAllocatedMemory(r);const i=Fy(e);return we(i),this.setAccessor(new ir(this.accessor,{type:i})),this}_setByteLength(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;we(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));const s=this._getTarget();return this.gl.bindBuffer(s,this.handle),this.gl.bufferData(s,r,n),this.gl.bindBuffer(s,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const n=Nu(this.accessor.type||5126,{clamped:!1}),r=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new ir(this.accessor,{type:Fy(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return Le.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Le.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return Le.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return Le.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new ir(this.accessor,e),this}};const rw={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},SO={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},AO={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function fq(t,e){const n=rw[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;const r=rt(t)&&n.gl2||n.gl1;return typeof r=="string"?t.getExtension(r):r}function hq(t,e){const n=rw[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}const pq=[9729,9728],aS=globalThis.WebGLBuffer||function(){};class Ho extends qs{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:r,linearFiltering:s}=n;let i=!0;return r&&(i=i&&fq(e,r),i=i&&(!s||hq(e,r))),i}constructor(e,n){const{id:r=Yi("texture"),handle:s,target:i}=n;super(e,{id:r,handle:s}),this.target=i,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(S=>this.initialize(Object.assign({},e,{pixels:S,data:S}))),this;const r=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:s=null,format:i=6408,border:o=0,recreate:l=!1,parameters:u={},pixelStore:d={},textureUnit:h=void 0}=e;n||(n=s);let{width:p,height:g,dataFormat:y,type:T,compressed:x=!1,mipmaps:E=!0}=e;const{depth:A=0}=e;return{width:p,height:g,compressed:x,dataFormat:y,type:T}=this._deduceParameters({format:i,type:T,dataFormat:y,compressed:x,data:n,width:p,height:g}),this.width=p,this.height=g,this.depth=A,this.format=i,this.type=T,this.dataFormat=y,this.border=o,this.textureUnit=h,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),E&&this._isNPOT()&&(Le.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),E=!1,this._updateForNPOT(u)),this.mipmaps=E,this.setImageData({data:n,width:p,height:g,depth:A,format:i,type:T,dataFormat:y,border:o,mipmaps:E,parameters:d,compressed:x}),E&&this.generateMipmap(),this.setParameters(u),l&&(this.data=n),r&&(this._video={video:n,parameters:u,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:r,mipmaps:s=!1}=e;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:s}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Le.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Vr(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:r=null,level:s=0,format:i=this.format,border:o=this.border,offset:l=0,parameters:u={}}=e;let{data:d=null,type:h=this.type,width:p=this.width,height:g=this.height,dataFormat:y=this.dataFormat,compressed:T=!1}=e;d||(d=r),{type:h,dataFormat:y,compressed:T,width:p,height:g}=this._deduceParameters({format:i,type:h,dataFormat:y,compressed:T,data:d,width:p,height:g});const{gl:x}=this;x.bindTexture(this.target,this.handle);let E=null;({data:d,dataType:E}=this._getDataType({data:d,compressed:T}));let A,S=0;if(Vr(this.gl,u,()=>{switch(E){case"null":x.texImage2D(n,s,i,p,g,o,y,h,d);break;case"typed-array":x.texImage2D(n,s,i,p,g,o,y,h,d,l);break;case"buffer":A=bn(x),A.bindBuffer(35052,d.handle||d),A.texImage2D(n,s,i,p,g,o,y,h,l),A.bindBuffer(35052,null);break;case"browser-object":rt(x)?x.texImage2D(n,s,i,p,g,o,y,h,d):x.texImage2D(n,s,i,y,h,d);break;case"compressed":for(const[C,O]of d.entries())x.compressedTexImage2D(n,C,O.format,O.width,O.height,o,O.data),S+=O.levelSize;break;default:we(!1,"Unknown image data type")}}),E==="compressed")this._trackAllocatedMemory(S,"Texture");else if(d&&d.byteLength)this._trackAllocatedMemory(d.byteLength,"Texture");else{const C=SO[this.dataFormat]||4,O=AO[this.type]||1;this._trackAllocatedMemory(this.width*this.height*C*O,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:r=null,data:s=null,x:i=0,y:o=0,width:l=this.width,height:u=this.height,level:d=0,format:h=this.format,type:p=this.type,dataFormat:g=this.dataFormat,compressed:y=!1,offset:T=0,border:x=this.border,parameters:E={}}=e;if({type:p,dataFormat:g,compressed:y,width:l,height:u}=this._deduceParameters({format:h,type:p,dataFormat:g,compressed:y,data:s,width:l,height:u}),we(this.depth===0,"texSubImage not supported for 3D textures"),s||(s=r),s&&s.data){const A=s;s=A.data,l=A.shape[0],u=A.shape[1]}s instanceof pt&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),Vr(this.gl,E,()=>{if(y)this.gl.compressedTexSubImage2D(n,d,i,o,l,u,h,s);else if(s===null)this.gl.texSubImage2D(n,d,i,o,l,u,g,p,null);else if(ArrayBuffer.isView(s))this.gl.texSubImage2D(n,d,i,o,l,u,g,p,s,T);else if(s instanceof aS){const A=bn(this.gl);A.bindBuffer(35052,s),A.texSubImage2D(n,d,i,o,l,u,g,p,T),A.bindBuffer(35052,null)}else rt(this.gl)?bn(this.gl).texSubImage2D(n,d,i,o,l,u,g,p,s):this.gl.texSubImage2D(n,d,i,o,g,p,s)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Le.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:r=!1}=e;return r?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof pt?{data:n.handle,dataType:"buffer"}:n instanceof aS?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:r}=e;let{width:s,height:i,dataFormat:o,type:l,compressed:u}=e;const d=rw[n];return o=o||d&&d.dataFormat,l=l||d&&d.types[0],u=u||d&&d.compressed,{width:s,height:i}=this._deduceImageSize(r,s,i),{dataFormat:o,type:l,compressed:u,width:s,height:i,format:n,data:r}}_deduceImageSize(e,n,r){let s;return typeof ImageData<"u"&&e instanceof ImageData?s={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?s={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?s={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?s={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?s={width:e.videoWidth,height:e.videoHeight}:e?s={width:n,height:r}:s={width:n>=0?n:1,height:r>=0?r:1},we(s,"Could not deduced texture size"),we(n===void 0||s.width===n,"Deduced texture width does not match supplied width"),we(r===void 0||s.height===r,"Deduced texture height does not match supplied height"),s}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:we(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return rt(this.gl)||!this.width||!this.height?!1:!iS(this.width)||!iS(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:pq.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break}return n}}let mq="";function gq(t,e){return we(typeof t=="string"),t=mq+t,new Promise((n,r)=>{try{const s=new Image;s.onload=()=>n(s),s.onerror=()=>r(new Error("Could not load image ".concat(t,"."))),s.crossOrigin=e&&e.crossOrigin||"anonymous",s.src=t}catch(s){r(s)}})}class ur extends Ho{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return Ho.isSupported(e,n)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Rp(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:gq(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const Uy=[34069,34070,34071,34072,34073,34074];class CO extends Ho{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Rp(e),super(e,Object.assign({},n,{target:34067})),this.initialize(n),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:n=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(r)}),this}subImage(e){let{face:n,data:r,x:s=0,y:i=0,mipmapLevel:o=0}=e;return this._subImage({target:n,data:r,x:s,y:i,mipmapLevel:o})}async setCubeMapImageData(e){let{width:n,height:r,pixels:s,data:i,border:o=0,format:l=6408,type:u=5121}=e;const{gl:d}=this,h=s||i,p=await Promise.all(Uy.map(g=>{const y=h[g];return Promise.all(Array.isArray(y)?y:[y])}));this.bind(),Uy.forEach((g,y)=>{p[y].length>1&&this.opts.mipmaps!==!1&&Le.warn("".concat(this.id," has mipmap and multiple LODs."))(),p[y].forEach((T,x)=>{n&&r?d.texImage2D(g,x,l,n,r,o,l,u,T):d.texImage2D(g,x,l,l,u,T)})}),this.unbind()}setImageDataForFace(e){const{face:n,width:r,height:s,pixels:i,data:o,border:l=0,format:u=6408,type:d=5121}=e,{gl:h}=this,p=i||o;return this.bind(),p instanceof Promise?p.then(g=>this.setImageDataForFace(Object.assign({},e,{face:n,data:g,pixels:g}))):this.width||this.height?h.texImage2D(n,0,u,r,s,l,u,d,p):h.texImage2D(n,0,u,u,d,p),this}}CO.FACES=Uy;class vq extends Ho{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return rt(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};bn(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:r=6408,width:s,height:i,depth:o=1,border:l=0,format:u,type:d=5121,offset:h=0,data:p,parameters:g={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Vr(this.gl,g,()=>{ArrayBuffer.isView(p)&&this.gl.texImage3D(this.target,n,r,s,i,o,l,u,d,p),p instanceof pt&&(this.gl.bindBuffer(35052,p.handle),this.gl.texImage3D(this.target,n,r,s,i,o,l,u,d,h))}),p&&p.byteLength)this._trackAllocatedMemory(p.byteLength,"Texture");else{const y=SO[this.dataFormat]||4,T=AO[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*y*T,"Texture")}return this.loaded=!0,this}}const To="EXT_color_buffer_float",lS={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:To,bpp:2},33327:{gl2:To,bpp:4},34842:{gl2:To,bpp:8},33326:{gl2:To,bpp:4},33328:{gl2:To,bpp:8},34836:{gl2:To,bpp:16},35898:{gl2:To,bpp:4}};function yq(t,e,n){const r=n[e];if(!r)return!1;const s=rt(t)&&r.gl2||r.gl1;return typeof s=="string"?t.getExtension(s):s}class cl extends qs{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!n||yq(e,n,lS)}static getSamplesForFormat(e,n){let{format:r}=n;return e.getInternalformatParameter(36161,r,32937)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:r=1,height:s=1,samples:i=0}=e;return we(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),i!==0&&rt(this.gl)?this.gl.renderbufferStorageMultisample(36161,i,n,r,s):this.gl.renderbufferStorage(36161,n,r,s),this.format=n,this.width=r,this.height=s,this.samples=i,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*lS[this.format].bpp),this}resize(e){let{width:n,height:r}=e;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const _q=256,wq=1024,xq=16384,cS=6144,uS=6145,dS=6146,fS=34041,PO="clear: bad arguments";function sw(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:s=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};e&&(i.framebuffer=e);let o=0;n&&(o|=xq,n!==!0&&(i.clearColor=n)),r&&(o|=_q,r!==!0&&(i.clearDepth=r)),s&&(o|=wq,r!==!0&&(i.clearStencil=r)),we(o!==0,PO),Vr(t,i,()=>{t.clear(o)})}function bq(t){let{framebuffer:e=null,buffer:n=cS,drawBuffer:r=0,value:s=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};bn(t),Vr(t,{framebuffer:e},()=>{switch(n){case cS:switch(s.constructor){case Int32Array:t.clearBufferiv(n,r,s);break;case Uint32Array:t.clearBufferuiv(n,r,s);break;case Float32Array:default:t.clearBufferfv(n,r,s)}break;case uS:t.clearBufferfv(uS,0,[s]);break;case dS:t.clearBufferiv(dS,0,[s]);break;case fS:const[i,o]=s;t.clearBufferfi(fS,0,i,o);break;default:we(!1,PO)}})}function Eq(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return we(!1),0}}function kp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:s=6408}=e;let{sourceAttachment:i=36064,target:o=null,sourceWidth:l,sourceHeight:u,sourceType:d}=e;const{framebuffer:h,deleteFramebuffer:p}=RO(t);we(h);const{gl:g,handle:y,attachments:T}=h;l=l||h.width,u=u||h.height,i===36064&&y===null&&(i=1028),we(T[i]),d=d||T[i].type,o=Sq(o,d,s,l,u),d=d||Fy(o);const x=g.bindFramebuffer(36160,y);return g.readPixels(n,r,l,u,s,d,o),g.bindFramebuffer(36160,x||null),p&&h.delete(),o}function hS(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=kp(t,{sourceAttachment:e}),{width:s,height:i}=t;for(;i>n;)({data:r,width:s,height:i}=aq({data:r,width:s,height:i}));oq({data:r,width:s,height:i});const o=document.createElement("canvas");o.width=s,o.height=i;const l=o.getContext("2d"),u=l.createImageData(s,i);return u.data.set(r),l.putImageData(u,0,0),o.toDataURL()}function Tq(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:r=0,sourceY:s=0,targetMipmaplevel:i=0,targetInternalFormat:o=6408}=n;let{targetX:l,targetY:u,targetZ:d,width:h,height:p}=n;const{framebuffer:g,deleteFramebuffer:y}=RO(t);we(g);const{gl:T,handle:x}=g,E=typeof l<"u"||typeof u<"u"||typeof d<"u";l=l||0,u=u||0,d=d||0;const A=T.bindFramebuffer(36160,x);we(e);let S=null;if(e instanceof Ho&&(S=e,h=Number.isFinite(h)?h:S.width,p=Number.isFinite(p)?p:S.height,S.bind(0),e=S.target),!E)T.copyTexImage2D(e,i,o,r,s,h,p,0);else switch(e){case 3553:case 34067:T.copyTexSubImage2D(e,i,l,u,r,s,h,p);break;case 35866:case 32879:bn(T).copyTexSubImage3D(e,i,l,u,d,r,s,h,p);break}return S&&S.unbind(),T.bindFramebuffer(36160,A||null),y&&g.delete(),S}function RO(t){return t instanceof Qt?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:Nq(t),deleteFramebuffer:!0}}function Sq(t,e,n,r,s){if(t)return t;e=e||5121;const i=Nu(e,{clamped:!1}),o=Eq(n);return new i(r*s*o)}const At={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function Aq(t){const e=new ur(t,{format:6408,type:5126,dataFormat:6408}),n=new Qt(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=n.getStatus();return e.delete(),n.delete(),r===36053}const kO={[At.WEBGL2]:[!1,!0],[At.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[At.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[At.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[At.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[At.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[At.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[At.FLOAT_BLEND]:["EXT_float_blend"],[At.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[At.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[At.TEXTURE_FLOAT]:["OES_texture_float",!0],[At.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[At.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[At.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[At.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[At.COLOR_ATTACHMENT_RGBA32F]:[Aq,"EXT_color_buffer_float"],[At.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[At.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[At.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[At.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[At.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[At.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},Cq=2;function Pq(t,e){return IO(t,e)}function IO(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>OO(t,n))}function Rq(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in kO)t.luma.caps[e]===void 0&&(t.luma.caps[e]=OO(t,e));return t.luma.caps}function OO(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=kq(t,e)),t.luma.caps[e]||Le.log(Cq,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function kq(t,e){const n=kO[e];we(n,e);let r;const s=rt(t)&&n[1]||n[0];if(typeof s=="function")r=s(t);else if(Array.isArray(s)){r=!0;for(const i of s)r=r&&!!t.getExtension(i)}else typeof s=="string"?r=!!t.getExtension(s):typeof s=="boolean"?r=s:we(!1);return r}const pS="Multiple render targets not supported";class Qt extends qs{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:r,colorBufferHalfFloat:s}=n;let i=!0;return r&&(i=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),s&&(i=i&&!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),i}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new Qt(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=bn(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=bn(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:r=1,attachments:s=null,color:i=!0,depth:o=!0,stencil:l=!1,check:u=!0,readBuffer:d=void 0,drawBuffers:h=void 0}=e;if(we(n>=0&&r>=0,"Width and height need to be integers"),this.width=n,this.height=r,s)for(const p in s){const g=s[p];(Array.isArray(g)?g[0]:g).resize({width:n,height:r})}else s=this._createDefaultAttachments(i,o,l,n,r);this.update({clearAttachments:!0,attachments:s,readBuffer:d,drawBuffers:h}),s&&u&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:r,drawBuffers:s,clearAttachments:i=!1,resizeAttachments:o=!0}=e;this.attach(n,{clearAttachments:i,resizeAttachments:o});const{gl:l}=this,u=l.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),s&&this._setDrawBuffers(s),l.bindFramebuffer(36160,u||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:n,height:r}=e;if(this.handle===null)return we(n===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),n!==this.width&&r!==this.height&&Le.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(r))();for(const s in this.attachments)this.attachments[s].resize({width:n,height:r});return this.width=n,this.height=r,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s={};n&&Object.keys(this.attachments).forEach(o=>{s[o]=null}),Object.assign(s,e);const i=this.gl.bindFramebuffer(36160,this.handle);for(const o in s){we(o!==void 0,"Misspelled framebuffer binding point?");const l=Number(o),u=s[l];let d=u;if(!d)this._unattach(l);else if(d instanceof cl)this._attachRenderbuffer({attachment:l,renderbuffer:d});else if(Array.isArray(u)){const[h,p=0,g=0]=u;d=h,this._attachTexture({attachment:l,texture:h,layer:p,level:g})}else this._attachTexture({attachment:l,texture:d,layer:0,level:0});r&&d&&d.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,i||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const{gl:e}=this,n=this.getStatus();if(n!==36053)throw new Error(Oq(n));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),r}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:n,depth:r,stencil:s,drawBuffers:i=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||r||s)&&sw(this.gl,{color:n,depth:r,stencil:s}),i.forEach((l,u)=>{bq(this.gl,{drawBuffer:u,value:l})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return Le.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Le.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Le.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Le.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Le.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Le.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:r=0,y:s=0,width:i,height:o}=e;const l=bn(this.gl),u=l.bindFramebuffer(36008,this.handle);return r===0&&s===0&&i===void 0&&o===void 0?l.invalidateFramebuffer(36008,n):l.invalidateFramebuffer(36008,n,r,s,i,o),l.bindFramebuffer(36008,u),this}getAttachmentParameter(e,n,r){let s=this._getAttachmentParameterFallback(n);return s===null&&(this.gl.bindFramebuffer(36160,this.handle),s=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),r&&s>1e3&&(s=$i(this.gl,s)),s}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const s={};for(const i of r){const o=n?$i(this.gl,i):i;s[o]=this.getAttachmentParameter(e,i,n)}return s}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=Object.keys(this.attachments),r={};for(const s of n){const i=Number(s),o=e?$i(this.gl,i):i;r[o]=this.getAttachmentParameters(i,e)}return r}show(){return typeof window<"u"&&window.open(hS(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>Le.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const r=hS(this,{targetMaxHeight:100});return Le.image({logLevel:e,message:n,image:r},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,r,s,i){let o=null;return e&&(o=o||{},o[36064]=new ur(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:s,height:i,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),n&&r?(o=o||{},o[33306]=new cl(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:s,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new cl(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:s,height:i}),this.ownResources.push(o[36096])):r&&we(!1),o}_unattach(e){const n=this.attachments[e];n&&(n instanceof cl?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:r}=e;const{gl:s}=this;s.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}_attachTexture(e){let{attachment:n=36064,texture:r,layer:s,level:i}=e;const{gl:o}=this;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:bn(o).framebufferTextureLayer(36160,n,r.target,i,s);break;case 34067:const u=Iq(s);o.framebufferTexture2D(36160,n,u,r.handle,i);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,i);break;default:we(!1,"Illegal texture type")}o.bindTexture(r.target,null),this.attachments[n]=r}_setReadBuffer(e){const n=o7(this.gl);n?n.readBuffer(e):we(e===36064||e===1029,pS),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,r=bn(n);if(r)r.drawBuffers(e);else{const s=n.getExtension("WEBGL_draw_buffers");s?s.drawBuffersWEBGL(e):we(e.length===1&&(e[0]===36064||e[0]===1029),pS)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=Rq(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function Iq(t){return t<34069?t+34069:t}function Oq(t){return(Qt.STATUS||{})[t]||"Framebuffer error ".concat(t)}const Mq=[36049,36048,33296,33298,33299,33300,33301,33302,33303];Qt.ATTACHMENT_PARAMETERS=Mq;function Lq(t,e){we(t instanceof ur||t instanceof CO||t instanceof vq);const n=t.constructor,{gl:r,width:s,height:i,format:o,type:l,dataFormat:u,border:d,mipmaps:h}=t,p=Object.assign({width:s,height:i,format:o,type:l,dataFormat:u,border:d,mipmaps:h},e);return new n(r,p)}function Nq(t,e){const{gl:n,width:r,height:s,id:i}=t;return new Qt(n,Object.assign({},e,{id:"framebuffer-for-".concat(i),width:r,height:s,attachments:{36064:t}}))}function rh(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}const jq=35632,Dq=35633;function Fq(t){switch(t){case jq:return"fragment";case Dq:return"vertex";default:return"unknown type"}}function Vq(t,e,n,r){const s=t.split(/\r?\n/),i={},o={},l=r||rh(e)||"(unnamed)",u="".concat(Fq(n)," shader ").concat(l);for(let h=0;h<s.length;h++){const p=s[h];if(p.length<=1)continue;const g=p.split(":"),y=g[0],T=parseInt(g[2],10);if(isNaN(T))throw new Error("GLSL compilation error in ".concat(u,": ").concat(t));y!=="WARNING"?i[T]=p:o[T]=p}const d=Uq(e);return{shaderName:u,errors:mS(i,d),warnings:mS(o,d)}}function mS(t,e){let n="";for(let r=0;r<e.length;r++){const s=e[r];if(!(!t[r+3]&&!t[r+2]&&!t[r+1])&&(n+="".concat(s,`
`),t[r+1])){const i=t[r+1],o=i.split(":",3),l=o[0],u=parseInt(o[1],10)||0,d=i.substring(o.join(":").length+1).trim();n+=MO("^^^ ".concat(l,": ").concat(d,`

`),u)}}return n}function Uq(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const r=t.split(/\r?\n/),s=String(r.length+e-1).length;return r.map((i,o)=>{const l=String(o+e),u=l.length;return MO(l,s-u)+n+i})}function MO(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}function LO(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}const Bq="Shader: GLSL source code must be a JavaScript string";class ju extends qs{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return we(!1),"unknown"}}constructor(e,n){Rp(e),we(typeof n.source=="string",Bq);const r=rh(n.source,null)||n.id||Yi("unnamed ".concat(ju.getTypeName(n.shaderType)));super(e,{id:r}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const r=rh(n,null);r&&(this.id=Yi(r)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(ju.getTypeName(this.shaderType),":").concat(this.id)}getName(){return rh(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:s,errors:i,warnings:o}=Vq(r,this.source,this.shaderType,this.id);throw Le.error("GLSL compilation errors in ".concat(s,`
`).concat(i))(),Le.warn("GLSL compilation warnings in ".concat(s,`
`).concat(o))(),new Error("GLSL compilation errors in ".concat(s))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class hv extends ju{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class pv extends ju{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const zq={5126:Et.bind(null,"uniform1fv",Qn,1,wn),35664:Et.bind(null,"uniform2fv",Qn,2,wn),35665:Et.bind(null,"uniform3fv",Qn,3,wn),35666:Et.bind(null,"uniform4fv",Qn,4,wn),5124:Et.bind(null,"uniform1iv",Ci,1,wn),35667:Et.bind(null,"uniform2iv",Ci,2,wn),35668:Et.bind(null,"uniform3iv",Ci,3,wn),35669:Et.bind(null,"uniform4iv",Ci,4,wn),35670:Et.bind(null,"uniform1iv",Ci,1,wn),35671:Et.bind(null,"uniform2iv",Ci,2,wn),35672:Et.bind(null,"uniform3iv",Ci,3,wn),35673:Et.bind(null,"uniform4iv",Ci,4,wn),35674:Et.bind(null,"uniformMatrix2fv",Qn,4,ks),35675:Et.bind(null,"uniformMatrix3fv",Qn,9,ks),35676:Et.bind(null,"uniformMatrix4fv",Qn,16,ks),35678:un,35680:un,5125:Et.bind(null,"uniform1uiv",Ff,1,wn),36294:Et.bind(null,"uniform2uiv",Ff,2,wn),36295:Et.bind(null,"uniform3uiv",Ff,3,wn),36296:Et.bind(null,"uniform4uiv",Ff,4,wn),35685:Et.bind(null,"uniformMatrix2x3fv",Qn,6,ks),35686:Et.bind(null,"uniformMatrix2x4fv",Qn,8,ks),35687:Et.bind(null,"uniformMatrix3x2fv",Qn,6,ks),35688:Et.bind(null,"uniformMatrix3x4fv",Qn,12,ks),35689:Et.bind(null,"uniformMatrix4x2fv",Qn,8,ks),35690:Et.bind(null,"uniformMatrix4x3fv",Qn,12,ks),35678:un,35680:un,35679:un,35682:un,36289:un,36292:un,36293:un,36298:un,36299:un,36300:un,36303:un,36306:un,36307:un,36308:un,36311:un},$q={},Gq={},Wq={},gS=[0];function iw(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(gS[0]=t,t=gS);const s=t.length;if(s%e&&Le.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let i=r[s];i||(i=new n(s),r[s]=i);for(let o=0;o<s;o++)i[o]=t[o];return i}function Qn(t,e){return iw(t,e,Float32Array,$q)}function Ci(t,e){return iw(t,e,Int32Array,Gq)}function Ff(t,e){return iw(t,e,Uint32Array,Wq)}function vS(t,e,n){const r=zq[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function Hq(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function qq(t,e,n){for(const r in t){const s=t[r];if((!n||!!n[r])&&!Kq(s))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),s),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function Kq(t){return Array.isArray(t)||ArrayBuffer.isView(t)?Xq(t):isFinite(t)||t===!0||t===!1||t instanceof Ho||t instanceof cl?!0:t instanceof Qt?!!t.texture:!1}function Yq(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let s=0,i=n.length;s<i;++s)r[s]=n[s]}else t[e]=n.slice();else t[e]=n}function Xq(t){if(t.length===0)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function un(){let t=null;return(e,n,r)=>{const s=t!==r;return s&&(e.uniform1i(n,r),t=r),s}}function Et(t,e,n,r){let s=null,i=null;return(o,l,u)=>{const d=e(u,n),h=d.length;let p=!1;if(s===null)s=new Float32Array(h),i=h,p=!0;else{we(i===h,"Uniform length cannot change.");for(let g=0;g<h;++g)if(d[g]!==s[g]){p=!0;break}}return p&&(r(o,t,l,d),s.set(d)),p}}function wn(t,e,n,r){t[e](n,r)}function ks(t,e,n,r){t[e](n,!1,r)}const Zq=5120,Qq=5121,Jq=5122,eK=5123,yS=0,Vf=1,tK=2,nK=3,Uf=4,rK=5,sK=6,Yt=5126,iK=35664,oK=35665,aK=35666,$c=5124,lK=35667,cK=35668,uK=35669,Gc=5125,dK=36294,fK=36295,hK=36296,pK=35670,mK=35671,gK=35672,vK=35673,yK=35674,_K=35675,wK=35676,xK=35685,bK=35686,EK=35687,TK=35688,SK=35689,AK=35690,By={[Yt]:[Yt,1,"float"],[iK]:[Yt,2,"vec2"],[oK]:[Yt,3,"vec3"],[aK]:[Yt,4,"vec4"],[$c]:[$c,1,"int"],[lK]:[$c,2,"ivec2"],[cK]:[$c,3,"ivec3"],[uK]:[$c,4,"ivec4"],[Gc]:[Gc,1,"uint"],[dK]:[Gc,2,"uvec2"],[fK]:[Gc,3,"uvec3"],[hK]:[Gc,4,"uvec4"],[pK]:[Yt,1,"bool"],[mK]:[Yt,2,"bvec2"],[gK]:[Yt,3,"bvec3"],[vK]:[Yt,4,"bvec4"],[yK]:[Yt,8,"mat2"],[xK]:[Yt,8,"mat2x3"],[bK]:[Yt,8,"mat2x4"],[_K]:[Yt,12,"mat3"],[EK]:[Yt,12,"mat3x2"],[TK]:[Yt,12,"mat3x4"],[wK]:[Yt,16,"mat4"],[SK]:[Yt,16,"mat4x2"],[AK]:[Yt,16,"mat4x3"]};function CK(t){switch(t){case yS:return yS;case Vf:return Vf;case nK:return Vf;case tK:return Vf;case Uf:return Uf;case rK:return Uf;case sK:return Uf;default:return we(!1),0}}function _S(t){const e=By[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function NO(t,e){switch(t){case Zq:case Qq:case Jq:case eK:t=Yt;break}for(const n in By){const[r,s,i]=By[n];if(r===t&&s===e)return{glType:n,name:i}}return null}class PK{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,r=n.getProgramParameter(e.handle,35721);for(let s=0;s<r;s++){const{name:i,type:o,size:l}=n.getActiveAttrib(e.handle,s),u=n.getAttribLocation(e.handle,i);u>=0&&this._addAttribute(u,i,o,l)}this.attributeInfos.sort((s,i)=>s.location-i.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!rt(n))return;const r=n.getProgramParameter(e.handle,35971);for(let s=0;s<r;s++){const{name:i,type:o,size:l}=n.getTransformFeedbackVarying(e.handle,s);this._addVarying(s,i,o,l)}this.varyingInfos.sort((s,i)=>s.location-i.location)}_addAttribute(e,n,r,s){const{type:i,components:o}=_S(r),l={type:i,size:s*o};this._inferProperties(e,n,l);const u={location:e,name:n,accessor:new ir(l)};this.attributeInfos.push(u),this.attributeInfosByLocation[e]=u,this.attributeInfosByName[u.name]=u}_inferProperties(e,n,r){/instance/i.test(n)&&(r.divisor=1)}_addVarying(e,n,r,s){const{type:i,components:o}=_S(r),l=new ir({type:i,size:s*o}),u={location:e,name:n,accessor:l};this.varyingInfos.push(u),this.varyingInfosByName[u.name]=u}}const wS=4,RK=35981,kK=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class jO extends qs{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",kK),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:n,vs:r,fs:s,varyings:i,bufferMode:o=RK}=e;return this.hash=n||"",this.vs=typeof r=="string"?new hv(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs=typeof s=="string"?new pv(this.gl,{id:"".concat(e.id,"-fs"),source:s}):s,we(this.vs instanceof hv),we(this.fs instanceof pv),this.uniforms={},this._textureUniforms={},i&&i.length>0&&(bn(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new PK(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:r=4,vertexCount:s,offset:i=0,start:o,end:l,isIndexed:u=!1,indexType:d=5123,instanceCount:h=0,isInstanced:p=h>0,vertexArray:g=null,transformFeedback:y,framebuffer:T,parameters:x={},uniforms:E,samplers:A}=e;if((E||A)&&(Le.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(E||{})),Le.priority>=n){const S=T?T.id:"default",C="mode=".concat($i(this.gl,r)," verts=").concat(s," ")+"instances=".concat(h," indexType=").concat($i(this.gl,d)," ")+"isInstanced=".concat(p," isIndexed=").concat(u," ")+"Framebuffer=".concat(S);Le.log(n,C)()}return we(g),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||s===0||p&&h===0?!1:(g.bindForDraw(s,h,()=>{if(T!==void 0&&(x=Object.assign({},x,{framebuffer:T})),y){const S=CK(r);y.begin(S)}this._bindTextures(),Vr(this.gl,x,()=>{u&&p?this.gl2.drawElementsInstanced(r,s,d,i,h):u&&rt(this.gl)&&!isNaN(o)&&!isNaN(l)?this.gl2.drawRangeElements(r,o,l,s,d,i):u?this.gl.drawElements(r,s,d,i):p?this.gl2.drawArraysInstanced(r,i,s,h):this.gl.drawArrays(r,i,s)}),y&&y.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Le.priority>=2&&qq(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const r=e[n],s=this._uniformSetters[n];if(s){let i=r,o=!1;if(i instanceof Qt&&(i=i.texture),i instanceof Ho)if(o=this.uniforms[n]!==r,o){s.textureIndex===void 0&&(s.textureIndex=this._textureIndexCounter++);const l=i,{textureIndex:u}=s;l.bind(u),i=u,this._textureUniforms[n]=l}else i=s.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(s(i)||o)&&Yq(this.uniforms,n,r)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const r=this._textureUniforms[n];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),r={};for(const s of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new hv({handle:s});break;case 35632:r.fs=new pv({handle:s});break}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=Yi(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),Le.time(wS,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),Le.timeEnd(wS,"linkProgram for ".concat(this._getName()))(),e.debug||Le.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const r=this.gl.getActiveUniform(this.handle,n),{name:s}=Hq(r.name);let i=e.getUniformLocation(this.handle,s);if(this._uniformSetters[s]=vS(e,i,r),r.size>1)for(let o=0;o<r.size;o++)i=e.getUniformLocation(this.handle,"".concat(s,"[").concat(o,"]")),this._uniformSetters["".concat(s,"[").concat(o,"]")]=vS(e,i,r)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}const IK=34918,OK=34919,MK=35007,LK=36795,NK=35976,jK=35887,DK=36202;class Rh extends qs{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=rt(e),s=IO(e,At.TIMER_QUERY);let i=r||s;for(const o of n)switch(o){case"queries":i=i&&r;break;case"timers":i=i&&s;break;default:we(!1)}return i}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(MK)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?DK:jK)}beginTransformFeedbackQuery(){return this.begin(NK)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,OK);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(LK)}getResult(){return this.gl2.getQueryParameter(this.handle,IK)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,s)=>{const i=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>e?(s("Timed out"),this._pollingPromise=null):requestAnimationFrame(i)};requestAnimationFrame(i)}),this._pollingPromise}_createHandle(){return Rh.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class DO extends qs{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return rt(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};bn(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Al(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const r=this._getVaryingIndex(e),{buffer:s,byteSize:i,byteOffset:o}=this._getBufferParams(n);return r<0?(this.unused[e]=s,Le.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[r]=n,this.bindOnUse||this._bindBuffer(r,s,o,i),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,r,s;return e instanceof pt?s=e:(s=e.buffer,r=e.byteSize,n=e.byteOffset),(n!==void 0||r!==void 0)&&(n=n||0,r=r||s.byteLength-n),{buffer:s,byteOffset:n,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:r,byteOffset:s}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,s,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0;const i=n&&n.handle;return!i||s===void 0?this.gl.bindBufferBase(35982,e,i):this.gl.bindBufferRange(35982,e,i,r,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let Bf=null;function FK(t){return(!Bf||Bf.byteLength<t)&&(Bf=new ArrayBuffer(t)),Bf}function VK(t,e){const n=FK(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function UK(t){let{target:e,source:n,start:r=0,count:s=1}=t;const i=n.length,o=s*i;let l=0;for(let u=r;l<i;l++)e[u++]=n[l];for(;l<o;)l<o-l?(e.copyWithin(r+l,r,r+l),l*=2):(e.copyWithin(r+l,r,r+o-l),l=o);return e}const BK="elements must be GL.ELEMENT_ARRAY_BUFFER";class er extends qs{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?rt(e)||rO()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new er(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return er.MAX_ATTRIBUTES=er.MAX_ATTRIBUTES||e.getParameter(34921),er.MAX_ATTRIBUTES}static setConstant(e,n,r){switch(r.constructor){case Float32Array:er._setConstantFloatArray(e,n,r);break;case Int32Array:er._setConstantIntArray(e,n,r);break;case Uint32Array:er._setConstantUintArray(e,n,r);break;default:we(!1)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return er.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return we(!e||e.target===34963,BK),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,r){if(n.target===34963)return this.setElementBuffer(n,r);const{size:s,type:i,stride:o,offset:l,normalized:u,integer:d,divisor:h}=r,{gl:p,gl2:g}=this;return e=Number(e),this.bind(()=>{p.bindBuffer(34962,n.handle),d?(we(rt(p)),g.vertexAttribIPointer(e,s,i,o,l)):p.vertexAttribPointer(e,s,i,u,o,l),p.enableVertexAttribArray(e),g.vertexAttribDivisor(e,h||0)}),this}enable(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!n&&e===0&&!er.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const r=this._normalizeConstantArrayValue(n),s=r.byteLength*e,i=r.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new pt(this.gl,s),o=o||this.buffer.reallocate(s),o=o||!this._compareConstantArrayValues(r,this.bufferValue),o){const l=VK(n.constructor,i);UK({target:l,source:r,start:0,count:i}),this.buffer.subData(l),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==n[r])return!1;return!0}static _setConstantFloatArray(e,n,r){switch(r.length){case 1:e.vertexAttrib1fv(n,r);break;case 2:e.vertexAttrib2fv(n,r);break;case 3:e.vertexAttrib3fv(n,r);break;case 4:e.vertexAttrib4fv(n,r);break;default:we(!1)}}static _setConstantIntArray(e,n,r){switch(we(rt(e)),r.length){case 1:e.vertexAttribI1iv(n,r);break;case 2:e.vertexAttribI2iv(n,r);break;case 3:e.vertexAttribI3iv(n,r);break;case 4:e.vertexAttribI4iv(n,r);break;default:we(!1)}}static _setConstantUintArray(e,n,r){switch(we(rt(e)),r.length){case 1:e.vertexAttribI1uiv(n,r);break;case 2:e.vertexAttribI2uiv(n,r);break;case 3:e.vertexAttribI3uiv(n,r);break;case 4:e.vertexAttribI4uiv(n,r);break;default:we(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:r}=n;return we(Number.isFinite(r)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(r,e);default:return this.gl.getVertexAttrib(r,e)}})}}const zK="VertexArray: attributes must be Buffers or constants (i.e. typed array)",$K=/^(.+)__LOCATION_([0-9]+)$/,GK=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class WK{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new er(e),EO(this,"VertexArray","v6.0",GK),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e){const r=e[n];this._setAttribute(n,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,r);const{location:s,accessor:i}=this._resolveLocationAndAccessor(e,n,n.accessor,r);return s>=0&&(this.values[s]=n,this.accessors[s]=i,this.clearDrawParams(),this.vertexArrayObject.setBuffer(s,n,i)),this}setConstant(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:s,accessor:i}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},r));return s>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[s]=n,this.accessors[s]=i,this.clearDrawParams(),this.vertexArrayObject.enable(s,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new pt(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof pt&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof pt&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,r){let s;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),s=r()}),s}_resolveLocationAndAccessor(e,n,r,s){const i={location:-1,accessor:null},{location:o,name:l}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,Le.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),i;const u=this._getAttributeInfo(l||o);if(!u)return i;const d=this.accessors[o]||{},h=ir.resolve(u.accessor,d,r,s),{size:p,type:g}=h;return we(Number.isFinite(p)&&Number.isFinite(g)),{location:o,accessor:h}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const r=$K.exec(e),s=r?r[1]:e,i=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(s)+i,name:s}:{location:-1}}_setAttribute(e,n){if(n instanceof pt)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof pt){const r=n[0],s=n[1];this.setBuffer(e,r,s)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){const r=n;this.setConstant(e,r)}else if(n.buffer instanceof pt){const r=n;this.setBuffer(e,r.buffer,r)}else throw new Error(zK)}_setConstantAttributes(e,n){const r=Math.max(e|0,n|0);let s=this.values[0];ArrayBuffer.isView(s)&&this._setConstantAttributeZero(s,r);for(let i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)s=this.values[i],ArrayBuffer.isView(s)&&this._setConstantAttribute(i,s)}_setConstantAttributeZero(e,n){if(er.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const r=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,n){er.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const r=this.values[n],s=this.accessors[n];if(!r)return;const{divisor:i}=s,o=i>0;if(e.isInstanced=e.isInstanced||o,r instanceof pt){const l=r;if(o){const u=l.getVertexCount(s);e.instanceCount=Math.min(e.instanceCount,u)}else{const u=l.getVertexCount(s);e.vertexCount=Math.min(e.vertexCount,u)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Le.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function HK(t,e){const{maxElts:n=16,size:r=1}=e;let s="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(s+=",".concat(o%r===0?" ":"")),s+=Du(t[o],e);const i=t.length>n?"...":"]";return"".concat(s).concat(i)}function Du(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return HK(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const s=t.toPrecision(2);return s.indexOf(".0")===s.length-2?s.slice(0,-1):s}function xS(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:s=!1}=t;we(n);const i=".*_.*",o=".*Matrix",l=n._uniformSetters,u={},d=Object.keys(l).sort();let h=0;for(const y of d)!y.match(i)&&!y.match(o)&&mv({table:u,header:e,uniforms:r,uniformName:y,undefinedOnly:s})&&h++;for(const y of d)y.match(o)&&mv({table:u,header:e,uniforms:r,uniformName:y,undefinedOnly:s})&&h++;for(const y of d)u[y]||mv({table:u,header:e,uniforms:r,uniformName:y,undefinedOnly:s})&&h++;let p=0;const g={};if(!s)for(const y in r){const T=r[y];u[y]||(p++,g[y]={Type:"NOT USED: ".concat(T),[e]:Du(T)})}return{table:u,count:h,unusedTable:g,unusedCount:p}}function mv(t){let{table:e,header:n,uniforms:r,uniformName:s,undefinedOnly:i}=t;const o=r[s],l=qK(o);return!i||!l?(e[s]={[n]:l?Du(o):"N/A","Uniform Type":l?o:"NOT PROVIDED"},!0):!1}function qK(t){return t!=null}function KK(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=bS(e,e.elements,null,n));const s=e.values;for(const i in s){const o=e._getAttributeInfo(i);if(o){let l="".concat(i,": ").concat(o.name);const u=e.accessors[o.location];u&&(l="".concat(i,": ").concat(YK(o.name,u))),r[l]=bS(e,s[i],u,n)}}return r}function bS(t,e,n,r){const{gl:s}=t;if(!e)return{[r]:"null","Format ":"N/A"};let i="NOT PROVIDED",o=1,l=0,u=0,d,h,p;if(n&&(i=n.type,o=n.size,i=String(i).replace("Array",""),d=i.indexOf("nt")!==-1),e instanceof pt){const g=e,{data:y,changed:T}=g.getDebugData();h=T?"*":"",p=y,u=g.byteLength,l=u/y.BYTES_PER_ELEMENT/o;let x;if(n){const E=n.divisor>0;x="".concat(E?"I ":"P "," ").concat(l," (x").concat(o,"=").concat(u," bytes ").concat($i(s,i),")")}else d=!0,x="".concat(u," bytes");return{[r]:"".concat(h).concat(Du(p,{size:o,isInteger:d})),"Format ":x}}return p=e,o=e.length,i=String(e.constructor.name).replace("Array",""),d=i.indexOf("nt")!==-1,{[r]:"".concat(Du(p,{size:o,isInteger:d})," (constant)"),"Format ":"".concat(o,"x").concat(i," (constant)")}}function YK(t,e){const{type:n,size:r}=e,s=NO(n,r);return s?"".concat(t," (").concat(s.name,")"):t}function XK(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const s=ES(r);e["in ".concat(s)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const s=ES(r);e["out ".concat(s)]={[n]:JSON.stringify(r.accessor)}}return e}function ES(t){const{type:e,size:n}=t.accessor,r=NO(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const TS=Hs()&&typeof document<"u";let ZK=0;class QK{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:n=E=>bO(E),onAddHTML:r=null,onInitialize:s=()=>{},onRender:i=()=>{},onFinalize:o=()=>{},onError:l,gl:u=null,glOptions:d={},debug:h=!1,createFramebuffer:p=!1,autoResizeViewport:g=!0,autoResizeDrawingBuffer:y=!0,stats:T=Lo.get("animation-loop-".concat(ZK++))}=e;let{useDevicePixels:x=!0}=e;"useDevicePixelRatio"in e&&(Le.deprecated("useDevicePixelRatio","useDevicePixels")(),x=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:r,onInitialize:s,onRender:i,onFinalize:o,onError:l,gl:u,glOptions:d,debug:h,createFramebuffer:p},this.gl=u,this.needsRedraw=null,this.timeline=null,this.stats=T,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:g,autoResizeDrawingBuffer:y,useDevicePixels:x}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return we(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Rh.isSupported(this.gl,["timers"])?new Rh(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=document.getElementById(e);return r?Number(r.value):n}setViewParameters(){return Le.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=TS?new Promise((e,n)=>{if(TS&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):sq(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):rq(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?nw(this.props.gl,e):this.onCreateContext(e),!Pp(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");G7(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let r=1;const{canvas:s}=this.gl;return s&&s.clientHeight?r=s.clientWidth/s.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&Y7(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new Qt(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const id="vs",ow="fs";function lr(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const gv={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function JK(t){const e={};for(const n in t){const r=t[n],s=eY(r);e[n]=s}return e}function eY(t){let e=SS(t);return e==="object"?t?"type"in t?Object.assign({},t,gv[t.type]):"value"in t?(e=SS(t.value),Object.assign({type:e},t,gv[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},gv[e])}function SS(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const tY="vs",nY="fs";class AS{constructor(e){let{name:n,vs:r,fs:s,dependencies:i=[],uniforms:o,getUniforms:l,deprecations:u=[],defines:d={},inject:h={},vertexShader:p,fragmentShader:g}=e;lr(typeof n=="string"),this.name=n,this.vs=r||p,this.fs=s||g,this.getModuleUniforms=l,this.dependencies=i,this.deprecations=this._parseDeprecationDefinitions(u),this.defines=d,this.injections=rY(h),o&&(this.uniforms=JK(o))}getModuleSource(e){let n;switch(e){case tY:n=this.vs||"";break;case nY:n=this.fs||"";break;default:lr(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={},r=this.uniforms;for(const s in r){const i=r[s];s in e&&!i.private?(i.validate&&lr(i.validate(e[s],i),"".concat(this.name,": invalid ").concat(s)),n[s]=e[s]):n[s]=i.value}return n}}function rY(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const s=n.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[s][n]=r}return e}function sY(t){return iY(VO(t))}function iY(t){const e={},n={};return FO({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,s)=>n[s]-n[r]).map(r=>e[r])}function FO(t){let{modules:e,level:n,moduleMap:r,moduleDepth:s}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const i of e)r[i.name]=i,(s[i.name]===void 0||s[i.name]<n)&&(s[i.name]=n);for(const i of e)i.dependencies&&FO({modules:i.dependencies,level:n+1,moduleMap:r,moduleDepth:s})}function VO(t,e){return t.map(n=>(n instanceof AS||(lr(typeof n!="string","Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),lr(n.name,"shader module has no name"),n=new AS(n),n.dependencies=VO(n.dependencies)),n))}function oY(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof window<"u"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",r=n.indexOf("MSIE ")!==-1,s=n.indexOf("Trident/")!==-1;return r||s}const aY=7936,lY=7937,cY=7938,uY=35724,aw={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},ko={};Object.keys(aw).forEach(t=>{ko[t]=t});function dY(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function fY(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||aY),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||lY);return{gpuVendor:hY(n,r),vendor:n,renderer:r,version:t.getParameter(cY),shadingLanguageVersion:t.getParameter(uY)}}function hY(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const vv={};function CS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=aw[e];if(lr(r,e),!oY(n))return!0;if(e in vv)return vv[e];const s=r[0],i=n.behavior||"enable",o="#extension GL_".concat(s," : ").concat(i,`
void main(void) {}`),l=t.createShader(35633);t.shaderSource(l,o),t.compileShader(l);const u=t.getShaderParameter(l,35713);return t.deleteShader(l),vv[e]=u,u}function pY(t,e){const n=aw[e];lr(n,e);const r=dY(t)&&n[1]||n[0],s=typeof r=="string"?!!t.getExtension(r):r;return lr(s===!1||s===!0),s}function zf(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>pY(t,n))}function mY(t){switch(fY(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function gY(t,e,n){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return zf(t,ko.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),zf(t,ko.GLSL_DERIVATIVES)&&CS(t,ko.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),zf(t,ko.GLSL_FRAG_DATA)&&CS(t,ko.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),zf(t,ko.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}const vY=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,yY=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,_Y={[id]:vY,[ow]:yY},sh="__LUMA_INJECT_DECLARATIONS__",PS=/void\s+main\s*\([^)]*\)\s*\{\n?/,RS=/}\n?[^{}]*$/,yv=[];function kS(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const s=e===id;for(const i in n){const o=n[i];o.sort((u,d)=>u.order-d.order),yv.length=o.length;for(let u=0,d=o.length;u<d;++u)yv[u]=o[u].injection;const l="".concat(yv.join(`
`),`
`);switch(i){case"vs:#decl":s&&(t=t.replace(sh,l));break;case"vs:#main-start":s&&(t=t.replace(PS,u=>u+l));break;case"vs:#main-end":s&&(t=t.replace(RS,u=>l+u));break;case"fs:#decl":s||(t=t.replace(sh,l));break;case"fs:#main-start":s||(t=t.replace(PS,u=>u+l));break;case"fs:#main-end":s||(t=t.replace(RS,u=>l+u));break;default:t=t.replace(i,u=>u+l)}}return t=t.replace(sh,""),r&&(t=t.replace(/\}\s*$/,i=>i+_Y[e])),t}function zy(t){const e={};return lr(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const r in n)e[r]=e[r]?"".concat(e[r],`
`).concat(n[r]):n[r]}),e}function Cl(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const UO=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],wY=[...UO,[Cl("attribute"),"in $1"],[Cl("varying"),"out $1"]],xY=[...UO,[Cl("varying"),"in $1"]],BO=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],bY=[...BO,[Cl("in"),"attribute $1"],[Cl("out"),"varying $1"]],EY=[...BO,[Cl("in"),"varying $1"]],$y="gl_FragColor",Gy=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,TY=/void\s+main\s*\([^)]*\)\s*\{\n?/;function SY(t,e,n){switch(e){case 300:return n?kh(t,wY):AY(t);case 100:return n?kh(t,bY):CY(t);default:throw new Error("unknown GLSL version ".concat(e))}}function kh(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function AY(t){t=kh(t,xY);const e=t.match(Gy);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat($y,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(TY,r=>"out vec4 ".concat(n,`;
`).concat(r)).replace(new RegExp("\\b".concat($y,"\\b"),"g"),n)}return t}function CY(t){t=kh(t,EY);const e=t.match(Gy);if(e){const n=e[1];t=t.replace(Gy,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),$y)}return t}const PY=`

`.concat(sh,`

`),zO={[id]:"vertex",[ow]:"fragment"},RY=`precision highp float;

`;function kY(t,e){const{vs:n,fs:r}=e,s=sY(e.modules||[]);return{gl:t,vs:IS(t,Object.assign({},e,{source:n,type:id,modules:s})),fs:IS(t,Object.assign({},e,{source:r,type:ow,modules:s})),getUniforms:IY(s)}}function IS(t,e){let{id:n,source:r,type:s,modules:i,defines:o={},hookFunctions:l=[],inject:u={},transpileToGLSL100:d=!1,prologue:h=!0,log:p}=e;lr(typeof r=="string","shader source must be a string");const g=s===id,y=r.split(`
`);let T=100,x="",E=r;y[0].indexOf("#version ")===0?(T=300,x=y[0],E=y.slice(1).join(`
`)):x="#version ".concat(T);const A={};i.forEach(z=>{Object.assign(A,z.getDefines())}),Object.assign(A,o);let S=h?"".concat(x,`
`).concat(MY({id:n,source:r,type:s}),`
`).concat(OY({type:s}),`
`).concat(mY(t),`
`).concat(gY(t),`
`).concat(LY(A),`
`).concat(g?"":RY,`
`):"".concat(x,`
`);const C=jY(l),O={},M={},D={};for(const z in u){const B=typeof u[z]=="string"?{injection:u[z],order:0}:u[z],$=z.match(/^(v|f)s:(#)?([\w-]+)$/);if($){const G=$[2],te=$[3];G?te==="decl"?M[z]=[B]:D[z]=[B]:O[z]=[B]}else D[z]=[B]}for(const z of i){p&&z.checkDeprecations(E,p);const B=z.getModuleSource(s,T);S+=B;const $=z.injections[s];for(const G in $){const te=G.match(/^(v|f)s:#([\w-]+)$/);if(te){const se=te[2]==="decl"?M:D;se[G]=se[G]||[],se[G].push($[G])}else O[G]=O[G]||[],O[G].push($[G])}}return S+=PY,S=kS(S,s,M),S+=NY(C[s],O),S+=E,S=kS(S,s,D),S=SY(S,d?100:T,g),S}function IY(t){return function(n){const r={};for(const s of t){const i=s.getUniforms(n,r);Object.assign(r,i)}return r}}function OY(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(zO[e].toUpperCase(),`
`)}function MY(t){let{id:e,source:n,type:r}=t;return e&&typeof e=="string"&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(zO[r],`

`):""}function LY(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,n="";for(const r in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;const s=t[r];(s||Number.isFinite(s))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],`
`))}return e===0&&(n+=`
`),n}function NY(t,e){let n="";for(const r in t){const s=t[r];if(n+="void ".concat(s.signature,` {
`),s.header&&(n+="  ".concat(s.header)),e[r]){const i=e[r];i.sort((o,l)=>o.order-l.order);for(const o of i)n+="  ".concat(o.injection,`
`)}s.footer&&(n+="  ".concat(s.footer)),n+=`}
`}return n}function jY(t){const e={vs:{},fs:{}};return t.forEach(n=>{let r;typeof n!="string"?(r=n,n=r.hook):r={},n=n.trim();const[s,i]=n.split(":"),o=n.replace(/\(.+/,"");e[s][o]=Object.assign(r,{signature:i})}),e}const DY="void main() {gl_FragColor = vec4(0);}",$O=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,FY=`#version 300 es
`.concat($O);function GO(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,s,i]=n;if(!e.includes(r)||!s||!i)return null;const o=i.split(";")[0];return{qualifier:r,type:s,name:o}}function WO(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:s}=t;if(!n)return e===300?FY:e>300?"#version ".concat(e,`
`).concat($O):DY;const i=BY(n,r);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(r," ").concat(n,`;
out vec4 `).concat(s,`;
void main() {
  `).concat(s," = ").concat(i,`;
}`):"varying ".concat(r," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(i,`;
}`)}function VY(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return lr(!1),null}}function UY(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return lr(!1),null}}function BY(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return lr(!1),null}}const zY=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,$Y={name:"fp32",vs:zY,fs:null};function OS(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}const br={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function GY(t,{precision:e=br.precision}={}){return t=WY(t),"".concat(parseFloat(t.toPrecision(e)))}function Pl(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ui(t,e,n){return qY(t,r=>Math.max(e,Math.min(n,r)))}function Ih(t,e,n){return Pl(t)?t.map((r,s)=>Ih(r,e[s],n)):n*e+(1-n)*t}function Fu(t,e,n){const r=br.EPSILON;try{if(t===e)return!0;if(Pl(t)&&Pl(e)){if(t.length!==e.length)return!1;for(let s=0;s<t.length;++s)if(!Fu(t[s],e[s]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=br.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{br.EPSILON=r}}function WY(t){return Math.round(t/br.EPSILON)*br.EPSILON}function HY(t){return t.clone?t.clone():new Array(t.length)}function qY(t,e,n){if(Pl(t)){const r=t;n=n||HY(r);for(let s=0;s<n.length&&s<r.length;++s)n[s]=e(t[s],s,n);return n}return e(t)}function KY(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class HO extends KY(Array){clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Pl(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(br)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+GY(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Fu(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let s=0;s<this.ELEMENTS;++s){const i=e[s];this[s]=i+r*(n[s]-i)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(br.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function YY(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function nr(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function _v(t,e,n=""){if(br.debug&&!YY(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}class XY extends HO{get x(){return this[0]}set x(e){this[0]=nr(e)}get y(){return this[1]}set y(e){this[1]=nr(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const s=this[r]-e[r];n+=s*s}return nr(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return nr(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return OS(e>=0&&e<this.ELEMENTS,"index is out of range"),nr(this[e])}setComponent(e,n){return OS(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var ih=1e-6,Rl=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function ZY(){var t=new Rl(2);return Rl!=Float32Array&&(t[0]=0,t[1]=0),t}function MS(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function QY(t,e){return t[0]=-e[0],t[1]=-e[1],t}function qO(t,e,n,r){var s=e[0],i=e[1];return t[0]=s+r*(n[0]-s),t[1]=i+r*(n[1]-i),t}function JY(t,e,n){var r=e[0],s=e[1];return t[0]=n[0]*r+n[4]*s+n[12],t[1]=n[1]*r+n[5]*s+n[13],t}(function(){var t=ZY();return function(e,n,r,s,i,o){var l,u;for(n||(n=2),r||(r=0),s?u=Math.min(s*n+r,e.length):u=e.length,l=r;l<u;l+=n)t[0]=e[l],t[1]=e[l+1],i(t,t,o),e[l]=t[0],e[l+1]=t[1];return e}})();function eX(t,e,n){const r=e[0],s=e[1],i=n[3]*r+n[7]*s||1;return t[0]=(n[0]*r+n[4]*s)/i,t[1]=(n[1]*r+n[5]*s)/i,t}function KO(t,e,n){const r=e[0],s=e[1],i=e[2],o=n[3]*r+n[7]*s+n[11]*i||1;return t[0]=(n[0]*r+n[4]*s+n[8]*i)/o,t[1]=(n[1]*r+n[5]*s+n[9]*i)/o,t[2]=(n[2]*r+n[6]*s+n[10]*i)/o,t}function tX(t,e,n){const r=e[0],s=e[1];return t[0]=n[0]*r+n[2]*s,t[1]=n[1]*r+n[3]*s,t[2]=e[2],t}function nX(){var t=new Rl(3);return Rl!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function rX(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function sX(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function iX(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function oX(t,e,n){var r=e[0],s=e[1],i=e[2],o=n[0],l=n[1],u=n[2];return t[0]=s*u-i*l,t[1]=i*o-r*u,t[2]=r*l-s*o,t}function YO(t,e,n){var r=e[0],s=e[1],i=e[2],o=n[3]*r+n[7]*s+n[11]*i+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*s+n[8]*i+n[12])/o,t[1]=(n[1]*r+n[5]*s+n[9]*i+n[13])/o,t[2]=(n[2]*r+n[6]*s+n[10]*i+n[14])/o,t}function aX(t,e,n){var r=e[0],s=e[1],i=e[2];return t[0]=r*n[0]+s*n[3]+i*n[6],t[1]=r*n[1]+s*n[4]+i*n[7],t[2]=r*n[2]+s*n[5]+i*n[8],t}function lX(t,e,n){var r=n[0],s=n[1],i=n[2],o=n[3],l=e[0],u=e[1],d=e[2],h=s*d-i*u,p=i*l-r*d,g=r*u-s*l,y=s*g-i*p,T=i*h-r*g,x=r*p-s*h,E=o*2;return h*=E,p*=E,g*=E,y*=2,T*=2,x*=2,t[0]=l+h+y,t[1]=u+p+T,t[2]=d+g+x,t}function cX(t,e,n,r){var s=[],i=[];return s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],i[0]=s[0],i[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),i[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function uX(t,e,n,r){var s=[],i=[];return s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],i[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),i[1]=s[1],i[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function dX(t,e,n,r){var s=[],i=[];return s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],i[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),i[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),i[2]=s[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function fX(t,e){var n=t[0],r=t[1],s=t[2],i=e[0],o=e[1],l=e[2],u=Math.sqrt(n*n+r*r+s*s),d=Math.sqrt(i*i+o*o+l*l),h=u*d,p=h&&iX(t,e)/h;return Math.acos(Math.min(Math.max(p,-1),1))}var hX=rX;(function(){var t=nX();return function(e,n,r,s,i,o){var l,u;for(n||(n=3),r||(r=0),s?u=Math.min(s*n+r,e.length):u=e.length,l=r;l<u;l+=n)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],i(t,t,o),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2];return e}})();const wv=[0,0,0];let $f;class fs extends XY{static get ZERO(){return $f||($f=new fs(0,0,0),Object.freeze($f)),$f}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&Pl(e)?this.copy(e):(br.debug&&(nr(e),nr(n),nr(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return br.debug&&(nr(e.x),nr(e.y),nr(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=nr(e)}angle(e){return fX(this,e)}cross(e){return oX(this,this,e),this.check()}rotateX({radians:e,origin:n=wv}){return cX(this,this,n,e),this.check()}rotateY({radians:e,origin:n=wv}){return uX(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=wv}){return dX(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return YO(this,this,e),this.check()}transformAsVector(e){return KO(this,this,e),this.check()}transformByMatrix3(e){return aX(this,this,e),this.check()}transformByMatrix2(e){return tX(this,this,e),this.check()}transformByQuaternion(e){return lX(this,this,e),this.check()}}class pX extends HO{toString(){let e="[";if(br.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=nr(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let s=0;s<this.RANK;++s)n[s]=this[r+s];return n}setColumn(e,n){const r=e*this.RANK;for(let s=0;s<this.RANK;++s)this[r+s]=n[s];return this}}function mX(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gX(t,e){if(t===e){var n=e[1],r=e[2],s=e[3],i=e[6],o=e[7],l=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=s,t[13]=o,t[14]=l}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Wy(t,e){var n=e[0],r=e[1],s=e[2],i=e[3],o=e[4],l=e[5],u=e[6],d=e[7],h=e[8],p=e[9],g=e[10],y=e[11],T=e[12],x=e[13],E=e[14],A=e[15],S=n*l-r*o,C=n*u-s*o,O=n*d-i*o,M=r*u-s*l,D=r*d-i*l,z=s*d-i*u,B=h*x-p*T,$=h*E-g*T,G=h*A-y*T,te=p*E-g*x,Q=p*A-y*x,se=g*A-y*E,re=S*se-C*Q+O*te+M*G-D*$+z*B;return re?(re=1/re,t[0]=(l*se-u*Q+d*te)*re,t[1]=(s*Q-r*se-i*te)*re,t[2]=(x*z-E*D+A*M)*re,t[3]=(g*D-p*z-y*M)*re,t[4]=(u*G-o*se-d*$)*re,t[5]=(n*se-s*G+i*$)*re,t[6]=(E*O-T*z-A*C)*re,t[7]=(h*z-g*O+y*C)*re,t[8]=(o*Q-l*G+d*B)*re,t[9]=(r*G-n*Q-i*B)*re,t[10]=(T*D-x*O+A*S)*re,t[11]=(p*O-h*D-y*S)*re,t[12]=(l*$-o*te-u*B)*re,t[13]=(n*te-r*$+s*B)*re,t[14]=(x*C-T*M-E*S)*re,t[15]=(h*M-p*C+g*S)*re,t):null}function vX(t){var e=t[0],n=t[1],r=t[2],s=t[3],i=t[4],o=t[5],l=t[6],u=t[7],d=t[8],h=t[9],p=t[10],g=t[11],y=t[12],T=t[13],x=t[14],E=t[15],A=e*o-n*i,S=e*l-r*i,C=e*u-s*i,O=n*l-r*o,M=n*u-s*o,D=r*u-s*l,z=d*T-h*y,B=d*x-p*y,$=d*E-g*y,G=h*x-p*T,te=h*E-g*T,Q=p*E-g*x;return A*Q-S*te+C*G+O*$-M*B+D*z}function Fo(t,e,n){var r=e[0],s=e[1],i=e[2],o=e[3],l=e[4],u=e[5],d=e[6],h=e[7],p=e[8],g=e[9],y=e[10],T=e[11],x=e[12],E=e[13],A=e[14],S=e[15],C=n[0],O=n[1],M=n[2],D=n[3];return t[0]=C*r+O*l+M*p+D*x,t[1]=C*s+O*u+M*g+D*E,t[2]=C*i+O*d+M*y+D*A,t[3]=C*o+O*h+M*T+D*S,C=n[4],O=n[5],M=n[6],D=n[7],t[4]=C*r+O*l+M*p+D*x,t[5]=C*s+O*u+M*g+D*E,t[6]=C*i+O*d+M*y+D*A,t[7]=C*o+O*h+M*T+D*S,C=n[8],O=n[9],M=n[10],D=n[11],t[8]=C*r+O*l+M*p+D*x,t[9]=C*s+O*u+M*g+D*E,t[10]=C*i+O*d+M*y+D*A,t[11]=C*o+O*h+M*T+D*S,C=n[12],O=n[13],M=n[14],D=n[15],t[12]=C*r+O*l+M*p+D*x,t[13]=C*s+O*u+M*g+D*E,t[14]=C*i+O*d+M*y+D*A,t[15]=C*o+O*h+M*T+D*S,t}function Oh(t,e,n){var r=n[0],s=n[1],i=n[2],o,l,u,d,h,p,g,y,T,x,E,A;return e===t?(t[12]=e[0]*r+e[4]*s+e[8]*i+e[12],t[13]=e[1]*r+e[5]*s+e[9]*i+e[13],t[14]=e[2]*r+e[6]*s+e[10]*i+e[14],t[15]=e[3]*r+e[7]*s+e[11]*i+e[15]):(o=e[0],l=e[1],u=e[2],d=e[3],h=e[4],p=e[5],g=e[6],y=e[7],T=e[8],x=e[9],E=e[10],A=e[11],t[0]=o,t[1]=l,t[2]=u,t[3]=d,t[4]=h,t[5]=p,t[6]=g,t[7]=y,t[8]=T,t[9]=x,t[10]=E,t[11]=A,t[12]=o*r+h*s+T*i+e[12],t[13]=l*r+p*s+x*i+e[13],t[14]=u*r+g*s+E*i+e[14],t[15]=d*r+y*s+A*i+e[15]),t}function lw(t,e,n){var r=n[0],s=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function yX(t,e,n,r){var s=r[0],i=r[1],o=r[2],l=Math.hypot(s,i,o),u,d,h,p,g,y,T,x,E,A,S,C,O,M,D,z,B,$,G,te,Q,se,re,ge;return l<ih?null:(l=1/l,s*=l,i*=l,o*=l,u=Math.sin(n),d=Math.cos(n),h=1-d,p=e[0],g=e[1],y=e[2],T=e[3],x=e[4],E=e[5],A=e[6],S=e[7],C=e[8],O=e[9],M=e[10],D=e[11],z=s*s*h+d,B=i*s*h+o*u,$=o*s*h-i*u,G=s*i*h-o*u,te=i*i*h+d,Q=o*i*h+s*u,se=s*o*h+i*u,re=i*o*h-s*u,ge=o*o*h+d,t[0]=p*z+x*B+C*$,t[1]=g*z+E*B+O*$,t[2]=y*z+A*B+M*$,t[3]=T*z+S*B+D*$,t[4]=p*G+x*te+C*Q,t[5]=g*G+E*te+O*Q,t[6]=y*G+A*te+M*Q,t[7]=T*G+S*te+D*Q,t[8]=p*se+x*re+C*ge,t[9]=g*se+E*re+O*ge,t[10]=y*se+A*re+M*ge,t[11]=T*se+S*re+D*ge,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function XO(t,e,n){var r=Math.sin(n),s=Math.cos(n),i=e[4],o=e[5],l=e[6],u=e[7],d=e[8],h=e[9],p=e[10],g=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*s+d*r,t[5]=o*s+h*r,t[6]=l*s+p*r,t[7]=u*s+g*r,t[8]=d*s-i*r,t[9]=h*s-o*r,t[10]=p*s-l*r,t[11]=g*s-u*r,t}function _X(t,e,n){var r=Math.sin(n),s=Math.cos(n),i=e[0],o=e[1],l=e[2],u=e[3],d=e[8],h=e[9],p=e[10],g=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*s-d*r,t[1]=o*s-h*r,t[2]=l*s-p*r,t[3]=u*s-g*r,t[8]=i*r+d*s,t[9]=o*r+h*s,t[10]=l*r+p*s,t[11]=u*r+g*s,t}function ZO(t,e,n){var r=Math.sin(n),s=Math.cos(n),i=e[0],o=e[1],l=e[2],u=e[3],d=e[4],h=e[5],p=e[6],g=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*s+d*r,t[1]=o*s+h*r,t[2]=l*s+p*r,t[3]=u*s+g*r,t[4]=d*s-i*r,t[5]=h*s-o*r,t[6]=p*s-l*r,t[7]=g*s-u*r,t}function wX(t,e){var n=e[0],r=e[1],s=e[2],i=e[3],o=n+n,l=r+r,u=s+s,d=n*o,h=r*o,p=r*l,g=s*o,y=s*l,T=s*u,x=i*o,E=i*l,A=i*u;return t[0]=1-p-T,t[1]=h+A,t[2]=g-E,t[3]=0,t[4]=h-A,t[5]=1-d-T,t[6]=y+x,t[7]=0,t[8]=g+E,t[9]=y-x,t[10]=1-d-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xX(t,e,n,r,s,i,o){var l=1/(n-e),u=1/(s-r),d=1/(i-o);return t[0]=i*2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i*2*u,t[6]=0,t[7]=0,t[8]=(n+e)*l,t[9]=(s+r)*u,t[10]=(o+i)*d,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*d,t[15]=0,t}function bX(t,e,n,r,s){var i=1/Math.tan(e/2),o;return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0?(o=1/(r-s),t[10]=(s+r)*o,t[14]=2*s*r*o):(t[10]=-1,t[14]=-2*r),t}var EX=bX;function TX(t,e,n,r,s,i,o){var l=1/(e-n),u=1/(r-s),d=1/(i-o);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*d,t[11]=0,t[12]=(e+n)*l,t[13]=(s+r)*u,t[14]=(o+i)*d,t[15]=1,t}var SX=TX;function AX(t,e,n,r){var s,i,o,l,u,d,h,p,g,y,T=e[0],x=e[1],E=e[2],A=r[0],S=r[1],C=r[2],O=n[0],M=n[1],D=n[2];return Math.abs(T-O)<ih&&Math.abs(x-M)<ih&&Math.abs(E-D)<ih?mX(t):(h=T-O,p=x-M,g=E-D,y=1/Math.hypot(h,p,g),h*=y,p*=y,g*=y,s=S*g-C*p,i=C*h-A*g,o=A*p-S*h,y=Math.hypot(s,i,o),y?(y=1/y,s*=y,i*=y,o*=y):(s=0,i=0,o=0),l=p*o-g*i,u=g*s-h*o,d=h*i-p*s,y=Math.hypot(l,u,d),y?(y=1/y,l*=y,u*=y,d*=y):(l=0,u=0,d=0),t[0]=s,t[1]=l,t[2]=h,t[3]=0,t[4]=i,t[5]=u,t[6]=p,t[7]=0,t[8]=o,t[9]=d,t[10]=g,t[11]=0,t[12]=-(s*T+i*x+o*E),t[13]=-(l*T+u*x+d*E),t[14]=-(h*T+p*x+g*E),t[15]=1,t)}function CX(){var t=new Rl(4);return Rl!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function PX(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function od(t,e,n){var r=e[0],s=e[1],i=e[2],o=e[3];return t[0]=n[0]*r+n[4]*s+n[8]*i+n[12]*o,t[1]=n[1]*r+n[5]*s+n[9]*i+n[13]*o,t[2]=n[2]*r+n[6]*s+n[10]*i+n[14]*o,t[3]=n[3]*r+n[7]*s+n[11]*i+n[15]*o,t}(function(){var t=CX();return function(e,n,r,s,i,o){var l,u;for(n||(n=4),r||(r=0),s?u=Math.min(s*n+r,e.length):u=e.length,l=r;l<u;l+=n)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],t[3]=e[l+3],i(t,t,o),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2],e[l+3]=t[3];return e}})();var Hy;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(Hy||(Hy={}));const RX=45*Math.PI/180,kX=1,xv=.1,bv=500,IX=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class hs extends pX{static get IDENTITY(){return MX()}static get ZERO(){return OX()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return Hy}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,s,i,o,l,u,d,h,p,g,y,T,x,E){return this[0]=e,this[1]=n,this[2]=r,this[3]=s,this[4]=i,this[5]=o,this[6]=l,this[7]=u,this[8]=d,this[9]=h,this[10]=p,this[11]=g,this[12]=y,this[13]=T,this[14]=x,this[15]=E,this.check()}setRowMajor(e,n,r,s,i,o,l,u,d,h,p,g,y,T,x,E){return this[0]=e,this[1]=i,this[2]=d,this[3]=y,this[4]=n,this[5]=o,this[6]=h,this[7]=T,this[8]=r,this[9]=l,this[10]=p,this[11]=x,this[12]=s,this[13]=u,this[14]=g,this[15]=E,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(IX)}fromObject(e){return this.check()}fromQuaternion(e){return wX(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:s,top:i,near:o=xv,far:l=bv}=e;return l===1/0?LX(this,n,r,s,i,o):xX(this,n,r,s,i,o,l),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:s=[0,1,0]}=e;return AX(this,n,r,s),this.check()}ortho(e){const{left:n,right:r,bottom:s,top:i,near:o=xv,far:l=bv}=e;return SX(this,n,r,s,i,o,l),this.check()}orthographic(e){const{fovy:n=RX,aspect:r=kX,focalDistance:s=1,near:i=xv,far:o=bv}=e;LS(n);const l=n/2,u=s*Math.tan(l),d=u*r;return this.ortho({left:-d,right:d,bottom:-u,top:u,near:i,far:o})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:s=.1,far:i=500}=e;return LS(n),EX(this,n,r,s,i),this.check()}determinant(){return vX(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),s=1/r[0],i=1/r[1],o=1/r[2];return e[0]=this[0]*s,e[1]=this[1]*i,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*s,e[5]=this[5]*i,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*s,e[9]=this[9]*i,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),s=1/r[0],i=1/r[1],o=1/r[2];return e[0]=this[0]*s,e[1]=this[1]*i,e[2]=this[2]*o,e[3]=this[4]*s,e[4]=this[5]*i,e[5]=this[6]*o,e[6]=this[8]*s,e[7]=this[9]*i,e[8]=this[10]*o,e}transpose(){return gX(this,this),this.check()}invert(){return Wy(this,this),this.check()}multiplyLeft(e){return Fo(this,e,this),this.check()}multiplyRight(e){return Fo(this,this,e),this.check()}rotateX(e){return XO(this,this,e),this.check()}rotateY(e){return _X(this,this,e),this.check()}rotateZ(e){return ZO(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return yX(this,this,e,n),this.check()}scale(e){return lw(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return Oh(this,this,e),this.check()}transform(e,n){return e.length===4?(n=od(n||[-0,-0,-0,-0],e,this),_v(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let s;switch(r){case 2:s=JY(n||[-0,-0],e,this);break;case 3:s=YO(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return _v(s,e.length),s}transformAsVector(e,n){let r;switch(e.length){case 2:r=eX(n||[-0,-0],e,this);break;case 3:r=KO(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return _v(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let Gf,Wf;function OX(){return Gf||(Gf=new hs([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Gf)),Gf}function MX(){return Wf||(Wf=new hs,Object.freeze(Wf)),Wf}function LS(t){if(t>Math.PI*2)throw Error("expected radians")}function LX(t,e,n,r,s,i){const o=2*i/(n-e),l=2*i/(s-r),u=(n+e)/(n-e),d=(s+r)/(s-r),h=-1,p=-1,g=-2*i;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=u,t[9]=d,t[10]=h,t[11]=p,t[12]=0,t[13]=0,t[14]=g,t[15]=0,t}const NX=new Uint8Array([0,255,255,255]),jX={pickingSelectedColor:null,pickingHighlightColor:NX,pickingActive:!1,pickingAttribute:!1};function DX(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:jX;const e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}const FX=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,VX=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,UX={name:"picking",vs:FX,fs:VX,getUniforms:DX},BX=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,zX={name:"transform",vs:BX,fs:null};class ad{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new ad(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:n="",fs:r="",defines:s={},inject:i={},varyings:o=[],bufferMode:l=35981,transpileToGLSL100:u=!1}=e,d=this._getModuleList(e.modules),h=this._getHash(n),p=this._getHash(r),g=d.map(C=>this._getHash(C.name)).sort(),y=o.map(C=>this._getHash(C)),T=Object.keys(s).sort(),x=Object.keys(i).sort(),E=[],A=[];for(const C of T)E.push(this._getHash(C)),E.push(this._getHash(s[C]));for(const C of x)A.push(this._getHash(C)),A.push(this._getHash(i[C]));const S="".concat(h,"/").concat(p,"D").concat(E.join("/"),"M").concat(g.join("/"),"I").concat(A.join("/"),"V").concat(y.join("/"),"H").concat(this.stateHash,"B").concat(l).concat(u?"T":"");if(!this._programCache[S]){const C=kY(this.gl,{vs:n,fs:r,modules:d,inject:i,defines:s,hookFunctions:this._hookFunctions,transpileToGLSL100:u});this._programCache[S]=new jO(this.gl,{hash:S,vs:C.vs,fs:C.fs,varyings:o,bufferMode:l}),this._getUniforms[S]=C.getUniforms||(O=>{}),this._useCounts[S]=0}return this._useCounts[S]++,this._programCache[S]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),r={};let s=0;for(let i=0,o=this._defaultModules.length;i<o;++i){const l=this._defaultModules[i],u=l.name;n[s++]=l,r[u]=!0}for(let i=0,o=e.length;i<o;++i){const l=e[i],u=l.name;r[u]||(n[s++]=l,r[u]=!0)}return n.length=s,n}}const $X={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function GX(t,e,n){const r={};let s=e.indices;for(const i in e.attributes){const o=e.attributes[i],l=WX(i);if(i==="indices")s=o;else if(o.constant)r[l]=o.value;else{const u=o.value,d={...o};delete d.value,r[l]=[new pt(t,u),d],HX(i,d)}}if(s){const i=s.value||s;we(i instanceof Uint16Array||i instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:s.isIndexed===void 0?!0:s.isIndexed};r.indices=[new pt(t,{data:i,target:34963}),o]}return r}function WX(t,e){const{attributeMap:n=$X}={};return n&&n[t]||t}function HX(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}we(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const Xa=2,qX=1e4,KX="Model needs drawMode and vertexCount",NS=()=>{},YX={};class QO{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:r=Yi("model")}=n;we(Pp(e)),this.id=r,this.gl=e,this.id=n.id||Yi("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||ad.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:r,fs:s,modules:i,defines:o,inject:l,varyings:u,bufferMode:d,transpileToGLSL100:h}=e;this.programProps={program:n,vs:r,fs:s,modules:i,defines:o,inject:l,varyings:u,bufferMode:d,transpileToGLSL100:h},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},we(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),KX)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:r,fs:s,modules:i,defines:o,inject:l,varyings:u,bufferMode:d,transpileToGLSL100:h}=e;this.programProps={program:n,vs:r,fs:s,modules:i,defines:o,inject:l,varyings:u,bufferMode:d,transpileToGLSL100:h},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return we(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return we(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=GX(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Al(e))return this;const n={};for(const r in e){const s=e[r];n[r]=s.getValue?s.getValue():s}return this.vertexArray.setAttributes(n),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return sw(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:r,uniforms:s={},attributes:i={},transformFeedback:o=this.transformFeedback,parameters:l={},vertexArray:u=this.vertexArray}=e;this.setAttributes(i),this.updateModuleSettings(n),this.setUniforms(s);let d;Le.priority>=Xa&&(d=this._logDrawCallStart(Xa));const h=this.vertexArray.getDrawParams(),{isIndexed:p=h.isIndexed,indexType:g=h.indexType,indexOffset:y=h.indexOffset,vertexArrayInstanced:T=h.isInstanced}=this.props;T&&!this.isInstanced&&Le.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:x,instanceCount:E}=this,{onBeforeRender:A=NS,onAfterRender:S=NS}=this.props;A(),this.program.setUniforms(this.uniforms);const C=this.program.draw(Object.assign(YX,e,{logPriority:d,uniforms:null,framebuffer:r,parameters:l,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:u,transformFeedback:o,isIndexed:p,indexType:g,isInstanced:x,instanceCount:E,offset:p?y:0}));return S(),Le.priority>=Xa&&this._logDrawCallEnd(d,u,r),C}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:n=!0,feedbackBuffers:r,unbindModels:s=[]}=e;let{parameters:i}=e;r&&this._setFeedbackBuffers(r),n&&(i=Object.assign({},i,{35977:n})),s.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:i}))}finally{s.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Le.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:r,fs:s,modules:i,inject:o,defines:l,varyings:u,bufferMode:d,transpileToGLSL100:h}=this.programProps;n=this.programManager.get({vs:r,fs:s,modules:i,inject:o,defines:l,varyings:u,bufferMode:d,transpileToGLSL100:h}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}we(n instanceof jO,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new WK(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof pt&&n.delete()}}_setAnimationProps(e){this.animated&&we(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Al(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new DO(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:qX;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),Le.group(Xa,">>> DRAWING MODEL ".concat(this.id),{collapsed:Le.level<=2})(),e}_logDrawCallEnd(e,n,r,s){if(e===void 0)return;const i=KK({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:l,unusedCount:u}=xS({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:d,count:h}=xS({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});h>0&&Le.log("MISSING UNIFORMS",Object.keys(d))(),u>0&&Le.log("UNUSED UNIFORMS",Object.keys(l))();const p=XK(this.vertexArray.configuration);Le.table(e,i)(),Le.table(e,o)(),Le.table(e+1,p)(),s&&s.log({logLevel:Xa,message:"Rendered to ".concat(s.id)}),Le.groupEnd(Xa)()}}class XX{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:s}=n;return{attributes:Object.assign({},r,e.attributes),transformFeedback:s}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],r=e?n[e]:null;return r?r instanceof pt?r:r.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:n}=e,r=this.getBuffer(n);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&we(rt(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const s in this.feedbackMap){const i=this.feedbackMap[s];s in n&&(r[i]=s)}Object.assign(r,e.feedbackBuffers);for(const s in r){const i=r[s];if(typeof i=="string"){const o=n[i],{byteLength:l,usage:u,accessor:d}=o;r[s]=this._createNewBuffer(s,{byteLength:l,usage:u,accessor:d})}}return r}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}_setupTransformFeedback(e,n){let{model:r}=n;const{program:s}=r;e.transformFeedback=new DO(this.gl,{program:s,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),s=this._getNextIndex();this.bindings[s]=this._updateBinding(this.bindings[s],{sourceBuffers:n,feedbackBuffers:r})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const s in this.feedbackMap){const i=this.feedbackMap[s];n[s]=e.feedbackBuffers[i],r[i]=e.sourceBuffers[s],we(r[i]instanceof pt)}return{sourceBuffers:n,feedbackBuffers:r}}_createNewBuffer(e,n){const r=new pt(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}const ZX="transform_uSampler_",Mh="transform_uSize_",jS="transform_position";function QX(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:s}=t,o=Object.keys(n).length,l=null;const u={};let d=e,h={};if(o>0||r){const p=d.split(`
`),g=p.slice();if(p.forEach((y,T,x)=>{if(o>0){const E=rZ(y,n);if(E){const{updatedLine:A,inject:S}=E;g[T]=A,h=zy([h,S]),Object.assign(u,E.samplerTextureMap),o--}}r&&!l&&(l=nZ(y,r))}),r){we(s);const y="".concat(Mh).concat(r),T="uniform vec2 ".concat(y,`;
`),x="     vec2 ".concat(jS," = transform_getPos(").concat(y,`);
     gl_Position = vec4(`).concat(jS,`, 0, 1.);
`);h=zy([h,{"vs:#decl":T,"vs:#main-start":x}])}d=g.join(`
`)}return{vs:d,targetTextureType:l,inject:h,samplerTextureMap:u}}function JX(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const s={};let i,o;n&&({width:i,height:o}=r,s["".concat(Mh).concat(n)]=[i,o]);for(const l in e)({width:i,height:o}=e[l]),s["".concat(Mh).concat(l)]=[i,o];return s}function eZ(t){return GO(t,["attribute","in"])}function tZ(t){const e="".concat(ZX).concat(t),n="".concat(Mh).concat(t),r="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}function nZ(t,e){const n=GO(t,["varying","out"]);return n&&n.name===e?n.type:null}function rZ(t,e){const n={},r=eZ(t);if(!r)return null;const{type:s,name:i}=r;if(i&&e[i]){const o="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:l,sizeName:u,uniformDeclerations:d}=tZ(i),h=VY(s),p="  ".concat(s," ").concat(i," = transform_getInput(").concat(l,", ").concat(u,").").concat(h,`;
`);return n[l]=i,{updatedLine:o,inject:{"vs:#decl":d,"vs:#main-start":p},samplerTextureMap:n}}return null}const sZ={10241:9728,10240:9728,10242:33071,10243:33071},iZ="transform_output";class oZ{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,sourceTextures:r,framebuffer:s,targetTexture:i}=this.bindings[this.currentIndex],o=Object.assign({},n,e.attributes),l=Object.assign({},e.uniforms),u=Object.assign({},e.parameters);let d=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const p in this.samplerTextureMap){const g=this.samplerTextureMap[p];l[p]=r[g]}this._setSourceTextureParameters();const h=JX({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:i});Object.assign(l,h)}return this.hasTargetTexture&&(d=!1,u.viewport=[0,0,s.width,s.height]),{attributes:o,framebuffer:s,uniforms:l,discard:d,parameters:u}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],r=kp(n);if(!e)return r;const s=r.constructor,i=UY(this.targetTextureType),o=new s(r.length*i/4);let l=0;for(let u=0;u<r.length;u+=4)for(let d=0;d<i;d++)o[l++]=r[u+d];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:r}=e;if(r instanceof ur)return r;const s=n[r];return s?(this._targetRefTexName=r,this._createNewTexture(s)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:r={},_targetTexture:s}=e,i=this._createTargetTexture({sourceTextures:r,textureOrReference:s});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:r,targetTexture:i}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((r,s,i)=>{i[s]=s}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new pt(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),s=this._getNextIndex();this.bindings[s]=this._updateBinding(this.bindings[s],{sourceTextures:n,targetTexture:r})}}_updateBinding(e,n){const{sourceBuffers:r,sourceTextures:s,targetTexture:i}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,s),Object.assign(e.sourceBuffers,r),i){e.targetTexture=i;const{width:o,height:l}=i,{framebuffer:u}=e;u?(u.update({attachments:{36064:i},resizeAttachments:!1}),u.resize({width:o,height:l})):e.framebuffer=new Qt(this.gl,{id:"transform-framebuffer",width:o,height:l,attachments:{36064:i}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const r in n)n[r].setParameters(sZ)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;const r=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:r}}_createNewTexture(e){const n=Lq(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:n,targetTexture:r}=this.bindings[this.currentIndex],{vs:s,uniforms:i,targetTextureType:o,inject:l,samplerTextureMap:u}=QX({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),d=zy([e.inject||{},l]);this.targetTextureType=o,this.samplerTextureMap=u;const h=e._fs||WO({version:LO(s),input:this.targetTextureVarying,inputType:o,output:iZ}),p=this.hasSourceTextures||this.targetTextureVarying?[zX].concat(e.modules||[]):e.modules;return{vs:s,fs:h,modules:p,uniforms:i,inject:d}}}class cw{static isSupported(e){return rt(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:r}=this;e&&e.delete(),n&&n.delete(),r&&r.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:n=!0}=e,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=e||r.swap();we(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n){const s=r.getData(e);if(s)return s}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)r.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new QO(n,Object.assign({},e,{fs:e.fs||WO({version:LO(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const s of r)n=s.updateModelProps(n);return n}_buildResourceTransforms(e,n){aZ(n)&&(this.bufferTransform=new XX(e,n)),lZ(n)&&(this.textureTransform=new oZ(e,n)),we(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const s of r)n=Object.assign(n,s.getDrawOptions(n));return n}}function aZ(t){return!!(!Al(t.feedbackBuffers)||!Al(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function lZ(t){return!!(!Al(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}const DS={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class cZ{static get DRAW_MODE(){return DS}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=Yi("geometry"),drawMode:r=DS.TRIANGLES,attributes:s={},indices:i=null,vertexCount:o=null}=e;this.id=n,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(s,i),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const r in e){let s=e[r];s=ArrayBuffer.isView(s)?{value:s}:s,we(ArrayBuffer.isView(s.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),(r==="POSITION"||r==="positions")&&!s.size&&(s.size=3),r==="indices"?(we(!this.indices),this.indices=s):this.attributes[r]=s}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const s in e){const i=e[s],{value:o,size:l,constant:u}=i;!u&&o&&l>=1&&(r=Math.min(r,o.length/l))}return we(Number.isFinite(r)),r}}let uZ=1,dZ=1;class JO{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:s=1,repeat:i=1}=e,o=uZ++,l={time:0,delay:n,duration:r,rate:s,repeat:i};return this._setChannelTime(l,this.time),this.channels.set(o,l),o}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const s of n)this._setChannelTime(s,this.time);const r=this.animations.values();for(const s of r){const{animation:i,channel:o}=s;i.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=dZ++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,s=e.duration*e.repeat;r>=s?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}const fZ=[255,255,255],hZ=1;let pZ=0;class mZ{constructor(e={}){R(this,"id",void 0),R(this,"color",void 0),R(this,"intensity",void 0),R(this,"type","ambient");const{color:n=fZ}=e,{intensity:r=hZ}=e;this.id=e.id||"ambient-".concat(pZ++),this.color=n,this.intensity=r}}const gZ=[255,255,255],vZ=1,yZ=[0,0,-1];let _Z=0;class FS{constructor(e={}){R(this,"id",void 0),R(this,"color",void 0),R(this,"intensity",void 0),R(this,"type","directional"),R(this,"direction",void 0),R(this,"shadow",void 0);const{color:n=gZ}=e,{intensity:r=vZ}=e,{direction:s=yZ}=e,{_shadow:i=!1}=e;this.id=e.id||"directional-".concat(_Z++),this.color=n,this.intensity=r,this.type="directional",this.direction=new fs(s).normalize().toArray(),this.shadow=i}getProjectedLight(e){return this}}class wZ{constructor(e,n={id:"pass"}){R(this,"id",void 0),R(this,"gl",void 0),R(this,"props",void 0);const{id:r}=n;this.id=r,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class uw extends wZ{constructor(...e){super(...e),R(this,"_lastRenderIndex",-1)}render(e){const n=this.gl;return zs(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:r,viewports:s,views:i,onViewportActive:o,clearStack:l=!0,clearCanvas:u=!0}=e;e.pass=e.pass||"unknown";const d=this.gl;u&&bZ(d,n),l&&(this._lastRenderIndex=-1);const h=[];for(const p of s){const g=i&&i[p.id];o==null||o(p);const y=this._getDrawLayerParams(p,e),T=p.subViewports||[p];for(const x of T){const E=this._drawLayersInViewport(d,{target:n,moduleParameters:r,viewport:x,view:g,pass:e.pass,layers:e.layers},y);h.push(E)}}return h}_getDrawLayerParams(e,{layers:n,pass:r,isPicking:s=!1,layerFilter:i,cullRect:o,effects:l,moduleParameters:u},d=!1){const h=[],p=eM(this._lastRenderIndex+1),g={layer:n[0],viewport:e,isPicking:s,renderPass:r,cullRect:o},y={};for(let T=0;T<n.length;T++){const x=n[T],E=this._shouldDrawLayer(x,g,i,y),A={shouldDrawLayer:E};E&&!d&&(A.layerRenderIndex=p(x,E),A.moduleParameters=this._getModuleParameters(x,l,r,u),A.layerParameters=this.getLayerParameters(x,T,e)),h[T]=A}return h}_drawLayersInViewport(e,{layers:n,moduleParameters:r,pass:s,target:i,viewport:o,view:l},u){const d=xZ(e,{moduleParameters:r,target:i,viewport:o});if(l&&l.props.clear){const p=l.props.clear===!0?{color:!0,depth:!0}:l.props.clear;Vr(e,{scissorTest:!0,scissor:d},()=>sw(e,p))}const h={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};zs(e,{viewport:d});for(let p=0;p<n.length;p++){const g=n[p],{shouldDrawLayer:y,layerRenderIndex:T,moduleParameters:x,layerParameters:E}=u[p];if(y&&g.props.pickable&&h.pickableCount++,g.isComposite)h.compositeCount++;else if(y){h.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,T),x.viewport=o;try{g._drawLayer({moduleParameters:x,uniforms:{layerIndex:T},parameters:E})}catch(A){g.raiseError(A,"drawing ".concat(g," to ").concat(s))}}}return h}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,s){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(r){const l=n.layer.id;if(l in s||(s[l]=r(n)),!s[l])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,s){var i;const o=Object.assign(Object.create(((i=e.internalState)===null||i===void 0?void 0:i.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Sl(this.gl)});if(n)for(const u of n){var l;Object.assign(o,(l=u.getModuleParameters)===null||l===void 0?void 0:l.call(u,e))}return Object.assign(o,this.getModuleParameters(e,n),s)}}function eM(t=0,e={}){const n={},r=(s,i)=>{const o=s.props._offset,l=s.id,u=s.parent&&s.parent.id;let d;if(u&&!(u in e)&&r(s.parent,!1),u in n){const h=n[u]=n[u]||eM(e[u],e);d=h(s,i),n[l]=h}else Number.isFinite(o)?(d=o+(e[u]||0),n[l]=null):d=t;return i&&d>=t&&(t=d+1),e[l]=d,d};return r}function xZ(t,{moduleParameters:e,target:n,viewport:r}){const s=n&&n.id!=="default-framebuffer",i=e&&e.devicePixelRatio||Sl(t),o=s?n.height:t.drawingBufferHeight,l=r;return[l.x*i,o-(l.y+l.height)*i,l.width*i,l.height*i]}function bZ(t,e){const n=e?e.width:t.drawingBufferWidth,r=e?e.height:t.drawingBufferHeight;zs(t,{viewport:[0,0,n,r]}),t.clear(16640)}class EZ extends uw{constructor(e,n){super(e,n),R(this,"shadowMap",void 0),R(this,"depthBuffer",void 0),R(this,"fbo",void 0),this.shadowMap=new ur(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new cl(e,{format:33189,width:1,height:1}),this.fbo=new Qt(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;Vr(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],s=Sl(this.gl),i=r.width*s,o=r.height*s;(i!==n.width||o!==n.height)&&n.resize({width:i,height:o}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const tM="#define SMOOTH_EDGE_RADIUS 0.5",TZ=`
`.concat(tM,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),SZ=`
`.concat(tM,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),AZ={name:"geometry",vs:TZ,fs:SZ},CZ=Object.keys(ft).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(ft[t],";")).join(""),PZ=Object.keys(rs).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(rs[t],";")).join(""),RZ=Object.keys(Dy).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(Dy[t],";")).join(""),kZ="".concat(CZ,`
`).concat(PZ,`
`).concat(RZ,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function IZ(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function ld(t){let e={},n;return r=>{for(const s in r)if(!IZ(r[s],e[s])){n=t(r),e=r;break}return n}}const VS=[0,0,0,0],OZ=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],nM=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],MZ=[0,0,0],rM=[0,0,0],LZ=ld(DZ);function sM(t,e,n=rM){n.length<3&&(n=[n[0],n[1],0]);let r=n,s,i=!0;switch(e===ft.LNGLAT_OFFSETS||e===ft.METER_OFFSETS?s=n:s=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case rs.WEB_MERCATOR:(e===ft.LNGLAT||e===ft.CARTESIAN)&&(s=[0,0,0],i=!1);break;case rs.WEB_MERCATOR_AUTO_OFFSET:e===ft.LNGLAT?r=s:e===ft.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],s=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case rs.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case rs.GLOBE:i=!1,s=null;break;default:i=!1}return{geospatialOrigin:s,shaderCoordinateOrigin:r,offsetMode:i}}function NZ(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:s}=t;let{viewMatrix:i,viewProjectionMatrix:o}=t,l=VS,u=VS,d=t.cameraPosition;const{geospatialOrigin:h,shaderCoordinateOrigin:p,offsetMode:g}=sM(t,e,n);return g&&(u=t.projectPosition(h||p),d=[d[0]-u[0],d[1]-u[1],d[2]-u[2]],u[3]=1,l=od([],u,o),i=r||i,o=Fo([],s,i),o=Fo([],o,OZ)),{viewMatrix:i,viewProjectionMatrix:o,projectionCenter:l,originCommon:u,cameraPosCommon:d,shaderCoordinateOrigin:p,geospatialOrigin:h}}function jZ({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=ft.DEFAULT,coordinateOrigin:s=rM,autoWrapLongitude:i=!1}){r===ft.DEFAULT&&(r=t.isGeospatial?ft.LNGLAT:ft.CARTESIAN);const o=LZ({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:s});return o.project_uWrapLongitude=i,o.project_uModelMatrix=n||nM,o}function DZ({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:s,viewProjectionMatrix:i,originCommon:o,cameraPosCommon:l,shaderCoordinateOrigin:u,geospatialOrigin:d}=NZ(t,n,r),h=t.getDistanceScales(),p=[t.width*e,t.height*e],g=od([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,y={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:u,project_uCommonOrigin:o.slice(0,3),project_uCenter:s,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:p,project_uDevicePixelRatio:e,project_uFocalDistance:g,project_uCommonUnitsPerMeter:h.unitsPerMeter,project_uCommonUnitsPerWorldUnit:h.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:MZ,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:i,project_uModelMatrix:nM,project_uCameraPosition:l};if(d){const T=t.getDistanceScales(d);switch(n){case ft.METER_OFFSETS:y.project_uCommonUnitsPerWorldUnit=T.unitsPerMeter,y.project_uCommonUnitsPerWorldUnit2=T.unitsPerMeter2;break;case ft.LNGLAT:case ft.LNGLAT_OFFSETS:t._pseudoMeters||(y.project_uCommonUnitsPerMeter=T.unitsPerMeter),y.project_uCommonUnitsPerWorldUnit=T.unitsPerDegree,y.project_uCommonUnitsPerWorldUnit2=T.unitsPerDegree2;break;case ft.CARTESIAN:y.project_uCommonUnitsPerWorldUnit=[1,1,T.unitsPerMeter[2]],y.project_uCommonUnitsPerWorldUnit2=[0,0,T.unitsPerMeter2[2]];break}}return y}const FZ={};function VZ(t=FZ){return"viewport"in t?jZ(t):{}}const dw={name:"project",dependencies:[$Y,AZ],vs:kZ,getUniforms:VZ};function UZ(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ml(t,e){const n=od([],e,t);return PX(n,n,1/n[3]),n}function US(t,e){const n=t%e;return n<0?e+n:n}function qy(t,e,n){return t<e?e:t>n?n:t}function BZ(t){return Math.log(t)*Math.LOG2E}const fw=Math.log2||BZ;function $s(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Fr=Math.PI,iM=Fr/4,Er=Fr/180,Ky=180/Fr,kl=512,Lh=4003e4,BS=85.051129,zZ=1.5;function $Z(t){return fw(t)}function Nh(t){const[e,n]=t;$s(Number.isFinite(e)),$s(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*Er,s=n*Er,i=kl*(r+Fr)/(2*Fr),o=kl*(Fr+Math.log(Math.tan(iM+s*.5)))/(2*Fr);return[i,o]}function Il(t){const[e,n]=t,r=e/kl*(2*Fr)-Fr,s=2*(Math.atan(Math.exp(n/kl*(2*Fr)-Fr))-iM);return[r*Ky,s*Ky]}function GZ(t){const{latitude:e}=t;$s(Number.isFinite(e));const n=Math.cos(e*Er);return $Z(Lh*n)-9}function Ev(t){const e=Math.cos(t*Er);return kl/Lh/e}function Yy(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;$s(Number.isFinite(e)&&Number.isFinite(n));const s=kl,i=Math.cos(e*Er),o=s/360,l=o/i,u=s/Lh/i,d={unitsPerMeter:[u,u,u],metersPerUnit:[1/u,1/u,1/u],unitsPerDegree:[o,l,u],degreesPerUnit:[1/o,1/l,1/u]};if(r){const h=Er*Math.tan(e*Er)/i,p=o*h/2,g=s/Lh*h,y=g/l*u;d.unitsPerDegree2=[0,p,g],d.unitsPerMeter2=[y,0,y]}return d}function oM(t,e){const[n,r,s]=t,[i,o,l]=e,{unitsPerMeter:u,unitsPerMeter2:d}=Yy({longitude:n,latitude:r,highPrecision:!0}),h=Nh(t);h[0]+=i*(u[0]+d[0]*o),h[1]+=o*(u[1]+d[1]*o);const p=Il(h),g=(s||0)+(l||0);return Number.isFinite(s)||Number.isFinite(l)?[p[0],p[1],g]:p}function WZ(t){const{height:e,pitch:n,bearing:r,altitude:s,scale:i,center:o}=t,l=UZ();Oh(l,l,[0,0,-s]),XO(l,l,-n*Er),ZO(l,l,r*Er);const u=i/e;return lw(l,l,[u,u,u]),o&&Oh(l,l,sX([],o)),l}function HZ(t){const{width:e,height:n,altitude:r,pitch:s=0,offset:i,center:o,scale:l,nearZMultiplier:u=1,farZMultiplier:d=1}=t;let{fovy:h=jh(zZ)}=t;r!==void 0&&(h=jh(r));const p=h*Er,g=s*Er,y=aM(h);let T=y;o&&(T+=o[2]*l/Math.cos(g)/n);const x=p*(.5+(i?i[1]:0)/n),E=Math.sin(x)*T/Math.sin(qy(Math.PI/2-g-x,.01,Math.PI-.01)),A=Math.sin(g)*E+T,S=T*10,C=Math.min(A*d,S);return{fov:p,aspect:e/n,focalDistance:y,near:u,far:C}}function jh(t){return 2*Math.atan(.5/t)*Ky}function aM(t){return .5/Math.tan(.5*t*Er)}function lM(t,e){const[n,r,s=0]=t;return $s(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(s)),ml(e,[n,r,s,1])}function hw(t,e,n=0){const[r,s,i]=t;if($s(Number.isFinite(r)&&Number.isFinite(s),"invalid pixel coordinate"),Number.isFinite(i))return ml(e,[r,s,i,1]);const o=ml(e,[r,s,0,1]),l=ml(e,[r,s,1,1]),u=o[2],d=l[2],h=u===d?0:((n||0)-u)/(d-u);return qO([],o,l,h)}function qZ(t){const{width:e,height:n,bounds:r,minExtent:s=0,maxZoom:i=24,offset:o=[0,0]}=t,[[l,u],[d,h]]=r,p=KZ(t.padding),g=Nh([l,qy(h,-85.051129,BS)]),y=Nh([d,qy(u,-85.051129,BS)]),T=[Math.max(Math.abs(y[0]-g[0]),s),Math.max(Math.abs(y[1]-g[1]),s)],x=[e-p.left-p.right-Math.abs(o[0])*2,n-p.top-p.bottom-Math.abs(o[1])*2];$s(x[0]>0&&x[1]>0);const E=x[0]/T[0],A=x[1]/T[1],S=(p.right-p.left)/2/E,C=(p.top-p.bottom)/2/A,O=[(y[0]+g[0])/2+S,(y[1]+g[1])/2+C],M=Il(O),D=Math.min(i,fw(Math.abs(Math.min(E,A))));return $s(Number.isFinite(D)),{longitude:M[0],latitude:M[1],zoom:D}}function KZ(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:($s(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const zS=Math.PI/180;function YZ(t,e=0){const{width:n,height:r,unproject:s}=t,i={targetZ:e},o=s([0,r],i),l=s([n,r],i);let u,d;const h=t.fovy?.5*t.fovy*zS:Math.atan(.5/t.altitude),p=(90-t.pitch)*zS;return h>p-.01?(u=$S(t,0,e),d=$S(t,n,e)):(u=s([0,0],i),d=s([n,0],i)),[o,l,d,u]}function $S(t,e,n){const{pixelUnprojectionMatrix:r}=t,s=ml(r,[e,0,1,1]),i=ml(r,[e,t.height,1,1]),l=(n*t.distanceScales.unitsPerMeter[2]-s[2])/(i[2]-s[2]),u=qO([],s,i,l),d=Il(u);return d.push(n),d}const GS=512;function XZ(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:s,latitude:i,zoom:o,bearing:l=0}=t;(s<-180||s>180)&&(s=US(s+180,360)-180),(l<-180||l>180)&&(l=US(l+180,360)-180);const u=fw(n/GS);if(o<=u)o=u,i=0;else{const d=n/2/Math.pow(2,o),h=Il([0,d])[1];if(i<h)i=h;else{const p=Il([0,GS-d])[1];i>p&&(i=p)}}return{width:e,height:n,longitude:s,latitude:i,zoom:o,pitch:r,bearing:l}}const ZZ=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,QZ=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,JZ=ld(sQ),eQ=ld(iQ),tQ=[0,0,0,1],nQ=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function rQ(t,e){const[n,r,s]=t,i=hw([n,r,s],e);return Number.isFinite(s)?i:[i[0],i[1],0]}function sQ({viewport:t,center:e}){return new hs(t.viewProjectionMatrix).invert().transform(e)}function iQ({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,s=t.isGeospatial?void 0:1,i=[[0,0,s],[t.width,0,s],[0,t.height,s],[t.width,t.height,s],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>rQ(o,r));for(const o of e){const l=o.clone().translate(new fs(t.center).negate()),u=i.map(h=>l.transform(h)),d=new hs().ortho({left:Math.min(...u.map(h=>h[0])),right:Math.max(...u.map(h=>h[0])),bottom:Math.min(...u.map(h=>h[1])),top:Math.max(...u.map(h=>h[1])),near:Math.min(...u.map(h=>-h[2])),far:Math.max(...u.map(h=>-h[2]))});n.push(d.multiplyRight(o))}return n}function oQ(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||tQ,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},s=JZ({viewport:t.viewport,center:e.project_uCenter}),i=[],o=eQ({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let l=0;l<t.shadowMatrices.length;l++){const u=o[l],d=u.clone().translate(new fs(t.viewport.center).negate());e.project_uCoordinateSystem===ft.LNGLAT&&e.project_uProjectionMode===rs.WEB_MERCATOR?(o[l]=d,i[l]=s):(o[l]=u.clone().multiplyRight(nQ),i[l]=d.transform(s))}for(let l=0;l<o.length;l++)r["shadow_uViewProjectionMatrices[".concat(l,"]")]=o[l],r["shadow_uProjectCenters[".concat(l,"]")]=i[l],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(l)]=t.shadowMaps[l]:r["shadow_uShadowMap".concat(l)]=t.dummyShadowMap;return r}const Tv={name:"shadow",dependencies:[dw],vs:ZZ,fs:QZ,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?oQ(t,e):{}},aQ={color:[255,255,255],intensity:1},WS=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],lQ=[0,0,0,200/255];class cM{constructor(e={}){R(this,"id","lighting-effect"),R(this,"props",void 0),R(this,"shadowColor",lQ),R(this,"shadow",void 0),R(this,"ambientLight",void 0),R(this,"directionalLights",void 0),R(this,"pointLights",void 0),R(this,"shadowPasses",[]),R(this,"shadowMaps",[]),R(this,"dummyShadowMap",null),R(this,"programManager",void 0),R(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.props=e}preRender(e,{layers:n,layerFilter:r,viewports:s,onViewportActive:i,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=ad.getDefaultProgramManager(e),Tv&&this.programManager.addDefaultModule(Tv)),this.dummyShadowMap||(this.dummyShadowMap=new ur(e,{width:1,height:1}));for(let l=0;l<this.shadowPasses.length;l++)this.shadowPasses[l].render({layers:n,layerFilter:r,viewports:s,onViewportActive:i,views:o,moduleParameters:{shadowLightId:l,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(Tv),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new hs().lookAt({eye:new fs(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new EZ(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new mZ(aQ),this.directionalLights.push(new FS(WS[0]),new FS(WS[1])))}}class cQ{constructor(e={}){R(this,"_pool",[]),R(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:s,padding:i=0,copy:o=!1,initialize:l=!1,maxCount:u}){const d=s||e&&e.constructor||Float32Array,h=n*r+i;if(ArrayBuffer.isView(e)){if(h<=e.length)return e;if(h*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new d(e.buffer,0,h)}let p=1/0;u&&(p=u*r+i);const g=this._allocate(d,h,l,p);return e&&o?g.set(e):l||g.fill(0,0,4),this._release(e),g}release(e){this._release(e)}_allocate(e,n,r,s){let i=Math.max(Math.ceil(n*this.opts.overAlloc),1);i>s&&(i=s);const o=this._pool,l=e.BYTES_PER_ELEMENT*i,u=o.findIndex(d=>d.byteLength>=l);if(u>=0){const d=new e(o.splice(u,1)[0],0,i);return r&&d.fill(0),d}return new e(i)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:s}=r,i=n.findIndex(o=>o.byteLength>=s);i<0?n.push(r):(i>0||n.length<this.opts.poolSize)&&n.splice(i,0,r),n.length>this.opts.poolSize&&n.shift()}}const Vu=new cQ;function nu(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function uQ(t){return[t[12],t[13],t[14]]}function dQ(t){return{left:Za(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Za(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Za(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Za(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Za(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Za(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const HS=new fs;function Za(t,e,n,r){HS.set(t,e,n);const s=HS.len();return{distance:r/s,normal:new fs(-t/s,-e/s,-n/s)}}function fQ(t){return t-Math.fround(t)}let Wc;function Sv(t,e){const{size:n=1,startIndex:r=0}=e,s=e.endIndex!==void 0?e.endIndex:t.length,i=(s-r)/n;Wc=Vu.allocate(Wc,i,{type:Float32Array,size:n*2});let o=r,l=0;for(;o<s;){for(let u=0;u<n;u++){const d=t[o++];Wc[l+u]=d,Wc[l+u+n]=fQ(d)}l+=n*2}return Wc.subarray(0,i*n*2)}function hQ(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}const pQ=Math.PI/180,mQ=nu(),qS=[0,0,0],gQ={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function vQ({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:s,padding:i,near:o,far:l}){const u=t/e,d=n?new hs().orthographic({fovy:r,aspect:u,focalDistance:s,near:o,far:l}):new hs().perspective({fovy:r,aspect:u,near:o,far:l});if(i){const{left:h=0,right:p=0,top:g=0,bottom:y=0}=i,T=Ui((h+t-p)/2,0,t)-t/2,x=Ui((g+e-y)/2,0,e)-e/2;d[8]-=T*2/t,d[9]+=x*2/e}return d}class Kl{constructor(e={}){R(this,"id",void 0),R(this,"x",void 0),R(this,"y",void 0),R(this,"width",void 0),R(this,"height",void 0),R(this,"padding",void 0),R(this,"isGeospatial",void 0),R(this,"zoom",void 0),R(this,"focalDistance",void 0),R(this,"position",void 0),R(this,"modelMatrix",void 0),R(this,"distanceScales",void 0),R(this,"scale",void 0),R(this,"center",void 0),R(this,"cameraPosition",void 0),R(this,"projectionMatrix",void 0),R(this,"viewMatrix",void 0),R(this,"viewMatrixUncentered",void 0),R(this,"viewMatrixInverse",void 0),R(this,"viewProjectionMatrix",void 0),R(this,"pixelProjectionMatrix",void 0),R(this,"pixelUnprojectionMatrix",void 0),R(this,"resolution",void 0),R(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||gQ,this.focalDistance=e.focalDistance||1,this.position=e.position||qS,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?rs.WEB_MERCATOR:rs.WEB_MERCATOR_AUTO_OFFSET:rs.IDENTITY}equals(e){return e instanceof Kl?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Fu(e.projectionMatrix,this.projectionMatrix)&&Fu(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),s=lM(r,this.pixelProjectionMatrix),[i,o]=s,l=n?o:this.height-o;return e.length===2?[i,l]:[i,l,s[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[s,i,o]=e,l=n?i:this.height-i,u=r&&r*this.distanceScales.unitsPerMeter[2],d=hw([s,l,o],this.pixelUnprojectionMatrix,u),[h,p,g]=this.unprojectPosition(d);return Number.isFinite(o)?[h,p,g]:Number.isFinite(r)?[h,p,r]:[h,p]}projectPosition(e){const[n,r]=this.projectFlat(e),s=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,s]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),s=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,s]}projectFlat(e){if(this.isGeospatial){const n=Nh(e);return n[1]=Ui(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?Il(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),s=this.unproject([this.width,0],n),i=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(r[0],s[0],i[0],o[0]),Math.min(r[1],s[1],i[1],o[1]),Math.max(r[0],s[0],i[0],o[0]),Math.max(r[1],s[1],i[1],o[1])]}getDistanceScales(e){return e?Yy({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:s=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+s}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,dQ(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=GZ({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||Yy({latitude:r,longitude:n}));const s=Math.pow(2,this.zoom);this.scale=s;const{position:i,modelMatrix:o}=e;let l=qS;if(i&&(l=o?new hs(o).transformAsVector(i,[]):i),this.isGeospatial){const u=this.projectPosition([n,r,0]);this.center=new fs(l).scale(this.distanceScales.unitsPerMeter).add(u)}else this.center=this.projectPosition(l)}_initMatrices(e){const{viewMatrix:n=mQ,projectionMatrix:r=null,orthographic:s=!1,fovyRadians:i,fovy:o=75,near:l=.1,far:u=1e3,padding:d=null,focalDistance:h=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new hs().multiplyRight(n).translate(new fs(this.center).negate()),this.projectionMatrix=r||vQ({width:this.width,height:this.height,orthographic:s,fovyRadians:i||o*pQ,focalDistance:h,padding:d,near:l,far:u});const p=nu();Fo(p,p,this.projectionMatrix),Fo(p,p,this.viewMatrix),this.viewProjectionMatrix=p,this.viewMatrixInverse=Wy([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=uQ(this.viewMatrixInverse);const g=nu(),y=nu();lw(g,g,[this.width/2,-this.height/2,1]),Oh(g,g,[1,-1,0]),Fo(y,g,this.viewProjectionMatrix),this.pixelProjectionMatrix=y,this.pixelUnprojectionMatrix=Wy(nu(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||ht.warn("Pixel project matrix not invertible")()}}R(Kl,"displayName","Viewport");class Ol extends Kl{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:s=0,pitch:i=0,bearing:o=0,nearZMultiplier:l=.1,farZMultiplier:u=1.01,nearZ:d,farZ:h,orthographic:p=!1,projectionMatrix:g,repeat:y=!1,worldOffset:T=0,position:x,padding:E,legacyMeterSizes:A=!1}=e;let{width:S,height:C,altitude:O=1.5}=e;const M=Math.pow(2,s);S=S||1,C=C||1;let D,z=null;if(g)O=g[5]/2,D=jh(O);else{e.fovy?(D=e.fovy,O=aM(D)):D=jh(O);let $;if(E){const{top:G=0,bottom:te=0}=E;$=[0,Ui((G+C-te)/2,0,C)-C/2]}z=HZ({width:S,height:C,scale:M,center:x&&[0,0,x[2]*Ev(n)],offset:$,pitch:i,fovy:D,nearZMultiplier:l,farZMultiplier:u}),Number.isFinite(d)&&(z.near=d),Number.isFinite(h)&&(z.far=h)}let B=WZ({height:C,pitch:i,bearing:o,scale:M,altitude:O});T&&(B=new hs().translate([512*T,0,0]).multiplyLeft(B)),super({...e,width:S,height:C,viewMatrix:B,longitude:r,latitude:n,zoom:s,...z,fovy:D,focalDistance:O}),R(this,"longitude",void 0),R(this,"latitude",void 0),R(this,"pitch",void 0),R(this,"bearing",void 0),R(this,"altitude",void 0),R(this,"fovy",void 0),R(this,"orthographic",void 0),R(this,"_subViewports",void 0),R(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=r,this.zoom=s,this.pitch=i,this.bearing=o,this.altitude=O,this.fovy=D,this.orthographic=p,this._subViewports=y?[]:null,this._pseudoMeters=A,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let s=n;s<=r;s++){const i=s?new Ol({...this,worldOffset:s}):this;this._subViewports.push(i)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),s=(e[2]||0)*Ev(e[1]);return[n,r,s]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),s=(e[2]||0)/Ev(r);return[n,r,s]}addMetersToLngLat(e,n){return oM(e,n)}panByPosition(e,n){const r=hw(n,this.pixelUnprojectionMatrix),s=this.projectFlat(e),i=MS([],s,QY([],r)),o=MS([],this.center,i),[l,u]=this.unprojectFlat(o);return{longitude:l,latitude:u}}getBounds(e={}){const n=YZ(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:s}=this,{longitude:i,latitude:o,zoom:l}=qZ({width:r,height:s,bounds:e,...n});return new Ol({width:r,height:s,longitude:i,latitude:o,zoom:l})}}R(Ol,"displayName","WebMercatorViewport");const KS=[0,0,0];function Av(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof Ol){const[s,i,o=0]=t,l=e.getDistanceScales([s,i]);r[2]=o*l.unitsPerMeter[2]}return r}function yQ(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:s,fromCoordinateSystem:i,fromCoordinateOrigin:o}=t;return s===ft.DEFAULT&&(s=e.isGeospatial?ft.LNGLAT:ft.CARTESIAN),i===void 0&&(i=s),o===void 0&&(o=r),{viewport:e,coordinateSystem:s,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:i,fromCoordinateOrigin:o}}function uM(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:s,offsetMode:i}){let[o,l,u=0]=t;switch(n&&([o,l,u]=od([],[o,l,u,1],n)),r){case ft.LNGLAT:return Av([o,l,u],e,i);case ft.LNGLAT_OFFSETS:return Av([o+s[0],l+s[1],u+(s[2]||0)],e,i);case ft.METER_OFFSETS:return Av(oM(s,[o,l,u]),e,i);case ft.CARTESIAN:default:return e.isGeospatial?[o+s[0],l+s[1],u+s[2]]:e.projectPosition([o,l,u])}}function _Q(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:s,modelMatrix:i,fromCoordinateSystem:o,fromCoordinateOrigin:l}=yQ(e),{autoOffset:u=!0}=e,{geospatialOrigin:d=KS,shaderCoordinateOrigin:h=KS,offsetMode:p=!1}=u?sM(n,r,s):{},g=uM(t,{viewport:n,modelMatrix:i,coordinateSystem:o,coordinateOrigin:l,offsetMode:p});if(p){const y=n.projectPosition(d||h);hX(g,g,y)}return g}const YS={blendFunc:[1,0,32771,0],blendEquation:32774};class dM extends uw{constructor(...e){super(...e),R(this,"pickZ",void 0),R(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:s,onViewportActive:i,pickingFBO:o,deviceRect:{x:l,y:u,width:d,height:h},cullRect:p,effects:g,pass:y="picking",pickZ:T,moduleParameters:x}){const E=this.gl;this.pickZ=T;const A=this._resetColorEncoder(T),S=Vr(E,{scissorTest:!0,scissor:[l,u,d,h],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...YS,blend:!T},()=>super.render({target:o,layers:e,layerFilter:n,views:r,viewports:s,onViewportActive:i,cullRect:p,effects:g==null?void 0:g.filter(O=>O.useInPicking),pass:y,isPicking:!0,moduleParameters:x}));return this._colorEncoderState=null,{decodePickingColor:A&&xQ.bind(null,A),stats:S}}shouldDrawLayer(e){const{pickable:n,operation:r}=e.props;return n&&r.includes("draw")||r.includes("terrain")||r.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,r){const s={...e.props.parameters},{pickable:i,operation:o}=e.props;return this._colorEncoderState?i&&o.includes("draw")&&(Object.assign(s,YS),s.blend=!0,s.blendColor=wQ(this._colorEncoderState,e,r)):s.blend=!1,o.includes("terrain")&&(s.blend=!1),s}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function wQ(t,e,n){const{byLayer:r,byAlpha:s}=t;let i,o=r.get(e);return o?(o.viewports.push(n),i=o.a):(i=r.size+1,i<=255?(o={a:i,layer:e,viewports:[n]},r.set(e,o),s[i]=o):(ht.warn("Too many pickable layers, only picking the first 255")(),i=0)),[0,0,0,i/255]}function xQ(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const nl={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},Dh=Symbol.for("component"),Vo=Symbol.for("propTypes"),Cv=Symbol.for("deprecatedProps"),gl=Symbol.for("asyncPropDefaults"),qo=Symbol.for("asyncPropOriginal"),Bi=Symbol.for("asyncPropResolved");function fM(t,e=()=>!0){return Array.isArray(t)?hM(t,e,[]):e(t)?[t]:[]}function hM(t,e,n){let r=-1;for(;++r<t.length;){const s=t[r];Array.isArray(s)?hM(s,e,n):e(s)&&n.push(s)}return n}function bQ({target:t,source:e,start:n=0,count:r=1}){const s=e.length,i=r*s;let o=0;for(let l=n;o<s;o++)t[l++]=e[o];for(;o<i;)o<i-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+i-o),o=i);return t}class EQ{constructor(e,n,r){R(this,"id",void 0),R(this,"context",void 0),R(this,"isLoaded",void 0),R(this,"persistent",void 0),R(this,"_loadCount",0),R(this,"_subscribers",new Set),R(this,"_data",void 0),R(this,"_loader",void 0),R(this,"_error",void 0),R(this,"_content",void 0),this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let s=e;typeof e=="string"&&(s=Ph(e)),s instanceof Promise?(this.isLoaded=!1,this._loader=s.then(i=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=i)}).catch(i=>{this._loadCount===r&&(this.isLoaded=!0,this._error=i||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const i of this._subscribers)i.onChange(this.getData())}}class TQ{constructor({gl:e,protocol:n}){R(this,"protocol",void 0),R(this,"_context",void 0),R(this,"_resources",void 0),R(this,"_consumers",void 0),R(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:s=!0}){let i=this._resources[e];i?i.setData(n,r):(i=new EQ(e,n,this._context),this._resources[e]=i),i.persistent=s}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const s=n[r],i=this._resources[s.resourceId];i&&i.unsubscribe(s)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:s="default"}){const{_resources:i,protocol:o}=this;e.startsWith(o)&&(e=e.replace(o,""),i[e]||this.add({resourceId:e,data:null,persistent:!1}));const l=i[e];if(this._track(r,s,l,n),l)return l.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,s){const i=this._consumers,o=i[e]=i[e]||{},l=o[n]||{},u=l.resourceId&&this._resources[l.resourceId];u&&(u.unsubscribe(l),this.prune()),r&&(o[n]=l,l.onChange=s,l.resourceId=r.id,r.subscribe(l))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const SQ=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,AQ={name:"project32",dependencies:[dw],vs:SQ},CQ={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:#decl":`
uniform bool picking_uAttribute;
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...UX},PQ=[dw],RQ=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function kQ(t){const e=ad.getDefaultProgramManager(t);for(const n of PQ)e.addDefaultModule(n);for(const n of RQ)e.addShaderHook(n);return e}const IQ="layerManager.setLayers",OQ="layerManager.activateViewport";class MQ{constructor(e,{deck:n,stats:r,viewport:s,timeline:i}={}){R(this,"layers",void 0),R(this,"context",void 0),R(this,"resourceManager",void 0),R(this,"_lastRenderedLayers",[]),R(this,"_needsRedraw",!1),R(this,"_needsUpdate",!1),R(this,"_nextLayers",null),R(this,"_debug",!1),R(this,"activateViewport",o=>{Rn(OQ,this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new TQ({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&kQ(e),stats:r||new q_({id:"deck.gl"}),viewport:s||new Kl({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:i||new JO,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const s=r.getNeedsRedraw(e);n=n||s}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){Rn(IQ,this,n,e),this._lastRenderedLayers=e;const r=fM(e,Boolean);for(const s of r)s.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,r){r.raiseError(n,"".concat(e," of ").concat(r))}_updateLayers(e,n){const r={};for(const o of e)r[o.id]?ht.warn("Multiple old layers with same id ".concat(o.id))():r[o.id]=o;const s=[];this._updateSublayersRecursively(n,r,s),this._finalizeOldLayers(r);let i=!1;for(const o of s)if(o.hasUniformTransition()){i="Uniform transition in ".concat(o);break}this._needsUpdate=i,this.layers=s}_updateSublayersRecursively(e,n,r){for(const s of e){s.context=this.context;const i=n[s.id];i===null&&ht.warn("Multiple new layers with same id ".concat(s.id))(),n[s.id]=null;let o=null;try{this._debug&&i!==s&&s.validateProps(),i?(this._transferLayerState(i,s),this._updateLayer(s)):this._initializeLayer(s),r.push(s),o=s.isComposite?s.getSubLayers():null}catch(l){this._handleError("matching",l,s)}o&&this._updateSublayersRecursively(o,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=nl.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=nl.MATCHED,n!==e&&(e.lifecycle=nl.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=nl.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=nl.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function ss(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!ss(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(const i of r)if(!e.hasOwnProperty(i)||!ss(t[i],e[i],n-1))return!1;return!0}return!1}class LQ{constructor(e){R(this,"width",void 0),R(this,"height",void 0),R(this,"views",void 0),R(this,"viewState",void 0),R(this,"controllers",void 0),R(this,"timeline",void 0),R(this,"_viewports",void 0),R(this,"_viewportMap",void 0),R(this,"_isUpdating",void 0),R(this,"_needsRedraw",void 0),R(this,"_needsUpdate",void 0),R(this,"_eventManager",void 0),R(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),s={x:e[0],y:e[1]};for(let i=r.length-1;i>=0;--i){const o=r[i];if(o.containsPixel(s)){const l=e.slice();return l[0]-=o.x,l[1]-=o.y,o.unproject(l,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=fM(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!ss(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):ht.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:i=>{var o;return(o=this.getView(e.id))===null||o===void 0?void 0:o.makeViewport({viewState:i,width:this.width,height:this.height})}})}_updateController(e,n,r,s){const i=e.controller;if(i&&r){const o={...n,...i,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return(!s||s.constructor!==i.type)&&(s=this._createController(e,o)),s&&s.setProps(o),s}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let s=e.length;s--;){const i=e[s],o=this.getViewState(i),l=i.makeViewport({viewState:o,width:this.width,height:this.height});let u=n[i.id];const d=!!i.controller;d&&!u&&(r=!0),(r||!d)&&u&&(u.finalize(),u=null),this.controllers[i.id]=this._updateController(i,o,l,u),l&&this._viewports.unshift(l)}for(const s in n){const i=n[s];i&&!this.controllers[s]&&i.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,s)=>!e[s].equals(n[s]))}}const NQ=/([0-9]+\.?[0-9]*)(%|px)/;function Pi(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=NQ.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function Ri(t,e){return t.relative?Math.round(t.position*e):t.position}function hn(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class Ml{constructor(e){R(this,"id",void 0),R(this,"viewportInstance",void 0),R(this,"_x",void 0),R(this,"_y",void 0),R(this,"_width",void 0),R(this,"_height",void 0),R(this,"_padding",void 0),R(this,"props",void 0);const{id:n,x:r=0,y:s=0,width:i="100%",height:o="100%",padding:l=null,viewportInstance:u}=e||{};hn(!u||u instanceof Kl),this.viewportInstance=u,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Pi(r),this._y=Pi(s),this._width=Pi(i),this._height=Pi(o),this._padding=l&&{left:Pi(l.left||0),right:Pi(l.right||0),top:Pi(l.top||0),bottom:Pi(l.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&ss(this.props,e.props,2)}makeViewport({width:e,height:n,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const s=this.getDimensions({width:e,height:n});return!s.height||!s.width?null:new this.ViewportType({...r,...this.props,...s})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:Ri(this._x,e),y:Ri(this._y,n),width:Ri(this._width,e),height:Ri(this._height,n)};return this._padding&&(r.padding={left:Ri(this._padding.left,e),top:Ri(this._padding.top,n),right:Ri(this._padding.right,e),bottom:Ri(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class cd{constructor(e){R(this,"_inProgress",void 0),R(this,"_handle",void 0),R(this,"_timeline",void 0),R(this,"time",void 0),R(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(n=(r=this.settings).onStart)===null||n===void 0||n.call(r,this)}end(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}cancel(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:s}=this;this._handle=r.addChannel({delay:r.getTime(),duration:s.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const XS=()=>{},Xy={BREAK:1,SNAP_TO_END:2,IGNORE:3},jQ=t=>t,DQ=Xy.BREAK;class FQ{constructor(e){R(this,"getControllerState",void 0),R(this,"props",void 0),R(this,"propsInTransition",void 0),R(this,"transition",void 0),R(this,"onViewStateChange",void 0),R(this,"onStateChange",void 0),R(this,"_onTransitionUpdate",n=>{const{time:r,settings:{interpolator:s,startProps:i,endProps:o,duration:l,easing:u}}=n,d=u(r/l),h=s.interpolateProps(i,o,d);this.propsInTransition=this.getControllerState({...this.props,...h}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new cd(e.timeline),this.onViewStateChange=e.onViewStateChange||XS,this.onStateChange=e.onStateChange||XS}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let s=r;if(this.transition.inProgress){const{interruption:i,endProps:o}=this.transition.settings;s={...r,...i===Xy.SNAP_TO_END?o:this.propsInTransition||r}}this._triggerTransition(s,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&!!r}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===Xy.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),s=this.getControllerState(n).shortestPathFrom(r),i=n.transitionInterpolator,o=i.getDuration?i.getDuration(e,n):n.transitionDuration;if(o===0)return;const l=i.initializeProps(e,s);this.propsInTransition={};const u={duration:o,easing:n.transitionEasing||jQ,interpolator:i,interruption:n.transitionInterruption||DQ,startProps:l.start,endProps:l.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(u),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}class VQ{constructor(e){R(this,"_propsToCompare",void 0),R(this,"_propsToExtract",void 0),R(this,"_requiredProps",void 0);const{compare:n,extract:r,required:s}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=s}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!Fu(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},s={};for(const i of this._propsToExtract)(i in e||i in n)&&(r[i]=e[i],s[i]=n[i]);return this._checkRequiredProps(r),this._checkRequiredProps(s),{start:r,end:s}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const r=e[n];hn(Number.isFinite(r)||Array.isArray(r),"".concat(n," is required for transition"))})}}const UQ=["longitude","latitude","zoom","bearing","pitch"],BQ=["longitude","latitude","zoom"];class pM extends VQ{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:UQ,required:BQ},super(r.transitionProps),R(this,"opts",void 0),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:s,around:i}=this.opts;if(s&&i){const o=s(e),l=s(n),u=o.unproject(i);r.start.around=i,Object.assign(r.end,{around:l.project(u),aroundPosition:u,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const s={};for(const i of this._propsToExtract)s[i]=Ih(e[i]||0,n[i]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const i=this.opts.makeViewport({...n,...s});Object.assign(s,i.panByPosition(n.aroundPosition,Ih(e.around,n.around,r)))}return s}}const ki={transitionDuration:0},zQ=300,Hf=t=>1-(1-t)*(1-t),Qa={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},So={};let $Q=class{constructor(e){R(this,"props",void 0),R(this,"state",{}),R(this,"transitionManager",void 0),R(this,"eventManager",void 0),R(this,"onViewStateChange",void 0),R(this,"onStateChange",void 0),R(this,"makeViewport",void 0),R(this,"_controllerState",void 0),R(this,"_events",{}),R(this,"_interactionState",{isDragging:!1}),R(this,"_customEvents",[]),R(this,"_eventStartBlocked",null),R(this,"_panMove",!1),R(this,"invertPan",!1),R(this,"dragMode","rotate"),R(this,"inertia",0),R(this,"scrollZoom",!0),R(this,"dragPan",!0),R(this,"dragRotate",!0),R(this,"doubleClickZoom",!0),R(this,"touchZoom",!0),R(this,"touchRotate",!1),R(this,"keyboard",!0),this.transitionManager=new FQ({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;(e=this.eventManager)===null||e===void 0||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:s}=e;return[s.x-n,s.y-r]}isPointInBounds(e,n){const{width:r,height:s}=this.props;if(n&&n.handled)return!1;const i=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=s;return i&&n&&n.stopPropagation(),i}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?zQ:0;const{scrollZoom:r=!0,dragPan:s=!0,dragRotate:i=!0,doubleClickZoom:o=!0,touchZoom:l=!0,touchRotate:u=!1,keyboard:d=!0}=e,h=!!this.onViewStateChange;this.toggleEvents(Qa.WHEEL,h&&r),this.toggleEvents(Qa.PAN,h),this.toggleEvents(Qa.PINCH,h&&(l||u)),this.toggleEvents(Qa.TRIPLE_PAN,h&&u),this.toggleEvents(Qa.DOUBLE_TAP,h&&o),this.toggleEvents(Qa.KEYBOARD,h&&d),this.scrollZoom=r,this.dragPan=s,this.dragRotate=i,this.doubleClickZoom=o,this.touchZoom=l,this.touchRotate=u,this.keyboard=d}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const s={...e.getViewportProps(),...n},i=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),i){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:s,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const s=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(s,ki,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,ki,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),s=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],i=this.controllerState.pan({pos:s}).panEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Hf},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,ki,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),s=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],i=this.controllerState.rotate({pos:s}).rotateEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Hf},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();const{speed:r=.01,smooth:s=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:i}=e;let o=2/(1+Math.exp(-Math.abs(i*r)));i<0&&o!==0&&(o=1/o);const l=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(l,{...this._getTransitionProps({around:n}),transitionDuration:s?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,ki,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,ki,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),s=[r[0],r[1]+=e.velocityY*n/2],i=this.controllerState.rotate({pos:s});this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Hf},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return So._startPinchRotation=e.rotation,So._lastPinchEvent=e,this.updateViewport(r,ki,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,s=this.getCenter(e);n=n.zoom({pos:s,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:So._startPinchRotation-r})}return this.updateViewport(n,ki,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),So._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=So;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const s=this.getCenter(e);let i=this.controllerState.rotateEnd();const o=Math.log2(e.scale),l=(o-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),u=Math.pow(2,o+l*n/2);i=i.zoom({pos:s,scale:u}).zoomEnd(),this.updateViewport(i,{...this._getTransitionProps({around:s}),transitionDuration:n,transitionEasing:Hf},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const s=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(s,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return So._startPinchRotation=null,So._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),s=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(s,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:s,rotateSpeedX:i,rotateSpeedY:o}=this.keyboard===!0?{}:this.keyboard,{controllerState:l}=this;let u;const d={};switch(e.srcEvent.code){case"Minus":u=n?l.zoomOut(r).zoomOut(r):l.zoomOut(r),d.isZooming=!0;break;case"Equal":u=n?l.zoomIn(r).zoomIn(r):l.zoomIn(r),d.isZooming=!0;break;case"ArrowLeft":n?(u=l.rotateLeft(i),d.isRotating=!0):(u=l.moveLeft(s),d.isPanning=!0);break;case"ArrowRight":n?(u=l.rotateRight(i),d.isRotating=!0):(u=l.moveRight(s),d.isPanning=!0);break;case"ArrowUp":n?(u=l.rotateUp(o),d.isRotating=!0):(u=l.moveUp(s),d.isPanning=!0);break;case"ArrowDown":n?(u=l.rotateDown(o),d.isRotating=!0):(u=l.moveDown(s),d.isPanning=!0);break;default:return!1}return this.updateViewport(u,this._getTransitionProps(),d),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?ki:e?{...n,transitionInterpolator:new pM({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}};class GQ{constructor(e,n){R(this,"_viewportProps",void 0),R(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const ZS=5,WQ=1.2;class HQ extends GQ{constructor(e){const{width:n,height:r,latitude:s,longitude:i,zoom:o,bearing:l=0,pitch:u=0,altitude:d=1.5,position:h=[0,0,0],maxZoom:p=20,minZoom:g=0,maxPitch:y=60,minPitch:T=0,startPanLngLat:x,startZoomLngLat:E,startRotatePos:A,startBearing:S,startPitch:C,startZoom:O,normalize:M=!0}=e;hn(Number.isFinite(i)),hn(Number.isFinite(s)),hn(Number.isFinite(o)),super({width:n,height:r,latitude:s,longitude:i,zoom:o,bearing:l,pitch:u,altitude:d,maxZoom:p,minZoom:g,maxPitch:y,minPitch:T,normalize:M,position:h},{startPanLngLat:x,startZoomLngLat:E,startRotatePos:A,startBearing:S,startPitch:C,startZoom:O}),R(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const i=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(i)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:s,startBearing:i,startPitch:o}=this.getState();if(!s||i===void 0||o===void 0)return this;let l;return e?l=this._getNewRotation(e,s,o,i):l={bearing:i+n,pitch:o+r},this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:s,startZoomLngLat:i}=this.getState();if(i||(s=this.getViewportProps().zoom,i=this._unproject(n)||this._unproject(e)),!i)return this;const{maxZoom:o,minZoom:l}=this.getViewportProps();let u=s+Math.log2(r);u=Ui(u,l,o);const d=this.makeViewport({...this.getViewportProps(),zoom:u});return this._getUpdatedState({zoom:u,...d.panByPosition(i,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:s,longitude:i}=r;return Math.abs(s-n.bearing)>180&&(r.bearing=s<0?s+360:s-360),Math.abs(i-n.longitude)>180&&(r.longitude=i<0?i+360:i-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:s}=e;e.zoom=Ui(s,r,n);const{maxPitch:i,minPitch:o,pitch:l}=e;e.pitch=Ui(l,o,i);const{normalize:u=!0}=e;return u&&Object.assign(e,XZ(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,s){const i=e[0]-n[0],o=e[1]-n[1],l=e[1],u=n[1],{width:d,height:h}=this.getViewportProps(),p=i/d;let g=0;o>0?Math.abs(h-u)>ZS&&(g=o/(u-h)*WQ):o<0&&u>ZS&&(g=1-l/u),g=Ui(g,-1,1);const{minPitch:y,maxPitch:T}=this.getViewportProps(),x=s+180*p;let E=r;return g>0?E=r+g*(T-r):g<0&&(E=r-g*(y-r)),{pitch:E,bearing:x}}}class qQ extends $Q{constructor(...e){super(...e),R(this,"ControllerState",HQ),R(this,"transition",{transitionDuration:300,transitionInterpolator:new pM({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),R(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class mM extends Ml{get ViewportType(){return Ol}get ControllerType(){return qQ}}R(mM,"displayName","MapView");const KQ=new cM;function YQ(t,e){var n,r;const s=(n=t.order)!==null&&n!==void 0?n:1/0,i=(r=e.order)!==null&&r!==void 0?r:1/0;return s-i}class XQ{constructor(){R(this,"effects",void 0),R(this,"_resolvedEffects",[]),R(this,"_defaultEffects",[]),R(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(r=>r.id===e.id)){const r=n.findIndex(s=>YQ(s,e)>0);r<0?n.push(e):n.splice(r,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(ss(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const s of this.effects)n[s.id]=s;const r=[];for(const s of e){const i=n[s.id];i&&i!==s?i.setProps?(i.setProps(s.props),r.push(i)):(i.cleanup(),r.push(s)):r.push(s),delete n[s.id]}for(const s in n)n[s].cleanup();this.effects=r,this._resolvedEffects=r.concat(this._defaultEffects),e.some(s=>s instanceof cM)||this._resolvedEffects.push(KQ),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class ZQ extends uw{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const QQ="deckRenderer.renderLayers";class JQ{constructor(e){R(this,"gl",void 0),R(this,"layerFilter",void 0),R(this,"drawPickingColors",void 0),R(this,"drawLayersPass",void 0),R(this,"pickLayersPass",void 0),R(this,"renderCount",void 0),R(this,"_needsRedraw",void 0),R(this,"renderBuffers",void 0),R(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new ZQ(e),this.pickLayersPass=new dM(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,r={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||Qt.getDefaultFramebuffer(this.gl)};r.effects&&this._preRender(r.effects,r);const s=this.lastPostProcessEffect?this.renderBuffers[0]:r.target,i=n.render({...r,target:s});r.effects&&this._postRender(r.effects,r),this.renderCount++,Rn(QQ,this,i,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const r of e)n.preRenderStats[r.id]=r.preRender(this.gl,n),r.postRender&&(this.lastPostProcessEffect=r.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new Qt(this.gl),new Qt(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:r}=this,s={...n,inputBuffer:r[0],swapBuffer:r[1],target:null};for(const i of e)if(i.postRender){if(i.id===this.lastPostProcessEffect){s.target=n.target,i.postRender(this.gl,s);break}const o=i.postRender(this.gl,s);s.inputBuffer=o,s.swapBuffer=o===r[0]?r[1]:r[0]}}}const eJ={pickedColor:null,pickedObjectIndex:-1};function tJ({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:s,deviceRect:i}){const{x:o,y:l,width:u,height:d}=i;let h=s*s,p=-1,g=0;for(let y=0;y<d;y++){const T=y+l-r,x=T*T;if(x>h)g+=4*u;else for(let E=0;E<u;E++){if(t[g+3]-1>=0){const S=E+o-n,C=S*S+x;C<=h&&(h=C,p=g)}g+=4}}if(p>=0){const y=t.slice(p,p+4),T=e(y);if(T){const x=Math.floor(p/4/u),E=p/4-x*u;return{...T,pickedColor:y,pickedX:o+E,pickedY:l+x}}ht.error("Picked non-existent layer. Is picking buffer corrupt?")()}return eJ}function nJ({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const i=t.slice(r,r+4),o=i.join(",");if(!n.has(o)){const l=e(i);l?n.set(o,{...l,color:i}):ht.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function gM({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:s,z:i}){let o=e[0];e.length>1&&(o=sJ((t==null?void 0:t.pickedViewports)||e,{x:r,y:s}));let l;if(o){const u=[r-o.x,s-o.y];i!==void 0&&(u[2]=i),l=o.unproject(u)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:r,y:s,pixel:[r,s],coordinate:l,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function rJ(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:s}=t,{pickedColor:i,pickedLayer:o,pickedObjectIndex:l}=e,u=o?[o]:[];if(r==="hover"){const p=n.index,g=n.layerId,y=o?o.props.id:null;if(y!==g||l!==p){if(y!==g){const T=s.find(x=>x.props.id===g);T&&u.unshift(T)}n.layerId=y,n.index=l,n.info=null}}const d=gM(t),h=new Map;return h.set(null,d),u.forEach(p=>{let g={...d};p===o&&(g.color=i,g.index=l,g.picked=!0),g=vM({layer:p,info:g,mode:r});const y=g.layer;p===o&&r==="hover"&&(n.info=g),h.set(y.id,g),r==="hover"&&y.updateAutoHighlight(g)}),h}function vM({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function sJ(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class iJ{constructor(e){R(this,"gl",void 0),R(this,"pickingFBO",void 0),R(this,"depthFBO",void 0),R(this,"pickLayersPass",void 0),R(this,"layerFilter",void 0),R(this,"lastPickedInfo",void 0),R(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new dM(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:s},i=this.lastPickedInfo.info){const o=i&&i.layer&&i.layer.id,l=i&&i.viewport&&i.viewport.id,u=o?r.find(g=>g.id===o):null,d=l&&s.find(g=>g.id===l)||s[0],h=d&&d.unproject([e-d.x,n-d.y]);return{...i,...{x:e,y:n,viewport:d,coordinate:h,layer:u}}}_resizeBuffer(){var e,n;const{gl:r}=this;if(!this.pickingFBO&&(this.pickingFBO=new Qt(r),Qt.isSupported(r,{colorBufferFloat:!0}))){const s=new Qt(r);s.attach({36064:new ur(r,{format:rt(r)?34836:6408,type:5126})}),this.depthFBO=s}(e=this.pickingFBO)===null||e===void 0||e.resize({width:r.canvas.width,height:r.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:r.canvas.width,height:r.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>this.pickLayersPass.shouldDrawLayer(r)&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:s,y:i,radius:o=0,depth:l=1,mode:u="query",unproject3D:d,onViewportActive:h,effects:p}){const g=this._getPickable(e),y=Sl(this.gl);if(!g)return{result:[],emptyInfo:gM({viewports:r,x:s,y:i,pixelRatio:y})};this._resizeBuffer();const T=uv(this.gl,[s,i],!0),x=[T.x+Math.floor(T.width/2),T.y+Math.floor(T.height/2)],E=Math.round(o*y),{width:A,height:S}=this.pickingFBO,C=this._getPickingRect({deviceX:x[0],deviceY:x[1],deviceRadius:E,deviceWidth:A,deviceHeight:S}),O={x:s-o,y:i-o,width:o*2+1,height:o*2+1};let M;const D=[],z=new Set;for(let B=0;B<l;B++){let $;if(C){const te=this._drawAndSample({layers:g,views:n,viewports:r,onViewportActive:h,deviceRect:C,cullRect:O,effects:p,pass:"picking:".concat(u)});$=tJ({...te,deviceX:x[0],deviceY:x[1],deviceRadius:E,deviceRect:C})}else $={pickedColor:null,pickedObjectIndex:-1};let G;if($.pickedLayer&&d&&this.depthFBO){const{pickedColors:te}=this._drawAndSample({layers:[$.pickedLayer],views:n,viewports:r,onViewportActive:h,deviceRect:{x:$.pickedX,y:$.pickedY,width:1,height:1},cullRect:O,effects:p,pass:"picking:".concat(u,":z")},!0);te[3]&&(G=te[0])}$.pickedLayer&&B+1<l&&(z.add($.pickedLayer),$.pickedLayer.disablePickingIndex($.pickedObjectIndex)),M=rJ({pickInfo:$,lastPickedInfo:this.lastPickedInfo,mode:u,layers:g,viewports:r,x:s,y:i,z:G,pixelRatio:y});for(const te of M.values())te.layer&&D.push(te);if(!$.pickedColor)break}for(const B of z)B.restorePickingColors();return{result:D,emptyInfo:M.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:s,y:i,width:o=1,height:l=1,mode:u="query",maxObjects:d=null,onViewportActive:h,effects:p}){const g=this._getPickable(e);if(!g)return[];this._resizeBuffer();const y=Sl(this.gl),T=uv(this.gl,[s,i],!0),x=T.x,E=T.y+T.height,A=uv(this.gl,[s+o,i+l],!0),S=A.x+A.width,C=A.y,O={x,y:C,width:S-x,height:E-C},M=this._drawAndSample({layers:g,views:n,viewports:r,onViewportActive:h,deviceRect:O,cullRect:{x:s,y:i,width:o,height:l},effects:p,pass:"picking:".concat(u)}),D=nJ(M),z=new Map,B=Number.isFinite(d);for(let G=0;G<D.length;G++){var $;if(B&&d&&z.size>=d)break;const te=D[G];let Q={color:te.pickedColor,layer:null,index:te.pickedObjectIndex,picked:!0,x:s,y:i,pixelRatio:y};Q=vM({layer:te.pickedLayer,info:Q,mode:u});const se=($=Q.object)!==null&&$!==void 0?$:"".concat(Q.layer.id,"[").concat(Q.index,"]");z.has(se)||z.set(se,Q)}return Array.from(z.values())}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:s,deviceRect:i,cullRect:o,effects:l,pass:u},d=!1){const h=d?this.depthFBO:this.pickingFBO,p={layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:s,pickingFBO:h,deviceRect:i,cullRect:o,effects:l,pass:u,pickZ:d,preRenderStats:{}};for(const S of l)S.useInPicking&&(p.preRenderStats[S.id]=S.preRender(this.gl,p));const{decodePickingColor:g}=this.pickLayersPass.render(p),{x:y,y:T,width:x,height:E}=i,A=new(d?Float32Array:Uint8Array)(x*E*4);return kp(h,{sourceX:y,sourceY:T,sourceWidth:x,sourceHeight:E,target:A}),{pickedColors:A,decodePickingColor:g}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:s,deviceHeight:i}){const o=Math.max(0,e-r),l=Math.max(0,n-r),u=Math.min(s,e+r+1)-o,d=Math.min(i,n+r+1)-l;return u<=0||d<=0?null:{x:o,y:l,width:u,height:d}}}const oJ={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class aJ{constructor(e){R(this,"el",null),R(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,oJ),n.appendChild(this.el))}setTooltip(e,n,r){const s=this.el;if(s){if(typeof e=="string")s.innerText=e;else if(e)e.text&&(s.innerText=e.text),e.html&&(s.innerHTML=e.html),e.className&&(s.className=e.className);else{this.isVisible=!1,s.style.display="none";return}this.isVisible=!0,s.style.display="block",s.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),e&&typeof e=="object"&&"style"in e&&Object.assign(s.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}var Pv={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var QS;function lJ(){return QS||(QS=1,function(t){(function(e,n,r,s){var i=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),l="function",u=Math.round,d=Math.abs,h=Date.now;function p(k,I,N){return setTimeout(C(k,N),I)}function g(k,I,N){return Array.isArray(k)?(y(k,N[I],N),!0):!1}function y(k,I,N){var K;if(k)if(k.forEach)k.forEach(I,N);else if(k.length!==s)for(K=0;K<k.length;)I.call(N,k[K],K,k),K++;else for(K in k)k.hasOwnProperty(K)&&I.call(N,k[K],K,k)}function T(k,I,N){var K="DEPRECATED METHOD: "+I+`
`+N+` AT 
`;return function(){var oe=new Error("get-stack-trace"),xe=oe&&oe.stack?oe.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Ze=e.console&&(e.console.warn||e.console.log);return Ze&&Ze.call(e.console,K,xe),k.apply(this,arguments)}}var x;typeof Object.assign!="function"?x=function(I){if(I===s||I===null)throw new TypeError("Cannot convert undefined or null to object");for(var N=Object(I),K=1;K<arguments.length;K++){var oe=arguments[K];if(oe!==s&&oe!==null)for(var xe in oe)oe.hasOwnProperty(xe)&&(N[xe]=oe[xe])}return N}:x=Object.assign;var E=T(function(I,N,K){for(var oe=Object.keys(N),xe=0;xe<oe.length;)(!K||K&&I[oe[xe]]===s)&&(I[oe[xe]]=N[oe[xe]]),xe++;return I},"extend","Use `assign`."),A=T(function(I,N){return E(I,N,!0)},"merge","Use `assign`.");function S(k,I,N){var K=I.prototype,oe;oe=k.prototype=Object.create(K),oe.constructor=k,oe._super=K,N&&x(oe,N)}function C(k,I){return function(){return k.apply(I,arguments)}}function O(k,I){return typeof k==l?k.apply(I&&I[0]||s,I):k}function M(k,I){return k===s?I:k}function D(k,I,N){y(G(I),function(K){k.addEventListener(K,N,!1)})}function z(k,I,N){y(G(I),function(K){k.removeEventListener(K,N,!1)})}function B(k,I){for(;k;){if(k==I)return!0;k=k.parentNode}return!1}function $(k,I){return k.indexOf(I)>-1}function G(k){return k.trim().split(/\s+/g)}function te(k,I,N){if(k.indexOf&&!N)return k.indexOf(I);for(var K=0;K<k.length;){if(N&&k[K][N]==I||!N&&k[K]===I)return K;K++}return-1}function Q(k){return Array.prototype.slice.call(k,0)}function se(k,I,N){for(var K=[],oe=[],xe=0;xe<k.length;){var Ze=k[xe][I];te(oe,Ze)<0&&K.push(k[xe]),oe[xe]=Ze,xe++}return K=K.sort(function(jt,Bt){return jt[I]>Bt[I]}),K}function re(k,I){for(var N,K,oe=I[0].toUpperCase()+I.slice(1),xe=0;xe<i.length;){if(N=i[xe],K=N?N+oe:I,K in k)return K;xe++}return s}var ge=1;function ue(){return ge++}function pe(k){var I=k.ownerDocument||k;return I.defaultView||I.parentWindow||e}var X=/mobile|tablet|ip(ad|hone|od)|android/i,Z="ontouchstart"in e,ne=re(e,"PointerEvent")!==s,V=Z&&X.test(navigator.userAgent),J="touch",De="pen",Ne="mouse",ze="kinect",Ue=25,le=1,Te=2,ve=4,ke=8,Ye=1,Xe=2,mt=4,Ct=8,an=16,Lt=Xe|mt,Gt=Ct|an,Ys=Lt|Gt,On=["x","y"],j=["clientX","clientY"];function W(k,I){var N=this;this.manager=k,this.callback=I,this.element=k.element,this.target=k.options.inputTarget,this.domHandler=function(K){O(k.options.enable,[k])&&N.handler(K)},this.init()}W.prototype={handler:function(){},init:function(){this.evEl&&D(this.element,this.evEl,this.domHandler),this.evTarget&&D(this.target,this.evTarget,this.domHandler),this.evWin&&D(pe(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&z(this.element,this.evEl,this.domHandler),this.evTarget&&z(this.target,this.evTarget,this.domHandler),this.evWin&&z(pe(this.element),this.evWin,this.domHandler)}};function ee(k){var I,N=k.options.inputClass;return N?I=N:ne?I=ia:V?I=Js:Z?I=ti:I=Sr,new I(k,_e)}function _e(k,I,N){var K=N.pointers.length,oe=N.changedPointers.length,xe=I&le&&K-oe===0,Ze=I&(ve|ke)&&K-oe===0;N.isFirst=!!xe,N.isFinal=!!Ze,xe&&(k.session={}),N.eventType=I,me(k,N),k.emit("hammer.input",N),k.recognize(N),k.session.prevInput=N}function me(k,I){var N=k.session,K=I.pointers,oe=K.length;N.firstInput||(N.firstInput=tt(I)),oe>1&&!N.firstMultiple?N.firstMultiple=tt(I):oe===1&&(N.firstMultiple=!1);var xe=N.firstInput,Ze=N.firstMultiple,Nt=Ze?Ze.center:xe.center,jt=I.center=st(K);I.timeStamp=h(),I.deltaTime=I.timeStamp-xe.timeStamp,I.angle=no(Nt,jt),I.distance=Wt(Nt,jt),fe(N,I),I.offsetDirection=$n(I.deltaX,I.deltaY);var Bt=en(I.deltaTime,I.deltaX,I.deltaY);I.overallVelocityX=Bt.x,I.overallVelocityY=Bt.y,I.overallVelocity=d(Bt.x)>d(Bt.y)?Bt.x:Bt.y,I.scale=Ze?Zs(Ze.pointers,K):1,I.rotation=Ze?Xs(Ze.pointers,K):0,I.maxPointers=N.prevInput?I.pointers.length>N.prevInput.maxPointers?I.pointers.length:N.prevInput.maxPointers:I.pointers.length,Me(N,I);var Ht=k.element;B(I.srcEvent.target,Ht)&&(Ht=I.srcEvent.target),I.target=Ht}function fe(k,I){var N=I.center,K=k.offsetDelta||{},oe=k.prevDelta||{},xe=k.prevInput||{};(I.eventType===le||xe.eventType===ve)&&(oe=k.prevDelta={x:xe.deltaX||0,y:xe.deltaY||0},K=k.offsetDelta={x:N.x,y:N.y}),I.deltaX=oe.x+(N.x-K.x),I.deltaY=oe.y+(N.y-K.y)}function Me(k,I){var N=k.lastInterval||I,K=I.timeStamp-N.timeStamp,oe,xe,Ze,Nt;if(I.eventType!=ke&&(K>Ue||N.velocity===s)){var jt=I.deltaX-N.deltaX,Bt=I.deltaY-N.deltaY,Ht=en(K,jt,Bt);xe=Ht.x,Ze=Ht.y,oe=d(Ht.x)>d(Ht.y)?Ht.x:Ht.y,Nt=$n(jt,Bt),k.lastInterval=I}else oe=N.velocity,xe=N.velocityX,Ze=N.velocityY,Nt=N.direction;I.velocity=oe,I.velocityX=xe,I.velocityY=Ze,I.direction=Nt}function tt(k){for(var I=[],N=0;N<k.pointers.length;)I[N]={clientX:u(k.pointers[N].clientX),clientY:u(k.pointers[N].clientY)},N++;return{timeStamp:h(),pointers:I,center:st(I),deltaX:k.deltaX,deltaY:k.deltaY}}function st(k){var I=k.length;if(I===1)return{x:u(k[0].clientX),y:u(k[0].clientY)};for(var N=0,K=0,oe=0;oe<I;)N+=k[oe].clientX,K+=k[oe].clientY,oe++;return{x:u(N/I),y:u(K/I)}}function en(k,I,N){return{x:I/k||0,y:N/k||0}}function $n(k,I){return k===I?Ye:d(k)>=d(I)?k<0?Xe:mt:I<0?Ct:an}function Wt(k,I,N){N||(N=On);var K=I[N[0]]-k[N[0]],oe=I[N[1]]-k[N[1]];return Math.sqrt(K*K+oe*oe)}function no(k,I,N){N||(N=On);var K=I[N[0]]-k[N[0]],oe=I[N[1]]-k[N[1]];return Math.atan2(oe,K)*180/Math.PI}function Xs(k,I){return no(I[1],I[0],j)+no(k[1],k[0],j)}function Zs(k,I){return Wt(I[0],I[1],j)/Wt(k[0],k[1],j)}var Yl={mousedown:le,mousemove:Te,mouseup:ve},Qs="mousedown",ro="mousemove mouseup";function Sr(){this.evEl=Qs,this.evWin=ro,this.pressed=!1,W.apply(this,arguments)}S(Sr,W,{handler:function(I){var N=Yl[I.type];N&le&&I.button===0&&(this.pressed=!0),N&Te&&I.which!==1&&(N=ve),this.pressed&&(N&ve&&(this.pressed=!1),this.callback(this.manager,N,{pointers:[I],changedPointers:[I],pointerType:Ne,srcEvent:I}))}});var Xl={pointerdown:le,pointermove:Te,pointerup:ve,pointercancel:ke,pointerout:ke},Zl={2:J,3:De,4:Ne,5:ze},gs="pointerdown",vs="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(gs="MSPointerDown",vs="MSPointerMove MSPointerUp MSPointerCancel");function ia(){this.evEl=gs,this.evWin=vs,W.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}S(ia,W,{handler:function(I){var N=this.store,K=!1,oe=I.type.toLowerCase().replace("ms",""),xe=Xl[oe],Ze=Zl[I.pointerType]||I.pointerType,Nt=Ze==J,jt=te(N,I.pointerId,"pointerId");xe&le&&(I.button===0||Nt)?jt<0&&(N.push(I),jt=N.length-1):xe&(ve|ke)&&(K=!0),!(jt<0)&&(N[jt]=I,this.callback(this.manager,xe,{pointers:N,changedPointers:[I],pointerType:Ze,srcEvent:I}),K&&N.splice(jt,1))}});var hd={touchstart:le,touchmove:Te,touchend:ve,touchcancel:ke},pd="touchstart",md="touchstart touchmove touchend touchcancel";function Ql(){this.evTarget=pd,this.evWin=md,this.started=!1,W.apply(this,arguments)}S(Ql,W,{handler:function(I){var N=hd[I.type];if(N===le&&(this.started=!0),!!this.started){var K=Jl.call(this,I,N);N&(ve|ke)&&K[0].length-K[1].length===0&&(this.started=!1),this.callback(this.manager,N,{pointers:K[0],changedPointers:K[1],pointerType:J,srcEvent:I})}}});function Jl(k,I){var N=Q(k.touches),K=Q(k.changedTouches);return I&(ve|ke)&&(N=se(N.concat(K),"identifier")),[N,K]}var gd={touchstart:le,touchmove:Te,touchend:ve,touchcancel:ke},so="touchstart touchmove touchend touchcancel";function Js(){this.evTarget=so,this.targetIds={},W.apply(this,arguments)}S(Js,W,{handler:function(I){var N=gd[I.type],K=io.call(this,I,N);K&&this.callback(this.manager,N,{pointers:K[0],changedPointers:K[1],pointerType:J,srcEvent:I})}});function io(k,I){var N=Q(k.touches),K=this.targetIds;if(I&(le|Te)&&N.length===1)return K[N[0].identifier]=!0,[N,N];var oe,xe,Ze=Q(k.changedTouches),Nt=[],jt=this.target;if(xe=N.filter(function(Bt){return B(Bt.target,jt)}),I===le)for(oe=0;oe<xe.length;)K[xe[oe].identifier]=!0,oe++;for(oe=0;oe<Ze.length;)K[Ze[oe].identifier]&&Nt.push(Ze[oe]),I&(ve|ke)&&delete K[Ze[oe].identifier],oe++;if(Nt.length)return[se(xe.concat(Nt),"identifier"),Nt]}var Vp=2500,ei=25;function ti(){W.apply(this,arguments);var k=C(this.handler,this);this.touch=new Js(this.manager,k),this.mouse=new Sr(this.manager,k),this.primaryTouch=null,this.lastTouches=[]}S(ti,W,{handler:function(I,N,K){var oe=K.pointerType==J,xe=K.pointerType==Ne;if(!(xe&&K.sourceCapabilities&&K.sourceCapabilities.firesTouchEvents)){if(oe)oa.call(this,N,K);else if(xe&&Up.call(this,K))return;this.callback(I,N,K)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function oa(k,I){k&le?(this.primaryTouch=I.changedPointers[0].identifier,aa.call(this,I)):k&(ve|ke)&&aa.call(this,I)}function aa(k){var I=k.changedPointers[0];if(I.identifier===this.primaryTouch){var N={x:I.clientX,y:I.clientY};this.lastTouches.push(N);var K=this.lastTouches,oe=function(){var xe=K.indexOf(N);xe>-1&&K.splice(xe,1)};setTimeout(oe,Vp)}}function Up(k){for(var I=k.srcEvent.clientX,N=k.srcEvent.clientY,K=0;K<this.lastTouches.length;K++){var oe=this.lastTouches[K],xe=Math.abs(I-oe.x),Ze=Math.abs(N-oe.y);if(xe<=ei&&Ze<=ei)return!0}return!1}var vd=re(o.style,"touchAction"),yd=vd!==s,Gr="compute",ec="auto",la="manipulation",ys="none",ni="pan-x",ri="pan-y",oo=zp();function ca(k,I){this.manager=k,this.set(I)}ca.prototype={set:function(k){k==Gr&&(k=this.compute()),yd&&this.manager.element.style&&oo[k]&&(this.manager.element.style[vd]=k),this.actions=k.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var k=[];return y(this.manager.recognizers,function(I){O(I.options.enable,[I])&&(k=k.concat(I.getTouchAction()))}),Bp(k.join(" "))},preventDefaults:function(k){var I=k.srcEvent,N=k.offsetDirection;if(this.manager.session.prevented){I.preventDefault();return}var K=this.actions,oe=$(K,ys)&&!oo[ys],xe=$(K,ri)&&!oo[ri],Ze=$(K,ni)&&!oo[ni];if(oe){var Nt=k.pointers.length===1,jt=k.distance<2,Bt=k.deltaTime<250;if(Nt&&jt&&Bt)return}if(!(Ze&&xe)&&(oe||xe&&N&Lt||Ze&&N&Gt))return this.preventSrc(I)},preventSrc:function(k){this.manager.session.prevented=!0,k.preventDefault()}};function Bp(k){if($(k,ys))return ys;var I=$(k,ni),N=$(k,ri);return I&&N?ys:I||N?I?ni:ri:$(k,la)?la:ec}function zp(){if(!yd)return!1;var k={},I=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(N){k[N]=I?e.CSS.supports("touch-action",N):!0}),k}var gt=1,Mn=2,Wr=4,Ar=8,Ln=Ar,ao=16,Gn=32;function Nn(k){this.options=x({},this.defaults,k||{}),this.id=ue(),this.manager=null,this.options.enable=M(this.options.enable,!0),this.state=gt,this.simultaneous={},this.requireFail=[]}Nn.prototype={defaults:{},set:function(k){return x(this.options,k),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(k){if(g(k,"recognizeWith",this))return this;var I=this.simultaneous;return k=mn(k,this),I[k.id]||(I[k.id]=k,k.recognizeWith(this)),this},dropRecognizeWith:function(k){return g(k,"dropRecognizeWith",this)?this:(k=mn(k,this),delete this.simultaneous[k.id],this)},requireFailure:function(k){if(g(k,"requireFailure",this))return this;var I=this.requireFail;return k=mn(k,this),te(I,k)===-1&&(I.push(k),k.requireFailure(this)),this},dropRequireFailure:function(k){if(g(k,"dropRequireFailure",this))return this;k=mn(k,this);var I=te(this.requireFail,k);return I>-1&&this.requireFail.splice(I,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(k){return!!this.simultaneous[k.id]},emit:function(k){var I=this,N=this.state;function K(oe){I.manager.emit(oe,k)}N<Ar&&K(I.options.event+Wn(N)),K(I.options.event),k.additionalEvent&&K(k.additionalEvent),N>=Ar&&K(I.options.event+Wn(N))},tryEmit:function(k){if(this.canEmit())return this.emit(k);this.state=Gn},canEmit:function(){for(var k=0;k<this.requireFail.length;){if(!(this.requireFail[k].state&(Gn|gt)))return!1;k++}return!0},recognize:function(k){var I=x({},k);if(!O(this.options.enable,[this,I])){this.reset(),this.state=Gn;return}this.state&(Ln|ao|Gn)&&(this.state=gt),this.state=this.process(I),this.state&(Mn|Wr|Ar|ao)&&this.tryEmit(I)},process:function(k){},getTouchAction:function(){},reset:function(){}};function Wn(k){return k&ao?"cancel":k&Ar?"end":k&Wr?"move":k&Mn?"start":""}function _d(k){return k==an?"down":k==Ct?"up":k==Xe?"left":k==mt?"right":""}function mn(k,I){var N=I.manager;return N?N.get(k):k}function Hn(){Nn.apply(this,arguments)}S(Hn,Nn,{defaults:{pointers:1},attrTest:function(k){var I=this.options.pointers;return I===0||k.pointers.length===I},process:function(k){var I=this.state,N=k.eventType,K=I&(Mn|Wr),oe=this.attrTest(k);return K&&(N&ke||!oe)?I|ao:K||oe?N&ve?I|Ar:I&Mn?I|Wr:Mn:Gn}});function ua(){Hn.apply(this,arguments),this.pX=null,this.pY=null}S(ua,Hn,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ys},getTouchAction:function(){var k=this.options.direction,I=[];return k&Lt&&I.push(ri),k&Gt&&I.push(ni),I},directionTest:function(k){var I=this.options,N=!0,K=k.distance,oe=k.direction,xe=k.deltaX,Ze=k.deltaY;return oe&I.direction||(I.direction&Lt?(oe=xe===0?Ye:xe<0?Xe:mt,N=xe!=this.pX,K=Math.abs(k.deltaX)):(oe=Ze===0?Ye:Ze<0?Ct:an,N=Ze!=this.pY,K=Math.abs(k.deltaY))),k.direction=oe,N&&K>I.threshold&&oe&I.direction},attrTest:function(k){return Hn.prototype.attrTest.call(this,k)&&(this.state&Mn||!(this.state&Mn)&&this.directionTest(k))},emit:function(k){this.pX=k.deltaX,this.pY=k.deltaY;var I=_d(k.direction);I&&(k.additionalEvent=this.options.event+I),this._super.emit.call(this,k)}});function tc(){Hn.apply(this,arguments)}S(tc,Hn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ys]},attrTest:function(k){return this._super.attrTest.call(this,k)&&(Math.abs(k.scale-1)>this.options.threshold||this.state&Mn)},emit:function(k){if(k.scale!==1){var I=k.scale<1?"in":"out";k.additionalEvent=this.options.event+I}this._super.emit.call(this,k)}});function si(){Nn.apply(this,arguments),this._timer=null,this._input=null}S(si,Nn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ec]},process:function(k){var I=this.options,N=k.pointers.length===I.pointers,K=k.distance<I.threshold,oe=k.deltaTime>I.time;if(this._input=k,!K||!N||k.eventType&(ve|ke)&&!oe)this.reset();else if(k.eventType&le)this.reset(),this._timer=p(function(){this.state=Ln,this.tryEmit()},I.time,this);else if(k.eventType&ve)return Ln;return Gn},reset:function(){clearTimeout(this._timer)},emit:function(k){this.state===Ln&&(k&&k.eventType&ve?this.manager.emit(this.options.event+"up",k):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}});function ii(){Hn.apply(this,arguments)}S(ii,Hn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ys]},attrTest:function(k){return this._super.attrTest.call(this,k)&&(Math.abs(k.rotation)>this.options.threshold||this.state&Mn)}});function _s(){Hn.apply(this,arguments)}S(_s,Hn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Lt|Gt,pointers:1},getTouchAction:function(){return ua.prototype.getTouchAction.call(this)},attrTest:function(k){var I=this.options.direction,N;return I&(Lt|Gt)?N=k.overallVelocity:I&Lt?N=k.overallVelocityX:I&Gt&&(N=k.overallVelocityY),this._super.attrTest.call(this,k)&&I&k.offsetDirection&&k.distance>this.options.threshold&&k.maxPointers==this.options.pointers&&d(N)>this.options.velocity&&k.eventType&ve},emit:function(k){var I=_d(k.offsetDirection);I&&this.manager.emit(this.options.event+I,k),this.manager.emit(this.options.event,k)}});function ws(){Nn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}S(ws,Nn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[la]},process:function(k){var I=this.options,N=k.pointers.length===I.pointers,K=k.distance<I.threshold,oe=k.deltaTime<I.time;if(this.reset(),k.eventType&le&&this.count===0)return this.failTimeout();if(K&&oe&&N){if(k.eventType!=ve)return this.failTimeout();var xe=this.pTime?k.timeStamp-this.pTime<I.interval:!0,Ze=!this.pCenter||Wt(this.pCenter,k.center)<I.posThreshold;this.pTime=k.timeStamp,this.pCenter=k.center,!Ze||!xe?this.count=1:this.count+=1,this._input=k;var Nt=this.count%I.taps;if(Nt===0)return this.hasRequireFailures()?(this._timer=p(function(){this.state=Ln,this.tryEmit()},I.interval,this),Mn):Ln}return Gn},failTimeout:function(){return this._timer=p(function(){this.state=Gn},this.options.interval,this),Gn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ln&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Hr(k,I){return I=I||{},I.recognizers=M(I.recognizers,Hr.defaults.preset),new fa(k,I)}Hr.VERSION="2.0.7",Hr.defaults={domEvents:!1,touchAction:Gr,enable:!0,inputTarget:null,inputClass:null,preset:[[ii,{enable:!1}],[tc,{enable:!1},["rotate"]],[_s,{direction:Lt}],[ua,{direction:Lt},["swipe"]],[ws],[ws,{event:"doubletap",taps:2},["tap"]],[si]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var $p=1,da=2;function fa(k,I){this.options=x({},Hr.defaults,I||{}),this.options.inputTarget=this.options.inputTarget||k,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=k,this.input=ee(this),this.touchAction=new ca(this,this.options.touchAction),ha(this,!0),y(this.options.recognizers,function(N){var K=this.add(new N[0](N[1]));N[2]&&K.recognizeWith(N[2]),N[3]&&K.requireFailure(N[3])},this)}fa.prototype={set:function(k){return x(this.options,k),k.touchAction&&this.touchAction.update(),k.inputTarget&&(this.input.destroy(),this.input.target=k.inputTarget,this.input.init()),this},stop:function(k){this.session.stopped=k?da:$p},recognize:function(k){var I=this.session;if(!I.stopped){this.touchAction.preventDefaults(k);var N,K=this.recognizers,oe=I.curRecognizer;(!oe||oe&&oe.state&Ln)&&(oe=I.curRecognizer=null);for(var xe=0;xe<K.length;)N=K[xe],I.stopped!==da&&(!oe||N==oe||N.canRecognizeWith(oe))?N.recognize(k):N.reset(),!oe&&N.state&(Mn|Wr|Ar)&&(oe=I.curRecognizer=N),xe++}},get:function(k){if(k instanceof Nn)return k;for(var I=this.recognizers,N=0;N<I.length;N++)if(I[N].options.event==k)return I[N];return null},add:function(k){if(g(k,"add",this))return this;var I=this.get(k.options.event);return I&&this.remove(I),this.recognizers.push(k),k.manager=this,this.touchAction.update(),k},remove:function(k){if(g(k,"remove",this))return this;if(k=this.get(k),k){var I=this.recognizers,N=te(I,k);N!==-1&&(I.splice(N,1),this.touchAction.update())}return this},on:function(k,I){if(k!==s&&I!==s){var N=this.handlers;return y(G(k),function(K){N[K]=N[K]||[],N[K].push(I)}),this}},off:function(k,I){if(k!==s){var N=this.handlers;return y(G(k),function(K){I?N[K]&&N[K].splice(te(N[K],I),1):delete N[K]}),this}},emit:function(k,I){this.options.domEvents&&lo(k,I);var N=this.handlers[k]&&this.handlers[k].slice();if(!(!N||!N.length)){I.type=k,I.preventDefault=function(){I.srcEvent.preventDefault()};for(var K=0;K<N.length;)N[K](I),K++}},destroy:function(){this.element&&ha(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ha(k,I){var N=k.element;if(N.style){var K;y(k.options.cssProps,function(oe,xe){K=re(N.style,xe),I?(k.oldCssProps[K]=N.style[K],N.style[K]=oe):N.style[K]=k.oldCssProps[K]||""}),I||(k.oldCssProps={})}}function lo(k,I){var N=n.createEvent("Event");N.initEvent(k,!0,!0),N.gesture=I,I.target.dispatchEvent(N)}x(Hr,{INPUT_START:le,INPUT_MOVE:Te,INPUT_END:ve,INPUT_CANCEL:ke,STATE_POSSIBLE:gt,STATE_BEGAN:Mn,STATE_CHANGED:Wr,STATE_ENDED:Ar,STATE_RECOGNIZED:Ln,STATE_CANCELLED:ao,STATE_FAILED:Gn,DIRECTION_NONE:Ye,DIRECTION_LEFT:Xe,DIRECTION_RIGHT:mt,DIRECTION_UP:Ct,DIRECTION_DOWN:an,DIRECTION_HORIZONTAL:Lt,DIRECTION_VERTICAL:Gt,DIRECTION_ALL:Ys,Manager:fa,Input:W,TouchAction:ca,TouchInput:Js,MouseInput:Sr,PointerEventInput:ia,TouchMouseInput:ti,SingleTouchInput:Ql,Recognizer:Nn,AttrRecognizer:Hn,Tap:ws,Pan:ua,Swipe:_s,Pinch:tc,Rotate:ii,Press:si,on:D,off:z,each:y,merge:A,extend:E,assign:x,inherit:S,bindFn:C,prefixed:re});var Gp=typeof e<"u"?e:typeof self<"u"?self:{};Gp.Hammer=Hr,t.exports?t.exports=Hr:e[r]=Hr})(window,document,"Hammer")}(Pv)),Pv.exports}var ud=lJ();const cJ=Xh(ud),Qr=oC({__proto__:null,default:cJ},[ud]),yM=1,_M=2,Zy=4,uJ={mousedown:yM,mousemove:_M,mouseup:Zy};function dJ(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function fJ(t){const e=t.prototype.handler;t.prototype.handler=function(r){const s=this.store;r.button>0&&r.type==="pointerdown"&&(dJ(s,i=>i.pointerId===r.pointerId)||s.push(r)),e.call(this,r)}}function hJ(t){t.prototype.handler=function(n){let r=uJ[n.type];r&yM&&n.button>=0&&(this.pressed=!0),r&_M&&n.buttons===0&&(r=Zy),this.pressed&&(r&Zy&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}fJ(ud.PointerEventInput);hJ(ud.MouseInput);const pJ=ud.Manager;class Ip{constructor(e,n,r){this.element=e,this.callback=n,this.options={enable:!0,...r}}}const mJ=Qr?[[Qr.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Qr.Rotate,{enable:!1}],[Qr.Pinch,{enable:!1}],[Qr.Swipe,{enable:!1}],[Qr.Pan,{threshold:0,enable:!1}],[Qr.Press,{enable:!1}],[Qr.Tap,{event:"doubletap",taps:2,enable:!1}],[Qr.Tap,{event:"anytap",enable:!1}],[Qr.Tap,{enable:!1}]]:null,JS={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},gJ={doubletap:["tap"]},vJ={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},pw={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},yJ={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},eA={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},_J=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",ul=typeof window<"u"?window:global;let Qy=!1;try{const t={get passive(){return Qy=!0,!0}};ul.addEventListener("test",null,t),ul.removeEventListener("test",null)}catch{Qy=!1}const wJ=_J.indexOf("firefox")!==-1,{WHEEL_EVENTS:xJ}=pw,tA="wheel",nA=4.000244140625,bJ=40,EJ=.25;class TJ extends Ip{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{if(!this.options.enable)return;let i=s.deltaY;ul.WheelEvent&&(wJ&&s.deltaMode===ul.WheelEvent.DOM_DELTA_PIXEL&&(i/=ul.devicePixelRatio),s.deltaMode===ul.WheelEvent.DOM_DELTA_LINE&&(i*=bJ)),i!==0&&i%nA===0&&(i=Math.floor(i/nA)),s.shiftKey&&i&&(i=i*EJ),this.callback({type:tA,center:{x:s.clientX,y:s.clientY},delta:-i,srcEvent:s,pointerType:"mouse",target:s.target})},this.events=(this.options.events||[]).concat(xJ),this.events.forEach(s=>e.addEventListener(s,this.handleEvent,Qy?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===tA&&(this.options.enable=n)}}const{MOUSE_EVENTS:SJ}=pw,rA="pointermove",sA="pointerover",iA="pointerout",oA="pointerenter",aA="pointerleave";class AJ extends Ip{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{this.handleOverEvent(i),this.handleOutEvent(i),this.handleEnterEvent(i),this.handleLeaveEvent(i),this.handleMoveEvent(i)},this.pressed=!1;const{enable:s}=this.options;this.enableMoveEvent=s,this.enableLeaveEvent=s,this.enableEnterEvent=s,this.enableOutEvent=s,this.enableOverEvent=s,this.events=(this.options.events||[]).concat(SJ),this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===rA&&(this.enableMoveEvent=n),e===sA&&(this.enableOverEvent=n),e===iA&&(this.enableOutEvent=n),e===oA&&(this.enableEnterEvent=n),e===aA&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(sA,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(iA,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(oA,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(aA,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.buttons===0&&(this.pressed=!1),this.pressed||this._emit(rA,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:CJ}=pw,lA="keydown",cA="keyup";class PJ extends Ip{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{const i=s.target||s.srcElement;i.tagName==="INPUT"&&i.type==="text"||i.tagName==="TEXTAREA"||(this.enableDownEvent&&s.type==="keydown"&&this.callback({type:lA,srcEvent:s,key:s.key,target:s.target}),this.enableUpEvent&&s.type==="keyup"&&this.callback({type:cA,srcEvent:s,key:s.key,target:s.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(CJ),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===lA&&(this.enableDownEvent=n),e===cA&&(this.enableUpEvent=n)}}const uA="contextmenu";class RJ extends Ip{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{this.options.enable&&this.callback({type:uA,center:{x:s.clientX,y:s.clientY},srcEvent:s,pointerType:"mouse",target:s.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===uA&&(this.options.enable=n)}}const dA=1,Jy=2,fA=4,kJ={pointerdown:dA,pointermove:Jy,pointerup:fA,mousedown:dA,mousemove:Jy,mouseup:fA},IJ=0,OJ=1,MJ=2,LJ=1,NJ=2,jJ=4;function DJ(t){const e=kJ[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r}=t.srcEvent;let s=!1,i=!1,o=!1;return e===Jy?(s=!!(n&LJ),i=!!(n&jJ),o=!!(n&NJ)):(s=r===IJ,i=r===OJ,o=r===MJ),{leftButton:s,middleButton:i,rightButton:o}}function FJ(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),s=r.width/e.offsetWidth||1,i=r.height/e.offsetHeight||1,o={x:(n.x-r.left-e.clientLeft)/s,y:(n.y-r.top-e.clientTop)/i};return{center:n,offsetCenter:o}}const Rv={srcElement:"root",priority:0};class VJ{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const r=this._normalizeEvent(n);let s=n.srcEvent.target;for(;s&&s!==r.rootElement;){if(this._emit(r,s),r.handled)return;s=s.parentNode}this._emit(r,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,s=!1,i=!1){const{handlers:o,handlersByElement:l}=this;let u=Rv;typeof r=="string"||r&&r.addEventListener?u={...Rv,srcElement:r}:r&&(u={...Rv,...r});let d=l.get(u.srcElement);d||(d=[],l.set(u.srcElement,d));const h={type:e,handler:n,srcElement:u.srcElement,priority:u.priority};s&&(h.once=!0),i&&(h.passive=!0),o.push(h),this._active=this._active||!h.passive;let p=d.length-1;for(;p>=0&&!(d[p].priority>=h.priority);)p--;d.splice(p+1,0,h)}remove(e,n){const{handlers:r,handlersByElement:s}=this;for(let i=r.length-1;i>=0;i--){const o=r[i];if(o.type===e&&o.handler===n){r.splice(i,1);const l=s.get(o.srcElement);l.splice(l.indexOf(o),1),l.length===0&&s.delete(o.srcElement)}}this._active=r.some(i=>!i.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let s=!1;const i=()=>{e.handled=!0},o=()=>{e.handled=!0,s=!0},l=[];for(let u=0;u<r.length;u++){const{type:d,handler:h,once:p}=r[u];if(h({...e,type:d,stopPropagation:i,stopImmediatePropagation:o}),p&&l.push(r[u]),s)break}for(let u=0;u<l.length;u++){const{type:d,handler:h}=l[u];this.remove(d,h)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...DJ(e),...FJ(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const UJ={events:null,recognizers:null,recognizerOptions:{},Manager:pJ,touchAction:"none",tabIndex:0};class BJ{constructor(e=null,n){this._onBasicInput=s=>{const{srcEvent:i}=s,o=vJ[i.type];o&&this.manager.emit(o,s)},this._onOtherEvent=s=>{this.manager.emit(s.type,s)},this.options={...UJ,...n},this.events=new Map,this.setElement(e);const{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||mJ}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(JS).forEach(s=>{const i=this.manager.get(s);i&&JS[s].forEach(o=>{i.recognizeWith(o)})});for(const s in n.recognizerOptions){const i=this.manager.get(s);if(i){const o=n.recognizerOptions[s];delete o.enable,i.set(o)}}this.wheelInput=new TJ(e,this._onOtherEvent,{enable:!1}),this.moveInput=new AJ(e,this._onOtherEvent,{enable:!1}),this.keyInput=new PJ(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new RJ(e,this._onOtherEvent,{enable:!1});for(const[s,i]of this.events)i.isEmpty()||(this._toggleRecognizer(i.recognizerName,!0),this.manager.on(s,i.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:r}=this;if(!r)return;const s=r.get(e);if(s&&s.options.enable!==n){s.set({enable:n});const i=gJ[e];i&&!this.options.recognizers&&i.forEach(o=>{const l=r.get(o);n?(l.requireFailure(e),s.dropRequireFailure(o)):l.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,s,i){if(typeof e!="string"){r=n;for(const h in e)this._addEventHandler(h,e[h],r,s,i);return}const{manager:o,events:l}=this,u=eA[e]||e;let d=l.get(u);d||(d=new VJ(this),l.set(u,d),d.recognizerName=yJ[u]||u,o&&o.on(u,d.handleEvent)),d.add(e,n,r,s,i),d.isEmpty()||this._toggleRecognizer(d.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:r}=this,s=eA[e]||e,i=r.get(s);if(i&&(i.remove(e,n),i.isEmpty())){const{recognizerName:o}=i;let l=!1;for(const u of r.values())if(u.recognizerName===o&&!u.isEmpty()){l=!0;break}l||this._toggleRecognizer(o,!1)}}}function Ao(){}const zJ=({isDragging:t})=>t?"grabbing":"grab",wM={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Ao,onResize:Ao,onViewStateChange:Ao,onInteractionStateChange:Ao,onBeforeRender:Ao,onAfterRender:Ao,onLoad:Ao,onError:t=>ht.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:zJ,getTooltip:null,debug:!1,drawPickingColors:!1};class Op{constructor(e){R(this,"props",void 0),R(this,"width",0),R(this,"height",0),R(this,"userData",{}),R(this,"canvas",null),R(this,"viewManager",null),R(this,"layerManager",null),R(this,"effectManager",null),R(this,"deckRenderer",null),R(this,"deckPicker",null),R(this,"eventManager",null),R(this,"tooltip",null),R(this,"metrics",void 0),R(this,"animationLoop",void 0),R(this,"stats",void 0),R(this,"viewState",void 0),R(this,"cursorState",void 0),R(this,"_needsRedraw",void 0),R(this,"_pickRequest",void 0),R(this,"_lastPointerDownInfo",null),R(this,"_metricsCounter",void 0),R(this,"_onPointerMove",n=>{const{_pickRequest:r}=this;if(n.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(n.leftButton||n.rightButton)return;{const s=n.offsetCenter;if(!s)return;r.x=s.x,r.y=s.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=n}),R(this,"_onEvent",n=>{const r=KT[n.type],s=n.offsetCenter;if(!r||!s||!this.layerManager)return;const i=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:s.x,y:s.y,layers:i,viewports:this.getViewports(s)},this._lastPointerDownInfo),{layer:l}=o,u=l&&(l[r.handler]||l.props[r.handler]),d=this.props[r.handler];let h=!1;u&&(h=u.call(l,o,n)),!h&&d&&d(o,n)}),R(this,"_onPointerDown",n=>{const r=n.offsetCenter,s=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=s.result[0]||s.emptyInfo}),this.props={...wM,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&ht.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),rO()==="IE"&&ht.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new q_({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&Vu.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,s,i,o,l,u;if((e=this.animationLoop)===null||e===void 0||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(n=this.layerManager)===null||n===void 0||n.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(s=this.effectManager)===null||s===void 0||s.finalize(),this.effectManager=null,(i=this.deckRenderer)===null||i===void 0||i.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(l=this.eventManager)===null||l===void 0||l.destroy(),this.eventManager=null,(u=this.tooltip)===null||u===void 0||u.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var d;(d=this.canvas.parentElement)===null||d===void 0||d.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&ht.removed("onLayerHover","onHover")(),"onLayerClick"in e&&ht.removed("onLayerClick","onClick")(),e.initialViewState&&!ss(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),s=this.layerManager.needsRedraw(e),i=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||r||s||i||o,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return hn(this.viewManager),this.viewManager.views}getViewports(e){return hn(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,n,r){hn(this.deckPicker);const{stats:s}=this;s.get("Pick Count").incrementCount(),s.get(n).timeStart();const i=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return s.get(n).timeEnd(),i}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),hn(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const i=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=i}if(r||r===0){var s;const i=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.position=((s=e.style)===null||s===void 0?void 0:s.position)||"absolute",this.canvas.style.height=i}}_updateCanvasSize(){var e,n;const{canvas:r}=this;if(!r)return;const s=(e=r.clientWidth)!==null&&e!==void 0?e:r.width,i=(n=r.clientHeight)!==null&&n!==void 0?n:r.height;if(s!==this.width||i!==this.height){var o,l;this.width=s,this.height=i,(o=this.viewManager)===null||o===void 0||o.setProps({width:s,height:i}),(l=this.layerManager)===null||l===void 0||l.activateViewport(this.getViewports()[0]),this.props.onResize({width:s,height:i})}}_createAnimationLoop(e){const{width:n,height:r,gl:s,glOptions:i,debug:o,onError:l,onBeforeRender:u,onAfterRender:d,useDevicePixels:h}=e;return new QK({width:n,height:r,useDevicePixels:h,autoResizeDrawingBuffer:!s,autoResizeViewport:!1,gl:s,onCreateContext:p=>bO({...i,...p,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:p=>this._setGLContext(p.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:u,onAfterRender:d,onError:l})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new mM({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:r,emptyInfo:s}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=r.length>0;let i=s,o=!1;for(const l of r){var n;i=l,o=((n=l.layer)===null||n===void 0?void 0:n.onHover(l,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(i,e.event),this.props.getTooltip&&this.tooltip){const l=this.props.getTooltip(i);this.tooltip.setTooltip(l,i.x,i.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,nw(e,{enable:!0,copyState:!0})),this.tooltip=new aJ(this.canvas),zs(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new JO;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new BJ(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const s in KT)this.eventManager.on(s,this._onEvent);this.viewManager=new LQ({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new MQ(e,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new XQ,this.deckRenderer=new JQ(e),this.deckPicker=new iJ(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:r}=this.layerManager.context;zs(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),ht.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=Lo.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}R(Op,"defaultProps",wM);R(Op,"VERSION",r7);class kv{constructor(e,n){R(this,"opts",void 0),R(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:r}=this.source,{size:s}=n;let i=r;if(r&&r.length!==s){i=new Float32Array(s);const o=n.elementOffset||0;for(let l=0;l<s;++l)i[l]=r[o+l]}return i}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function $J(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function oh(t){return t.stride||t.size*t.bytesPerElement}function xM(t,e){e.offset&&ht.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=oh(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,s=e.elementOffset||0,i=r*n+s*t.bytesPerElement+(t.offset||0);return{...e,offset:i,stride:n}}function GJ(t,e){const n=xM(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class WJ{constructor(e,n,r){R(this,"gl",void 0),R(this,"id",void 0),R(this,"size",void 0),R(this,"settings",void 0),R(this,"value",void 0),R(this,"doublePrecision",void 0),R(this,"_buffer",void 0),R(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const s=n.logicalType||n.type,i=s===5130;let{defaultValue:o}=n;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0);let l;i?l=5126:!s&&n.isIndexed?l=e&&Pq(e,At.ELEMENT_INDEX_UINT32)?5125:5123:l=s||5126;let u=$J(s||l||5126);this.doublePrecision=i,i&&n.fp64===!1&&(u=Float32Array),this.value=null,this.settings={...n,defaultType:u,defaultValue:o,logicalType:s,type:l,size:this.size,bytesPerElement:u.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new pt(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*oh(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Vu.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const r={},s=this.value instanceof Float64Array,i=GJ(this.getAccessor(),n||{});return r[e]=new kv(this,i.high),r["".concat(e,"64Low")]=s?new kv(this,i.low):new Float32Array(this.size),r}if(n){const r=xM(this.getAccessor(),n);return{[e]:new kv(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:s}=this,i=r*s;if(n&&i&&n.length>=i){const o=new Array(s).fill(1/0),l=new Array(s).fill(-1/0);for(let u=0;u<i;)for(let d=0;d<s;d++){const h=n[u++];h<o[d]&&(o[d]=h),h>l[d]&&(l[d]=h)}e=[o,l]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof pt?r={buffer:e}:r=e;const s={...this.settings,...r};if(n.bufferAccessor=s,n.bounds=null,r.constant){let i=r.value;if(i=this._normalizeValue(i,[],0),this.settings.normalized&&(i=this.normalizeConstant(i)),!(!n.constant||!this._areValuesEqual(i,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=i}else if(r.buffer){const i=r.buffer;n.externalBuffer=i,n.constant=!1,this.value=r.value||null;const o=r.value instanceof Float64Array;s.type=r.type||i.accessor.type,s.bytesPerElement=i.accessor.BYTES_PER_ELEMENT*(o?2:1),s.stride=oh(s)}else if(r.value){this._checkExternalBuffer(r);let i=r.value;n.externalBuffer=null,n.constant=!1,this.value=i,s.bytesPerElement=i.BYTES_PER_ELEMENT,s.stride=oh(s);const{buffer:o,byteOffset:l}=this;this.doublePrecision&&i instanceof Float64Array&&(i=Sv(i,s));const u=i.byteLength+l+s.stride*2;o.byteLength<u&&o.reallocate(u),o.setAccessor(null),o.subData({data:i,offset:l}),s.type=r.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:s}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?Sv(n,{size:this.size,startIndex:r,endIndex:s}):n.subarray(r,s),offset:r*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:r}=this,s=r.allocatedValue,i=Vu.allocate(s,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=i;const{buffer:o,byteOffset:l}=this;return o.byteLength<i.byteLength+l&&(o.reallocate(i.byteLength+l),n&&s&&o.subData({data:s instanceof Float64Array?Sv(s,this):s,offset:l})),r.allocatedValue=i,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const r=this.settings.defaultType;let s=!1;if(this.doublePrecision&&(s=n.BYTES_PER_ELEMENT<4),s)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&ht.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:s,size:i}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e){let o=i;for(;--o>=0;)n[r+o]=s[o];return n}switch(i){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:s[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:s[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:s[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:s[0];break;default:let o=i;for(;--o>=0;)n[r+o]=Number.isFinite(e[o])?e[o]:s[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let s=0;s<r;s++)if(e[s]!==n[s])return!1;return!0}}const hA=[],pA=[];function bM(t,e=0,n=1/0){let r=hA;const s={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(pA.length=t.length,r=pA):r=hA,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),s.index=e-1),{iterable:r,objectInfo:s}}function EM(t){return t&&t[Symbol.asyncIterator]}function HJ(t,e){const{size:n,stride:r,offset:s,startIndices:i,nested:o}=e,l=t.BYTES_PER_ELEMENT,u=r?r/l:n,d=s?s/l:0,h=Math.floor((t.length-d)/u);return(p,{index:g,target:y})=>{if(!i){const A=g*u+d;for(let S=0;S<n;S++)y[S]=t[A+S];return y}const T=i[g],x=i[g+1]||h;let E;if(o){E=new Array(x-T);for(let A=T;A<x;A++){const S=A*u+d;y=new Array(n);for(let C=0;C<n;C++)y[C]=t[S+C];E[A-T]=y}}else if(u===n)E=t.subarray(T*n+d,x*n+d);else{E=new t.constructor((x-T)*n);let A=0;for(let S=T;S<x;S++){const C=S*u+d;for(let O=0;O<n;O++)E[A++]=t[C+O]}}return E}}const qJ=[],ah=[[0,1/0]];function KJ(t,e){if(t===ah||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let s=0;for(let i=0;i<r;i++){const o=t[i];o[1]<e[0]?(n.push(o),s=i+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(s,0,e),n}function Iv(t){const{source:e,target:n,start:r=0,size:s,getData:i}=t,o=t.end||n.length,l=e.length,u=o-r;if(l>u){n.set(e.subarray(0,u),r);return}if(n.set(e,r),!i)return;let d=l;for(;d<u;){const h=i(d,e);for(let p=0;p<s;p++)n[r+d]=h[p]||0,d++}}function YJ({source:t,target:e,size:n,getData:r,sourceStartIndices:s,targetStartIndices:i}){if(!Array.isArray(i))return Iv({source:t,target:e,size:n,getData:r}),e;let o=0,l=0;const u=r&&((h,p)=>r(h+l,p)),d=Math.min(s.length,i.length);for(let h=1;h<d;h++){const p=s[h]*n,g=i[h]*n;Iv({source:t.subarray(o,p),target:e,start:l,end:g,size:n,getData:u}),o=p,l=g}return l<e.length&&Iv({source:[],target:e,start:l,size:n,getData:u}),e}const XJ={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function TM(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...XJ[n],...e,...t,type:n}}function SM(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function AM(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function CM(t){t.push(t.shift())}function mw(t,e){const{doublePrecision:n,settings:r,value:s,size:i}=t,o=n&&s instanceof Float64Array?2:1;return(r.noAlloc?s.length:e*i)*o}function PM({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:s,getData:i=o=>o}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,l=n.size*o,u=n.byteOffset,d=n.startIndices,h=s&&d,p=mw(n,e),g=n.isConstant;if(!h&&r>=p)return;const y=g?n.value:n.getBuffer().getData({srcByteOffset:u});if(n.settings.normalized&&!g){const A=i;i=(S,C)=>n.normalizeConstant(A(S,C))}const T=g?(A,S)=>i(y,S):(A,S)=>i(y.subarray(A,A+l),S),x=t.getData({length:r}),E=new Float32Array(p);YJ({source:x,target:E,sourceStartIndices:s,targetStartIndices:d,size:l,getData:T}),t.byteLength<E.byteLength+u&&t.reallocate(E.byteLength+u),t.subData({data:E,offset:u})}class gw extends WJ{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:ah}),R(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,s=Array.isArray(n)?e[n.find(i=>e[i])]:e[n];return TM(s,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:s=1/0}=n;this.state.updateRanges=KJ(this.state.updateRanges,[r,s])}else this.state.updateRanges=ah}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=qJ}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==ah),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:s}){if(!this.needsUpdate())return!1;const{state:{updateRanges:i},settings:{update:o,noAlloc:l}}=this;let u=!0;if(o){for(const[d,h]of i)o.call(s,this,{data:n,startRow:d,endRow:h,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[d,h]of i){const p=Number.isFinite(d)?this.getVertexOffset(d):0,g=Number.isFinite(h)?this.getVertexOffset(h):l||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:p,endOffset:g})}this._checkAttributeArray()}else u=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),u}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:s}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(s.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),s.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;hn(ArrayBuffer.isView(o.value),"invalid ".concat(s.accessor));const l=!!o.size&&o.size!==this.size;return r.binaryAccessor=HJ(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:n,nested:l}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const r in e)Object.assign(n,super.getShaderAttributes(r,e[r]));return n}_autoUpdater(e,{data:n,startRow:r,endRow:s,props:i,numInstances:o}){if(e.constant)return;const{settings:l,state:u,value:d,size:h,startIndices:p}=e,{accessor:g,transform:y}=l,T=u.binaryAccessor||(typeof g=="function"?g:i[g]);hn(typeof T=="function",'accessor "'.concat(g,'" is not a function'));let x=e.getVertexOffset(r);const{iterable:E,objectInfo:A}=bM(n,r,s);for(const S of E){A.index++;let C=T(S,A);if(y&&(C=y.call(this,C)),p){const O=(A.index<p.length-1?p[A.index+1]:o)-p[A.index];if(C&&Array.isArray(C[0])){let M=x;for(const D of C)e._normalizeValue(D,d,M),M+=h}else C&&C.length>h?d.set(C,x):(e._normalizeValue(C,A.target,0),bQ({target:d,source:A.target,start:x,count:O}));x+=O*h}else e._normalizeValue(C,d,x),x+=h}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class ZJ{constructor({gl:e,attribute:n,timeline:r}){R(this,"gl",void 0),R(this,"type","interpolation"),R(this,"attributeInTransition",void 0),R(this,"settings",void 0),R(this,"attribute",void 0),R(this,"transition",void 0),R(this,"currentStartIndices",void 0),R(this,"currentLength",void 0),R(this,"transform",void 0),R(this,"buffers",void 0),this.gl=e,this.transition=new cd(r),this.attribute=n,this.attributeInTransition=new gw(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=JJ(e,n);const s={byteLength:0,usage:35050};this.buffers=[new pt(e,s),new pt(e,s)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;const{gl:r,buffers:s,attribute:i}=this;CM(s);const o={numInstances:n,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const l of s)PM({buffer:l,...o});this.currentStartIndices=i.startIndices,this.currentLength=mw(i,n),this.attributeInTransition.setData({buffer:s[1],value:i.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aFrom:s[0],aTo:SM(r,i)},feedbackBuffers:{vCurrent:s[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:r}=this.settings,{time:s}=this.transition;let i=s/n;r&&(i=r(i)),this.transform.run({uniforms:{time:i}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}}const QJ=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function JJ(t,e){const n=AM(e.size);return new cw(t,{vs:QJ,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}class eee{constructor({gl:e,attribute:n,timeline:r}){R(this,"gl",void 0),R(this,"type","spring"),R(this,"attributeInTransition",void 0),R(this,"settings",void 0),R(this,"attribute",void 0),R(this,"transition",void 0),R(this,"currentStartIndices",void 0),R(this,"currentLength",void 0),R(this,"texture",void 0),R(this,"framebuffer",void 0),R(this,"transform",void 0),R(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new cd(r),this.attribute=n,this.attributeInTransition=new gw(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=nee(e),this.framebuffer=ree(e,this.texture),this.transform=tee(e,n,this.framebuffer);const s={byteLength:0,usage:35050};this.buffers=[new pt(e,s),new pt(e,s),new pt(e,s)]}get inProgress(){return this.transition.inProgress}start(e,n){const{gl:r,buffers:s,attribute:i}=this,o={numInstances:n,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const l of s)PM({buffer:l,...o});this.settings=e,this.currentStartIndices=i.startIndices,this.currentLength=mw(i,n),this.attributeInTransition.setData({buffer:s[1],value:i.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aTo:SM(r,i)}})}update(){const{buffers:e,transform:n,framebuffer:r,transition:s}=this;if(!s.update())return!1;const o=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),CM(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),kp(r)[0]>0||s.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function tee(t,e,n){const r=AM(e.size);return new cw(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function nee(t){return new ur(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function ree(t,e){return new Qt(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}const see={interpolation:ZJ,spring:eee};class iee{constructor(e,{id:n,timeline:r}){R(this,"id",void 0),R(this,"isSupported",void 0),R(this,"gl",void 0),R(this,"timeline",void 0),R(this,"transitions",void 0),R(this,"needsRedraw",void 0),R(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=cw.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const s in e){const i=e[s],o=i.getTransitionSetting(n);o&&this._updateAttribute(s,i,o)}for(const s in this.transitions){const i=e[s];(!i||!i.getTransitionSetting(n))&&this._removeTransition(s)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,r){const s=this.transitions[e];let i=!s||s.type!==r.type;if(i){if(!this.isSupported){ht.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}s&&this._removeTransition(e);const o=see[r.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,gl:this.gl}):(ht.error("unsupported transition type '".concat(r.type,"'"))(),i=!1)}(i||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const mA="attributeManager.invalidate",oee="attributeManager.updateStart",aee="attributeManager.updateEnd",lee="attribute.updateStart",cee="attribute.allocate",uee="attribute.updateEnd";class dee{constructor(e,{id:n="attribute-manager",stats:r,timeline:s}={}){R(this,"id",void 0),R(this,"gl",void 0),R(this,"attributes",void 0),R(this,"updateTriggers",void 0),R(this,"needsRedraw",void 0),R(this,"userData",void 0),R(this,"stats",void 0),R(this,"attributeTransitionManager",void 0),R(this,"mergeBoundsMemoized",ld(hQ)),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new iee(e,{id:"".concat(n,"-transitions"),timeline:s}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);Rn(mA,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);Rn(mA,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:s,props:i={},buffers:o={},context:l={}}){let u=!1;Rn(oee,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const d in this.attributes){const h=this.attributes[d],p=h.settings.accessor;h.startIndices=r,h.numInstances=n,i[d]&&ht.removed("props.".concat(d),"data.attributes.".concat(d))(),h.setExternalBuffer(o[d])||h.setBinaryValue(typeof p=="string"?o[p]:void 0,e.startIndices)||typeof p=="string"&&!o[p]&&h.setConstantValue(i[p])||h.needsUpdate()&&(u=!0,this._updateAttribute({attribute:h,numInstances:n,data:e,props:i,context:l})),this.needsRedraw=this.needsRedraw||h.needsRedraw()}u&&Rn(aee,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:s})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getBounds(e){const n=e.map(r=>{var s;return(s=this.attributes[r])===null||s===void 0?void 0:s.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,s={...r.getAttributes()};for(const i in n){const o=n[i];o.needsRedraw(e)&&!r.hasAttribute(i)&&(s[i]=o)}return s}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const r={};for(const s in e)n[s]||Object.assign(r,e[s].getShaderAttributes());return r}_add(e,n={}){for(const r in e){const s=e[r];this.attributes[r]=this._createAttribute(r,s,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,r){const s={...n,id:e,size:n.isIndexed&&1||n.size||1,divisor:r.instanced?1:n.divisor||0};return new gw(this.gl,s)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(s=>{e[s]||(e[s]=[]),e[s].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:s}=this,i=s[e];return i&&i.forEach(o=>{const l=r[o];l&&l.setNeedsUpdate(l.id,n)}),i}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(Rn(lee,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&Rn(cee,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,Rn(uee,n,r))}}class fee extends cd{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:s,easing:i}}=this,o=i(e/s);this._value=Ih(n,r,o)}}const gA=1e-5;function vA(t,e,n,r,s){const i=e-t,l=(n-e)*s,u=-i*r;return l+u+i+e}function hee(t,e,n,r,s){if(Array.isArray(n)){const i=[];for(let o=0;o<n.length;o++)i[o]=vA(t[o],e[o],n[o],r,s);return i}return vA(t,e,n,r,s)}function yA(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const s=t[r]-e[r];n+=s*s}return Math.sqrt(n)}return Math.abs(t-e)}class pee extends cd{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:s}=this.settings,{_prevValue:i=e,_currValue:o=e}=this;let l=hee(i,o,n,r,s);const u=yA(l,n),d=yA(l,o);u<gA&&d<gA&&(l=n,this.end()),this._prevValue=o,this._currValue=l}}const mee={interpolation:fee,spring:pee};class gee{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,s){const{transitions:i}=this;if(i.has(e)){const u=i.get(e),{value:d=u.settings.fromValue}=u;n=d,this.remove(e)}if(s=TM(s),!s)return;const o=mee[s.type];if(!o){ht.error("unsupported transition type '".concat(s.type,"'"))();return}const l=new o(this.timeline);l.start({...s,fromValue:n,toValue:r}),i.set(e,l)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function vee(t){const e=t[Vo];for(const n in e){const r=e[n],{validate:s}=r;if(s&&!s(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function yee(t,e){const n=RM({newProps:t,oldProps:e,propTypes:t[Vo],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=wee(t,e);let s=!1;return r||(s=xee(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:s,extensionsChanged:bee(t,e),transitionsChanged:_ee(t,e)}}function _ee(t,e){if(!t.transitions)return!1;const n={},r=t[Vo];let s=!1;for(const i in t.transitions){const o=r[i],l=o&&o.type;(l==="number"||l==="color"||l==="array")&&e0(t[i],e[i],o)&&(n[i]=!0,s=!0)}return s?n:!1}function RM({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:s="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(s," changed shallowly");for(const i of Object.keys(t))if(!(i in n)){if(!(i in e))return"".concat(s,".").concat(i," added");const o=e0(t[i],e[i],r[i]);if(o)return"".concat(s,".").concat(i," ").concat(o)}for(const i of Object.keys(e))if(!(i in n)){if(!(i in t))return"".concat(s,".").concat(i," dropped");if(!Object.hasOwnProperty.call(t,i)){const o=e0(t[i],e[i],r[i]);if(o)return"".concat(s,".").concat(i," ").concat(o)}}return!1}function e0(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function wee(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:s}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&s&&(n=s(t.data,e.data)||n),n}function xee(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&_A(t,e,"all"))return{all:!0};const n={};let r=!1;for(const s in t.updateTriggers)s!=="all"&&_A(t,e,s)&&(n[s]=!0,r=!0);return r?n:!1}function bee(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let s=0;s<r.length;s++)if(!r[s].equals(n[s]))return!0;return!1}function _A(t,e,n){let r=t.updateTriggers[n];r=r??{};let s=e.updateTriggers[n];return s=s??{},RM({oldProps:s,newProps:r,triggerName:n})}const Eee="count(): argument not an object",Tee="count(): argument not a container";function See(t){if(!Cee(t))throw new Error(Eee);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(Aee(t))return Object.keys(t).length;throw new Error(Tee)}function Aee(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function Cee(t){return t!==null&&typeof t=="object"}function Pee(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(s=>s.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const s in e.inject)r[s]=(r[s]||"")+e.inject[s];n.inject=r}return n}const Ree={10241:9987,10240:9729,10242:33071,10243:33071},t0={};function kee(t,e,n,r){if(n instanceof ur)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let s=null;n.compressed&&(s={10241:n.data.length>1?9985:9729});const i=new ur(e,{...n,parameters:{...Ree,...s,...r}});return t0[i.id]=t,i}function Iee(t,e){!e||!(e instanceof ur)||t0[e.id]===t&&(e.delete(),delete t0[e.id])}const Oee={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||n0(t)&&(t.length===3||t.length===4)},equal(t,e,n){return ss(t,e,1)}},accessor:{validate(t,e){const n=Fh(t);return n==="function"||n===Fh(e.value)},equal(t,e,n){return typeof e=="function"?!0:ss(t,e,1)}},array:{validate(t,e){return e.optional&&!t||n0(t)},equal(t,e,n){const{compare:r}=n,s=Number.isInteger(r)?r:r?1:0;return r?ss(t,e,s):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,s=Number.isInteger(r)?r:r?1:0;return r?ss(t,e,s):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>{const r=n.context;return!r||!r.gl?null:kee(n.id,r.gl,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{Iee(n.id,t)}}};function Mee(t){const e={},n={},r={};for(const[s,i]of Object.entries(t)){const o=i==null?void 0:i.deprecatedFor;if(o)r[s]=Array.isArray(o)?o:[o];else{const l=Lee(s,i);e[s]=l,n[s]=l.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function Lee(t,e){switch(Fh(e)){case"object":return Hc(t,e);case"array":return Hc(t,{type:"array",value:e,compare:!1});case"boolean":return Hc(t,{type:"boolean",value:e});case"number":return Hc(t,{type:"number",value:e});case"function":return Hc(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function Hc(t,e){return"type"in e?{name:t,...Oee[e.type],...e}:"value"in e?{name:t,type:Fh(e.value),...e}:{name:t,type:"object",value:e}}function n0(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function Fh(t){return n0(t)?"array":t===null?"null":typeof t}function Nee(t,e){let n;for(let i=e.length-1;i>=0;i--){const o=e[i];"extensions"in o&&(n=o.extensions)}const r=r0(t.constructor,n),s=Object.create(r);s[Dh]=t,s[qo]={},s[Bi]={};for(let i=0;i<e.length;++i){const o=e[i];for(const l in o)s[l]=o[l]}return Object.freeze(s),s}const jee="_mergedDefaultProps";function r0(t,e){let n=jee;if(e)for(const s of e){const i=s.constructor;i&&(n+=":".concat(i.extensionName||i.name))}const r=kM(t,n);return r||(t[n]=Dee(t,e||[]))}function Dee(t,e){if(!t.prototype)return null;const r=Object.getPrototypeOf(t),s=r0(r),i=kM(t,"defaultProps")||{},o=Mee(i),l=Object.assign(Object.create(null),s,o.defaultProps),u=Object.assign(Object.create(null),s==null?void 0:s[Vo],o.propTypes),d=Object.assign(Object.create(null),s==null?void 0:s[Cv],o.deprecatedProps);for(const h of e){const p=r0(h.constructor);p&&(Object.assign(l,p),Object.assign(u,p[Vo]),Object.assign(d,p[Cv]))}return Fee(l,t),Uee(l,u),Vee(l,d),l[Vo]=u,l[Cv]=d,e.length===0&&!vw(t,"_propTypes")&&(t._propTypes=u),l}function Fee(t,e){const n=zee(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function Vee(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const s="".concat(this.id,": ").concat(n);for(const i of e[n])vw(this,i)||(this[i]=r);ht.deprecated(s,e[n].join("/"))()}})}function Uee(t,e){const n={},r={};for(const s in e){const i=e[s],{name:o,value:l}=i;i.async&&(n[o]=l,r[o]=Bee(o))}t[gl]=n,t[qo]={},Object.defineProperties(t,r)}function Bee(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||EM(e)?this[qo][t]=e:this[Bi][t]=e},get(){if(this[Bi]){if(t in this[Bi])return this[Bi][t]||this[gl][t];if(t in this[qo]){const e=this[Dh]&&this[Dh].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[gl][t]}}return this[gl][t]}}}function vw(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function kM(t,e){return vw(t,e)&&t[e]}function zee(t){const e=t.componentName;return e||ht.warn("".concat(t.name,".componentName not specified"))(),e||t.name}let $ee=0;class yw{constructor(...e){R(this,"id",void 0),R(this,"props",void 0),R(this,"count",void 0),this.props=Nee(this,e),this.id=this.props.id,this.count=$ee++}clone(e){const{props:n}=this,r={};for(const s in n[gl])s in n[Bi]?r[s]=n[Bi][s]:s in n[qo]&&(r[s]=n[qo][s]);return new this.constructor({...n,...r,...e})}}R(yw,"componentName","Component");R(yw,"defaultProps",{});const Gee=Object.freeze({});class Wee{constructor(e){R(this,"component",void 0),R(this,"onAsyncPropUpdated",void 0),R(this,"asyncProps",void 0),R(this,"oldProps",void 0),R(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||Gee}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[Dh]||this.component;const n=e[Bi]||{},r=e[qo]||e,s=e[gl]||{};for(const i in n){const o=n[i];this._createAsyncPropData(i,s[i]),this._updateAsyncProp(i,o),n[i]=this.getAsyncProp(i)}for(const i in r){const o=r[i];this._createAsyncPropData(i,s[i]),this._updateAsyncProp(i,o)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(EM(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const s=this.asyncProps[e];s&&r>=s.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),s.resolvedValue=n,s.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const s=r.pendingLoadCount;n.then(i=>{this.component&&(i=this._postProcessValue(r,i),this._setAsyncPropValue(e,i,s),this._onResolve(e,i))}).catch(i=>{this._onError(e,i)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const s=r.pendingLoadCount;let i=[],o=0;for await(const l of n){if(!this.component)return;const{dataTransform:u}=this.component.props;u?i=u(l,i):i=i.concat(l),Object.defineProperty(i,"__diff",{enumerable:!1,value:[{startRow:o,endRow:i.length}]}),o=i.length,this._setAsyncPropValue(e,i,s)}this._onResolve(e,i)}_postProcessValue(e,n){const r=e.type;return r&&this.component&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const s=this.component&&this.component.props[Vo];this.asyncProps[e]={type:s&&s[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class Hee extends Wee{constructor({attributeManager:e,layer:n}){super(n),R(this,"attributeManager",void 0),R(this,"needsRedraw",void 0),R(this,"needsUpdate",void 0),R(this,"subLayers",void 0),R(this,"usesPickingColorCache",void 0),R(this,"hasPickingBuffer",void 0),R(this,"changeFlags",void 0),R(this,"viewport",void 0),R(this,"uniformTransitions",void 0),R(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const r=this.layer,s=r==null?void 0:r.props.fetch;return s?s(n,{propName:e,layer:r}):super._fetch(e,n)}_onResolve(e,n){const r=this.layer;if(r){const s=r.props.onDataLoad;e==="data"&&s&&s(n,{propName:e,layer:r})}}_onError(e,n){const r=this.layer;r&&r.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const qee="layer.changeFlag",Kee="layer.initialize",Yee="layer.update",Xee="layer.finalize",Zee="layer.matched",wA=2**24-1,Qee=Object.freeze([]),Jee=ld(({oldViewport:t,viewport:e})=>t.equals(e));let Jr=new Uint8ClampedArray(0);const ete={data:{type:"data",value:Qee,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:s,signal:i})=>{const{resourceManager:o}=n.context;if(s=s||n.getLoadOptions(),r=r||n.props.loaders,i){var l;s={...s,fetch:{...(l=s)===null||l===void 0?void 0:l.fetch,signal:i}}}let u=o.contains(t);return!u&&!s&&(o.add({resourceId:t,data:Ph(t,r),persistent:!1}),u=!0),u?o.subscribe({resourceId:t,onChange:d=>{var h;return(h=n.internalState)===null||h===void 0?void 0:h.reloadAsyncProp(e,d)},consumerId:n.id,requestId:e}):Ph(t,r,s)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:ft.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Mp extends yw{constructor(...e){super(...e),R(this,"internalState",null),R(this,"lifecycle",nl.NO_STATE),R(this,"context",void 0),R(this,"state",void 0),R(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){hn(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=uM(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[s,i,o]=lM(r,n.pixelProjectionMatrix);return e.length===2?[s,i]:[s,i,o]}unproject(e){return hn(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){hn(this.internalState);const r=this.internalState.viewport||this.context.viewport;return _Q(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===ft.DEFAULT||e===ft.LNGLAT||e===ft.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){hn(e instanceof Uint8Array);const[n,r,s]=e;return n+r*256+s*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:See(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())===null||e===void 0?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const n of this.props.extensions)e=Pee(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const s of r)n.invalidateAll(s);else n.invalidateAll();if(n){const{props:s}=e,i=this.internalState.hasPickingBuffer,o=Number.isInteger(s.highlightedObjectIndex)||s.pickable||s.extensions.some(l=>l.getNeedsPickingBuffer.call(this,l));if(i!==o){this.internalState.hasPickingBuffer=o;const{pickingColors:l,instancePickingColors:u}=n.attributes,d=l||u;d&&(o&&d.constant&&(d.constant=!1,n.invalidate(d.id)),!d.value&&!o&&(d.constant=!0,d.value=[0,0,0]))}}}finalizeState(e){for(const r of this.getModels())r.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:s}=e;return s>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[s]),e}raiseError(e,n){var r,s;if(n&&(e=new Error("".concat(n,": ").concat(e.message),{cause:e})),!((r=(s=this.props).onError)!==null&&r!==void 0&&r.call(s,e))){var i,o;(i=this.context)===null||i===void 0||(o=i.onError)===null||o===void 0||o.call(i,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!Jee({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),s=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:s,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const i=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const s in n)Object.defineProperty(r,s,{value:n[s]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(Jr.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>wA&&ht.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Jr=Vu.allocate(Jr,n,{size:3,copy:!0,maxCount:Math.max(n,wA)});const s=Math.floor(Jr.length/3),i=[];for(let o=r;o<s;o++)this.encodePickingColor(o,i),Jr[o*3+0]=i[0],Jr[o*3+1]=i[1],Jr[o*3+2]=i[2]}e.value=Jr.subarray(0,n*3)}_setModelAttributes(e,n){const r=this.getAttributeManager(),s=e.userData.excludeAttributes||{},i=r.getShaderAttributes(n,s);e.setAttributes(i)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}const{pickingColors:r,instancePickingColors:s}=this.getAttributeManager().attributes,i=r||s,o=i&&n.attributes&&n.attributes[i.id];if(o&&o.value){const l=o.value,u=this.encodePickingColor(e);for(let d=0;d<n.length;d++){const h=i.getVertexOffset(d);l[h]===u[0]&&l[h+1]===u[1]&&l[h+2]===u[2]&&this._disablePickingIndex(d)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,s=n||r;if(!s)return;const i=s.getVertexOffset(e),o=s.getVertexOffset(e+1);s.buffer.subData({data:new Uint8Array(o-i),offset:i})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;r&&(this.internalState.usesPickingColorCache&&r.value.buffer!==Jr.buffer&&(r.value=Jr.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){hn(!this.internalState),hn(Number.isFinite(this.props.coordinateSystem)),Rn(Kee,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Hee({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(ht.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new gee(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Rn(Zee,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Rn(Yee,this,e),!e)return;const n=this.props,r=this.context,s=this.internalState,i=r.viewport,o=this._updateUniformTransition();s.propsInTransition=o,r.viewport=s.viewport||i,this.props=o;try{const l=this._getUpdateParams(),u=this.getModels();if(r.gl)this.updateState(l);else try{this.updateState(l)}catch{}for(const h of this.props.extensions)h.updateState.call(this,l,h);const d=this.getModels()[0]!==u[0];this._postUpdate(l,d)}finally{r.viewport=i,this.props=n,this._clearChangeFlags(),s.needsUpdate=!1,s.resetOldProps()}}_finalize(){Rn(Xee,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();const s=this.props,i=this.context;this.props=this.internalState.propsInTransition||s;const o=this.props.opacity;n.opacity=Math.pow(o,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:l}=this.props,u=l&&l(n)||[0,0];zs(i.gl,{polygonOffset:u}),Vr(i.gl,r,()=>{const d={moduleParameters:e,uniforms:n,parameters:r,context:i};for(const h of this.props.extensions)h.draw.call(this,d,h);this.draw(d)})}finally{this.props=s}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const s in e)if(e[s]){let i=!1;switch(s){case"dataChanged":const o=e[s],l=n[s];o&&Array.isArray(l)&&(n.dataChanged=Array.isArray(o)?l.concat(o):o,i=!0);default:n[s]||(n[s]=e[s],i=!0)}i&&Rn(qee,this,s,e)}const r=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const r=yee(e,n);if(r.updateTriggersChanged)for(const i in r.updateTriggersChanged)r.updateTriggersChanged[i]&&this.invalidateAttribute(i);if(r.transitionsChanged)for(const i in r.transitionsChanged){var s;this.internalState.uniformTransitions.add(i,n[i],e[i],(s=e.transitions)===null||s===void 0?void 0:s[i])}return this.setChangeFlags(r)}validateProps(){vee(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.pickingHighlightColor=r(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new dee(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:s}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:i}=this.state;i==null||i.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:l,highlightColor:u}=r;if(n||s.autoHighlight!==o||s.highlightedObjectIndex!==l||s.highlightColor!==u){const d={};o||(d.pickingSelectedColor=null),Array.isArray(u)&&(d.pickingHighlightColor=u),(n||l!==s.highlightedObjectIndex)&&(d.pickingSelectedColor=Number.isFinite(l)&&l>=0?this.encodePickingColor(l):null),this.setModuleParameters(d)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const r=this.getAttributeManager(),s=r?r.getNeedsRedraw(e):!1;if(n=n||s,n)for(const i of this.props.extensions)i.onNeedsRedraw.call(this,i);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}R(Mp,"defaultProps",ete);R(Mp,"layerName","Layer");const tte=typeof window<"u"?_.useLayoutEffect:_.useEffect;function Vh(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const nte={position:"absolute",zIndex:-1};function IM(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>IM(n,e));if(Lp(t)){if(rte(t))return e.style=nte,_.cloneElement(t,e);if(ste(t))return _.cloneElement(t,e)}return t}function Lp(t){return t&&typeof t=="object"&&"type"in t||!1}function rte(t){var e;return(e=t.props)===null||e===void 0?void 0:e.mapStyle}function ste(t){const e=t.type;return e&&e.deckGLViewProps}function s0(t){if(typeof t=="function")return _.createElement(Ml,{},t);if(Array.isArray(t))return t.map(s0);if(Lp(t)){if(t.type===_.Fragment)return s0(t.props.children);if(Vh(t.type,Ml))return t}return t}function ite({children:t,layers:e=[],views:n=null}){const r=[],s=[],i={};return _.Children.forEach(s0(t),o=>{if(Lp(o)){const l=o.type;if(Vh(l,Mp)){const u=ote(l,o.props);s.push(u)}else r.push(o);if(Vh(l,Ml)&&l!==Ml&&o.props.id){const u=new l(o.props);i[u.id]=u}}else o&&r.push(o)}),Object.keys(i).length>0&&(Array.isArray(n)?n.forEach(o=>{i[o.id]=o}):n&&(i[n.id]=n),n=Object.values(i)),e=s.length>0?[...s,...e]:e,{layers:e,children:r,views:n}}function ote(t,e){const n={},r=t.defaultProps||{};for(const s in e)r[s]!==e[s]&&(n[s]=e[s]);return new t(n)}function ate({children:t,deck:e,ContextProvider:n}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const s={},i=r.views[0].id;for(const o of t){let l=i,u=o;Lp(o)&&Vh(o.type,Ml)&&(l=o.props.id||i,u=o.props.children);const d=r.getViewport(l),h=r.getViewState(l);if(d){h.padding=d.padding;const{x:p,y:g,width:y,height:T}=d;u=IM(u,{x:p,y:g,width:y,height:T,viewport:d,viewState:h}),s[l]||(s[l]={viewport:d,children:[]}),s[l].children.push(u)}}return Object.keys(s).map(o=>{const{viewport:l,children:u}=s[o],{x:d,y:h,width:p,height:g}=l,y={position:"absolute",left:d,top:h,width:p,height:g},T="view-".concat(o),x=_.createElement("div",{key:T,id:T,style:y},...u);if(n){const E={viewport:l,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:A=>{A.viewId=o,e._onViewStateChange(A)}};return _.createElement(n,{key:T,value:E},x)}return x})}const lte={mixBlendMode:null};function cte({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},s={left:0,top:0};if(n)for(const i in n)i in lte?s[i]=n[i]:r[i]=n[i];return{containerStyle:r,canvasStyle:s}}function ute(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function OM(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function dte(t,e,n){const r=new e({...n,_customRender:s=>{t.redrawReason=s;const i=r.getViewports();t.lastRenderedViewports!==i?t.forceUpdate():OM(t)}});return r}const MM=_.forwardRef((t,e)=>{const[n,r]=_.useState(0),i=_.useRef({control:null,version:n,forceUpdate:()=>r(M=>M+1)}).current,o=_.useRef(null),l=_.useRef(null),u=_.useMemo(()=>ite(t),[t.layers,t.views,t.children]);let d=!0;const h=M=>{var D;return d&&t.viewState?(i.viewStateUpdateRequested=M,null):(i.viewStateUpdateRequested=null,(D=t.onViewStateChange)===null||D===void 0?void 0:D.call(t,M))},p=M=>{if(d)i.interactionStateUpdateRequested=M;else{var D;i.interactionStateUpdateRequested=null,(D=t.onInteractionStateChange)===null||D===void 0||D.call(t,M)}},g=_.useMemo(()=>{const M={...t,style:null,width:"100%",height:"100%",parent:o.current,canvas:l.current,layers:u.layers,views:u.views,onViewStateChange:h,onInteractionStateChange:p};return delete M._customRender,i.deck&&i.deck.setProps(M),M},[t]);_.useEffect(()=>{const M=t.Deck||Op;return i.deck=dte(i,M,{...g,parent:o.current,canvas:l.current}),()=>{var D;return(D=i.deck)===null||D===void 0?void 0:D.finalize()}},[]),tte(()=>{OM(i);const{viewStateUpdateRequested:M,interactionStateUpdateRequested:D}=i;M&&h(M),D&&p(D)}),_.useImperativeHandle(e,()=>ute(i),[]);const y=i.deck&&i.deck.isInitialized?i.deck.getViewports():void 0,{ContextProvider:T,width:x,height:E,id:A,style:S}=t,{containerStyle:C,canvasStyle:O}=_.useMemo(()=>cte({width:x,height:E,style:S}),[x,E,S]);if(!i.viewStateUpdateRequested&&i.lastRenderedViewports===y||i.version!==n){i.lastRenderedViewports=y,i.version=n;const M=ate({children:u.children,deck:i.deck,ContextProvider:T}),D=_.createElement("canvas",{key:"canvas",id:A||"deckgl-overlay",ref:l,style:O});i.control=_.createElement("div",{id:"".concat(A||"deckgl","-wrapper"),ref:o,style:C},[D,M])}return d=!1,i.control});MM.defaultProps=Op.defaultProps;const fte=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,hte=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,pte=1024,mte=4,xA=()=>{},bA={10241:9987,10240:9729,10242:33071,10243:33071};function gte(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function vte(t,e,n,r){const s=Math.min(n/e.width,r/e.height),i=Math.floor(e.width*s),o=Math.floor(e.height*s);return s===1?{data:e,width:i,height:o}:(t.canvas.height=o,t.canvas.width=i,t.clearRect(0,0,i,o),t.drawImage(e,0,0,e.width,e.height,0,0,i,o),{data:t.canvas,width:i,height:o})}function Uu(t){return t&&(t.id||t.url)}function yte(t,e,n,r){const s=t.width,i=t.height,o=new ur(t.gl,{width:e,height:n,parameters:r});return Tq(t,o,{targetY:0,width:s,height:i}),t.delete(),o}function EA(t,e,n){for(let r=0;r<e.length;r++){const{icon:s,xOffset:i}=e[r],o=Uu(s);t[o]={...s,x:i,y:n}}}function _te({icons:t,buffer:e,mapping:n={},xOffset:r=0,yOffset:s=0,rowHeight:i=0,canvasWidth:o}){let l=[];for(let u=0;u<t.length;u++){const d=t[u],h=Uu(d);if(!n[h]){const{height:p,width:g}=d;r+g+e>o&&(EA(n,l,s),r=0,s=i+s+e,i=0,l=[]),l.push({icon:d,xOffset:r}),r=r+g+e,i=Math.max(i,p)}}return l.length>0&&EA(n,l,s),{mapping:n,rowHeight:i,xOffset:r,yOffset:s,canvasWidth:o,canvasHeight:gte(i+s+e)}}function wte(t,e,n){if(!t||!e)return null;n=n||{};const r={},{iterable:s,objectInfo:i}=bM(t);for(const o of s){i.index++;const l=e(o,i),u=Uu(l);if(!l)throw new Error("Icon is missing.");if(!l.url)throw new Error("Icon url is missing.");!r[u]&&(!n[u]||l.url!==n[u].url)&&(r[u]={...l,source:o,sourceIndex:i.index})}return r}class xte{constructor(e,{onUpdate:n=xA,onError:r=xA}){R(this,"gl",void 0),R(this,"onUpdate",void 0),R(this,"onError",void 0),R(this,"_loadOptions",null),R(this,"_texture",null),R(this,"_externalTexture",null),R(this,"_mapping",{}),R(this,"_textureParameters",null),R(this,"_pendingCount",0),R(this,"_autoPacking",!1),R(this,"_xOffset",0),R(this,"_yOffset",0),R(this,"_rowHeight",0),R(this,"_buffer",mte),R(this,"_canvasWidth",pte),R(this,"_canvasHeight",0),R(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=r}finalize(){var e;(e=this._texture)===null||e===void 0||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?Uu(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:r,iconMapping:s,textureParameters:i}){if(e&&(this._loadOptions=e),n!==void 0&&(this._autoPacking=n),s&&(this._mapping=s),r){var o;(o=this._texture)===null||o===void 0||o.delete(),this._texture=null,this._externalTexture=r}i&&(this._textureParameters=i)}get isLoaded(){return this._pendingCount===0}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const r=Object.values(wte(e,n,this._mapping)||{});if(r.length>0){const{mapping:s,xOffset:i,yOffset:o,rowHeight:l,canvasHeight:u}=_te({icons:r,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=l,this._mapping=s,this._xOffset=i,this._yOffset=o,this._canvasHeight=u,this._texture||(this._texture=new ur(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||bA})),this._texture.height!==this._canvasHeight&&(this._texture=yte(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||bA)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(r)}}_loadIcons(e){const n=this._canvas.getContext("2d",{willReadFrequently:!0});for(const r of e)this._pendingCount++,Ph(r.url,this._loadOptions).then(s=>{const i=Uu(r),o=this._mapping[i],{x:l,y:u,width:d,height:h}=o,{data:p,width:g,height:y}=vte(n,s,d,h);this._texture.setSubImageData({data:p,x:l+(d-g)/2,y:u+(h-y)/2,width:g,height:y}),o.width=g,o.height=y,this._texture.generateMipmap(),this.onUpdate()}).catch(s=>{this.onError({url:r.url,source:r.source,sourceIndex:r.sourceIndex,loadOptions:this._loadOptions,error:s})}).finally(()=>{this._pendingCount--})}}const LM=[0,0,0,255],bte={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:LM},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class _w extends Mp{constructor(...e){super(...e),R(this,"state",void 0)}getShaders(){return super.getShaders({vs:fte,fs:hte,modules:[AQ,CQ]})}initializeState(){this.state={iconManager:new xte(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:LM},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:r,changeFlags:s}=e,i=this.getAttributeManager(),{iconAtlas:o,iconMapping:l,data:u,getIcon:d,textureParameters:h}=n,{iconManager:p}=this.state,g=o||this.internalState.isAsyncPropLoading("iconAtlas");if(p.setProps({loadOptions:n.loadOptions,autoPacking:!g,iconAtlas:o,iconMapping:g?l:null,textureParameters:h}),g?r.iconMapping!==n.iconMapping&&i.invalidate("getIcon"):(s.dataChanged||s.updateTriggersChanged&&(s.updateTriggersChanged.all||s.updateTriggersChanged.getIcon))&&p.packIcons(u,d),s.extensionsChanged){var y;const{gl:T}=this.context;(y=this.state.model)===null||y===void 0||y.delete(),this.state.model=this._getModel(T),i.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:r,sizeMaxPixels:s,sizeUnits:i,billboard:o,alphaCutoff:l}=this.props,{iconManager:u}=this.state,d=u.getTexture();d&&this.state.model.setUniforms(e).setUniforms({iconsTexture:d,iconsTextureDim:[d.width,d.height],sizeUnits:Dy[i],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:s,billboard:o,alphaCutoff:l}).draw()}_getModel(e){const n=[-1,-1,-1,1,1,1,1,-1];return new QO(e,{...this.getShaders(),id:this.props.id,geometry:new cZ({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const r=(n=this.getCurrentLayer())===null||n===void 0?void 0:n.props.onIconError;r?r(e):ht.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:r,anchorX:s=n/2,anchorY:i=r/2}=this.state.iconManager.getIconMapping(e);return[n/2-s,r/2-i]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:r,width:s,height:i}=this.state.iconManager.getIconMapping(e);return[n,r,s,i]}}R(_w,"defaultProps",bte);R(_w,"layerName","IconLayer");const Ete=_.createContext(null);function Tte(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,s=Array.isArray(e)?e[0]:e?e.x:0,i=Array.isArray(e)?e[1]:e?e.y:0;return n===s&&r===i}function Ls(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Ls(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n)if(!e.hasOwnProperty(s)||!Ls(t[s],e[s]))return!1;return!0}return!1}function Ste(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function TA(t,e){if(!t.getProjection)return;const n=t.getProjection(),r=e.getProjection();Ls(n,r)||e.setProjection(n)}function SA(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function AA(t,e){const n=e.viewState||e;let r=!1;if("zoom"in n){const s=t.zoom;t.zoom=n.zoom,r=r||s!==t.zoom}if("bearing"in n){const s=t.bearing;t.bearing=n.bearing,r=r||s!==t.bearing}if("pitch"in n){const s=t.pitch;t.pitch=n.pitch,r=r||s!==t.pitch}if(n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),"longitude"in n&&"latitude"in n){const s=t.center;t.center=new s.constructor(n.longitude,n.latitude),r=r||s!==t.center}return r}const Ate=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function CA(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map(r=>{let s=null;"interactive"in r&&(s=Object.assign({},r),delete s.interactive);const i=e[r.ref];if(i){s=s||Object.assign({},r),delete s.ref;for(const o of Ate)o in i&&(s[o]=i[o])}return s||r});return{...t,layers:n}}var PA={};const RA={version:8,sources:{},layers:[]},kA={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Ov={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},IA={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Cte=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Pte=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Ll{constructor(e,n,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=s=>{const i=this.props[IA[s.type]];i?i(s):s.type==="error"&&console.error(s.error)},this._onPointerEvent=s=>{(s.type==="mousemove"||s.type==="mouseout")&&this._updateHover(s);const i=this.props[kA[s.type]];i&&(this.props.interactiveLayerIds&&s.type!=="mouseover"&&s.type!=="mouseout"&&(s.features=this._hoveredFeatures||this._queryRenderedFeatures(s.point)),i(s),delete s.features)},this._onCameraEvent=s=>{if(!this._internalUpdate){const i=this.props[Ov[s.type]];i&&i(s)}s.type in this._deferredEvents&&(this._deferredEvents[s.type]=!1)},this._MapClass=e,this.props=n,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const r=this._updateSettings(e,n);r&&this._createShadowTransform(this._map);const s=this._updateSize(e),i=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(r||s||i&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const r=Ll.savedMaps.pop();if(!r)return null;const s=r.map,i=s.getContainer();for(n.className=i.className;i.childNodes.length>0;)n.appendChild(i.childNodes[0]);s._container=n;const o=s._resizeObserver;o&&(o.disconnect(),o.observe(n)),r.setProps({...e,styleDiffing:!1}),s.resize();const{initialViewState:l}=e;return l&&(l.bounds?s.fitBounds(l.bounds,{...l.fitBoundsOptions,duration:0}):r._updateViewState(l,!1)),s.isStyleLoaded()?s.fire("load"):s.once("styledata",()=>s.fire("load")),s._update(),r}_initialize(e){const{props:n}=this,{mapStyle:r=RA}=n,s={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||Rte()||null,container:e,style:CA(r)},i=s.initialViewState||s.viewState||s;if(Object.assign(s,{center:[i.longitude||0,i.latitude||0],zoom:i.zoom||0,pitch:i.pitch||0,bearing:i.bearing||0}),n.gl){const h=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=h,n.gl)}const o=new this._MapClass(s);i.padding&&o.setPadding(i.padding),n.cursor&&(o.getCanvas().style.cursor=n.cursor),this._createShadowTransform(o);const l=o._render;o._render=h=>{this._inRender=!0,l.call(o,h),this._inRender=!1};const u=o._renderTaskQueue.run;o._renderTaskQueue.run=h=>{u.call(o._renderTaskQueue,h),this._onBeforeRepaint()},o.on("render",()=>this._onAfterRepaint());const d=o.fire;o.fire=this._fireEvent.bind(this,d),o.on("resize",()=>{this._renderTransform.resize(o.transform.width,o.transform.height)}),o.on("styledata",()=>{this._updateStyleComponents(this.props,{}),TA(o.transform,this._renderTransform)}),o.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const h in kA)o.on(h,this._onPointerEvent);for(const h in Ov)o.on(h,this._onCameraEvent);for(const h in IA)o.on(h,this._onEvent);this._map=o}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),Ll.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const n=Ste(e.transform);e.painter.transform=n,this._renderTransform=n}_updateSize(e){const{viewState:n}=e;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const r=this._map,s=this._renderTransform,{zoom:i,pitch:o,bearing:l}=s,u=r.isMoving();u&&(s.cameraElevationReference="sea");const d=AA(s,{...SA(r.transform),...e});if(u&&(s.cameraElevationReference="ground"),d&&n){const h=this._deferredEvents;h.move=!0,h.zoom||(h.zoom=i!==s.zoom),h.rotate||(h.rotate=l!==s.bearing),h.pitch||(h.pitch=o!==s.pitch)}return u||AA(r.transform,e),d}_updateSettings(e,n){const r=this._map;let s=!1;for(const i of Cte)if(i in e&&!Ls(e[i],n[i])){s=!0;const o=r[`set${i[0].toUpperCase()}${i.slice(1)}`];o==null||o.call(r,e[i])}return s}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==n.mapStyle){const{mapStyle:r=RA,styleDiffing:s=!0}=e,i={diff:s};return"localIdeographFontFamily"in e&&(i.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(CA(r),i),!0}return!1}_updateStyleComponents(e,n){const r=this._map;let s=!1;return r.isStyleLoaded()&&("light"in e&&r.setLight&&!Ls(e.light,n.light)&&(s=!0,r.setLight(e.light)),"fog"in e&&r.setFog&&!Ls(e.fog,n.fog)&&(s=!0,r.setFog(e.fog)),"terrain"in e&&r.setTerrain&&!Ls(e.terrain,n.terrain)&&(!e.terrain||r.getSource(e.terrain.source))&&(s=!0,r.setTerrain(e.terrain))),s}_updateHandlers(e,n){var r,s;const i=this._map;let o=!1;for(const l of Pte){const u=(r=e[l])!==null&&r!==void 0?r:!0,d=(s=n[l])!==null&&s!==void 0?s:!0;Ls(u,d)||(o=!0,u?i[l].enable(u):i[l].disable())}return o}_queryRenderedFeatures(e){const n=this._map,r=n.transform,{interactiveLayerIds:s=[]}=this.props;try{return n.transform=this._renderTransform,n.queryRenderedFeatures(e,{layers:s.filter(n.getLayer.bind(n))})}catch{return[]}finally{n.transform=r}}_updateHover(e){var n;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const i=e.type,o=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,l=this._queryRenderedFeatures(e.point),u=l.length>0;!u&&o&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=l,u&&!o&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=i}else this._hoveredFeatures=null}_fireEvent(e,n,r){const s=this._map,i=s.transform,o=typeof n=="string"?n:n.type;return o==="move"&&this._updateViewState(this.props,!1),o in Ov&&(typeof n=="object"&&(n.viewState=SA(i)),this._map.isMoving())?(s.transform=this._renderTransform,e.call(s,n,r),s.transform=i,s):(e.call(s,n,r),s)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&e.fire(r);this._internalUpdate=!1;const n=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{TA(this._renderTransform,n),e.transform=n}}}Ll.savedMaps=[];function Rte(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||PA.MapboxAccessToken}catch{}try{t=t||PA.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const kte=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Ite(t){if(!t)return null;const e=t.map,n={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:r=>{const s=e.transform;e.transform=t.transform;const i=e.project(r);return e.transform=s,i},unproject:r=>{const s=e.transform;e.transform=t.transform;const i=e.unproject(r);return e.transform=s,i},queryTerrainElevation:(r,s)=>{const i=e.transform;e.transform=t.transform;const o=e.queryTerrainElevation(r,s);return e.transform=i,o},queryRenderedFeatures:(r,s)=>{const i=e.transform;e.transform=t.transform;const o=e.queryRenderedFeatures(r,s);return e.transform=i,o}};for(const r of Ote(e))!(r in n)&&!kte.includes(r)&&(n[r]=e[r].bind(e));return n}function Ote(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof t[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}const Mte=typeof document<"u"?_.useLayoutEffect:_.useEffect,Lte=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Nte(t,e){for(const r of Lte)r in e&&(t[r]=e[r]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;n&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(n,r=>{r&&console.error(r)},!0)}const Np=_.createContext(null);function jte(t,e,n){const r=_.useContext(Ete),[s,i]=_.useState(null),o=_.useRef(),{current:l}=_.useRef({mapLib:null,map:null});_.useEffect(()=>{const h=t.mapLib;let p=!0,g;return Promise.resolve(h||n).then(y=>{if(!p)return;if(!y)throw new Error("Invalid mapLib");const T="Map"in y?y:y.default;if(!T.Map)throw new Error("Invalid mapLib");if(Nte(T,t),!T.supported||T.supported(t))t.reuseMaps&&(g=Ll.reuse(t,o.current)),g||(g=new Ll(T.Map,t,o.current)),l.map=Ite(g),l.mapLib=T,i(g),r==null||r.onMapMount(l.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(y=>{const{onError:T}=t;T?T({type:"error",target:null,originalEvent:null,error:y}):console.error(y)}),()=>{p=!1,g&&(r==null||r.onMapUnmount(t.id),t.reuseMaps?g.recycle():g.destroy())}},[]),Mte(()=>{s&&s.setProps(t)}),_.useImperativeHandle(e,()=>l.map,[s]);const u=_.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),d={height:"100%"};return _.createElement("div",{id:t.id,ref:o,style:u},s&&_.createElement(Np.Provider,{value:l},_.createElement("div",{"mapboxgl-children":"",style:d},t.children)))}const Dte=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function sa(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const s=e[r];Number.isFinite(s)&&!Dte.test(r)?n[r]=`${s}px`:n[r]=s}}function Fte(t,e){const{map:n,mapLib:r}=_.useContext(Np),s=_.useRef({props:t});s.current.props=t;const i=_.useMemo(()=>{let x=!1;_.Children.forEach(t.children,S=>{S&&(x=!0)});const E={...t,element:x?document.createElement("div"):null},A=new r.Marker(E);return A.setLngLat([t.longitude,t.latitude]),A.getElement().addEventListener("click",S=>{var C,O;(O=(C=s.current.props).onClick)===null||O===void 0||O.call(C,{type:"click",target:A,originalEvent:S})}),A.on("dragstart",S=>{var C,O;const M=S;M.lngLat=i.getLngLat(),(O=(C=s.current.props).onDragStart)===null||O===void 0||O.call(C,M)}),A.on("drag",S=>{var C,O;const M=S;M.lngLat=i.getLngLat(),(O=(C=s.current.props).onDrag)===null||O===void 0||O.call(C,M)}),A.on("dragend",S=>{var C,O;const M=S;M.lngLat=i.getLngLat(),(O=(C=s.current.props).onDragEnd)===null||O===void 0||O.call(C,M)}),A},[]);_.useEffect(()=>(i.addTo(n.getMap()),()=>{i.remove()}),[]);const{longitude:o,latitude:l,offset:u,style:d,draggable:h=!1,popup:p=null,rotation:g=0,rotationAlignment:y="auto",pitchAlignment:T="auto"}=t;return _.useEffect(()=>{sa(i.getElement(),d)},[d]),_.useImperativeHandle(e,()=>i,[]),(i.getLngLat().lng!==o||i.getLngLat().lat!==l)&&i.setLngLat([o,l]),u&&!Tte(i.getOffset(),u)&&i.setOffset(u),i.isDraggable()!==h&&i.setDraggable(h),i.getRotation()!==g&&i.setRotation(g),i.getRotationAlignment()!==y&&i.setRotationAlignment(y),i.getPitchAlignment()!==T&&i.setPitchAlignment(T),i.getPopup()!==p&&i.setPopup(p),Yo.createPortal(t.children,i.getElement())}_.memo(_.forwardRef(Fte));function OA(t){return new Set(t?t.trim().split(/\s+/):[])}function Vte(t,e){const{map:n,mapLib:r}=_.useContext(Np),s=_.useMemo(()=>document.createElement("div"),[]),i=_.useRef({props:t});i.current.props=t;const o=_.useMemo(()=>{const l={...t},u=new r.Popup(l);return u.setLngLat([t.longitude,t.latitude]),u.once("open",d=>{var h,p;(p=(h=i.current.props).onOpen)===null||p===void 0||p.call(h,d)}),u},[]);if(_.useEffect(()=>{const l=u=>{var d,h;(h=(d=i.current.props).onClose)===null||h===void 0||h.call(d,u)};return o.on("close",l),o.setDOMContent(s).addTo(n.getMap()),()=>{o.off("close",l),o.isOpen()&&o.remove()}},[]),_.useEffect(()=>{sa(o.getElement(),t.style)},[t.style]),_.useImperativeHandle(e,()=>o,[]),o.isOpen()&&((o.getLngLat().lng!==t.longitude||o.getLngLat().lat!==t.latitude)&&o.setLngLat([t.longitude,t.latitude]),t.offset&&!Ls(o.options.offset,t.offset)&&o.setOffset(t.offset),(o.options.anchor!==t.anchor||o.options.maxWidth!==t.maxWidth)&&(o.options.anchor=t.anchor,o.setMaxWidth(t.maxWidth)),o.options.className!==t.className)){const l=OA(o.options.className),u=OA(t.className);for(const d of l)u.has(d)||o.removeClassName(d);for(const d of u)l.has(d)||o.addClassName(d);o.options.className=t.className}return Yo.createPortal(t.children,s)}_.memo(_.forwardRef(Vte));function dd(t,e,n,r){const s=_.useContext(Np),i=_.useMemo(()=>t(s),[]);return _.useEffect(()=>{const o=e,l=null,u=typeof e=="function"?e:null,{map:d}=s;return d.hasControl(i)||(d.addControl(i,o==null?void 0:o.position),l&&l(s)),()=>{u&&u(s),d.hasControl(i)&&d.removeControl(i)}},[]),i}function Ute(t){const e=dd(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return _.useEffect(()=>{sa(e._container,t.style)},[t.style]),null}_.memo(Ute);function Bte(t){const e=dd(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return _.useEffect(()=>{sa(e._controlContainer,t.style)},[t.style]),null}_.memo(Bte);function zte(t,e){const n=_.useRef({props:t}),r=dd(({mapLib:s})=>{const i=new s.GeolocateControl(t),o=i._setupUI;return i._setupUI=l=>{i._container.hasChildNodes()||o(l)},i.on("geolocate",l=>{var u,d;(d=(u=n.current.props).onGeolocate)===null||d===void 0||d.call(u,l)}),i.on("error",l=>{var u,d;(d=(u=n.current.props).onError)===null||d===void 0||d.call(u,l)}),i.on("outofmaxbounds",l=>{var u,d;(d=(u=n.current.props).onOutOfMaxBounds)===null||d===void 0||d.call(u,l)}),i.on("trackuserlocationstart",l=>{var u,d;(d=(u=n.current.props).onTrackUserLocationStart)===null||d===void 0||d.call(u,l)}),i.on("trackuserlocationend",l=>{var u,d;(d=(u=n.current.props).onTrackUserLocationEnd)===null||d===void 0||d.call(u,l)}),i},{position:t.position});return n.current.props=t,_.useImperativeHandle(e,()=>r,[]),_.useEffect(()=>{sa(r._container,t.style)},[t.style]),null}_.memo(_.forwardRef(zte));function $te(t){const e=dd(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return _.useEffect(()=>{sa(e._container,t.style)},[t.style]),null}_.memo($te);function Gte(t){const e=dd(({mapLib:i})=>new i.ScaleControl(t),{position:t.position}),n=_.useRef(t),r=n.current;n.current=t;const{style:s}=t;return t.maxWidth!==void 0&&t.maxWidth!==r.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==r.unit&&e.setUnit(t.unit),_.useEffect(()=>{sa(e._container,s)},[s]),null}_.memo(Gte);const Wte=Wo(()=>import("./mapbox-gl-5SAUrZTJ.js").then(t=>t.m),[],import.meta.url),Hte=_.forwardRef(function(e,n){return jte(e,n,Wte)}),qte="mapbox://styles/geovista-fdte/clu7c9nmj00vs01pad3m97qqa",Kte="mapbox://styles/geovista-fdte/clon6qm3o008t01peeqk31rg7",Yte="pk.eyJ1IjoiZ2VvdmlzdGEtZmR0ZSIsImEiOiJja3plOG9wM2UzNmdkMnZuZnkzdHhrY3N1In0.8FxWCItNfns7J7hXCt-tFQ",Xte={longitude:-46.6388,latitude:-23.5489,zoom:12,pitch:0,bearing:0},Zte={marker:{x:0,y:-0,width:26,height:26,mask:!0}},Qte=t=>typeof t.latitude=="number"&&typeof t.longitude=="number"&&!isNaN(t.latitude)&&!isNaN(t.longitude)&&t.latitude>=-90&&t.latitude<=90&&t.longitude>=-180&&t.longitude<=180,Jte=({isDarkMode:t})=>{const[e,n]=_.useState(Xte),[r,s]=_.useState([]),{setZoomToLocation:i,hiddenPOITypes:o}=G_(),l=async()=>{try{const{data:h,error:p}=await Tn.from("pois").select(`
          id,
          name,
          latitude,
          longitude,
          type_id,
          poi_types (
            name,
            color
          )
        `);if(p)throw p;const g=h.map(y=>({id:y.id,name:y.name,latitude:Number(y.latitude),longitude:Number(y.longitude),type_id:y.type_id,type_name:y.poi_types.name,type_color:y.poi_types.color})).filter(Qte);s(g)}catch(h){console.error("Error fetching POIs:",h)}},u=_.useCallback((h,p)=>{typeof h=="number"&&typeof p=="number"&&!isNaN(h)&&!isNaN(p)&&h>=-90&&h<=90&&p>=-180&&p<=180&&n(g=>({...g,latitude:h,longitude:p,zoom:16,transitionDuration:2e3}))},[]);_.useEffect(()=>{i(()=>u)},[i,u]),_.useEffect(()=>{l();const h=Tn.channel("poi_changes").on("postgres_changes",{event:"*",schema:"public",table:"pois"},()=>{l()}).subscribe();return()=>{Tn.removeChannel(h)}},[]);const d=[new _w({id:"poi-layer",data:r.filter(h=>!o.has(h.type_id)),pickable:!0,iconAtlas:"/map-pin.svg",iconMapping:Zte,getIcon:h=>"marker",sizeScale:2,getPosition:h=>[h.longitude,h.latitude],getSize:h=>8,getColor:h=>{var x;const p=((x=h.type_color.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))==null?void 0:x[0])||"#000000",g=parseInt(p.slice(1,3),16),y=parseInt(p.slice(3,5),16),T=parseInt(p.slice(5,7),16);return[g,y,T,255]},onHover:({object:h})=>{h&&console.log(`Hovering over ${h.name} (${h.type_name})`)}})];return w.jsxs("div",{className:"relative w-full h-full",onContextMenu:h=>h.preventDefault(),children:[w.jsx(MM,{viewState:e,onViewStateChange:({viewState:h})=>n(h),controller:!0,layers:d,style:{position:"absolute",width:"100%",height:"100%"},children:w.jsx(Hte,{mapboxAccessToken:Yte,mapStyle:t?qte:Kte,reuseMaps:!0,attributionControl:!1})}),w.jsxs("div",{className:`absolute bottom-0 right-0 p-2 z-10 text-xs ${t?"text-gray-400":"text-gray-600"}`,children:[" ",w.jsx("a",{href:"https://www.mapbox.com/about/maps/",target:"_blank",rel:"noopener noreferrer",children:"Mapbox"})," |  ",w.jsx("a",{href:"https://www.openstreetmap.org/about/",target:"_blank",rel:"noopener noreferrer",children:"OpenStreetMap"})," |",w.jsx("a",{href:"https://www.mapbox.com/map-feedback/",target:"_blank",rel:"noopener noreferrer",children:"Improve this map"})]})]})},ene=()=>{const[t,e]=_.useState(!1),[n,r]=_.useState(!1),s=Gu();_.useEffect(()=>{document.body.setAttribute("data-theme",t?"dark":"light")},[t]);const i=u=>{e(u)},o=()=>{r(!0)},l=u=>{s(`/control/${u}`)};return w.jsx(VI,{children:w.jsx("div",{className:"theme-aware-bg flex flex-row justify-center w-full h-screen overflow-hidden",children:w.jsx("div",{className:"w-full h-full relative",children:w.jsxs("div",{className:`h-full ${t?"bg-zinc-900":""}`,children:[w.jsx(Jte,{isDarkMode:t}),w.jsx("div",{className:"absolute top-[50%] left-[17px] -translate-y-1/2 z-10",children:w.jsx(zG,{onDarkModeChange:i,onHistoryClick:o,onControlConsultarClick:l})}),n&&w.jsx($G,{isDarkMode:t,onClose:()=>r(!1)})]})})})})};var NM="AlertDialog",[tne,zre]=ps(NM,[r2]),Ks=r2(),jM=t=>{const{__scopeAlertDialog:e,...n}=t,r=Ks(e);return w.jsx(_2,{...r,...n,modal:!0})};jM.displayName=NM;var nne="AlertDialogTrigger",rne=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ks(n);return w.jsx(f$,{...s,...r,ref:e})});rne.displayName=nne;var sne="AlertDialogPortal",DM=t=>{const{__scopeAlertDialog:e,...n}=t,r=Ks(e);return w.jsx(w2,{...r,...n})};DM.displayName=sne;var ine="AlertDialogOverlay",FM=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ks(n);return w.jsx(O_,{...s,...r,ref:e})});FM.displayName=ine;var vl="AlertDialogContent",[one,ane]=tne(vl),lne=sR("AlertDialogContent"),VM=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=Ks(n),o=_.useRef(null),l=ut(e,o),u=_.useRef(null);return w.jsx(l$,{contentName:vl,titleName:UM,docsSlug:"alert-dialog",children:w.jsx(one,{scope:n,cancelRef:u,children:w.jsxs(M_,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:Ce(s.onOpenAutoFocus,d=>{var h;d.preventDefault(),(h=u.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[w.jsx(lne,{children:r}),w.jsx(fne,{contentRef:o})]})})})});VM.displayName=vl;var UM="AlertDialogTitle",BM=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ks(n);return w.jsx(L_,{...s,...r,ref:e})});BM.displayName=UM;var zM="AlertDialogDescription",$M=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ks(n);return w.jsx(N_,{...s,...r,ref:e})});$M.displayName=zM;var cne="AlertDialogAction",une=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ks(n);return w.jsx(j_,{...s,...r,ref:e})});une.displayName=cne;var GM="AlertDialogCancel",dne=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=ane(GM,n),i=Ks(n),o=ut(e,s);return w.jsx(j_,{...i,...r,ref:o})});dne.displayName=GM;var fne=({contentRef:t})=>{const e=`\`${vl}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${vl}\` by passing a \`${zM}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${vl}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return _.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},hne=jM,pne=DM,WM=FM,HM=VM,qM=BM,KM=$M;const ww=r_("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),mne=_.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?nR:"button";return w.jsx(o,{className:Ge(ww({variant:e,size:n,className:t})),ref:i,...s})});mne.displayName="Button";const gne=hne,vne=pne,YM=_.forwardRef(({className:t,...e},n)=>w.jsx(WM,{className:Ge("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));YM.displayName=WM.displayName;const XM=_.forwardRef(({className:t,...e},n)=>w.jsxs(vne,{children:[w.jsx(YM,{}),w.jsx(HM,{ref:n,className:Ge("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));XM.displayName=HM.displayName;const ZM=({className:t,...e})=>w.jsx("div",{className:Ge("flex flex-col space-y-2 text-center sm:text-left",t),...e});ZM.displayName="AlertDialogHeader";const QM=({className:t,...e})=>w.jsx("div",{className:Ge("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});QM.displayName="AlertDialogFooter";const JM=_.forwardRef(({className:t,...e},n)=>w.jsx(qM,{ref:n,className:Ge("text-lg font-semibold",t),...e}));JM.displayName=qM.displayName;const eL=_.forwardRef(({className:t,...e},n)=>w.jsx(KM,{ref:n,className:Ge("text-sm text-muted-foreground",t),...e}));eL.displayName=KM.displayName;const tL=_.forwardRef(({className:t,...e},n)=>w.jsx("button",{ref:n,className:Ge(ww(),t),...e}));tL.displayName="AlertDialogAction";const nL=_.forwardRef(({className:t,...e},n)=>w.jsx("button",{ref:n,className:Ge(ww({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));nL.displayName="AlertDialogCancel";const Mv=10,yne=({isDarkMode:t,title:e})=>{const n=Gu(),[r,s]=_.useState([]),[i,o]=_.useState(""),[l,u]=_.useState(1),[d,h]=_.useState([]),[p,g]=_.useState(!1),[y,T]=_.useState(null),x=async()=>{try{const{data:B,error:$}=await Tn.from("email_reports").select("*").order("created_at",{ascending:!1});if($)throw $;h(B||[])}catch(B){console.error("Error fetching email reports:",B)}};_.useEffect(()=>{if(e==="e-Mails Relatrio"){x();const B=Tn.channel("email_reports_changes").on("postgres_changes",{event:"*",schema:"public",table:"email_reports"},()=>{x()}).subscribe();return()=>{Tn.removeChannel(B)}}},[e]);const E=async B=>{try{const{error:$}=await Tn.from("email_reports").delete().eq("id",B);if($)throw $;s(G=>G.filter(te=>te!==B)),g(!1),T(null),await x()}catch($){console.error("Error deleting email report:",$)}},A=B=>{T(B),g(!0)},S=B=>{n("/register/e-Mails Relatrio",{state:{editMode:!0,reportData:B}})},C=je.useMemo(()=>{if(!i)return d;const B=i.toLowerCase();return d.filter($=>Object.values($).some(G=>G.toString().toLowerCase().includes(B)))},[i,d]),O=Math.ceil(C.length/Mv),M=je.useMemo(()=>{const B=(l-1)*Mv;return C.slice(B,B+Mv)},[C,l]),D=()=>{r.length===M.length?s([]):s(M.map(B=>B.id))},z=B=>{s($=>$.includes(B)?$.filter(G=>G!==B):[...$,B])};return w.jsxs("div",{className:`w-full h-full p-6 ${t?"bg-zinc-900":"bg-[#EEF3FA]"}`,children:[w.jsxs("div",{className:"max-w-[90dvw] mx-auto relative",children:[w.jsx("h2",{className:`text-lg font-semibold absolute pt-4 left-0 top-0 ${t?"text-gray-300":"text-gray-600"}`,children:e}),w.jsxs("div",{className:"flex flex-col",children:[w.jsx("div",{className:"flex justify-center mb-3",children:w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:"text",placeholder:"Busca por Nome, Tipo...",value:i,onChange:B=>o(B.target.value),className:`w-[300px] h-8 pl-4 pr-8 text-sm rounded-full ${t?"bg-zinc-800 text-gray-200 placeholder-gray-400":"bg-white text-gray-900 placeholder-gray-500"}`}),w.jsx(_0,{className:`absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 ${t?"text-gray-400":"text-gray-500"}`})]})}),w.jsxs("div",{className:"flex justify-center gap-3 mb-3",children:[w.jsxs("button",{onClick:()=>n(`/register/${e}`),className:"px-4 py-1.5 text-xs rounded-full transition-colors flex items-center gap-2 bg-blue-500 text-white hover:bg-blue-600",children:[w.jsx(Kf,{size:14})," ",e]}),w.jsxs("button",{onClick:D,className:`px-4 py-1.5 text-xs rounded-full transition-colors flex items-center gap-2 ${t?"bg-zinc-800 text-gray-300 hover:bg-zinc-700":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[w.jsx(SC,{size:14})," Marcar Tudo"]}),w.jsxs("button",{onClick:()=>s([]),className:`px-4 py-1.5 text-xs rounded-full transition-colors flex items-center gap-2 ${t?"bg-zinc-800 text-gray-300 hover:bg-zinc-700":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[w.jsx(AC,{size:14})," Desmarcar Tudo"]})]}),w.jsx("div",{className:`rounded-lg overflow-hidden shadow-lg ${t?"bg-zinc-800":"bg-white"}`,children:w.jsxs("table",{className:"w-full",children:[w.jsx("thead",{children:w.jsxs("tr",{className:`${t?"bg-zinc-800":"bg-white"} border-b ${t?"border-zinc-700":"border-gray-200"}`,children:[w.jsx("th",{className:"w-12 px-4 py-3"}),w.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Projeto"}),w.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Email"}),w.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Nome"}),w.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Status"}),w.jsx("th",{className:`px-4 py-3 text-center text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Aes"})]})}),w.jsx("tbody",{children:M.length>0?M.map((B,$)=>w.jsxs(tr.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:$*.05},className:`border-t ${t?"border-zinc-700":"border-gray-200"}`,children:[w.jsx("td",{className:"px-4 py-3",children:w.jsx("input",{type:"checkbox",checked:r.includes(B.id),onChange:()=>z(B.id),className:`h-4 w-4 rounded ${t?"text-blue-500 bg-zinc-700 border-zinc-600":"text-blue-600 bg-gray-100 border-gray-300"}`})}),w.jsx("td",{className:`px-4 py-3 text-sm ${t?"text-gray-300":"text-gray-900"}`,children:B.project}),w.jsx("td",{className:`px-4 py-3 text-sm ${t?"text-gray-300":"text-gray-900"}`,children:B.email}),w.jsx("td",{className:`px-4 py-3 text-sm ${t?"text-gray-300":"text-gray-900"}`,children:B.name}),w.jsx("td",{className:`px-4 py-3 text-sm ${t?"text-gray-300":"text-gray-900"}`,children:B.active?"Ativo":"Inativo"}),w.jsx("td",{className:"px-4 py-3",children:w.jsxs("div",{className:"flex items-center justify-center gap-2",children:[w.jsx("button",{className:`p-1.5 rounded-lg transition-colors ${t?"hover:bg-zinc-700":"hover:bg-gray-100"}`,onClick:()=>S(B),children:w.jsx(EC,{className:"w-4 h-4"})}),w.jsx("button",{className:`p-1.5 rounded-lg transition-colors ${t?"hover:bg-zinc-700":"hover:bg-gray-100"}`,onClick:()=>A(B.id),children:w.jsx(R3,{className:"w-4 h-4 text-destructive"})})]})})]},B.id)):w.jsx("tr",{children:w.jsx("td",{colSpan:6,className:`text-center text-sm py-3 ${t?"text-gray-400":"text-gray-500"}`,children:"Nenhum dado encontrado na tabela."})})})]})}),M.length>0&&w.jsx("div",{className:"flex justify-center mt-4",children:w.jsx("div",{className:`flex gap-1 rounded-lg shadow-md p-0.5 ${t?"bg-zinc-800":"bg-white"}`,children:Array.from({length:O},(B,$)=>w.jsx("button",{onClick:()=>u($+1),className:`px-3 py-1 rounded-md ${l===$+1?"bg-blue-500 text-white":t?"text-gray-300 hover:bg-zinc-700":"text-gray-600 hover:bg-gray-100"}`,children:$+1},$+1))})})]})]}),w.jsx(gne,{open:p,onOpenChange:g,children:w.jsxs(XM,{className:t?"bg-zinc-800 border-zinc-700":"",children:[w.jsxs(ZM,{children:[w.jsx(JM,{className:t?"text-gray-200":"",children:"Confirmar excluso"}),w.jsx(eL,{className:t?"text-gray-400":"",children:"Tem certeza que deseja excluir este registro? Esta ao no pode ser desfeita."})]}),w.jsxs(QM,{children:[w.jsx(nL,{className:t?"bg-zinc-700 text-gray-200 hover:bg-zinc-600":"",onClick:()=>{g(!1),T(null)},children:"Cancelar"}),w.jsx(tL,{className:"bg-red-600 text-white hover:bg-red-700",onClick:()=>y&&E(y),children:"Excluir"})]})]})})]})},_ne=()=>{const{section:t}=qj();Gu();const[e,n]=_.useState(!1);return w.jsx("div",{className:`min-h-screen ${e?"bg-zinc-900":"bg-[#EFF4FA]"}`,children:w.jsx(yne,{isDarkMode:e,title:t||""})})};var fd=t=>t.type==="checkbox",No=t=>t instanceof Date,Pn=t=>t==null;const rL=t=>typeof t=="object";var Ut=t=>!Pn(t)&&!Array.isArray(t)&&rL(t)&&!No(t),sL=t=>Ut(t)&&t.target?fd(t.target)?t.target.checked:t.target.value:t,wne=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,iL=(t,e)=>t.has(wne(e)),xne=t=>{const e=t.constructor&&t.constructor.prototype;return Ut(e)&&e.hasOwnProperty("isPrototypeOf")},xw=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function dn(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(xw&&(t instanceof Blob||r))&&(n||Ut(t)))if(e=n?[]:{},!n&&!xne(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=dn(t[s]));else return t;return e}var jp=t=>Array.isArray(t)?t.filter(Boolean):[],Vt=t=>t===void 0,ye=(t,e,n)=>{if(!e||!Ut(t))return n;const r=jp(e.split(/[,[\].]+?/)).reduce((s,i)=>Pn(s)?s:s[i],t);return Vt(r)||r===t?Vt(t[e])?n:t[e]:r},rr=t=>typeof t=="boolean",bw=t=>/^\w*$/.test(t),oL=t=>jp(t.replace(/["|']|\]/g,"").split(/\.|\[/)),dt=(t,e,n)=>{let r=-1;const s=bw(e)?[e]:oL(e),i=s.length,o=i-1;for(;++r<i;){const l=s[r];let u=n;if(r!==o){const d=t[l];u=Ut(d)||Array.isArray(d)?d:isNaN(+s[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=u,t=t[l]}};const Uh={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},jr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Is={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},aL=je.createContext(null),Dp=()=>je.useContext(aL),bne=t=>{const{children:e,...n}=t;return je.createElement(aL.Provider,{value:n},e)};var lL=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==jr.all&&(e._proxyFormState[o]=!r||jr.all),n&&(n[o]=!0),t[o]}});return s};const Ew=typeof window<"u"?_.useLayoutEffect:_.useEffect;function Ene(t){const e=Dp(),{control:n=e.control,disabled:r,name:s,exact:i}=t||{},[o,l]=je.useState(n._formState),u=je.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Ew(()=>n._subscribe({name:s,formState:u.current,exact:i,callback:d=>{!r&&l({...n._formState,...d})}}),[s,r,i]),je.useEffect(()=>{u.current.isValid&&n._setValid(!0)},[n]),je.useMemo(()=>lL(o,n,u.current,!1),[o,n])}var is=t=>typeof t=="string",cL=(t,e,n,r,s)=>is(t)?(r&&e.watch.add(t),ye(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),ye(n,i))):(r&&(e.watchAll=!0),n);function Tne(t){const e=Dp(),{control:n=e.control,name:r,defaultValue:s,disabled:i,exact:o}=t||{},l=je.useRef(s),[u,d]=je.useState(n._getWatch(r,l.current));return Ew(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:h=>!i&&d(cL(r,n._names,h.values||n._formValues,!1,l.current))}),[r,n,i,o]),je.useEffect(()=>n._removeUnmounted()),u}function Sne(t){const e=Dp(),{name:n,disabled:r,control:s=e.control,shouldUnregister:i}=t,o=iL(s._names.array,n),l=Tne({control:s,name:n,defaultValue:ye(s._formValues,n,ye(s._defaultValues,n,t.defaultValue)),exact:!0}),u=Ene({control:s,name:n,exact:!0}),d=je.useRef(t),h=je.useRef(s.register(n,{...t.rules,value:l,...rr(t.disabled)?{disabled:t.disabled}:{}})),p=je.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ye(u.errors,n)},isDirty:{enumerable:!0,get:()=>!!ye(u.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!ye(u.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!ye(u.validatingFields,n)},error:{enumerable:!0,get:()=>ye(u.errors,n)}}),[u,n]),g=je.useCallback(E=>h.current.onChange({target:{value:sL(E),name:n},type:Uh.CHANGE}),[n]),y=je.useCallback(()=>h.current.onBlur({target:{value:ye(s._formValues,n),name:n},type:Uh.BLUR}),[n,s._formValues]),T=je.useCallback(E=>{const A=ye(s._fields,n);A&&E&&(A._f.ref={focus:()=>E.focus(),select:()=>E.select(),setCustomValidity:S=>E.setCustomValidity(S),reportValidity:()=>E.reportValidity()})},[s._fields,n]),x=je.useMemo(()=>({name:n,value:l,...rr(r)||u.disabled?{disabled:u.disabled||r}:{},onChange:g,onBlur:y,ref:T}),[n,r,u.disabled,g,y,T,l]);return je.useEffect(()=>{const E=s._options.shouldUnregister||i;s.register(n,{...d.current.rules,...rr(d.current.disabled)?{disabled:d.current.disabled}:{}});const A=(S,C)=>{const O=ye(s._fields,S);O&&O._f&&(O._f.mount=C)};if(A(n,!0),E){const S=dn(ye(s._options.defaultValues,n));dt(s._defaultValues,n,S),Vt(ye(s._formValues,n))&&dt(s._formValues,n,S)}return!o&&s.register(n),()=>{(o?E&&!s._state.action:E)?s.unregister(n):A(n,!1)}},[n,s,o,i]),je.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),je.useMemo(()=>({field:x,formState:u,fieldState:p}),[x,u,p])}const Ane=t=>t.render(Sne(t));var uL=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},yu=t=>Array.isArray(t)?t:[t],MA=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}},i0=t=>Pn(t)||!rL(t);function Fi(t,e){if(i0(t)||i0(e))return t===e;if(No(t)&&No(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const i=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=e[s];if(No(i)&&No(o)||Ut(i)&&Ut(o)||Array.isArray(i)&&Array.isArray(o)?!Fi(i,o):i!==o)return!1}}return!0}var Cn=t=>Ut(t)&&!Object.keys(t).length,Tw=t=>t.type==="file",Dr=t=>typeof t=="function",Bh=t=>{if(!xw)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},dL=t=>t.type==="select-multiple",Sw=t=>t.type==="radio",Cne=t=>Sw(t)||fd(t),Lv=t=>Bh(t)&&t.isConnected;function Pne(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Vt(t)?r++:t[e[r++]];return t}function Rne(t){for(const e in t)if(t.hasOwnProperty(e)&&!Vt(t[e]))return!1;return!0}function Xt(t,e){const n=Array.isArray(e)?e:bw(e)?[e]:oL(e),r=n.length===1?t:Pne(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(Ut(r)&&Cn(r)||Array.isArray(r)&&Rne(r))&&Xt(t,n.slice(0,-1)),t}var fL=t=>{for(const e in t)if(Dr(t[e]))return!0;return!1};function zh(t,e={}){const n=Array.isArray(t);if(Ut(t)||n)for(const r in t)Array.isArray(t[r])||Ut(t[r])&&!fL(t[r])?(e[r]=Array.isArray(t[r])?[]:{},zh(t[r],e[r])):Pn(t[r])||(e[r]=!0);return e}function hL(t,e,n){const r=Array.isArray(t);if(Ut(t)||r)for(const s in t)Array.isArray(t[s])||Ut(t[s])&&!fL(t[s])?Vt(e)||i0(n[s])?n[s]=Array.isArray(t[s])?zh(t[s],[]):{...zh(t[s])}:hL(t[s],Pn(e)?{}:e[s],n[s]):n[s]=!Fi(t[s],e[s]);return n}var qc=(t,e)=>hL(t,e,zh(e));const LA={value:!1,isValid:!1},NA={value:!0,isValid:!0};var pL=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Vt(t[0].attributes.value)?Vt(t[0].value)||t[0].value===""?NA:{value:t[0].value,isValid:!0}:NA:LA}return LA},mL=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Vt(t)?t:e?t===""?NaN:t&&+t:n&&is(t)?new Date(t):r?r(t):t;const jA={isValid:!1,value:null};var gL=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,jA):jA;function DA(t){const e=t.ref;return Tw(e)?e.files:Sw(e)?gL(t.refs).value:dL(e)?[...e.selectedOptions].map(({value:n})=>n):fd(e)?pL(t.refs).value:mL(Vt(e.value)?t.ref.value:e.value,t)}var kne=(t,e,n,r)=>{const s={};for(const i of t){const o=ye(e,i);o&&dt(s,i,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},$h=t=>t instanceof RegExp,Kc=t=>Vt(t)?t:$h(t)?t.source:Ut(t)?$h(t.value)?t.value.source:t.value:t,FA=t=>({isOnSubmit:!t||t===jr.onSubmit,isOnBlur:t===jr.onBlur,isOnChange:t===jr.onChange,isOnAll:t===jr.all,isOnTouch:t===jr.onTouched});const VA="AsyncFunction";var Ine=t=>!!t&&!!t.validate&&!!(Dr(t.validate)&&t.validate.constructor.name===VA||Ut(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===VA)),One=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),UA=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const _u=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=ye(t,s);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(_u(l,e))break}else if(Ut(l)&&_u(l,e))break}}};function BA(t,e,n){const r=ye(t,n);if(r||bw(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),o=ye(e,i),l=ye(t,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(l&&l.type)return{name:i,error:l};s.pop()}return{name:n}}var Mne=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return Cn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||jr.all))},Lne=(t,e,n)=>!t||!e||t===e||yu(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),Nne=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,jne=(t,e)=>!jp(ye(t,e)).length&&Xt(t,e),Dne=(t,e,n)=>{const r=yu(ye(t,n));return dt(r,"root",e[n]),dt(t,n,r),t},lh=t=>is(t);function zA(t,e,n="validate"){if(lh(t)||Array.isArray(t)&&t.every(lh)||rr(t)&&!t)return{type:n,message:lh(t)?t:"",ref:e}}var Ja=t=>Ut(t)&&!$h(t)?t:{value:t,message:""},$A=async(t,e,n,r,s,i)=>{const{ref:o,refs:l,required:u,maxLength:d,minLength:h,min:p,max:g,pattern:y,validate:T,name:x,valueAsNumber:E,mount:A}=t._f,S=ye(n,x);if(!A||e.has(x))return{};const C=l?l[0]:o,O=Q=>{s&&C.reportValidity&&(C.setCustomValidity(rr(Q)?"":Q||""),C.reportValidity())},M={},D=Sw(o),z=fd(o),B=D||z,$=(E||Tw(o))&&Vt(o.value)&&Vt(S)||Bh(o)&&o.value===""||S===""||Array.isArray(S)&&!S.length,G=uL.bind(null,x,r,M),te=(Q,se,re,ge=Is.maxLength,ue=Is.minLength)=>{const pe=Q?se:re;M[x]={type:Q?ge:ue,message:pe,ref:o,...G(Q?ge:ue,pe)}};if(i?!Array.isArray(S)||!S.length:u&&(!B&&($||Pn(S))||rr(S)&&!S||z&&!pL(l).isValid||D&&!gL(l).isValid)){const{value:Q,message:se}=lh(u)?{value:!!u,message:u}:Ja(u);if(Q&&(M[x]={type:Is.required,message:se,ref:C,...G(Is.required,se)},!r))return O(se),M}if(!$&&(!Pn(p)||!Pn(g))){let Q,se;const re=Ja(g),ge=Ja(p);if(!Pn(S)&&!isNaN(S)){const ue=o.valueAsNumber||S&&+S;Pn(re.value)||(Q=ue>re.value),Pn(ge.value)||(se=ue<ge.value)}else{const ue=o.valueAsDate||new Date(S),pe=ne=>new Date(new Date().toDateString()+" "+ne),X=o.type=="time",Z=o.type=="week";is(re.value)&&S&&(Q=X?pe(S)>pe(re.value):Z?S>re.value:ue>new Date(re.value)),is(ge.value)&&S&&(se=X?pe(S)<pe(ge.value):Z?S<ge.value:ue<new Date(ge.value))}if((Q||se)&&(te(!!Q,re.message,ge.message,Is.max,Is.min),!r))return O(M[x].message),M}if((d||h)&&!$&&(is(S)||i&&Array.isArray(S))){const Q=Ja(d),se=Ja(h),re=!Pn(Q.value)&&S.length>+Q.value,ge=!Pn(se.value)&&S.length<+se.value;if((re||ge)&&(te(re,Q.message,se.message),!r))return O(M[x].message),M}if(y&&!$&&is(S)){const{value:Q,message:se}=Ja(y);if($h(Q)&&!S.match(Q)&&(M[x]={type:Is.pattern,message:se,ref:o,...G(Is.pattern,se)},!r))return O(se),M}if(T){if(Dr(T)){const Q=await T(S,n),se=zA(Q,C);if(se&&(M[x]={...se,...G(Is.validate,se.message)},!r))return O(se.message),M}else if(Ut(T)){let Q={};for(const se in T){if(!Cn(Q)&&!r)break;const re=zA(await T[se](S,n),C,se);re&&(Q={...re,...G(se,re.message)},O(re.message),r&&(M[x]=Q))}if(!Cn(Q)&&(M[x]={ref:C,...Q},!r))return M}}return O(!0),M};const Fne={mode:jr.onSubmit,reValidateMode:jr.onChange,shouldFocusError:!0};function Vne(t={}){let e={...Fne,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Dr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let s=Ut(e.defaultValues)||Ut(e.values)?dn(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:dn(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,d=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...h};const g={array:MA(),state:MA()},y=e.criteriaMode===jr.all,T=j=>W=>{clearTimeout(d),d=setTimeout(j,W)},x=async j=>{if(!e.disabled&&(h.isValid||p.isValid||j)){const W=e.resolver?Cn((await z()).errors):await $(r,!0);W!==n.isValid&&g.state.next({isValid:W})}},E=(j,W)=>{!e.disabled&&(h.isValidating||h.validatingFields||p.isValidating||p.validatingFields)&&((j||Array.from(l.mount)).forEach(ee=>{ee&&(W?dt(n.validatingFields,ee,W):Xt(n.validatingFields,ee))}),g.state.next({validatingFields:n.validatingFields,isValidating:!Cn(n.validatingFields)}))},A=(j,W=[],ee,_e,me=!0,fe=!0)=>{if(_e&&ee&&!e.disabled){if(o.action=!0,fe&&Array.isArray(ye(r,j))){const Me=ee(ye(r,j),_e.argA,_e.argB);me&&dt(r,j,Me)}if(fe&&Array.isArray(ye(n.errors,j))){const Me=ee(ye(n.errors,j),_e.argA,_e.argB);me&&dt(n.errors,j,Me),jne(n.errors,j)}if((h.touchedFields||p.touchedFields)&&fe&&Array.isArray(ye(n.touchedFields,j))){const Me=ee(ye(n.touchedFields,j),_e.argA,_e.argB);me&&dt(n.touchedFields,j,Me)}(h.dirtyFields||p.dirtyFields)&&(n.dirtyFields=qc(s,i)),g.state.next({name:j,isDirty:te(j,W),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else dt(i,j,W)},S=(j,W)=>{dt(n.errors,j,W),g.state.next({errors:n.errors})},C=j=>{n.errors=j,g.state.next({errors:n.errors,isValid:!1})},O=(j,W,ee,_e)=>{const me=ye(r,j);if(me){const fe=ye(i,j,Vt(ee)?ye(s,j):ee);Vt(fe)||_e&&_e.defaultChecked||W?dt(i,j,W?fe:DA(me._f)):re(j,fe),o.mount&&x()}},M=(j,W,ee,_e,me)=>{let fe=!1,Me=!1;const tt={name:j};if(!e.disabled){if(!ee||_e){(h.isDirty||p.isDirty)&&(Me=n.isDirty,n.isDirty=tt.isDirty=te(),fe=Me!==tt.isDirty);const st=Fi(ye(s,j),W);Me=!!ye(n.dirtyFields,j),st?Xt(n.dirtyFields,j):dt(n.dirtyFields,j,!0),tt.dirtyFields=n.dirtyFields,fe=fe||(h.dirtyFields||p.dirtyFields)&&Me!==!st}if(ee){const st=ye(n.touchedFields,j);st||(dt(n.touchedFields,j,ee),tt.touchedFields=n.touchedFields,fe=fe||(h.touchedFields||p.touchedFields)&&st!==ee)}fe&&me&&g.state.next(tt)}return fe?tt:{}},D=(j,W,ee,_e)=>{const me=ye(n.errors,j),fe=(h.isValid||p.isValid)&&rr(W)&&n.isValid!==W;if(e.delayError&&ee?(u=T(()=>S(j,ee)),u(e.delayError)):(clearTimeout(d),u=null,ee?dt(n.errors,j,ee):Xt(n.errors,j)),(ee?!Fi(me,ee):me)||!Cn(_e)||fe){const Me={..._e,...fe&&rr(W)?{isValid:W}:{},errors:n.errors,name:j};n={...n,...Me},g.state.next(Me)}},z=async j=>{E(j,!0);const W=await e.resolver(i,e.context,kne(j||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return E(j),W},B=async j=>{const{errors:W}=await z(j);if(j)for(const ee of j){const _e=ye(W,ee);_e?dt(n.errors,ee,_e):Xt(n.errors,ee)}else n.errors=W;return W},$=async(j,W,ee={valid:!0})=>{for(const _e in j){const me=j[_e];if(me){const{_f:fe,...Me}=me;if(fe){const tt=l.array.has(fe.name),st=me._f&&Ine(me._f);st&&h.validatingFields&&E([_e],!0);const en=await $A(me,l.disabled,i,y,e.shouldUseNativeValidation&&!W,tt);if(st&&h.validatingFields&&E([_e]),en[fe.name]&&(ee.valid=!1,W))break;!W&&(ye(en,fe.name)?tt?Dne(n.errors,en,fe.name):dt(n.errors,fe.name,en[fe.name]):Xt(n.errors,fe.name))}!Cn(Me)&&await $(Me,W,ee)}}return ee.valid},G=()=>{for(const j of l.unMount){const W=ye(r,j);W&&(W._f.refs?W._f.refs.every(ee=>!Lv(ee)):!Lv(W._f.ref))&&le(j)}l.unMount=new Set},te=(j,W)=>!e.disabled&&(j&&W&&dt(i,j,W),!Fi(ne(),s)),Q=(j,W,ee)=>cL(j,l,{...o.mount?i:Vt(W)?s:is(j)?{[j]:W}:W},ee,W),se=j=>jp(ye(o.mount?i:s,j,e.shouldUnregister?ye(s,j,[]):[])),re=(j,W,ee={})=>{const _e=ye(r,j);let me=W;if(_e){const fe=_e._f;fe&&(!fe.disabled&&dt(i,j,mL(W,fe)),me=Bh(fe.ref)&&Pn(W)?"":W,dL(fe.ref)?[...fe.ref.options].forEach(Me=>Me.selected=me.includes(Me.value)):fe.refs?fd(fe.ref)?fe.refs.forEach(Me=>{(!Me.defaultChecked||!Me.disabled)&&(Array.isArray(me)?Me.checked=!!me.find(tt=>tt===Me.value):Me.checked=me===Me.value||!!me)}):fe.refs.forEach(Me=>Me.checked=Me.value===me):Tw(fe.ref)?fe.ref.value="":(fe.ref.value=me,fe.ref.type||g.state.next({name:j,values:dn(i)})))}(ee.shouldDirty||ee.shouldTouch)&&M(j,me,ee.shouldTouch,ee.shouldDirty,!0),ee.shouldValidate&&Z(j)},ge=(j,W,ee)=>{for(const _e in W){if(!W.hasOwnProperty(_e))return;const me=W[_e],fe=`${j}.${_e}`,Me=ye(r,fe);(l.array.has(j)||Ut(me)||Me&&!Me._f)&&!No(me)?ge(fe,me,ee):re(fe,me,ee)}},ue=(j,W,ee={})=>{const _e=ye(r,j),me=l.array.has(j),fe=dn(W);dt(i,j,fe),me?(g.array.next({name:j,values:dn(i)}),(h.isDirty||h.dirtyFields||p.isDirty||p.dirtyFields)&&ee.shouldDirty&&g.state.next({name:j,dirtyFields:qc(s,i),isDirty:te(j,fe)})):_e&&!_e._f&&!Pn(fe)?ge(j,fe,ee):re(j,fe,ee),UA(j,l)&&g.state.next({...n}),g.state.next({name:o.mount?j:void 0,values:dn(i)})},pe=async j=>{o.mount=!0;const W=j.target;let ee=W.name,_e=!0;const me=ye(r,ee),fe=st=>{_e=Number.isNaN(st)||No(st)&&isNaN(st.getTime())||Fi(st,ye(i,ee,st))},Me=FA(e.mode),tt=FA(e.reValidateMode);if(me){let st,en;const $n=W.type?DA(me._f):sL(j),Wt=j.type===Uh.BLUR||j.type===Uh.FOCUS_OUT,no=!One(me._f)&&!e.resolver&&!ye(n.errors,ee)&&!me._f.deps||Nne(Wt,ye(n.touchedFields,ee),n.isSubmitted,tt,Me),Xs=UA(ee,l,Wt);dt(i,ee,$n),Wt?(me._f.onBlur&&me._f.onBlur(j),u&&u(0)):me._f.onChange&&me._f.onChange(j);const Zs=M(ee,$n,Wt),Yl=!Cn(Zs)||Xs;if(!Wt&&g.state.next({name:ee,type:j.type,values:dn(i)}),no)return(h.isValid||p.isValid)&&(e.mode==="onBlur"?Wt&&x():Wt||x()),Yl&&g.state.next({name:ee,...Xs?{}:Zs});if(!Wt&&Xs&&g.state.next({...n}),e.resolver){const{errors:Qs}=await z([ee]);if(fe($n),_e){const ro=BA(n.errors,r,ee),Sr=BA(Qs,r,ro.name||ee);st=Sr.error,ee=Sr.name,en=Cn(Qs)}}else E([ee],!0),st=(await $A(me,l.disabled,i,y,e.shouldUseNativeValidation))[ee],E([ee]),fe($n),_e&&(st?en=!1:(h.isValid||p.isValid)&&(en=await $(r,!0)));_e&&(me._f.deps&&Z(me._f.deps),D(ee,en,st,Zs))}},X=(j,W)=>{if(ye(n.errors,W)&&j.focus)return j.focus(),1},Z=async(j,W={})=>{let ee,_e;const me=yu(j);if(e.resolver){const fe=await B(Vt(j)?j:me);ee=Cn(fe),_e=j?!me.some(Me=>ye(fe,Me)):ee}else j?(_e=(await Promise.all(me.map(async fe=>{const Me=ye(r,fe);return await $(Me&&Me._f?{[fe]:Me}:Me)}))).every(Boolean),!(!_e&&!n.isValid)&&x()):_e=ee=await $(r);return g.state.next({...!is(j)||(h.isValid||p.isValid)&&ee!==n.isValid?{}:{name:j},...e.resolver||!j?{isValid:ee}:{},errors:n.errors}),W.shouldFocus&&!_e&&_u(r,X,j?me:l.mount),_e},ne=j=>{const W={...o.mount?i:s};return Vt(j)?W:is(j)?ye(W,j):j.map(ee=>ye(W,ee))},V=(j,W)=>({invalid:!!ye((W||n).errors,j),isDirty:!!ye((W||n).dirtyFields,j),error:ye((W||n).errors,j),isValidating:!!ye(n.validatingFields,j),isTouched:!!ye((W||n).touchedFields,j)}),J=j=>{j&&yu(j).forEach(W=>Xt(n.errors,W)),g.state.next({errors:j?n.errors:{}})},De=(j,W,ee)=>{const _e=(ye(r,j,{_f:{}})._f||{}).ref,me=ye(n.errors,j)||{},{ref:fe,message:Me,type:tt,...st}=me;dt(n.errors,j,{...st,...W,ref:_e}),g.state.next({name:j,errors:n.errors,isValid:!1}),ee&&ee.shouldFocus&&_e&&_e.focus&&_e.focus()},Ne=(j,W)=>Dr(j)?g.state.subscribe({next:ee=>j(Q(void 0,W),ee)}):Q(j,W,!0),ze=j=>g.state.subscribe({next:W=>{Lne(j.name,W.name,j.exact)&&Mne(W,j.formState||h,Gt,j.reRenderRoot)&&j.callback({values:{...i},...n,...W})}}).unsubscribe,Ue=j=>(o.mount=!0,p={...p,...j.formState},ze({...j,formState:p})),le=(j,W={})=>{for(const ee of j?yu(j):l.mount)l.mount.delete(ee),l.array.delete(ee),W.keepValue||(Xt(r,ee),Xt(i,ee)),!W.keepError&&Xt(n.errors,ee),!W.keepDirty&&Xt(n.dirtyFields,ee),!W.keepTouched&&Xt(n.touchedFields,ee),!W.keepIsValidating&&Xt(n.validatingFields,ee),!e.shouldUnregister&&!W.keepDefaultValue&&Xt(s,ee);g.state.next({values:dn(i)}),g.state.next({...n,...W.keepDirty?{isDirty:te()}:{}}),!W.keepIsValid&&x()},Te=({disabled:j,name:W})=>{(rr(j)&&o.mount||j||l.disabled.has(W))&&(j?l.disabled.add(W):l.disabled.delete(W))},ve=(j,W={})=>{let ee=ye(r,j);const _e=rr(W.disabled)||rr(e.disabled);return dt(r,j,{...ee||{},_f:{...ee&&ee._f?ee._f:{ref:{name:j}},name:j,mount:!0,...W}}),l.mount.add(j),ee?Te({disabled:rr(W.disabled)?W.disabled:e.disabled,name:j}):O(j,!0,W.value),{..._e?{disabled:W.disabled||e.disabled}:{},...e.progressive?{required:!!W.required,min:Kc(W.min),max:Kc(W.max),minLength:Kc(W.minLength),maxLength:Kc(W.maxLength),pattern:Kc(W.pattern)}:{},name:j,onChange:pe,onBlur:pe,ref:me=>{if(me){ve(j,W),ee=ye(r,j);const fe=Vt(me.value)&&me.querySelectorAll&&me.querySelectorAll("input,select,textarea")[0]||me,Me=Cne(fe),tt=ee._f.refs||[];if(Me?tt.find(st=>st===fe):fe===ee._f.ref)return;dt(r,j,{_f:{...ee._f,...Me?{refs:[...tt.filter(Lv),fe,...Array.isArray(ye(s,j))?[{}]:[]],ref:{type:fe.type,name:j}}:{ref:fe}}}),O(j,!1,void 0,fe)}else ee=ye(r,j,{}),ee._f&&(ee._f.mount=!1),(e.shouldUnregister||W.shouldUnregister)&&!(iL(l.array,j)&&o.action)&&l.unMount.add(j)}}},ke=()=>e.shouldFocusError&&_u(r,X,l.mount),Ye=j=>{rr(j)&&(g.state.next({disabled:j}),_u(r,(W,ee)=>{const _e=ye(r,ee);_e&&(W.disabled=_e._f.disabled||j,Array.isArray(_e._f.refs)&&_e._f.refs.forEach(me=>{me.disabled=_e._f.disabled||j}))},0,!1))},Xe=(j,W)=>async ee=>{let _e;ee&&(ee.preventDefault&&ee.preventDefault(),ee.persist&&ee.persist());let me=dn(i);if(g.state.next({isSubmitting:!0}),e.resolver){const{errors:fe,values:Me}=await z();n.errors=fe,me=Me}else await $(r);if(l.disabled.size)for(const fe of l.disabled)dt(me,fe,void 0);if(Xt(n.errors,"root"),Cn(n.errors)){g.state.next({errors:{}});try{await j(me,ee)}catch(fe){_e=fe}}else W&&await W({...n.errors},ee),ke(),setTimeout(ke);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Cn(n.errors)&&!_e,submitCount:n.submitCount+1,errors:n.errors}),_e)throw _e},mt=(j,W={})=>{ye(r,j)&&(Vt(W.defaultValue)?ue(j,dn(ye(s,j))):(ue(j,W.defaultValue),dt(s,j,dn(W.defaultValue))),W.keepTouched||Xt(n.touchedFields,j),W.keepDirty||(Xt(n.dirtyFields,j),n.isDirty=W.defaultValue?te(j,dn(ye(s,j))):te()),W.keepError||(Xt(n.errors,j),h.isValid&&x()),g.state.next({...n}))},Ct=(j,W={})=>{const ee=j?dn(j):s,_e=dn(ee),me=Cn(j),fe=me?s:_e;if(W.keepDefaultValues||(s=ee),!W.keepValues){if(W.keepDirtyValues){const Me=new Set([...l.mount,...Object.keys(qc(s,i))]);for(const tt of Array.from(Me))ye(n.dirtyFields,tt)?dt(fe,tt,ye(i,tt)):ue(tt,ye(fe,tt))}else{if(xw&&Vt(j))for(const Me of l.mount){const tt=ye(r,Me);if(tt&&tt._f){const st=Array.isArray(tt._f.refs)?tt._f.refs[0]:tt._f.ref;if(Bh(st)){const en=st.closest("form");if(en){en.reset();break}}}}for(const Me of l.mount)ue(Me,ye(fe,Me))}i=dn(fe),g.array.next({values:{...fe}}),g.state.next({values:{...fe}})}l={mount:W.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!W.keepIsValid||!!W.keepDirtyValues,o.watch=!!e.shouldUnregister,g.state.next({submitCount:W.keepSubmitCount?n.submitCount:0,isDirty:me?!1:W.keepDirty?n.isDirty:!!(W.keepDefaultValues&&!Fi(j,s)),isSubmitted:W.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:me?{}:W.keepDirtyValues?W.keepDefaultValues&&i?qc(s,i):n.dirtyFields:W.keepDefaultValues&&j?qc(s,j):W.keepDirty?n.dirtyFields:{},touchedFields:W.keepTouched?n.touchedFields:{},errors:W.keepErrors?n.errors:{},isSubmitSuccessful:W.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},an=(j,W)=>Ct(Dr(j)?j(i):j,W),Lt=(j,W={})=>{const ee=ye(r,j),_e=ee&&ee._f;if(_e){const me=_e.refs?_e.refs[0]:_e.ref;me.focus&&(me.focus(),W.shouldSelect&&Dr(me.select)&&me.select())}},Gt=j=>{n={...n,...j}},On={control:{register:ve,unregister:le,getFieldState:V,handleSubmit:Xe,setError:De,_subscribe:ze,_runSchema:z,_getWatch:Q,_getDirty:te,_setValid:x,_setFieldArray:A,_setDisabledField:Te,_setErrors:C,_getFieldArray:se,_reset:Ct,_resetDefaultValues:()=>Dr(e.defaultValues)&&e.defaultValues().then(j=>{an(j,e.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:G,_disableForm:Ye,_subjects:g,_proxyFormState:h,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(j){o=j},get _defaultValues(){return s},get _names(){return l},set _names(j){l=j},get _formState(){return n},get _options(){return e},set _options(j){e={...e,...j}}},subscribe:Ue,trigger:Z,register:ve,handleSubmit:Xe,watch:Ne,setValue:ue,getValues:ne,reset:an,resetField:mt,clearErrors:J,unregister:le,setError:De,setFocus:Lt,getFieldState:V};return{...On,formControl:On}}function Une(t={}){const e=je.useRef(void 0),n=je.useRef(void 0),[r,s]=je.useState({isDirty:!1,isValidating:!1,isLoading:Dr(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Dr(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:Vne(t),formState:r},t.formControl&&t.defaultValues&&!Dr(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const i=e.current.control;return i._options=t,Ew(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),je.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),je.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode),t.errors&&!Cn(t.errors)&&i._setErrors(t.errors)},[i,t.errors,t.mode,t.reValidateMode]),je.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),je.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),je.useEffect(()=>{t.values&&!Fi(t.values,n.current)?(i._reset(t.values,i._options.resetOptions),n.current=t.values,s(o=>({...o}))):i._resetDefaultValues()},[i,t.values]),je.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=lL(r,i),e.current}const Bne=bne,vL=_.createContext({}),zne=({...t})=>w.jsx(vL.Provider,{value:{name:t.name},children:w.jsx(Ane,{...t})}),Fp=()=>{const t=_.useContext(vL),e=_.useContext(yL),{getFieldState:n,formState:r}=Dp(),s=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},yL=_.createContext({}),_L=_.forwardRef(({className:t,...e},n)=>{const r=_.useId();return w.jsx(yL.Provider,{value:{id:r},children:w.jsx("div",{ref:n,className:Ge("space-y-2",t),...e})})});_L.displayName="FormItem";const o0=_.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:s}=Fp();return w.jsx(Io,{ref:n,className:Ge(r&&"text-destructive",t),htmlFor:s,...e})});o0.displayName="FormLabel";const wL=_.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:s,formMessageId:i}=Fp();return w.jsx(nR,{ref:e,id:r,"aria-describedby":n?`${s} ${i}`:`${s}`,"aria-invalid":!!n,...t})});wL.displayName="FormControl";const $ne=_.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=Fp();return w.jsx("p",{ref:n,id:r,className:Ge("text-sm text-muted-foreground",t),...e})});$ne.displayName="FormDescription";const Gne=_.forwardRef(({className:t,children:e,...n},r)=>{const{error:s,formMessageId:i}=Fp(),o=s?String(s==null?void 0:s.message):e;return o?w.jsx("p",{ref:r,id:i,className:Ge("text-sm font-medium text-destructive",t),...n,children:o}):null});Gne.displayName="FormMessage";var ct;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of i)o[l]=s[l];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ct||(ct={}));var GA;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(GA||(GA={}));const Re=ct.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ji=t=>{switch(typeof t){case"undefined":return Re.undefined;case"string":return Re.string;case"number":return Number.isNaN(t)?Re.nan:Re.number;case"boolean":return Re.boolean;case"function":return Re.function;case"bigint":return Re.bigint;case"symbol":return Re.symbol;case"object":return Array.isArray(t)?Re.array:t===null?Re.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Re.promise:typeof Map<"u"&&t instanceof Map?Re.map:typeof Set<"u"&&t instanceof Set?Re.set:typeof Date<"u"&&t instanceof Date?Re.date:Re.object;default:return Re.unknown}},he=ct.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Gs extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(n(o))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}};return s(this),r}static assert(e){if(!(e instanceof Gs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ct.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Gs.create=t=>new Gs(t);const a0=(t,e)=>{let n;switch(t.code){case he.invalid_type:t.received===Re.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case he.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ct.jsonStringifyReplacer)}`;break;case he.unrecognized_keys:n=`Unrecognized key(s) in object: ${ct.joinValues(t.keys,", ")}`;break;case he.invalid_union:n="Invalid input";break;case he.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ct.joinValues(t.options)}`;break;case he.invalid_enum_value:n=`Invalid enum value. Expected ${ct.joinValues(t.options)}, received '${t.received}'`;break;case he.invalid_arguments:n="Invalid function arguments";break;case he.invalid_return_type:n="Invalid function return type";break;case he.invalid_date:n="Invalid date";break;case he.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ct.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case he.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case he.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case he.custom:n="Invalid input";break;case he.invalid_intersection_types:n="Intersection results could not be merged";break;case he.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case he.not_finite:n="Number must be finite";break;default:n=e.defaultError,ct.assertNever(t)}return{message:n}};let Wne=a0;function Hne(){return Wne}const qne=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let l="";const u=r.filter(d=>!!d).slice().reverse();for(const d of u)l=d(o,{data:e,defaultError:l}).message;return{...s,path:i,message:l}};function Ee(t,e){const n=Hne(),r=qne({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===a0?void 0:a0].filter(s=>!!s)});t.common.issues.push(r)}class dr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return He;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return dr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return He;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const He=Object.freeze({status:"aborted"}),ru=t=>({status:"dirty",value:t}),Tr=t=>({status:"valid",value:t}),WA=t=>t.status==="aborted",HA=t=>t.status==="dirty",Nl=t=>t.status==="valid",Gh=t=>typeof Promise<"u"&&t instanceof Promise;var Oe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Oe||(Oe={}));var Wh=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},xL=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},su,iu;class Xi{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const qA=(t,e)=>{if(Nl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Gs(t.common.issues);return this._error=n,this._error}}};function et(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>{const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??r??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:u??n??l.defaultError}},description:s}}class at{get description(){return this._def.description}_getType(e){return ji(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ji(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new dr,ctx:{common:e.parent.common,data:e.data,parsedType:ji(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Gh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ji(e)},s=this._parseSync({data:e,path:r.path,parent:r});return qA(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ji(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return Nl(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>Nl(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ji(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Gh(s)?s:Promise.resolve(s));return qA(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),l=()=>i.addIssue({code:he.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Dl({schema:this,typeName:We.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Gi.create(this,this._def)}nullable(){return Fl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return us.create(this)}promise(){return Yh.create(this,this._def)}or(e){return qh.create([this,e],this._def)}and(e){return Kh.create(this,e,this._def)}transform(e){return new Dl({...et(this._def),schema:this,typeName:We.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new u0({...et(this._def),innerType:this,defaultValue:n,typeName:We.ZodDefault})}brand(){return new gre({typeName:We.ZodBranded,type:this,...et(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new d0({...et(this._def),innerType:this,catchValue:n,typeName:We.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Aw.create(this,e)}readonly(){return f0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Kne=/^c[^\s-]{8,}$/i,Yne=/^[0-9a-z]+$/,Xne=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Zne=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Qne=/^[a-z0-9_-]{21}$/i,Jne=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ere=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,tre=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,nre="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Nv;const rre=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,sre=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ire=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ore=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,are=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,lre=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,bL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",cre=new RegExp(`^${bL}$`);function EL(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function ure(t){return new RegExp(`^${EL(t)}$`)}function dre(t){let e=`${bL}T${EL(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function fre(t,e){return!!((e==="v4"||!e)&&rre.test(t)||(e==="v6"||!e)&&ire.test(t))}function hre(t,e){if(!Jne.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function pre(t,e){return!!((e==="v4"||!e)&&sre.test(t)||(e==="v6"||!e)&&ore.test(t))}class zi extends at{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Re.string){const i=this._getOrReturnCtx(e);return Ee(i,{code:he.invalid_type,expected:Re.string,received:i.parsedType}),He}const r=new dr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Ee(s,{code:he.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Ee(s,{code:he.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,l=e.data.length<i.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?Ee(s,{code:he.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&Ee(s,{code:he.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")tre.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"email",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Nv||(Nv=new RegExp(nre,"u")),Nv.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"emoji",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Zne.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"uuid",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")Qne.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"nanoid",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Kne.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"cuid",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Yne.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"cuid2",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Xne.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"ulid",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ee(s,{validation:"url",code:he.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"regex",code:he.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Ee(s,{code:he.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ee(s,{code:he.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ee(s,{code:he.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?dre(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{code:he.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?cre.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{code:he.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?ure(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{code:he.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?ere.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"duration",code:he.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?fre(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"ip",code:he.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?hre(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"jwt",code:he.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?pre(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"cidr",code:he.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?are.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"base64",code:he.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?lre.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"base64url",code:he.invalid_string,message:i.message}),r.dirty()):ct.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:he.invalid_string,...Oe.errToObj(r)})}_addCheck(e){return new zi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Oe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Oe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Oe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Oe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Oe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Oe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Oe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Oe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Oe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Oe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Oe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Oe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Oe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Oe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Oe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Oe.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Oe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Oe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Oe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Oe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Oe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Oe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Oe.errToObj(n)})}nonempty(e){return this.min(1,Oe.errToObj(e))}trim(){return new zi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new zi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new zi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}zi.create=t=>new zi({checks:[],typeName:We.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...et(t)});function mre(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class Bu extends at{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Re.number){const i=this._getOrReturnCtx(e);return Ee(i,{code:he.invalid_type,expected:Re.number,received:i.parsedType}),He}let r;const s=new dr;for(const i of this._def.checks)i.kind==="int"?ct.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:he.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:he.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:he.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?mre(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:he.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:he.not_finite,message:i.message}),s.dirty()):ct.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Oe.toString(n))}setLimit(e,n,r,s){return new Bu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Oe.toString(s)}]})}_addCheck(e){return new Bu({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Oe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Oe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Oe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Oe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ct.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Bu.create=t=>new Bu({checks:[],typeName:We.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...et(t)});class zu extends at{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Re.bigint)return this._getInvalidInput(e);let r;const s=new dr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:he.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:he.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:he.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ct.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Ee(n,{code:he.invalid_type,expected:Re.bigint,received:n.parsedType}),He}gte(e,n){return this.setLimit("min",e,!0,Oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Oe.toString(n))}setLimit(e,n,r,s){return new zu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Oe.toString(s)}]})}_addCheck(e){return new zu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}zu.create=t=>new zu({checks:[],typeName:We.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...et(t)});class l0 extends at{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Re.boolean){const r=this._getOrReturnCtx(e);return Ee(r,{code:he.invalid_type,expected:Re.boolean,received:r.parsedType}),He}return Tr(e.data)}}l0.create=t=>new l0({typeName:We.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...et(t)});class Hh extends at{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Re.date){const i=this._getOrReturnCtx(e);return Ee(i,{code:he.invalid_type,expected:Re.date,received:i.parsedType}),He}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Ee(i,{code:he.invalid_date}),He}const r=new dr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Ee(s,{code:he.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Ee(s,{code:he.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ct.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Hh({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Oe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Oe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Hh.create=t=>new Hh({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:We.ZodDate,...et(t)});class KA extends at{_parse(e){if(this._getType(e)!==Re.symbol){const r=this._getOrReturnCtx(e);return Ee(r,{code:he.invalid_type,expected:Re.symbol,received:r.parsedType}),He}return Tr(e.data)}}KA.create=t=>new KA({typeName:We.ZodSymbol,...et(t)});class YA extends at{_parse(e){if(this._getType(e)!==Re.undefined){const r=this._getOrReturnCtx(e);return Ee(r,{code:he.invalid_type,expected:Re.undefined,received:r.parsedType}),He}return Tr(e.data)}}YA.create=t=>new YA({typeName:We.ZodUndefined,...et(t)});class XA extends at{_parse(e){if(this._getType(e)!==Re.null){const r=this._getOrReturnCtx(e);return Ee(r,{code:he.invalid_type,expected:Re.null,received:r.parsedType}),He}return Tr(e.data)}}XA.create=t=>new XA({typeName:We.ZodNull,...et(t)});class ZA extends at{constructor(){super(...arguments),this._any=!0}_parse(e){return Tr(e.data)}}ZA.create=t=>new ZA({typeName:We.ZodAny,...et(t)});class QA extends at{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Tr(e.data)}}QA.create=t=>new QA({typeName:We.ZodUnknown,...et(t)});class Zi extends at{_parse(e){const n=this._getOrReturnCtx(e);return Ee(n,{code:he.invalid_type,expected:Re.never,received:n.parsedType}),He}}Zi.create=t=>new Zi({typeName:We.ZodNever,...et(t)});class JA extends at{_parse(e){if(this._getType(e)!==Re.undefined){const r=this._getOrReturnCtx(e);return Ee(r,{code:he.invalid_type,expected:Re.void,received:r.parsedType}),He}return Tr(e.data)}}JA.create=t=>new JA({typeName:We.ZodVoid,...et(t)});class us extends at{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Re.array)return Ee(n,{code:he.invalid_type,expected:Re.array,received:n.parsedType}),He;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,l=n.data.length<s.exactLength.value;(o||l)&&(Ee(n,{code:o?he.too_big:he.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Ee(n,{code:he.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Ee(n,{code:he.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>s.type._parseAsync(new Xi(n,o,n.path,l)))).then(o=>dr.mergeArray(r,o));const i=[...n.data].map((o,l)=>s.type._parseSync(new Xi(n,o,n.path,l)));return dr.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new us({...this._def,minLength:{value:e,message:Oe.toString(n)}})}max(e,n){return new us({...this._def,maxLength:{value:e,message:Oe.toString(n)}})}length(e,n){return new us({...this._def,exactLength:{value:e,message:Oe.toString(n)}})}nonempty(e){return this.min(1,e)}}us.create=(t,e)=>new us({type:t,minLength:null,maxLength:null,exactLength:null,typeName:We.ZodArray,...et(e)});function rl(t){if(t instanceof $t){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Gi.create(rl(r))}return new $t({...t._def,shape:()=>e})}else return t instanceof us?new us({...t._def,type:rl(t.element)}):t instanceof Gi?Gi.create(rl(t.unwrap())):t instanceof Fl?Fl.create(rl(t.unwrap())):t instanceof Ko?Ko.create(t.items.map(e=>rl(e))):t}class $t extends at{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ct.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Re.object){const d=this._getOrReturnCtx(e);return Ee(d,{code:he.invalid_type,expected:Re.object,received:d.parsedType}),He}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Zi&&this._def.unknownKeys==="strip"))for(const d in s.data)o.includes(d)||l.push(d);const u=[];for(const d of o){const h=i[d],p=s.data[d];u.push({key:{status:"valid",value:d},value:h._parse(new Xi(s,p,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof Zi){const d=this._def.unknownKeys;if(d==="passthrough")for(const h of l)u.push({key:{status:"valid",value:h},value:{status:"valid",value:s.data[h]}});else if(d==="strict")l.length>0&&(Ee(s,{code:he.unrecognized_keys,keys:l}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const h of l){const p=s.data[h];u.push({key:{status:"valid",value:h},value:d._parse(new Xi(s,p,s.path,h)),alwaysSet:h in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const d=[];for(const h of u){const p=await h.key,g=await h.value;d.push({key:p,value:g,alwaysSet:h.alwaysSet})}return d}).then(d=>dr.mergeObjectSync(r,d)):dr.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return Oe.errToObj,new $t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Oe.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new $t({...this._def,unknownKeys:"strip"})}passthrough(){return new $t({...this._def,unknownKeys:"passthrough"})}extend(e){return new $t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new $t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:We.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new $t({...this._def,catchall:e})}pick(e){const n={};for(const r of ct.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new $t({...this._def,shape:()=>n})}omit(e){const n={};for(const r of ct.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new $t({...this._def,shape:()=>n})}deepPartial(){return rl(this)}partial(e){const n={};for(const r of ct.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new $t({...this._def,shape:()=>n})}required(e){const n={};for(const r of ct.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Gi;)i=i._def.innerType;n[r]=i}return new $t({...this._def,shape:()=>n})}keyof(){return TL(ct.objectKeys(this.shape))}}$t.create=(t,e)=>new $t({shape:()=>t,unknownKeys:"strip",catchall:Zi.create(),typeName:We.ZodObject,...et(e)});$t.strictCreate=(t,e)=>new $t({shape:()=>t,unknownKeys:"strict",catchall:Zi.create(),typeName:We.ZodObject,...et(e)});$t.lazycreate=(t,e)=>new $t({shape:t,unknownKeys:"strip",catchall:Zi.create(),typeName:We.ZodObject,...et(e)});class qh extends at{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new Gs(l.ctx.common.issues));return Ee(n,{code:he.invalid_union,unionErrors:o}),He}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const u of r){const d={...n,common:{...n.common,issues:[]},parent:null},h=u._parseSync({data:n.data,path:n.path,parent:d});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(u=>new Gs(u));return Ee(n,{code:he.invalid_union,unionErrors:l}),He}}get options(){return this._def.options}}qh.create=(t,e)=>new qh({options:t,typeName:We.ZodUnion,...et(e)});function c0(t,e){const n=ji(t),r=ji(e);if(t===e)return{valid:!0,data:t};if(n===Re.object&&r===Re.object){const s=ct.objectKeys(e),i=ct.objectKeys(t).filter(l=>s.indexOf(l)!==-1),o={...t,...e};for(const l of i){const u=c0(t[l],e[l]);if(!u.valid)return{valid:!1};o[l]=u.data}return{valid:!0,data:o}}else if(n===Re.array&&r===Re.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],l=e[i],u=c0(o,l);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return n===Re.date&&r===Re.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Kh extends at{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(WA(i)||WA(o))return He;const l=c0(i.value,o.value);return l.valid?((HA(i)||HA(o))&&n.dirty(),{status:n.value,value:l.data}):(Ee(r,{code:he.invalid_intersection_types}),He)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Kh.create=(t,e,n)=>new Kh({left:t,right:e,typeName:We.ZodIntersection,...et(n)});class Ko extends at{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.array)return Ee(r,{code:he.invalid_type,expected:Re.array,received:r.parsedType}),He;if(r.data.length<this._def.items.length)return Ee(r,{code:he.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),He;!this._def.rest&&r.data.length>this._def.items.length&&(Ee(r,{code:he.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new Xi(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>dr.mergeArray(n,o)):dr.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Ko({...this._def,rest:e})}}Ko.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ko({items:t,typeName:We.ZodTuple,rest:null,...et(e)})};class eC extends at{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.map)return Ee(r,{code:he.invalid_type,expected:Re.map,received:r.parsedType}),He;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([l,u],d)=>({key:s._parse(new Xi(r,l,r.path,[d,"key"])),value:i._parse(new Xi(r,u,r.path,[d,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of o){const d=await u.key,h=await u.value;if(d.status==="aborted"||h.status==="aborted")return He;(d.status==="dirty"||h.status==="dirty")&&n.dirty(),l.set(d.value,h.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const u of o){const d=u.key,h=u.value;if(d.status==="aborted"||h.status==="aborted")return He;(d.status==="dirty"||h.status==="dirty")&&n.dirty(),l.set(d.value,h.value)}return{status:n.value,value:l}}}}eC.create=(t,e,n)=>new eC({valueType:e,keyType:t,typeName:We.ZodMap,...et(n)});class $u extends at{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.set)return Ee(r,{code:he.invalid_type,expected:Re.set,received:r.parsedType}),He;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Ee(r,{code:he.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Ee(r,{code:he.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(u){const d=new Set;for(const h of u){if(h.status==="aborted")return He;h.status==="dirty"&&n.dirty(),d.add(h.value)}return{status:n.value,value:d}}const l=[...r.data.values()].map((u,d)=>i._parse(new Xi(r,u,r.path,d)));return r.common.async?Promise.all(l).then(u=>o(u)):o(l)}min(e,n){return new $u({...this._def,minSize:{value:e,message:Oe.toString(n)}})}max(e,n){return new $u({...this._def,maxSize:{value:e,message:Oe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}$u.create=(t,e)=>new $u({valueType:t,minSize:null,maxSize:null,typeName:We.ZodSet,...et(e)});class tC extends at{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}tC.create=(t,e)=>new tC({getter:t,typeName:We.ZodLazy,...et(e)});class nC extends at{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ee(n,{received:n.data,code:he.invalid_literal,expected:this._def.value}),He}return{status:"valid",value:e.data}}get value(){return this._def.value}}nC.create=(t,e)=>new nC({value:t,typeName:We.ZodLiteral,...et(e)});function TL(t,e){return new jl({values:t,typeName:We.ZodEnum,...et(e)})}class jl extends at{constructor(){super(...arguments),su.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ee(n,{expected:ct.joinValues(r),received:n.parsedType,code:he.invalid_type}),He}if(Wh(this,su,"f")||xL(this,su,new Set(this._def.values),"f"),!Wh(this,su,"f").has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Ee(n,{received:n.data,code:he.invalid_enum_value,options:r}),He}return Tr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return jl.create(e,{...this._def,...n})}exclude(e,n=this._def){return jl.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}su=new WeakMap;jl.create=TL;class rC extends at{constructor(){super(...arguments),iu.set(this,void 0)}_parse(e){const n=ct.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Re.string&&r.parsedType!==Re.number){const s=ct.objectValues(n);return Ee(r,{expected:ct.joinValues(s),received:r.parsedType,code:he.invalid_type}),He}if(Wh(this,iu,"f")||xL(this,iu,new Set(ct.getValidEnumValues(this._def.values)),"f"),!Wh(this,iu,"f").has(e.data)){const s=ct.objectValues(n);return Ee(r,{received:r.data,code:he.invalid_enum_value,options:s}),He}return Tr(e.data)}get enum(){return this._def.values}}iu=new WeakMap;rC.create=(t,e)=>new rC({values:t,typeName:We.ZodNativeEnum,...et(e)});class Yh extends at{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Re.promise&&n.common.async===!1)return Ee(n,{code:he.invalid_type,expected:Re.promise,received:n.parsedType}),He;const r=n.parsedType===Re.promise?n.data:Promise.resolve(n.data);return Tr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Yh.create=(t,e)=>new Yh({type:t,typeName:We.ZodPromise,...et(e)});class Dl extends at{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===We.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Ee(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return He;const u=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return u.status==="aborted"?He:u.status==="dirty"||n.value==="dirty"?ru(u.value):u});{if(n.value==="aborted")return He;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?He:l.status==="dirty"||n.value==="dirty"?ru(l.value):l}}if(s.type==="refinement"){const o=l=>{const u=s.refinement(l,i);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?He:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?He:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Nl(o))return o;const l=s.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Nl(o)?Promise.resolve(s.transform(o.value,i)).then(l=>({status:n.value,value:l})):o);ct.assertNever(s)}}Dl.create=(t,e,n)=>new Dl({schema:t,typeName:We.ZodEffects,effect:e,...et(n)});Dl.createWithPreprocess=(t,e,n)=>new Dl({schema:e,effect:{type:"preprocess",transform:t},typeName:We.ZodEffects,...et(n)});class Gi extends at{_parse(e){return this._getType(e)===Re.undefined?Tr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Gi.create=(t,e)=>new Gi({innerType:t,typeName:We.ZodOptional,...et(e)});class Fl extends at{_parse(e){return this._getType(e)===Re.null?Tr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Fl.create=(t,e)=>new Fl({innerType:t,typeName:We.ZodNullable,...et(e)});class u0 extends at{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Re.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}u0.create=(t,e)=>new u0({innerType:t,typeName:We.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...et(e)});class d0 extends at{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Gh(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Gs(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Gs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}d0.create=(t,e)=>new d0({innerType:t,typeName:We.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...et(e)});class sC extends at{_parse(e){if(this._getType(e)!==Re.nan){const r=this._getOrReturnCtx(e);return Ee(r,{code:he.invalid_type,expected:Re.nan,received:r.parsedType}),He}return{status:"valid",value:e.data}}}sC.create=t=>new sC({typeName:We.ZodNaN,...et(t)});class gre extends at{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Aw extends at{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?He:i.status==="dirty"?(n.dirty(),ru(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?He:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Aw({in:e,out:n,typeName:We.ZodPipeline})}}class f0 extends at{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Nl(s)&&(s.value=Object.freeze(s.value)),s);return Gh(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}f0.create=(t,e)=>new f0({innerType:t,typeName:We.ZodReadonly,...et(e)});var We;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(We||(We={}));const jv=zi.create,vre=l0.create;Zi.create;us.create;const yre=$t.create;qh.create;Kh.create;Ko.create;jl.create;Yh.create;Gi.create;Fl.create;const iC=(t,e,n)=>{if(t&&"reportValidity"in t){const r=ye(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},SL=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?iC(r.ref,n,t):r.refs&&r.refs.forEach(s=>iC(s,n,t))}},_re=(t,e)=>{e.shouldUseNativeValidation&&SL(t,e);const n={};for(const r in t){const s=ye(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(wre(e.names||Object.keys(t),r)){const o=Object.assign({},ye(n,r));dt(o,"root",i),dt(n,r,o)}else dt(n,r,i)}return n},wre=(t,e)=>t.some(n=>n.startsWith(e+"."));var xre=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(h){return h.errors.forEach(function(p){return t.push(p)})}),e){var u=n[o].types,d=u&&u[r.code];n[o]=uL(o,e,n,s,d?[].concat(d,r.message):r.message)}t.shift()}return n},bre=function(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(o,l){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(d){return i.shouldUseNativeValidation&&SL({},i),{errors:{},values:n.raw?r:d}})}catch(d){return l(d)}return u&&u.then?u.then(void 0,l):u}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:_re(xre(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}};const AL=[{name:"projeto",label:"Projeto",placeholder:"Insira o Projeto",type:"text",colSpan:1,validation:jv().min(1,"Projeto  obrigatrio"),defaultValue:""},{name:"email",label:"e-Mail",placeholder:"Insira o e-Mail",type:"text",colSpan:1,validation:jv().email("Email invlido"),defaultValue:""},{name:"nome",label:"Nome Completo",placeholder:"Insira o Nome Completo",type:"text",colSpan:1,validation:jv().min(1,"Nome  obrigatrio"),defaultValue:""},{name:"ativo",label:"Ativo",type:"checkbox",colSpan:1,validation:vre().default(!0),defaultValue:!0}],CL={},PL={};AL.forEach(t=>{CL[t.name]=t.validation,PL[t.name]=t.defaultValue});const Ere=yre(CL),Tre=({open:t,onOpenChange:e,isDarkMode:n,section:r})=>{var h,p;const s=Gu(),i=m0(),o=(h=i.state)==null?void 0:h.editMode,l=(p=i.state)==null?void 0:p.reportData,u=Une({resolver:bre(Ere),defaultValues:o?{projeto:l.project,email:l.email,nome:l.name,ativo:l.active}:PL}),d=async g=>{try{if(o){const{error:y}=await Tn.from("email_reports").update({project:g.projeto,email:g.email,name:g.nome,active:g.ativo}).eq("id",l.id);if(y)throw y}else{const{error:y}=await Tn.from("email_reports").insert([{project:g.projeto,email:g.email,name:g.nome,active:g.ativo}]);if(y)throw y}s("/control/e-Mails Relatrio")}catch(y){console.error("Error saving email report:",y)}};return w.jsx("div",{className:"w-[100dvw] h-[100dvh] flex justify-center items-center bg-[#F3F7FE]",children:w.jsxs("div",{className:"flex flex-col justify-between h-full py-7 gap-7",children:[w.jsx("h2",{className:"text-xl font-semibold text-[#656565]",children:"Criar e-Mail"}),w.jsxs("div",{className:"w-[70dvw] h-full flex rounded-xl shadow-md overflow-hidden",children:[w.jsx("div",{className:"w-[13vw] p-4 bg-white border-r border-[#fff] bg-[#F8F8F8] flex flex-col items-center",children:w.jsxs("div",{className:"flex items-center justify-center gap-4 p-3 rounded-xl bg-[#D5E6FF] w-full",children:[w.jsx(EC,{className:"text-[#656565]",size:16}),w.jsx("h2",{className:"text-sm font-medium text-[#656565]",children:"Dados Cadastrais"})]})}),w.jsx("div",{className:"flex-1 bg-[#fff] p-8 flex justify-center",children:w.jsxs("div",{className:"w-full max-w-[900px]",children:[w.jsx("h1",{className:"text-xl font-semibold mb-6 text-[#656565]",children:"Dados Cadastrais"}),w.jsxs("div",{className:"justify-between flex flex-col h-full pb-10",children:[w.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[w.jsx("h2",{className:"text-base font-semibold mb-6 text-[#656565]",children:"Identificao"}),w.jsx(Bne,{...u,children:w.jsx("form",{onSubmit:u.handleSubmit(d),className:"space-y-6",children:w.jsx("div",{className:"grid grid-cols-4 gap-4",children:AL.map(g=>w.jsx(zne,{control:u.control,name:g.name,render:({field:y})=>w.jsx(_L,{className:`col-span-${g.colSpan||1}`,children:g.type==="checkbox"?w.jsx("div",{className:"flex items-end pb-1",children:w.jsxs("div",{className:"flex flex-col items-center h-full",children:[w.jsx(o0,{className:"ml-2 font-bold text-xs mt-1 text-[#656565]",children:g.label}),w.jsx("input",{type:"checkbox",checked:y.value,onChange:y.onChange,className:"h-4 w-4 mt-4 text-blue-600 rounded border border-gray-300"})]})}):w.jsxs(w.Fragment,{children:[w.jsx(o0,{className:"text-xs text-[#656565]",children:g.label}),w.jsx(wL,{children:w.jsx("input",{...y,placeholder:g.placeholder,className:"w-full text-sm px-3 py-1 rounded-full border border-gray-300 bg-white"})})]})})},g.name))})})})]}),w.jsxs("div",{className:"flex justify-end gap-3",children:[w.jsxs("button",{type:"button",onClick:()=>s("/"),className:"px-3 py-1.5 text-sm rounded-full bg-[#F3F4F6] text-[#656565] hover:bg-[#E5E7EB]",children:[w.jsx(w0,{size:14,className:"inline-block mr-1"}),"Cancelar"]}),w.jsxs("button",{onClick:u.handleSubmit(d),className:"px-3 py-1.5 text-sm rounded-full bg-[#4D94FF] text-white hover:bg-[#3B82F6]",children:[w.jsx(g0,{size:14,className:"inline-block mr-1"}),o?"Salvar":"Concluir"]})]})]})]})})]})]})})};function Sre(){return w.jsx(VI,{children:w.jsx(f3,{children:w.jsxs(c3,{children:[w.jsx(qf,{path:"/",element:w.jsx(ene,{})}),w.jsx(qf,{path:"/control/:section",element:w.jsx(_ne,{})}),w.jsx(qf,{path:"/register/:section",element:w.jsx(Tre,{})})]})})})}mj.createRoot(document.getElementById("app")).render(w.jsx(_.StrictMode,{children:w.jsx(Sre,{})}));export{Xh as g};
